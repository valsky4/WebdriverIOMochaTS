"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.DEFAULT_ADB_EXEC_TIMEOUT = exports.APK_INSTALL_TIMEOUT = exports.APK_EXTENSION = exports.APKS_INSTALL_TIMEOUT = exports.APKS_EXTENSION = void 0;
exports.buildInstallArgs = buildInstallArgs;
exports.buildStartCmd = buildStartCmd;
exports.dirExists = dirExists;
exports.escapeShellArg = escapeShellArg;
exports.extractMatchingPermissions = void 0;
exports.formatConfigMarker = formatConfigMarker;
exports.getAndroidPlatformAndPath = getAndroidPlatformAndPath;
exports.getAndroidPrefsRoot = getAndroidPrefsRoot;
exports.getApkanalyzerForOs = getApkanalyzerForOs;
exports.getApksignerForOs = getApksignerForOs;
exports.getBuildToolsDirs = void 0;
exports.getIMEListFromOutput = getIMEListFromOutput;
exports.getResourcePath = exports.getOpenSslForOs = exports.getJavaHome = exports.getJavaForOs = void 0;
exports.getSdkRootFromEnv = getSdkRootFromEnv;
exports.getSdkToolsVersion = void 0;
exports.getSurfaceOrientation = getSurfaceOrientation;
exports.isCurrentFocusOnKeyguard = isCurrentFocusOnKeyguard;
exports.isScreenOnFully = isScreenOnFully;
exports.isShowingLockscreen = isShowingLockscreen;
exports.matchComponentName = matchComponentName;
exports.parseAapt2Strings = parseAapt2Strings;
exports.parseAaptStrings = parseAaptStrings;
exports.parseJsonData = parseJsonData;
exports.parseLaunchableActivityNames = parseLaunchableActivityNames;
exports.parseManifest = parseManifest;
exports.requireSdkRoot = requireSdkRoot;
exports.toAvdLocaleArgs = toAvdLocaleArgs;
exports.unsignApk = unsignApk;
exports.unzipFile = unzipFile;
require("source-map-support/register");
var _path = _interopRequireDefault(require("path"));
var _support = require("@appium/support");
var _logger = _interopRequireDefault(require("./logger.js"));
var _lodash = _interopRequireDefault(require("lodash"));
var _bluebird = _interopRequireDefault(require("bluebird"));
var _semver = _interopRequireDefault(require("semver"));
var _os = _interopRequireDefault(require("os"));
const APKS_EXTENSION = '.apks';
exports.APKS_EXTENSION = APKS_EXTENSION;
const APK_EXTENSION = '.apk';
exports.APK_EXTENSION = APK_EXTENSION;
const APK_INSTALL_TIMEOUT = 60000;
exports.APK_INSTALL_TIMEOUT = APK_INSTALL_TIMEOUT;
const APKS_INSTALL_TIMEOUT = APK_INSTALL_TIMEOUT * 2;
exports.APKS_INSTALL_TIMEOUT = APKS_INSTALL_TIMEOUT;
const DEFAULT_ADB_EXEC_TIMEOUT = 20000;
exports.DEFAULT_ADB_EXEC_TIMEOUT = DEFAULT_ADB_EXEC_TIMEOUT;
const MAIN_ACTION = 'android.intent.action.MAIN';
const LAUNCHER_CATEGORY = 'android.intent.category.LAUNCHER';
const MODULE_NAME = 'appium-adb';
const getModuleRoot = _lodash.default.memoize(async function getModuleRoot() {
  let moduleRoot = _path.default.dirname(_path.default.resolve(__filename));
  let isAtFsRoot = false;
  while (!isAtFsRoot) {
    const manifestPath = _path.default.join(moduleRoot, 'package.json');
    try {
      if ((await _support.fs.exists(manifestPath)) && JSON.parse(await _support.fs.readFile(manifestPath, 'utf8')).name === MODULE_NAME) {
        return moduleRoot;
      }
    } catch (ign) {}
    moduleRoot = _path.default.dirname(moduleRoot);
    isAtFsRoot = moduleRoot.length <= _path.default.dirname(moduleRoot).length;
  }
  if (isAtFsRoot) {
    throw new Error(`Cannot find the root folder of the ${MODULE_NAME} Node.js module`);
  }
  return moduleRoot;
});
const getResourcePath = _lodash.default.memoize(async function getResourcePath(relPath) {
  const moduleRoot = await getModuleRoot();
  const resultPath = _path.default.resolve(moduleRoot, relPath);
  if (!(await _support.fs.exists(resultPath))) {
    throw new Error(`Cannot find the resource '${relPath}' under the '${moduleRoot}' ` + `folder of ${MODULE_NAME} Node.js module`);
  }
  return resultPath;
});
exports.getResourcePath = getResourcePath;
function getSdkRootFromEnv() {
  return process.env.ANDROID_HOME || process.env.ANDROID_SDK_ROOT;
}
async function requireSdkRoot(customRoot = null) {
  const sdkRoot = customRoot || getSdkRootFromEnv();
  const docMsg = 'Read https://developer.android.com/studio/command-line/variables for more details';
  if (_lodash.default.isEmpty(sdkRoot)) {
    throw new Error(`Neither ANDROID_HOME nor ANDROID_SDK_ROOT environment variable was exported. ${docMsg}`);
  }
  if (!(await _support.fs.exists(sdkRoot))) {
    throw new Error(`The Android SDK root folder '${sdkRoot}' does not exist on the local file system. ${docMsg}`);
  }
  const stats = await _support.fs.stat(sdkRoot);
  if (!stats.isDirectory()) {
    throw new Error(`The Android SDK root '${sdkRoot}' must be a folder. ${docMsg}`);
  }
  return sdkRoot;
}
async function getAndroidPlatformAndPath(sdkRoot) {
  const propsPaths = await _support.fs.glob('*/build.prop', {
    cwd: _path.default.resolve(sdkRoot, 'platforms'),
    absolute: true
  });
  const platformsMapping = {};
  for (const propsPath of propsPaths) {
    const propsContent = await _support.fs.readFile(propsPath, 'utf-8');
    const platformPath = _path.default.dirname(propsPath);
    const platform = _path.default.basename(platformPath);
    const match = /ro\.build\.version\.sdk=(\d+)/.exec(propsContent);
    if (!match) {
      _logger.default.warn(`Cannot read the SDK version from '${propsPath}'. Skipping '${platform}'`);
      continue;
    }
    platformsMapping[parseInt(match[1], 10)] = {
      platform,
      platformPath
    };
  }
  if (_lodash.default.isEmpty(platformsMapping)) {
    _logger.default.warn(`Found zero platform folders at '${_path.default.resolve(sdkRoot, 'platforms')}'. ` + `Do you have any Android SDKs installed?`);
    return {
      platform: null,
      platformPath: null
    };
  }
  const recentSdkVersion = _lodash.default.keys(platformsMapping).sort().reverse()[0];
  const result = platformsMapping[recentSdkVersion];
  _logger.default.debug(`Found the most recent Android platform: ${JSON.stringify(result)}`);
  return result;
}
async function unzipFile(zipPath, dstRoot = _path.default.dirname(zipPath)) {
  _logger.default.debug(`Unzipping '${zipPath}' to '${dstRoot}'`);
  await _support.zip.assertValidZip(zipPath);
  await _support.zip.extractAllTo(zipPath, dstRoot);
  _logger.default.debug('Unzip successful');
}
async function unsignApk(apkPath) {
  const tmpRoot = await _support.tempDir.openDir();
  const metaInfFolderName = 'META-INF';
  try {
    let hasMetaInf = false;
    await _support.zip.readEntries(apkPath, ({
      entry
    }) => {
      hasMetaInf = entry.fileName.startsWith(`${metaInfFolderName}/`);
      return !hasMetaInf;
    });
    if (!hasMetaInf) {
      return false;
    }
    const tmpZipRoot = _path.default.resolve(tmpRoot, 'apk');
    await _support.zip.extractAllTo(apkPath, tmpZipRoot);
    await _support.fs.rimraf(_path.default.resolve(tmpZipRoot, metaInfFolderName));
    const tmpResultPath = _path.default.resolve(tmpRoot, _path.default.basename(apkPath));
    await _support.zip.toArchive(tmpResultPath, {
      cwd: tmpZipRoot
    });
    await _support.fs.unlink(apkPath);
    await _support.fs.mv(tmpResultPath, apkPath);
    return true;
  } finally {
    await _support.fs.rimraf(tmpRoot);
  }
}
function getIMEListFromOutput(stdout) {
  let engines = [];
  for (let line of stdout.split('\n')) {
    if (line.length > 0 && line[0] !== ' ') {
      engines.push(line.trim().replace(/:$/, ''));
    }
  }
  return engines;
}
const getJavaHome = _lodash.default.memoize(async function getJavaHome() {
  const result = process.env.JAVA_HOME;
  if (!result) {
    throw new Error('The JAVA_HOME environment variable is not set for the current process');
  }
  if (!(await _support.fs.exists(result))) {
    throw new Error(`The JAVA_HOME location '${result}' must exist`);
  }
  const stats = await _support.fs.stat(result);
  if (!stats.isDirectory()) {
    throw new Error(`The JAVA_HOME location '${result}' must be a valid folder`);
  }
  return result;
});
exports.getJavaHome = getJavaHome;
const getJavaForOs = _lodash.default.memoize(async function getJavaForOs() {
  let javaHome;
  let errMsg;
  try {
    javaHome = await getJavaHome();
  } catch (err) {
    errMsg = err.message;
  }
  const executableName = `java${_support.system.isWindows() ? '.exe' : ''}`;
  if (javaHome) {
    const resultPath = _path.default.resolve(javaHome, 'bin', executableName);
    if (await _support.fs.exists(resultPath)) {
      return resultPath;
    }
  }
  try {
    return await _support.fs.which(executableName);
  } catch (ign) {}
  throw new Error(`The '${executableName}' binary could not be found ` + `neither in PATH nor under JAVA_HOME (${errMsg || _path.default.resolve(javaHome, 'bin')})`);
});
exports.getJavaForOs = getJavaForOs;
const getOpenSslForOs = async function () {
  const binaryName = `openssl${_support.system.isWindows() ? '.exe' : ''}`;
  try {
    return await _support.fs.which(binaryName);
  } catch (err) {
    throw new Error('The openssl tool must be installed on the system and available on the path');
  }
};
exports.getOpenSslForOs = getOpenSslForOs;
async function getApksignerForOs(sysHelpers) {
  return await sysHelpers.getBinaryFromSdkRoot('apksigner.jar');
}
async function getApkanalyzerForOs(sysHelpers) {
  return await sysHelpers.getBinaryFromSdkRoot('apkanalyzer');
}
function isShowingLockscreen(dumpsys) {
  return _lodash.default.some(['mShowingLockscreen=true', 'mDreamingLockscreen=true'], x => dumpsys.includes(x)) || _lodash.default.every([/KeyguardStateMonitor[\n\s]+mIsShowing=true/, /\s+mInputRestricted=true/], x => x.test(dumpsys));
}
function isCurrentFocusOnKeyguard(dumpsys) {
  let m = /mCurrentFocus.+Keyguard/gi.exec(dumpsys);
  return m && m.length && m[0] ? true : false;
}
function getSurfaceOrientation(dumpsys) {
  let m = /SurfaceOrientation: \d/gi.exec(dumpsys);
  return m && parseInt(m[0].split(':')[1], 10);
}
function isScreenOnFully(dumpsys) {
  let m = /mScreenOnFully=\w+/gi.exec(dumpsys);
  return !m || m && m.length > 0 && m[0].split('=')[1] === 'true' || false;
}
function buildStartCmd(startAppOptions, apiLevel) {
  const {
    user,
    waitForLaunch,
    pkg,
    activity,
    action,
    category,
    stopApp,
    flags
  } = startAppOptions;
  const cmd = ['am', 'start'];
  if (_support.util.hasValue(user)) {
    cmd.push('--user', user);
  }
  if (waitForLaunch) {
    cmd.push('-W');
  }
  if (activity && pkg) {
    cmd.push('-n', `${pkg}/${activity}`);
  }
  if (stopApp && apiLevel >= 15) {
    cmd.push('-S');
  }
  if (action) {
    cmd.push('-a', action);
  }
  if (category) {
    cmd.push('-c', category);
  }
  if (flags) {
    cmd.push('-f', flags);
  }
  if (startAppOptions.optionalIntentArguments) {
    let parseKeyValue = function (str) {
      str = str.trim();
      let space = str.indexOf(' ');
      if (space === -1) {
        return str.length ? [str] : [];
      } else {
        return [str.substring(0, space).trim(), str.substring(space + 1).trim()];
      }
    };
    let optionalIntentArguments = ` ${startAppOptions.optionalIntentArguments}`;
    let re = / (-[^\s]+) (.+)/;
    while (true) {
      let args = re.exec(optionalIntentArguments);
      if (!args) {
        if (optionalIntentArguments.length) {
          cmd.push.apply(cmd, parseKeyValue(optionalIntentArguments));
        }
        break;
      }
      let flag = args[1];
      let flagPos = optionalIntentArguments.indexOf(flag);
      if (flagPos !== 0) {
        let prevArgs = optionalIntentArguments.substring(0, flagPos);
        cmd.push.apply(cmd, parseKeyValue(prevArgs));
      }
      cmd.push(flag);
      optionalIntentArguments = args[2];
    }
  }
  return cmd;
}
const getSdkToolsVersion = _lodash.default.memoize(async function getSdkToolsVersion() {
  const androidHome = process.env.ANDROID_HOME;
  if (!androidHome) {
    throw new Error('ANDROID_HOME environment variable is expected to be set');
  }
  const propertiesPath = _path.default.resolve(androidHome, 'tools', 'source.properties');
  if (!(await _support.fs.exists(propertiesPath))) {
    _logger.default.warn(`Cannot find ${propertiesPath} file to read SDK version from`);
    return;
  }
  const propertiesContent = await _support.fs.readFile(propertiesPath, 'utf8');
  const versionMatcher = new RegExp(/Pkg\.Revision=(\d+)\.?(\d+)?\.?(\d+)?/);
  const match = versionMatcher.exec(propertiesContent);
  if (match) {
    return {
      major: parseInt(match[1], 10),
      minor: match[2] ? parseInt(match[2], 10) : 0,
      build: match[3] ? parseInt(match[3], 10) : 0
    };
  }
  _logger.default.warn(`Cannot parse "Pkg.Revision" value from ${propertiesPath}`);
});
exports.getSdkToolsVersion = getSdkToolsVersion;
const getBuildToolsDirs = _lodash.default.memoize(async function getBuildToolsDirs(sdkRoot) {
  let buildToolsDirs = await _support.fs.glob('*/', {
    cwd: _path.default.resolve(sdkRoot, 'build-tools'),
    absolute: true
  });
  try {
    buildToolsDirs = buildToolsDirs.map(dir => [_path.default.basename(dir), dir]).sort((a, b) => _semver.default.rcompare(a[0], b[0])).map(pair => pair[1]);
  } catch (err) {
    _logger.default.warn(`Cannot sort build-tools folders ${JSON.stringify(buildToolsDirs.map(dir => _path.default.basename(dir)))} ` + `by semantic version names.`);
    _logger.default.warn(`Falling back to sorting by modification date. Original error: ${err.message}`);
    const pairs = await _bluebird.default.map(buildToolsDirs, async dir => [(await _support.fs.stat(dir)).mtime.valueOf(), dir]);
    buildToolsDirs = pairs.sort((a, b) => a[0] < b[0]).map(pair => pair[1]);
  }
  _logger.default.info(`Found ${buildToolsDirs.length} 'build-tools' folders under '${sdkRoot}' (newest first):`);
  for (let dir of buildToolsDirs) {
    _logger.default.info(`    ${dir}`);
  }
  return buildToolsDirs;
});
exports.getBuildToolsDirs = getBuildToolsDirs;
const extractMatchingPermissions = function (dumpsysOutput, groupNames, grantedState = null) {
  const groupPatternByName = groupName => new RegExp(`^(\\s*${_lodash.default.escapeRegExp(groupName)} permissions:[\\s\\S]+)`, 'm');
  const indentPattern = /\S|$/;
  const permissionNamePattern = /android\.\w*\.?permission\.\w+/;
  const grantedStatePattern = /\bgranted=(\w+)/;
  const result = [];
  for (const groupName of groupNames) {
    const groupMatch = groupPatternByName(groupName).exec(dumpsysOutput);
    if (!groupMatch) {
      continue;
    }
    const lines = groupMatch[1].split('\n');
    if (lines.length < 2) {
      continue;
    }
    const titleIndent = lines[0].search(indentPattern);
    for (const line of lines.slice(1)) {
      const currentIndent = line.search(indentPattern);
      if (currentIndent <= titleIndent) {
        break;
      }
      const permissionNameMatch = permissionNamePattern.exec(line);
      if (!permissionNameMatch) {
        continue;
      }
      const item = {
        permission: permissionNameMatch[0]
      };
      const grantedStateMatch = grantedStatePattern.exec(line);
      if (grantedStateMatch) {
        item.granted = grantedStateMatch[1] === 'true';
      }
      result.push(item);
    }
  }
  const filteredResult = result.filter(item => !_lodash.default.isBoolean(grantedState) || item.granted === grantedState).map(item => item.permission);
  _logger.default.debug(`Retrieved ${_support.util.pluralize('permission', filteredResult.length, true)} ` + `from ${groupNames} ${_support.util.pluralize('group', groupNames.length, false)}`);
  return filteredResult;
};
exports.extractMatchingPermissions = extractMatchingPermissions;
function buildInstallArgs(apiLevel, options = {}) {
  const result = [];
  if (!_support.util.hasValue(options.replace) || options.replace) {
    result.push('-r');
  }
  if (options.allowTestPackages) {
    result.push('-t');
  }
  if (options.useSdcard) {
    result.push('-s');
  }
  if (options.grantPermissions) {
    if (apiLevel < 23) {
      _logger.default.debug(`Skipping permissions grant option, since ` + `the current API level ${apiLevel} does not support applications ` + `permissions customization`);
    } else {
      result.push('-g');
    }
  }
  if (options.partialInstall) {
    result.push('-p');
  }
  return result;
}
function parseManifest(manifest) {
  const result = {
    pkg: manifest.package,
    versionCode: parseInt(manifest.versionCode, 10),
    versionName: manifest.versionName || null
  };
  if (!manifest.application) {
    return result;
  }
  for (const activity of [...manifest.application.activities, ...manifest.application.activityAliases]) {
    if (activity.enabled === false || _lodash.default.isEmpty(activity.intentFilters)) {
      continue;
    }
    for (const {
      actions,
      categories
    } of activity.intentFilters) {
      if (_lodash.default.isEmpty(actions) || _lodash.default.isEmpty(categories)) {
        continue;
      }
      const isMainAction = actions.some(({
        name
      }) => name === MAIN_ACTION);
      const isLauncherCategory = categories.some(({
        name
      }) => name === LAUNCHER_CATEGORY);
      if (isMainAction && isLauncherCategory) {
        result.activity = activity.name;
        return result;
      }
    }
  }
  return result;
}
function parseAaptStrings(rawOutput, configMarker) {
  const normalizeStringMatch = function (s) {
    return s.replace(/"$/, '').replace(/^"/, '').replace(/\\"/g, '"');
  };
  const apkStrings = {};
  let isInConfig = false;
  let currentResourceId = null;
  let isInPluralGroup = false;
  const quotedStringPattern = /"[^"\\]*(?:\\.[^"\\]*)*"/;
  for (const line of rawOutput.split(_os.default.EOL)) {
    const trimmedLine = line.trim();
    if (_lodash.default.isEmpty(trimmedLine)) {
      continue;
    }
    if (['config', 'type', 'spec', 'Package'].some(x => trimmedLine.startsWith(x))) {
      isInConfig = trimmedLine.startsWith(`config ${configMarker}:`);
      currentResourceId = null;
      isInPluralGroup = false;
      continue;
    }
    if (!isInConfig) {
      continue;
    }
    if (trimmedLine.startsWith('resource')) {
      isInPluralGroup = false;
      currentResourceId = null;
      if (trimmedLine.includes(':string/')) {
        const match = /:string\/(\S+):/.exec(trimmedLine);
        if (match) {
          currentResourceId = match[1];
        }
      } else if (trimmedLine.includes(':plurals/')) {
        const match = /:plurals\/(\S+):/.exec(trimmedLine);
        if (match) {
          currentResourceId = match[1];
          isInPluralGroup = true;
        }
      }
      continue;
    }
    if (currentResourceId && trimmedLine.startsWith('(string')) {
      const match = quotedStringPattern.exec(trimmedLine);
      if (match) {
        apkStrings[currentResourceId] = normalizeStringMatch(match[0]);
      }
      currentResourceId = null;
      continue;
    }
    if (currentResourceId && isInPluralGroup && trimmedLine.includes(': (string')) {
      const match = quotedStringPattern.exec(trimmedLine);
      if (match) {
        apkStrings[currentResourceId] = [...(apkStrings[currentResourceId] || []), normalizeStringMatch(match[0])];
      }
      continue;
    }
  }
  return apkStrings;
}
function parseAapt2Strings(rawOutput, configMarker) {
  const allLines = rawOutput.split(_os.default.EOL);
  function extractContent(startIdx) {
    let idx = startIdx;
    const startCharPos = allLines[startIdx].indexOf('"');
    if (startCharPos < 0) {
      return [null, idx];
    }
    let result = '';
    while (idx < allLines.length) {
      const terminationCharMatch = /"$/.exec(allLines[idx]);
      if (terminationCharMatch) {
        const terminationCharPos = terminationCharMatch.index;
        if (startIdx === idx) {
          return [allLines[idx].substring(startCharPos + 1, terminationCharPos), idx];
        }
        return [`${result}\\n${_lodash.default.trimStart(allLines[idx].substring(0, terminationCharPos))}`, idx];
      }
      if (idx > startIdx) {
        result += `\\n${_lodash.default.trimStart(allLines[idx])}`;
      } else {
        result += allLines[idx].substring(startCharPos + 1);
      }
      ++idx;
    }
    return [result, idx];
  }
  const apkStrings = {};
  let currentResourceId = null;
  let isInPluralGroup = false;
  let isInCurrentConfig = false;
  let lineIndex = 0;
  while (lineIndex < allLines.length) {
    const trimmedLine = allLines[lineIndex].trim();
    if (_lodash.default.isEmpty(trimmedLine)) {
      ++lineIndex;
      continue;
    }
    if (['type', 'Package'].some(x => trimmedLine.startsWith(x))) {
      currentResourceId = null;
      isInPluralGroup = false;
      isInCurrentConfig = false;
      ++lineIndex;
      continue;
    }
    if (trimmedLine.startsWith('resource')) {
      isInPluralGroup = false;
      currentResourceId = null;
      isInCurrentConfig = false;
      if (trimmedLine.includes('string/')) {
        const match = /string\/(\S+)/.exec(trimmedLine);
        if (match) {
          currentResourceId = match[1];
        }
      } else if (trimmedLine.includes('plurals/')) {
        const match = /plurals\/(\S+)/.exec(trimmedLine);
        if (match) {
          currentResourceId = match[1];
          isInPluralGroup = true;
        }
      }
      ++lineIndex;
      continue;
    }
    if (currentResourceId) {
      if (isInPluralGroup) {
        if (trimmedLine.startsWith('(')) {
          isInCurrentConfig = trimmedLine.startsWith(`(${configMarker})`);
          ++lineIndex;
          continue;
        }
        if (isInCurrentConfig) {
          const [content, idx] = extractContent(lineIndex);
          lineIndex = idx;
          if (_lodash.default.isString(content)) {
            apkStrings[currentResourceId] = [...(apkStrings[currentResourceId] || []), content];
          }
        }
      } else if (trimmedLine.startsWith(`(${configMarker})`)) {
        const [content, idx] = extractContent(lineIndex);
        lineIndex = idx;
        if (_lodash.default.isString(content)) {
          apkStrings[currentResourceId] = content;
        }
        currentResourceId = null;
      }
    }
    ++lineIndex;
  }
  return apkStrings;
}
async function formatConfigMarker(configsGetter, desiredMarker, defaultMarker) {
  let configMarker = desiredMarker || defaultMarker;
  if (configMarker.includes('-') && !configMarker.includes('-r')) {
    configMarker = configMarker.replace('-', '-r');
  }
  const configs = await configsGetter();
  _logger.default.debug(`Resource configurations: ${JSON.stringify(configs)}`);
  if (configMarker.toLowerCase().startsWith('en') && !configs.some(x => x.trim() === configMarker)) {
    _logger.default.debug(`Resource configuration name '${configMarker}' is unknown. ` + `Replacing it with '${defaultMarker}'`);
    configMarker = defaultMarker;
  } else {
    _logger.default.debug(`Selected configuration: '${configMarker}'`);
  }
  return configMarker;
}
function parseJsonData(output, entityName) {
  if (!/\bresult=-1\b/.test(output) || !/\bdata="/.test(output)) {
    _logger.default.debug(output);
    throw new Error(`Cannot retrieve ${entityName} from the device. ` + 'Check the server log for more details');
  }
  const match = /\bdata=(".+)/.exec(output);
  if (!match) {
    _logger.default.debug(output);
    throw new Error(`Cannot parse ${entityName} from the command output. ` + 'Check the server log for more details');
  }
  const jsonStr = _lodash.default.trim(match[1]).replace(/(^")|("$)/g, '');
  try {
    return JSON.parse(jsonStr);
  } catch (e) {
    _logger.default.debug(jsonStr);
    throw new Error(`Cannot parse ${entityName} from the resulting data string. ` + 'Check the server log for more details');
  }
}
function toAvdLocaleArgs(language, country) {
  const result = [];
  if (language && _lodash.default.isString(language)) {
    result.push('-prop', `persist.sys.language=${language.toLowerCase()}`);
  }
  if (country && _lodash.default.isString(country)) {
    result.push('-prop', `persist.sys.country=${country.toUpperCase()}`);
  }
  let locale;
  if (_lodash.default.isString(language) && _lodash.default.isString(country) && language && country) {
    locale = language.toLowerCase() + '-' + country.toUpperCase();
  } else if (language && _lodash.default.isString(language)) {
    locale = language.toLowerCase();
  } else if (country && _lodash.default.isString(country)) {
    locale = country;
  }
  if (locale) {
    result.push('-prop', `persist.sys.locale=${locale}`);
  }
  return result;
}
async function getAndroidPrefsRoot() {
  let location = process.env.ANDROID_EMULATOR_HOME;
  if (await dirExists(location)) {
    return location;
  }
  if (location) {
    _logger.default.warn(`The value of the ANDROID_EMULATOR_HOME environment variable '${location}' is not an existing directory`);
  }
  const home = process.env.HOME || process.env.USERPROFILE;
  if (home) {
    location = _path.default.resolve(home, '.android');
  }
  if (!(await dirExists(location))) {
    _logger.default.debug(`Android config root '${location}' is not an existing directory`);
    return null;
  }
  return location;
}
async function dirExists(location) {
  return location && (await _support.fs.exists(location)) && (await _support.fs.stat(location)).isDirectory();
}
function escapeShellArg(arg) {
  arg = `${arg}`;
  if (_support.system.isWindows()) {
    return /[&|^\s]/.test(arg) ? `"${arg.replace(/"/g, '""')}"` : arg;
  }
  return arg.replace(/&/g, '\\&');
}
function parseLaunchableActivityNames(dumpsys) {
  const mainActivityNameRe = new RegExp(`^\\s*${_lodash.default.escapeRegExp(MAIN_ACTION)}:$`);
  const categoryNameRe = /^\s*Category:\s+"([a-zA-Z0-9._/-]+)"$/;
  const blocks = [];
  let blockStartIndent;
  let block = [];
  for (const line of dumpsys.split('\n').map(_lodash.default.trimEnd)) {
    const currentIndent = line.length - _lodash.default.trimStart(line).length;
    if (mainActivityNameRe.test(line)) {
      blockStartIndent = currentIndent;
      if (!_lodash.default.isEmpty(block)) {
        blocks.push(block);
        block = [];
      }
      continue;
    }
    if (_lodash.default.isNil(blockStartIndent)) {
      continue;
    }
    if (currentIndent > blockStartIndent) {
      block.push(line);
    } else {
      if (!_lodash.default.isEmpty(block)) {
        blocks.push(block);
        block = [];
      }
      blockStartIndent = null;
    }
  }
  if (!_lodash.default.isEmpty(block)) {
    blocks.push(block);
  }
  const result = [];
  for (const item of blocks) {
    let hasCategory = false;
    let isLauncherCategory = false;
    for (const line of item) {
      const match = categoryNameRe.exec(line);
      if (!match) {
        continue;
      }
      hasCategory = true;
      isLauncherCategory = match[1] === LAUNCHER_CATEGORY;
      break;
    }
    if (hasCategory && !isLauncherCategory) {
      continue;
    }
    for (const activityNameStr of item.map(_lodash.default.trim).filter(Boolean)) {
      const fqActivityName = activityNameStr.split(/\s+/)[1];
      if (!matchComponentName(fqActivityName)) {
        continue;
      }
      if (isLauncherCategory) {
        return [fqActivityName];
      }
      result.push(fqActivityName);
    }
  }
  return result;
}
function matchComponentName(classString) {
  return /^[a-z0-9./_]+$/i.exec(classString);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBUEtTX0VYVEVOU0lPTiIsIkFQS19FWFRFTlNJT04iLCJBUEtfSU5TVEFMTF9USU1FT1VUIiwiQVBLU19JTlNUQUxMX1RJTUVPVVQiLCJERUZBVUxUX0FEQl9FWEVDX1RJTUVPVVQiLCJNQUlOX0FDVElPTiIsIkxBVU5DSEVSX0NBVEVHT1JZIiwiTU9EVUxFX05BTUUiLCJnZXRNb2R1bGVSb290IiwiXyIsIm1lbW9pemUiLCJtb2R1bGVSb290IiwicGF0aCIsImRpcm5hbWUiLCJyZXNvbHZlIiwiX19maWxlbmFtZSIsImlzQXRGc1Jvb3QiLCJtYW5pZmVzdFBhdGgiLCJqb2luIiwiZnMiLCJleGlzdHMiLCJKU09OIiwicGFyc2UiLCJyZWFkRmlsZSIsIm5hbWUiLCJpZ24iLCJsZW5ndGgiLCJFcnJvciIsImdldFJlc291cmNlUGF0aCIsInJlbFBhdGgiLCJyZXN1bHRQYXRoIiwiZ2V0U2RrUm9vdEZyb21FbnYiLCJwcm9jZXNzIiwiZW52IiwiQU5EUk9JRF9IT01FIiwiQU5EUk9JRF9TREtfUk9PVCIsInJlcXVpcmVTZGtSb290IiwiY3VzdG9tUm9vdCIsInNka1Jvb3QiLCJkb2NNc2ciLCJpc0VtcHR5Iiwic3RhdHMiLCJzdGF0IiwiaXNEaXJlY3RvcnkiLCJnZXRBbmRyb2lkUGxhdGZvcm1BbmRQYXRoIiwicHJvcHNQYXRocyIsImdsb2IiLCJjd2QiLCJhYnNvbHV0ZSIsInBsYXRmb3Jtc01hcHBpbmciLCJwcm9wc1BhdGgiLCJwcm9wc0NvbnRlbnQiLCJwbGF0Zm9ybVBhdGgiLCJwbGF0Zm9ybSIsImJhc2VuYW1lIiwibWF0Y2giLCJleGVjIiwibG9nIiwid2FybiIsInBhcnNlSW50IiwicmVjZW50U2RrVmVyc2lvbiIsImtleXMiLCJzb3J0IiwicmV2ZXJzZSIsInJlc3VsdCIsImRlYnVnIiwic3RyaW5naWZ5IiwidW56aXBGaWxlIiwiemlwUGF0aCIsImRzdFJvb3QiLCJ6aXAiLCJhc3NlcnRWYWxpZFppcCIsImV4dHJhY3RBbGxUbyIsInVuc2lnbkFwayIsImFwa1BhdGgiLCJ0bXBSb290IiwidGVtcERpciIsIm9wZW5EaXIiLCJtZXRhSW5mRm9sZGVyTmFtZSIsImhhc01ldGFJbmYiLCJyZWFkRW50cmllcyIsImVudHJ5IiwiZmlsZU5hbWUiLCJzdGFydHNXaXRoIiwidG1wWmlwUm9vdCIsInJpbXJhZiIsInRtcFJlc3VsdFBhdGgiLCJ0b0FyY2hpdmUiLCJ1bmxpbmsiLCJtdiIsImdldElNRUxpc3RGcm9tT3V0cHV0Iiwic3Rkb3V0IiwiZW5naW5lcyIsImxpbmUiLCJzcGxpdCIsInB1c2giLCJ0cmltIiwicmVwbGFjZSIsImdldEphdmFIb21lIiwiSkFWQV9IT01FIiwiZ2V0SmF2YUZvck9zIiwiamF2YUhvbWUiLCJlcnJNc2ciLCJlcnIiLCJtZXNzYWdlIiwiZXhlY3V0YWJsZU5hbWUiLCJzeXN0ZW0iLCJpc1dpbmRvd3MiLCJ3aGljaCIsImdldE9wZW5Tc2xGb3JPcyIsImJpbmFyeU5hbWUiLCJnZXRBcGtzaWduZXJGb3JPcyIsInN5c0hlbHBlcnMiLCJnZXRCaW5hcnlGcm9tU2RrUm9vdCIsImdldEFwa2FuYWx5emVyRm9yT3MiLCJpc1Nob3dpbmdMb2Nrc2NyZWVuIiwiZHVtcHN5cyIsInNvbWUiLCJ4IiwiaW5jbHVkZXMiLCJldmVyeSIsInRlc3QiLCJpc0N1cnJlbnRGb2N1c09uS2V5Z3VhcmQiLCJtIiwiZ2V0U3VyZmFjZU9yaWVudGF0aW9uIiwiaXNTY3JlZW5PbkZ1bGx5IiwiYnVpbGRTdGFydENtZCIsInN0YXJ0QXBwT3B0aW9ucyIsImFwaUxldmVsIiwidXNlciIsIndhaXRGb3JMYXVuY2giLCJwa2ciLCJhY3Rpdml0eSIsImFjdGlvbiIsImNhdGVnb3J5Iiwic3RvcEFwcCIsImZsYWdzIiwiY21kIiwidXRpbCIsImhhc1ZhbHVlIiwib3B0aW9uYWxJbnRlbnRBcmd1bWVudHMiLCJwYXJzZUtleVZhbHVlIiwic3RyIiwic3BhY2UiLCJpbmRleE9mIiwic3Vic3RyaW5nIiwicmUiLCJhcmdzIiwiYXBwbHkiLCJmbGFnIiwiZmxhZ1BvcyIsInByZXZBcmdzIiwiZ2V0U2RrVG9vbHNWZXJzaW9uIiwiYW5kcm9pZEhvbWUiLCJwcm9wZXJ0aWVzUGF0aCIsInByb3BlcnRpZXNDb250ZW50IiwidmVyc2lvbk1hdGNoZXIiLCJSZWdFeHAiLCJtYWpvciIsIm1pbm9yIiwiYnVpbGQiLCJnZXRCdWlsZFRvb2xzRGlycyIsImJ1aWxkVG9vbHNEaXJzIiwibWFwIiwiZGlyIiwiYSIsImIiLCJzZW12ZXIiLCJyY29tcGFyZSIsInBhaXIiLCJwYWlycyIsIkIiLCJtdGltZSIsInZhbHVlT2YiLCJpbmZvIiwiZXh0cmFjdE1hdGNoaW5nUGVybWlzc2lvbnMiLCJkdW1wc3lzT3V0cHV0IiwiZ3JvdXBOYW1lcyIsImdyYW50ZWRTdGF0ZSIsImdyb3VwUGF0dGVybkJ5TmFtZSIsImdyb3VwTmFtZSIsImVzY2FwZVJlZ0V4cCIsImluZGVudFBhdHRlcm4iLCJwZXJtaXNzaW9uTmFtZVBhdHRlcm4iLCJncmFudGVkU3RhdGVQYXR0ZXJuIiwiZ3JvdXBNYXRjaCIsImxpbmVzIiwidGl0bGVJbmRlbnQiLCJzZWFyY2giLCJzbGljZSIsImN1cnJlbnRJbmRlbnQiLCJwZXJtaXNzaW9uTmFtZU1hdGNoIiwiaXRlbSIsInBlcm1pc3Npb24iLCJncmFudGVkU3RhdGVNYXRjaCIsImdyYW50ZWQiLCJmaWx0ZXJlZFJlc3VsdCIsImZpbHRlciIsImlzQm9vbGVhbiIsInBsdXJhbGl6ZSIsImJ1aWxkSW5zdGFsbEFyZ3MiLCJvcHRpb25zIiwiYWxsb3dUZXN0UGFja2FnZXMiLCJ1c2VTZGNhcmQiLCJncmFudFBlcm1pc3Npb25zIiwicGFydGlhbEluc3RhbGwiLCJwYXJzZU1hbmlmZXN0IiwibWFuaWZlc3QiLCJwYWNrYWdlIiwidmVyc2lvbkNvZGUiLCJ2ZXJzaW9uTmFtZSIsImFwcGxpY2F0aW9uIiwiYWN0aXZpdGllcyIsImFjdGl2aXR5QWxpYXNlcyIsImVuYWJsZWQiLCJpbnRlbnRGaWx0ZXJzIiwiYWN0aW9ucyIsImNhdGVnb3JpZXMiLCJpc01haW5BY3Rpb24iLCJpc0xhdW5jaGVyQ2F0ZWdvcnkiLCJwYXJzZUFhcHRTdHJpbmdzIiwicmF3T3V0cHV0IiwiY29uZmlnTWFya2VyIiwibm9ybWFsaXplU3RyaW5nTWF0Y2giLCJzIiwiYXBrU3RyaW5ncyIsImlzSW5Db25maWciLCJjdXJyZW50UmVzb3VyY2VJZCIsImlzSW5QbHVyYWxHcm91cCIsInF1b3RlZFN0cmluZ1BhdHRlcm4iLCJvcyIsIkVPTCIsInRyaW1tZWRMaW5lIiwicGFyc2VBYXB0MlN0cmluZ3MiLCJhbGxMaW5lcyIsImV4dHJhY3RDb250ZW50Iiwic3RhcnRJZHgiLCJpZHgiLCJzdGFydENoYXJQb3MiLCJ0ZXJtaW5hdGlvbkNoYXJNYXRjaCIsInRlcm1pbmF0aW9uQ2hhclBvcyIsImluZGV4IiwidHJpbVN0YXJ0IiwiaXNJbkN1cnJlbnRDb25maWciLCJsaW5lSW5kZXgiLCJjb250ZW50IiwiaXNTdHJpbmciLCJmb3JtYXRDb25maWdNYXJrZXIiLCJjb25maWdzR2V0dGVyIiwiZGVzaXJlZE1hcmtlciIsImRlZmF1bHRNYXJrZXIiLCJjb25maWdzIiwidG9Mb3dlckNhc2UiLCJwYXJzZUpzb25EYXRhIiwib3V0cHV0IiwiZW50aXR5TmFtZSIsImpzb25TdHIiLCJlIiwidG9BdmRMb2NhbGVBcmdzIiwibGFuZ3VhZ2UiLCJjb3VudHJ5IiwidG9VcHBlckNhc2UiLCJsb2NhbGUiLCJnZXRBbmRyb2lkUHJlZnNSb290IiwibG9jYXRpb24iLCJBTkRST0lEX0VNVUxBVE9SX0hPTUUiLCJkaXJFeGlzdHMiLCJob21lIiwiSE9NRSIsIlVTRVJQUk9GSUxFIiwiZXNjYXBlU2hlbGxBcmciLCJhcmciLCJwYXJzZUxhdW5jaGFibGVBY3Rpdml0eU5hbWVzIiwibWFpbkFjdGl2aXR5TmFtZVJlIiwiY2F0ZWdvcnlOYW1lUmUiLCJibG9ja3MiLCJibG9ja1N0YXJ0SW5kZW50IiwiYmxvY2siLCJ0cmltRW5kIiwiaXNOaWwiLCJoYXNDYXRlZ29yeSIsImFjdGl2aXR5TmFtZVN0ciIsIkJvb2xlYW4iLCJmcUFjdGl2aXR5TmFtZSIsIm1hdGNoQ29tcG9uZW50TmFtZSIsImNsYXNzU3RyaW5nIl0sInNvdXJjZXMiOlsiLi4vLi4vbGliL2hlbHBlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBzeXN0ZW0sIGZzLCB6aXAsIHV0aWwsIHRlbXBEaXIgfSBmcm9tICdAYXBwaXVtL3N1cHBvcnQnO1xuaW1wb3J0IGxvZyBmcm9tICcuL2xvZ2dlci5qcyc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHNlbXZlciBmcm9tICdzZW12ZXInO1xuaW1wb3J0IG9zIGZyb20gJ29zJztcblxuY29uc3QgQVBLU19FWFRFTlNJT04gPSAnLmFwa3MnO1xuY29uc3QgQVBLX0VYVEVOU0lPTiA9ICcuYXBrJztcbmNvbnN0IEFQS19JTlNUQUxMX1RJTUVPVVQgPSA2MDAwMDtcbmNvbnN0IEFQS1NfSU5TVEFMTF9USU1FT1VUID0gQVBLX0lOU1RBTExfVElNRU9VVCAqIDI7XG5jb25zdCBERUZBVUxUX0FEQl9FWEVDX1RJTUVPVVQgPSAyMDAwMDsgLy8gaW4gbWlsbGlzZWNvbmRzXG5jb25zdCBNQUlOX0FDVElPTiA9ICdhbmRyb2lkLmludGVudC5hY3Rpb24uTUFJTic7XG5jb25zdCBMQVVOQ0hFUl9DQVRFR09SWSA9ICdhbmRyb2lkLmludGVudC5jYXRlZ29yeS5MQVVOQ0hFUic7XG5jb25zdCBNT0RVTEVfTkFNRSA9ICdhcHBpdW0tYWRiJztcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBhYnNvbHV0ZSBwYXRoIHRvIHRoZSBjdXJyZW50IG1vZHVsZSdzIHJvb3QgZm9sZGVyXG4gKlxuICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gVGhlIGZ1bGwgcGF0aCB0byBtb2R1bGUgcm9vdFxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBjdXJyZW50IG1vZHVsZSByb290IGZvbGRlciBjYW5ub3QgYmUgZGV0ZXJtaW5lZFxuICovXG5jb25zdCBnZXRNb2R1bGVSb290ID0gXy5tZW1vaXplKGFzeW5jIGZ1bmN0aW9uIGdldE1vZHVsZVJvb3QgKCkge1xuICBsZXQgbW9kdWxlUm9vdCA9IHBhdGguZGlybmFtZShwYXRoLnJlc29sdmUoX19maWxlbmFtZSkpO1xuICBsZXQgaXNBdEZzUm9vdCA9IGZhbHNlO1xuICB3aGlsZSAoIWlzQXRGc1Jvb3QpIHtcbiAgICBjb25zdCBtYW5pZmVzdFBhdGggPSBwYXRoLmpvaW4obW9kdWxlUm9vdCwgJ3BhY2thZ2UuanNvbicpO1xuICAgIHRyeSB7XG4gICAgICBpZiAoYXdhaXQgZnMuZXhpc3RzKG1hbmlmZXN0UGF0aCkgJiZcbiAgICAgICAgICBKU09OLnBhcnNlKGF3YWl0IGZzLnJlYWRGaWxlKG1hbmlmZXN0UGF0aCwgJ3V0ZjgnKSkubmFtZSA9PT0gTU9EVUxFX05BTUUpIHtcbiAgICAgICAgcmV0dXJuIG1vZHVsZVJvb3Q7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoaWduKSB7fVxuICAgIG1vZHVsZVJvb3QgPSBwYXRoLmRpcm5hbWUobW9kdWxlUm9vdCk7XG4gICAgaXNBdEZzUm9vdCA9IG1vZHVsZVJvb3QubGVuZ3RoIDw9IHBhdGguZGlybmFtZShtb2R1bGVSb290KS5sZW5ndGg7XG4gIH1cbiAgaWYgKGlzQXRGc1Jvb3QpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBmaW5kIHRoZSByb290IGZvbGRlciBvZiB0aGUgJHtNT0RVTEVfTkFNRX0gTm9kZS5qcyBtb2R1bGVgKTtcbiAgfVxuICByZXR1cm4gbW9kdWxlUm9vdDtcbn0pO1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGFic29sc3V0ZSBwYXRoIHRvIHRoZSBnaXZlbiByZXNvdXJjZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxQYXRoIFJlbGF0aXZlIHBhdGggdG8gdGhlIHJlc291cmNlIHN0YXJ0aW5nIGZyb20gdGhlIGN1cnJlbnQgbW9kdWxlIHJvb3RcbiAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IFRoZSBmdWxsIHBhdGggdG8gdGhlIHJlc291cmNlXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGFic29sdXRlIHJlc291cmNlIHBhdGggY2Fubm90IGJlIGRldGVybWluZWRcbiAqL1xuY29uc3QgZ2V0UmVzb3VyY2VQYXRoID0gXy5tZW1vaXplKGFzeW5jIGZ1bmN0aW9uIGdldFJlc291cmNlUGF0aCAocmVsUGF0aCkge1xuICBjb25zdCBtb2R1bGVSb290ID0gYXdhaXQgZ2V0TW9kdWxlUm9vdCgpO1xuICBjb25zdCByZXN1bHRQYXRoID0gcGF0aC5yZXNvbHZlKG1vZHVsZVJvb3QsIHJlbFBhdGgpO1xuICBpZiAoIWF3YWl0IGZzLmV4aXN0cyhyZXN1bHRQYXRoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGZpbmQgdGhlIHJlc291cmNlICcke3JlbFBhdGh9JyB1bmRlciB0aGUgJyR7bW9kdWxlUm9vdH0nIGAgK1xuICAgICAgYGZvbGRlciBvZiAke01PRFVMRV9OQU1FfSBOb2RlLmpzIG1vZHVsZWApO1xuICB9XG4gIHJldHVybiByZXN1bHRQYXRoO1xufSk7XG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSBhY3R1YWwgcGF0aCB0byBTREsgcm9vdCBmb2xkZXIgZnJvbSB0aGUgc3lzdGVtIGVudmlyb25tZW50XG4gKlxuICogQHJldHVybiB7P3N0cmluZ30gVGhlIGZ1bGwgcGF0aCB0byB0aGUgU0RLIHJvb3QgZm9sZGVyXG4gKi9cbmZ1bmN0aW9uIGdldFNka1Jvb3RGcm9tRW52ICgpIHtcbiAgcmV0dXJuIHByb2Nlc3MuZW52LkFORFJPSURfSE9NRSB8fCBwcm9jZXNzLmVudi5BTkRST0lEX1NES19ST09UO1xufVxuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgYWN0dWFsIHBhdGggdG8gU0RLIHJvb3QgZm9sZGVyXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgZnVsbCBwYXRoIHRvIHRoZSBTREsgcm9vdCBmb2xkZXJcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBlaXRoZXIgdGhlIGNvcnJlc3BvbmRpbmcgZW52IHZhcmlhYmxlIGlzIHVuc2V0IG9yIGlzXG4gKiBwb2ludGluZyB0byBhbiBpbnZhbGlkIGZpbGUgc3lzdGVtIGVudHJ5XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVTZGtSb290IChjdXN0b21Sb290ID0gbnVsbCkge1xuICBjb25zdCBzZGtSb290ID0gY3VzdG9tUm9vdCB8fCBnZXRTZGtSb290RnJvbUVudigpO1xuICBjb25zdCBkb2NNc2cgPSAnUmVhZCBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9zdHVkaW8vY29tbWFuZC1saW5lL3ZhcmlhYmxlcyBmb3IgbW9yZSBkZXRhaWxzJztcbiAgaWYgKF8uaXNFbXB0eShzZGtSb290KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTmVpdGhlciBBTkRST0lEX0hPTUUgbm9yIEFORFJPSURfU0RLX1JPT1QgZW52aXJvbm1lbnQgdmFyaWFibGUgd2FzIGV4cG9ydGVkLiAke2RvY01zZ31gKTtcbiAgfVxuXG4gIGlmICghYXdhaXQgZnMuZXhpc3RzKHNka1Jvb3QpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgQW5kcm9pZCBTREsgcm9vdCBmb2xkZXIgJyR7c2RrUm9vdH0nIGRvZXMgbm90IGV4aXN0IG9uIHRoZSBsb2NhbCBmaWxlIHN5c3RlbS4gJHtkb2NNc2d9YCk7XG4gIH1cbiAgY29uc3Qgc3RhdHMgPSBhd2FpdCBmcy5zdGF0KHNka1Jvb3QpO1xuICBpZiAoIXN0YXRzLmlzRGlyZWN0b3J5KCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBBbmRyb2lkIFNESyByb290ICcke3Nka1Jvb3R9JyBtdXN0IGJlIGEgZm9sZGVyLiAke2RvY01zZ31gKTtcbiAgfVxuICByZXR1cm4gc2RrUm9vdDtcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBQbGF0Zm9ybUluZm9cbiAqIEBwcm9wZXJ0eSB7P3N0cmluZ30gcGxhdGZvcm0gLSBUaGUgcGxhdGZvcm0gbmFtZSwgZm9yIGV4YW1wbGUgYGFuZHJvaWQtMjRgXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgYG51bGxgIGlmIGl0IGNhbm5vdCBiZSBmb3VuZFxuICogQHByb3BlcnR5IHs/c3RyaW5nfSBwbGF0Zm9ybVBhdGggLSBGdWxsIHBhdGggdG8gdGhlIHBsYXRmb3JtIFNESyBmb2xkZXJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgYG51bGxgIGlmIGl0IGNhbm5vdCBiZSBmb3VuZFxuICovXG5cbi8qKlxuICogUmV0cmlldmUgdGhlIHBhdGggdG8gdGhlIHJlY2VudCBpbnN0YWxsZWQgQW5kcm9pZCBwbGF0Zm9ybS5cbiAqXG4gKiBAcmV0dXJuIHtQbGF0Zm9ybUluZm99IFRoZSByZXN1bHRpbmcgcGF0aCB0byB0aGUgbmV3ZXN0IGluc3RhbGxlZCBwbGF0Zm9ybS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0QW5kcm9pZFBsYXRmb3JtQW5kUGF0aCAoc2RrUm9vdCkge1xuICBjb25zdCBwcm9wc1BhdGhzID0gYXdhaXQgZnMuZ2xvYignKi9idWlsZC5wcm9wJywge1xuICAgIGN3ZDogcGF0aC5yZXNvbHZlKHNka1Jvb3QsICdwbGF0Zm9ybXMnKSxcbiAgICBhYnNvbHV0ZTogdHJ1ZSxcbiAgfSk7XG4gIGNvbnN0IHBsYXRmb3Jtc01hcHBpbmcgPSB7fTtcbiAgZm9yIChjb25zdCBwcm9wc1BhdGggb2YgcHJvcHNQYXRocykge1xuICAgIGNvbnN0IHByb3BzQ29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKHByb3BzUGF0aCwgJ3V0Zi04Jyk7XG4gICAgY29uc3QgcGxhdGZvcm1QYXRoID0gcGF0aC5kaXJuYW1lKHByb3BzUGF0aCk7XG4gICAgY29uc3QgcGxhdGZvcm0gPSBwYXRoLmJhc2VuYW1lKHBsYXRmb3JtUGF0aCk7XG4gICAgY29uc3QgbWF0Y2ggPSAvcm9cXC5idWlsZFxcLnZlcnNpb25cXC5zZGs9KFxcZCspLy5leGVjKHByb3BzQ29udGVudCk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgbG9nLndhcm4oYENhbm5vdCByZWFkIHRoZSBTREsgdmVyc2lvbiBmcm9tICcke3Byb3BzUGF0aH0nLiBTa2lwcGluZyAnJHtwbGF0Zm9ybX0nYCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgcGxhdGZvcm1zTWFwcGluZ1twYXJzZUludChtYXRjaFsxXSwgMTApXSA9IHtcbiAgICAgIHBsYXRmb3JtLFxuICAgICAgcGxhdGZvcm1QYXRoLFxuICAgIH07XG4gIH1cbiAgaWYgKF8uaXNFbXB0eShwbGF0Zm9ybXNNYXBwaW5nKSkge1xuICAgIGxvZy53YXJuKGBGb3VuZCB6ZXJvIHBsYXRmb3JtIGZvbGRlcnMgYXQgJyR7cGF0aC5yZXNvbHZlKHNka1Jvb3QsICdwbGF0Zm9ybXMnKX0nLiBgICtcbiAgICAgIGBEbyB5b3UgaGF2ZSBhbnkgQW5kcm9pZCBTREtzIGluc3RhbGxlZD9gKTtcbiAgICByZXR1cm4ge1xuICAgICAgcGxhdGZvcm06IG51bGwsXG4gICAgICBwbGF0Zm9ybVBhdGg6IG51bGwsXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHJlY2VudFNka1ZlcnNpb24gPSBfLmtleXMocGxhdGZvcm1zTWFwcGluZykuc29ydCgpLnJldmVyc2UoKVswXTtcbiAgY29uc3QgcmVzdWx0ID0gcGxhdGZvcm1zTWFwcGluZ1tyZWNlbnRTZGtWZXJzaW9uXTtcbiAgbG9nLmRlYnVnKGBGb3VuZCB0aGUgbW9zdCByZWNlbnQgQW5kcm9pZCBwbGF0Zm9ybTogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQpfWApO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5hc3luYyBmdW5jdGlvbiB1bnppcEZpbGUgKHppcFBhdGgsIGRzdFJvb3QgPSBwYXRoLmRpcm5hbWUoemlwUGF0aCkpIHtcbiAgbG9nLmRlYnVnKGBVbnppcHBpbmcgJyR7emlwUGF0aH0nIHRvICcke2RzdFJvb3R9J2ApO1xuICBhd2FpdCB6aXAuYXNzZXJ0VmFsaWRaaXAoemlwUGF0aCk7XG4gIGF3YWl0IHppcC5leHRyYWN0QWxsVG8oemlwUGF0aCwgZHN0Um9vdCk7XG4gIGxvZy5kZWJ1ZygnVW56aXAgc3VjY2Vzc2Z1bCcpO1xufVxuXG4vKipcbiAqIFVuc2lnbnMgdGhlIGdpdmVuIGFwayBieSByZW1vdmluZyB0aGVcbiAqIE1FVEEtSU5GIGZvbGRlciByZWN1cnNpdmVseSBmcm9tIHRoZSBhcmNoaXZlLlxuICogISEhIFRoZSBmdW5jdGlvbiBvdmVyd3JpdGVzIHRoZSBnaXZlbiBhcGsgYWZ0ZXIgc3VjY2Vzc2Z1bCB1bnNpZ25pbmcgISEhXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGFwa1BhdGggVGhlIHBhdGggdG8gdGhlIGFwa1xuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgYXBrIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogdW5zaWduZWQgYW5kIG92ZXJ3cml0dGVuXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgdGhlcmUgd2FzIGFuIGVycm9yIGR1cmluZyB0aGUgdW5zaWduIG9wZXJhdGlvblxuICovXG5hc3luYyBmdW5jdGlvbiB1bnNpZ25BcGsgKGFwa1BhdGgpIHtcbiAgY29uc3QgdG1wUm9vdCA9IGF3YWl0IHRlbXBEaXIub3BlbkRpcigpO1xuICBjb25zdCBtZXRhSW5mRm9sZGVyTmFtZSA9ICdNRVRBLUlORic7XG4gIHRyeSB7XG4gICAgbGV0IGhhc01ldGFJbmYgPSBmYWxzZTtcbiAgICBhd2FpdCB6aXAucmVhZEVudHJpZXMoYXBrUGF0aCwgKHtlbnRyeX0pID0+IHtcbiAgICAgIGhhc01ldGFJbmYgPSBlbnRyeS5maWxlTmFtZS5zdGFydHNXaXRoKGAke21ldGFJbmZGb2xkZXJOYW1lfS9gKTtcbiAgICAgIC8vIGVudHJpZXMgaXRlcmF0aW9uIHN0b3BzIGFmdGVyIGBmYWxzZWAgaXMgcmV0dXJuZWRcbiAgICAgIHJldHVybiAhaGFzTWV0YUluZjtcbiAgICB9KTtcbiAgICBpZiAoIWhhc01ldGFJbmYpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgdG1wWmlwUm9vdCA9IHBhdGgucmVzb2x2ZSh0bXBSb290LCAnYXBrJyk7XG4gICAgYXdhaXQgemlwLmV4dHJhY3RBbGxUbyhhcGtQYXRoLCB0bXBaaXBSb290KTtcbiAgICBhd2FpdCBmcy5yaW1yYWYocGF0aC5yZXNvbHZlKHRtcFppcFJvb3QsIG1ldGFJbmZGb2xkZXJOYW1lKSk7XG4gICAgY29uc3QgdG1wUmVzdWx0UGF0aCA9IHBhdGgucmVzb2x2ZSh0bXBSb290LCBwYXRoLmJhc2VuYW1lKGFwa1BhdGgpKTtcbiAgICBhd2FpdCB6aXAudG9BcmNoaXZlKHRtcFJlc3VsdFBhdGgsIHtcbiAgICAgIGN3ZDogdG1wWmlwUm9vdCxcbiAgICB9KTtcbiAgICBhd2FpdCBmcy51bmxpbmsoYXBrUGF0aCk7XG4gICAgYXdhaXQgZnMubXYodG1wUmVzdWx0UGF0aCwgYXBrUGF0aCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgZnMucmltcmFmKHRtcFJvb3QpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldElNRUxpc3RGcm9tT3V0cHV0IChzdGRvdXQpIHtcbiAgbGV0IGVuZ2luZXMgPSBbXTtcbiAgZm9yIChsZXQgbGluZSBvZiBzdGRvdXQuc3BsaXQoJ1xcbicpKSB7XG4gICAgaWYgKGxpbmUubGVuZ3RoID4gMCAmJiBsaW5lWzBdICE9PSAnICcpIHtcbiAgICAgIC8vIHJlbW92ZSBuZXdsaW5lIGFuZCB0cmFpbGluZyBjb2xvbiwgYW5kIGFkZCB0byB0aGUgbGlzdFxuICAgICAgZW5naW5lcy5wdXNoKGxpbmUudHJpbSgpLnJlcGxhY2UoLzokLywgJycpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGVuZ2luZXM7XG59XG5cbmNvbnN0IGdldEphdmFIb21lID0gXy5tZW1vaXplKGFzeW5jIGZ1bmN0aW9uIGdldEphdmFIb21lICgpIHtcbiAgY29uc3QgcmVzdWx0ID0gcHJvY2Vzcy5lbnYuSkFWQV9IT01FO1xuICBpZiAoIXJlc3VsdCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIEpBVkFfSE9NRSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBub3Qgc2V0IGZvciB0aGUgY3VycmVudCBwcm9jZXNzJyk7XG4gIH1cbiAgaWYgKCFhd2FpdCBmcy5leGlzdHMocmVzdWx0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVGhlIEpBVkFfSE9NRSBsb2NhdGlvbiAnJHtyZXN1bHR9JyBtdXN0IGV4aXN0YCk7XG4gIH1cbiAgY29uc3Qgc3RhdHMgPSBhd2FpdCBmcy5zdGF0KHJlc3VsdCk7XG4gIGlmICghc3RhdHMuaXNEaXJlY3RvcnkoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVGhlIEpBVkFfSE9NRSBsb2NhdGlvbiAnJHtyZXN1bHR9JyBtdXN0IGJlIGEgdmFsaWQgZm9sZGVyYCk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn0pO1xuXG5jb25zdCBnZXRKYXZhRm9yT3MgPSBfLm1lbW9pemUoYXN5bmMgZnVuY3Rpb24gZ2V0SmF2YUZvck9zICgpIHtcbiAgbGV0IGphdmFIb21lO1xuICBsZXQgZXJyTXNnO1xuICB0cnkge1xuICAgIGphdmFIb21lID0gYXdhaXQgZ2V0SmF2YUhvbWUoKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZXJyTXNnID0gZXJyLm1lc3NhZ2U7XG4gIH1cbiAgY29uc3QgZXhlY3V0YWJsZU5hbWUgPSBgamF2YSR7c3lzdGVtLmlzV2luZG93cygpID8gJy5leGUnIDogJyd9YDtcbiAgaWYgKGphdmFIb21lKSB7XG4gICAgY29uc3QgcmVzdWx0UGF0aCA9IHBhdGgucmVzb2x2ZShqYXZhSG9tZSwgJ2JpbicsIGV4ZWN1dGFibGVOYW1lKTtcbiAgICBpZiAoYXdhaXQgZnMuZXhpc3RzKHJlc3VsdFBhdGgpKSB7XG4gICAgICByZXR1cm4gcmVzdWx0UGF0aDtcbiAgICB9XG4gIH1cbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgZnMud2hpY2goZXhlY3V0YWJsZU5hbWUpO1xuICB9IGNhdGNoIChpZ24pIHt9XG4gIHRocm93IG5ldyBFcnJvcihgVGhlICcke2V4ZWN1dGFibGVOYW1lfScgYmluYXJ5IGNvdWxkIG5vdCBiZSBmb3VuZCBgICtcbiAgICBgbmVpdGhlciBpbiBQQVRIIG5vciB1bmRlciBKQVZBX0hPTUUgKCR7ZXJyTXNnIHx8IHBhdGgucmVzb2x2ZShqYXZhSG9tZSwgJ2JpbicpfSlgKTtcbn0pO1xuXG5jb25zdCBnZXRPcGVuU3NsRm9yT3MgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IGJpbmFyeU5hbWUgPSBgb3BlbnNzbCR7c3lzdGVtLmlzV2luZG93cygpID8gJy5leGUnIDogJyd9YDtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgZnMud2hpY2goYmluYXJ5TmFtZSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIG9wZW5zc2wgdG9vbCBtdXN0IGJlIGluc3RhbGxlZCBvbiB0aGUgc3lzdGVtIGFuZCBhdmFpbGFibGUgb24gdGhlIHBhdGgnKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgdGhlIGFic29sdXRlIHBhdGggdG8gYXBrc2lnbmVyIHRvb2xcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc3lzSGVscGVycyAtIEFuIGluc3RhbmNlIGNvbnRhaW5pbmcgc3lzdGVtQ2FsbE1ldGhvZHMgaGVscGVyIG1ldGhvZHNcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEFuIGFic29sdXRlIHBhdGggdG8gYXBrc2lnbmVyIHRvb2wuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHRvb2wgaXMgbm90IHByZXNlbnQgb24gdGhlIGxvY2FsIGZpbGUgc3lzdGVtLlxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRBcGtzaWduZXJGb3JPcyAoc3lzSGVscGVycykge1xuICByZXR1cm4gYXdhaXQgc3lzSGVscGVycy5nZXRCaW5hcnlGcm9tU2RrUm9vdCgnYXBrc2lnbmVyLmphcicpO1xufVxuXG4vKipcbiAqIEdldCB0aGUgYWJzb2x1dGUgcGF0aCB0byBhcGthbmFseXplciB0b29sLlxuICogaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vc3R1ZGlvL2NvbW1hbmQtbGluZS9hcGthbmFseXplci5odG1sXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHN5c0hlbHBlcnMgLSBBbiBpbnN0YW5jZSBjb250YWluaW5nIHN5c3RlbUNhbGxNZXRob2RzIGhlbHBlciBtZXRob2RzXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBBbiBhYnNvbHV0ZSBwYXRoIHRvIGFwa2FuYWx5emVyIHRvb2wuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHRvb2wgaXMgbm90IHByZXNlbnQgb24gdGhlIGxvY2FsIGZpbGUgc3lzdGVtLlxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRBcGthbmFseXplckZvck9zIChzeXNIZWxwZXJzKSB7XG4gIHJldHVybiBhd2FpdCBzeXNIZWxwZXJzLmdldEJpbmFyeUZyb21TZGtSb290KCdhcGthbmFseXplcicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBtU2hvd2luZ0xvY2tzY3JlZW4gb3IgbURyZWFtaW5nTG9ja3NjcmVlbiBpbiBkdW1wc3lzIG91dHB1dCB0byBkZXRlcm1pbmVcbiAqIGlmIGxvY2sgc2NyZWVuIGlzIHNob3dpbmdcbiAqXG4gKiBBIG5vdGU6IGBhZGIgc2hlbGwgZHVtcHN5cyB0cnVzdGAgcGVyZm9ybXMgYmV0dGVyIHdoaWxlIGRldGVjdGluZyB0aGUgbG9ja2VkIHNjcmVlbiBzdGF0ZVxuICogaW4gY29tcGFyaXNvbiB0byBgYWRiIGR1bXBzeXMgd2luZG93YCBvdXRwdXQgcGFyc2luZy5cbiAqIEJ1dCB0aGUgdHJ1c3QgY29tbWFuZCBkb2VzIG5vdCB3b3JrIGZvciBgU3dpcGVgIHVubG9jayBwYXR0ZXJuLlxuICpcbiAqIEluIHNvbWUgQW5kcm9pZCBkZXZpY2VzIChQcm9iYWJseSBhcm91bmQgQW5kcm9pZCAxMCspLCBgbVNob3dpbmdMb2Nrc2NyZWVuYCBhbmQgYG1EcmVhbWluZ0xvY2tzY3JlZW5gXG4gKiBkbyBub3Qgd29yayB0byBkZXRlY3QgbG9jayBzdGF0dXMuIEluc3RlYWQsIGtleWd1YXJkIHByZWZlcmVuY2VzIGhlbHBzIHRvIGRldGVjdCB0aGUgbG9jayBjb25kaXRpb24uXG4gKiBTb21lIGRldmljZXMgc3VjaCBhcyBBbmRyb2lkIFRWIGRvIG5vdCBoYXZlIGtleWd1YXJkLCBzbyB3ZSBzaG91bGQga2VlcFxuICogc2NyZWVuIGNvbmRpdGlvbiBhcyB0aGlzIHByaW1hcnkgbWV0aG9kLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBkdW1wc3lzIC0gVGhlIG91dHB1dCBvZiBkdW1wc3lzIHdpbmRvdyBjb21tYW5kLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBsb2NrIHNjcmVlbiBpcyBzaG93aW5nLlxuICovXG5mdW5jdGlvbiBpc1Nob3dpbmdMb2Nrc2NyZWVuIChkdW1wc3lzKSB7XG4gIHJldHVybiBfLnNvbWUoWydtU2hvd2luZ0xvY2tzY3JlZW49dHJ1ZScsICdtRHJlYW1pbmdMb2Nrc2NyZWVuPXRydWUnXSwgKHgpID0+IGR1bXBzeXMuaW5jbHVkZXMoeCkpXG4gICAgLy8gYG1Jc1Nob3dpbmdgIGFuZCBgbUlucHV0UmVzdHJpY3RlZGAgYXJlIGB0cnVlYCBpbiBsb2NrIGNvbmRpdGlvbi4gYGZhbHNlYCBpcyB1bmxvY2sgY29uZGl0aW9uLlxuICAgIHx8IF8uZXZlcnkoWy9LZXlndWFyZFN0YXRlTW9uaXRvcltcXG5cXHNdK21Jc1Nob3dpbmc9dHJ1ZS8sIC9cXHMrbUlucHV0UmVzdHJpY3RlZD10cnVlL10sICh4KSA9PiB4LnRlc3QoZHVtcHN5cykpO1xufVxuXG4vKlxuICogQ2hlY2tzIG1DdXJyZW50Rm9jdXMgaW4gZHVtcHN5cyBvdXRwdXQgdG8gZGV0ZXJtaW5lIGlmIEtleWd1YXJkIGlzIGFjdGl2YXRlZFxuICovXG5mdW5jdGlvbiBpc0N1cnJlbnRGb2N1c09uS2V5Z3VhcmQgKGR1bXBzeXMpIHtcbiAgbGV0IG0gPSAvbUN1cnJlbnRGb2N1cy4rS2V5Z3VhcmQvZ2kuZXhlYyhkdW1wc3lzKTtcbiAgcmV0dXJuIChtICYmIG0ubGVuZ3RoICYmIG1bMF0pID8gdHJ1ZSA6IGZhbHNlO1xufVxuXG4vKlxuICogUmVhZHMgU3VyZmFjZU9yaWVudGF0aW9uIGluIGR1bXBzeXMgb3V0cHV0XG4gKi9cbmZ1bmN0aW9uIGdldFN1cmZhY2VPcmllbnRhdGlvbiAoZHVtcHN5cykge1xuICBsZXQgbSA9IC9TdXJmYWNlT3JpZW50YXRpb246IFxcZC9naS5leGVjKGR1bXBzeXMpO1xuICByZXR1cm4gbSAmJiBwYXJzZUludChtWzBdLnNwbGl0KCc6JylbMV0sIDEwKTtcbn1cblxuLypcbiAqIENoZWNrcyBtU2NyZWVuT25GdWxseSBpbiBkdW1wc3lzIG91dHB1dCB0byBkZXRlcm1pbmUgaWYgc2NyZWVuIGlzIHNob3dpbmdcbiAqIERlZmF1bHQgaXMgdHJ1ZVxuICovXG5mdW5jdGlvbiBpc1NjcmVlbk9uRnVsbHkgKGR1bXBzeXMpIHtcbiAgbGV0IG0gPSAvbVNjcmVlbk9uRnVsbHk9XFx3Ky9naS5leGVjKGR1bXBzeXMpO1xuICByZXR1cm4gIW0gfHwgLy8gaWYgaW5mb3JtYXRpb24gaXMgbWlzc2luZyB3ZSBhc3N1bWUgc2NyZWVuIGlzIGZ1bGx5IG9uXG4gICAgICAgICAobSAmJiBtLmxlbmd0aCA+IDAgJiYgbVswXS5zcGxpdCgnPScpWzFdID09PSAndHJ1ZScpIHx8IGZhbHNlO1xufVxuXG4vKipcbiAqIEJ1aWxkcyBjb21tYW5kIGxpbmUgcmVwcmVzZW50YXRpb24gZm9yIHRoZSBnaXZlblxuICogYXBwbGljYXRpb24gc3RhcnR1cCBvcHRpb25zXG4gKlxuICogQHBhcmFtIHtTdGFydEFwcE9wdGlvbnN9IHN0YXJ0QXBwT3B0aW9ucyAtIEFwcGxpY2F0aW9uIG9wdGlvbnMgbWFwcGluZ1xuICogQHBhcmFtIHtudW1iZXJ9IGFwaUxldmVsIC0gVGhlIGFjdHVhbCBPUyBBUEkgbGV2ZWxcbiAqIEByZXR1cm5zIHtBcnJheTxTdHJpbmc+fSBUaGUgYWN0dWFsIGNvbW1hbmQgbGluZSBhcnJheVxuICovXG5mdW5jdGlvbiBidWlsZFN0YXJ0Q21kIChzdGFydEFwcE9wdGlvbnMsIGFwaUxldmVsKSB7XG4gIGNvbnN0IHtcbiAgICB1c2VyLFxuICAgIHdhaXRGb3JMYXVuY2gsXG4gICAgcGtnLFxuICAgIGFjdGl2aXR5LFxuICAgIGFjdGlvbixcbiAgICBjYXRlZ29yeSxcbiAgICBzdG9wQXBwLFxuICAgIGZsYWdzLFxuICB9ID0gc3RhcnRBcHBPcHRpb25zO1xuICBjb25zdCBjbWQgPSBbJ2FtJywgJ3N0YXJ0J107XG4gIGlmICh1dGlsLmhhc1ZhbHVlKHVzZXIpKSB7XG4gICAgY21kLnB1c2goJy0tdXNlcicsIHVzZXIpO1xuICB9XG4gIGlmICh3YWl0Rm9yTGF1bmNoKSB7XG4gICAgY21kLnB1c2goJy1XJyk7XG4gIH1cbiAgaWYgKGFjdGl2aXR5ICYmIHBrZykge1xuICAgIGNtZC5wdXNoKCctbicsIGAke3BrZ30vJHthY3Rpdml0eX1gKTtcbiAgfVxuICBpZiAoc3RvcEFwcCAmJiBhcGlMZXZlbCA+PSAxNSkge1xuICAgIGNtZC5wdXNoKCctUycpO1xuICB9XG4gIGlmIChhY3Rpb24pIHtcbiAgICBjbWQucHVzaCgnLWEnLCBhY3Rpb24pO1xuICB9XG4gIGlmIChjYXRlZ29yeSkge1xuICAgIGNtZC5wdXNoKCctYycsIGNhdGVnb3J5KTtcbiAgfVxuICBpZiAoZmxhZ3MpIHtcbiAgICBjbWQucHVzaCgnLWYnLCBmbGFncyk7XG4gIH1cbiAgaWYgKHN0YXJ0QXBwT3B0aW9ucy5vcHRpb25hbEludGVudEFyZ3VtZW50cykge1xuICAgIC8vIGV4cGVjdCBvcHRpb25hbEludGVudEFyZ3VtZW50cyB0byBiZSBhIHNpbmdsZSBzdHJpbmcgb2YgdGhlIGZvcm06XG4gICAgLy8gICAgIFwiLWZsYWcga2V5XCJcbiAgICAvLyAgICAgXCItZmxhZyBrZXkgdmFsdWVcIlxuICAgIC8vIG9yIGEgY29tYmluYXRpb24gb2YgdGhlc2UgKGUuZy4sIFwiLWZsYWcxIGtleTEgLWZsYWcyIGtleTIgdmFsdWUyXCIpXG5cbiAgICAvLyB0YWtlIGEgc3RyaW5nIGFuZCBwYXJzZSBvdXQgdGhlIHBhcnQgYmVmb3JlIGFueSBzcGFjZXMsIGFuZCBhbnl0aGluZyBhZnRlclxuICAgIC8vIHRoZSBmaXJzdCBzcGFjZVxuICAgIGxldCBwYXJzZUtleVZhbHVlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgc3RyID0gc3RyLnRyaW0oKTtcbiAgICAgIGxldCBzcGFjZSA9IHN0ci5pbmRleE9mKCcgJyk7XG4gICAgICBpZiAoc3BhY2UgPT09IC0xKSB7XG4gICAgICAgIHJldHVybiBzdHIubGVuZ3RoID8gW3N0cl0gOiBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbc3RyLnN1YnN0cmluZygwLCBzcGFjZSkudHJpbSgpLCBzdHIuc3Vic3RyaW5nKHNwYWNlICsgMSkudHJpbSgpXTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gY3ljbGUgdGhyb3VnaCB0aGUgb3B0aW9uYWxJbnRlbnRBcmd1bWVudHMgYW5kIHB1bGwgb3V0IHRoZSBhcmd1bWVudHNcbiAgICAvLyBhZGQgYSBzcGFjZSBpbml0aWFsbHkgc28gZmxhZ3MgY2FuIGJlIGRpc3Rpbmd1aXNoZWQgZnJvbSBhcmd1bWVudHMgdGhhdFxuICAgIC8vIGhhdmUgaW50ZXJuYWwgaHlwaGVuc1xuICAgIGxldCBvcHRpb25hbEludGVudEFyZ3VtZW50cyA9IGAgJHtzdGFydEFwcE9wdGlvbnMub3B0aW9uYWxJbnRlbnRBcmd1bWVudHN9YDtcbiAgICBsZXQgcmUgPSAvICgtW15cXHNdKykgKC4rKS87XG4gICAgd2hpbGUgKHRydWUpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zdGFudC1jb25kaXRpb25cbiAgICAgIGxldCBhcmdzID0gcmUuZXhlYyhvcHRpb25hbEludGVudEFyZ3VtZW50cyk7XG4gICAgICBpZiAoIWFyZ3MpIHtcbiAgICAgICAgaWYgKG9wdGlvbmFsSW50ZW50QXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgIC8vIG5vIG1vcmUgZmxhZ3MsIHNvIHRoZSByZW1haW5kZXIgY2FuIGJlIHRyZWF0ZWQgYXMgJ2tleScgb3IgJ2tleSB2YWx1ZSdcbiAgICAgICAgICBjbWQucHVzaC5hcHBseShjbWQsIHBhcnNlS2V5VmFsdWUob3B0aW9uYWxJbnRlbnRBcmd1bWVudHMpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB3ZSBhcmUgZG9uZVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gdGFrZSB0aGUgZmxhZyBhbmQgc2VlIGlmIGl0IGlzIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZ1xuICAgICAgLy8gaWYgaXQgaXMgbm90LCB0aGVuIGl0IG1lYW5zIHdlIGhhdmUgYmVlbiB0aHJvdWdoIGFscmVhZHksIGFuZFxuICAgICAgLy8gd2hhdCBpcyBiZWZvcmUgdGhlIGZsYWcgaXMgdGhlIGFyZ3VtZW50IGZvciB0aGUgcHJldmlvdXMgZmxhZ1xuICAgICAgbGV0IGZsYWcgPSBhcmdzWzFdO1xuICAgICAgbGV0IGZsYWdQb3MgPSBvcHRpb25hbEludGVudEFyZ3VtZW50cy5pbmRleE9mKGZsYWcpO1xuICAgICAgaWYgKGZsYWdQb3MgIT09IDApIHtcbiAgICAgICAgbGV0IHByZXZBcmdzID0gb3B0aW9uYWxJbnRlbnRBcmd1bWVudHMuc3Vic3RyaW5nKDAsIGZsYWdQb3MpO1xuICAgICAgICBjbWQucHVzaC5hcHBseShjbWQsIHBhcnNlS2V5VmFsdWUocHJldkFyZ3MpKTtcbiAgICAgIH1cblxuICAgICAgLy8gYWRkIHRoZSBmbGFnLCBhcyB0aGVyZSBhcmUgbm8gbW9yZSBlYXJsaWVyIGFyZ3VtZW50c1xuICAgICAgY21kLnB1c2goZmxhZyk7XG5cbiAgICAgIC8vIG1ha2Ugb3B0aW9uYWxJbnRlbnRBcmd1bWVudHMgaG9sZCB0aGUgcmVtYWluZGVyXG4gICAgICBvcHRpb25hbEludGVudEFyZ3VtZW50cyA9IGFyZ3NbMl07XG4gICAgfVxuICB9XG4gIHJldHVybiBjbWQ7XG59XG5cbmNvbnN0IGdldFNka1Rvb2xzVmVyc2lvbiA9IF8ubWVtb2l6ZShhc3luYyBmdW5jdGlvbiBnZXRTZGtUb29sc1ZlcnNpb24gKCkge1xuICBjb25zdCBhbmRyb2lkSG9tZSA9IHByb2Nlc3MuZW52LkFORFJPSURfSE9NRTtcbiAgaWYgKCFhbmRyb2lkSG9tZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQU5EUk9JRF9IT01FIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIGV4cGVjdGVkIHRvIGJlIHNldCcpO1xuICB9XG4gIGNvbnN0IHByb3BlcnRpZXNQYXRoID0gcGF0aC5yZXNvbHZlKGFuZHJvaWRIb21lLCAndG9vbHMnLCAnc291cmNlLnByb3BlcnRpZXMnKTtcbiAgaWYgKCFhd2FpdCBmcy5leGlzdHMocHJvcGVydGllc1BhdGgpKSB7XG4gICAgbG9nLndhcm4oYENhbm5vdCBmaW5kICR7cHJvcGVydGllc1BhdGh9IGZpbGUgdG8gcmVhZCBTREsgdmVyc2lvbiBmcm9tYCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHByb3BlcnRpZXNDb250ZW50ID0gYXdhaXQgZnMucmVhZEZpbGUocHJvcGVydGllc1BhdGgsICd1dGY4Jyk7XG4gIGNvbnN0IHZlcnNpb25NYXRjaGVyID0gbmV3IFJlZ0V4cCgvUGtnXFwuUmV2aXNpb249KFxcZCspXFwuPyhcXGQrKT9cXC4/KFxcZCspPy8pO1xuICBjb25zdCBtYXRjaCA9IHZlcnNpb25NYXRjaGVyLmV4ZWMocHJvcGVydGllc0NvbnRlbnQpO1xuICBpZiAobWF0Y2gpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWFqb3I6IHBhcnNlSW50KG1hdGNoWzFdLCAxMCksXG4gICAgICBtaW5vcjogbWF0Y2hbMl0gPyBwYXJzZUludChtYXRjaFsyXSwgMTApIDogMCxcbiAgICAgIGJ1aWxkOiBtYXRjaFszXSA/IHBhcnNlSW50KG1hdGNoWzNdLCAxMCkgOiAwXG4gICAgfTtcbiAgfVxuICBsb2cud2FybihgQ2Fubm90IHBhcnNlIFwiUGtnLlJldmlzaW9uXCIgdmFsdWUgZnJvbSAke3Byb3BlcnRpZXNQYXRofWApO1xufSk7XG5cbi8qKlxuICogUmV0cmlldmVzIGZ1bGwgcGF0aHMgdG8gYWxsICdidWlsZC10b29scycgc3ViZm9sZGVycyB1bmRlciB0aGUgcGFydGljdWxhclxuICogU0RLIHJvb3QgZm9sZGVyXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHNka1Jvb3QgLSBUaGUgZnVsbCBwYXRoIHRvIHRoZSBBbmRyb2lkIFNESyByb290IGZvbGRlclxuICogQHJldHVybnMge0FycmF5PHN0cmluZz59IFRoZSBmdWxsIHBhdGhzIHRvIHRoZSByZXN1bHRpbmcgZm9sZGVycyBzb3J0ZWQgYnlcbiAqIG1vZGlmaWNhdGlvbiBkYXRlICh0aGUgbmV3ZXN0IGNvbWVzIGZpcnN0KSBvciBhbiBlbXB0eSBsaXN0IGlmIG5vIG1hY3RoZXMgd2VyZSBmb3VuZFxuICovXG5jb25zdCBnZXRCdWlsZFRvb2xzRGlycyA9IF8ubWVtb2l6ZShhc3luYyBmdW5jdGlvbiBnZXRCdWlsZFRvb2xzRGlycyAoc2RrUm9vdCkge1xuICBsZXQgYnVpbGRUb29sc0RpcnMgPSBhd2FpdCBmcy5nbG9iKCcqLycsIHtcbiAgICBjd2Q6IHBhdGgucmVzb2x2ZShzZGtSb290LCAnYnVpbGQtdG9vbHMnKSxcbiAgICBhYnNvbHV0ZTogdHJ1ZSxcbiAgfSk7XG4gIHRyeSB7XG4gICAgYnVpbGRUb29sc0RpcnMgPSBidWlsZFRvb2xzRGlyc1xuICAgICAgLm1hcCgoZGlyKSA9PiBbcGF0aC5iYXNlbmFtZShkaXIpLCBkaXJdKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IHNlbXZlci5yY29tcGFyZShhWzBdLCBiWzBdKSlcbiAgICAgIC5tYXAoKHBhaXIpID0+IHBhaXJbMV0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2cud2FybihgQ2Fubm90IHNvcnQgYnVpbGQtdG9vbHMgZm9sZGVycyAke0pTT04uc3RyaW5naWZ5KGJ1aWxkVG9vbHNEaXJzLm1hcCgoZGlyKSA9PiBwYXRoLmJhc2VuYW1lKGRpcikpKX0gYCArXG4gICAgICBgYnkgc2VtYW50aWMgdmVyc2lvbiBuYW1lcy5gKTtcbiAgICBsb2cud2FybihgRmFsbGluZyBiYWNrIHRvIHNvcnRpbmcgYnkgbW9kaWZpY2F0aW9uIGRhdGUuIE9yaWdpbmFsIGVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICAgIGNvbnN0IHBhaXJzID0gYXdhaXQgQi5tYXAoYnVpbGRUb29sc0RpcnMsIGFzeW5jIChkaXIpID0+IFsoYXdhaXQgZnMuc3RhdChkaXIpKS5tdGltZS52YWx1ZU9mKCksIGRpcl0pO1xuICAgIGJ1aWxkVG9vbHNEaXJzID0gcGFpcnNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBhWzBdIDwgYlswXSlcbiAgICAgIC5tYXAoKHBhaXIpID0+IHBhaXJbMV0pO1xuICB9XG4gIGxvZy5pbmZvKGBGb3VuZCAke2J1aWxkVG9vbHNEaXJzLmxlbmd0aH0gJ2J1aWxkLXRvb2xzJyBmb2xkZXJzIHVuZGVyICcke3Nka1Jvb3R9JyAobmV3ZXN0IGZpcnN0KTpgKTtcbiAgZm9yIChsZXQgZGlyIG9mIGJ1aWxkVG9vbHNEaXJzKSB7XG4gICAgbG9nLmluZm8oYCAgICAke2Rpcn1gKTtcbiAgfVxuICByZXR1cm4gYnVpbGRUb29sc0RpcnM7XG59KTtcblxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIGxpc3Qgb2YgcGVybWlzc2lvbiBuYW1lcyBlbmNvZGVkIGluIGBkdW1wc3lzIHBhY2thZ2VgIGNvbW1hbmQgb3V0cHV0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBkdW1wc3lzT3V0cHV0IC0gVGhlIGFjdHVhbCBjb21tYW5kIG91dHB1dC5cbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gZ3JvdXBOYW1lcyAtIFRoZSBsaXN0IG9mIGdyb3VwIG5hbWVzIHRvIGxpc3QgcGVybWlzc2lvbnMgZm9yLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gZ3JhbnRlZFN0YXRlIC0gVGhlIGV4cGVjdGVkIHN0YXRlIG9mIGBncmFudGVkYCBhdHRyaWJ1dGUgdG8gZmlsdGVyIHdpdGguXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBObyBmaWx0ZXJpbmcgaXMgZG9uZSBpZiB0aGUgcGFyYW1ldGVyIGlzIG5vdCBzZXQuXG4gKiBAcmV0dXJucyB7QXJyYXk8c3RyaW5nPn0gVGhlIGxpc3Qgb2YgbWF0Y2hlZCBwZXJtaXNzaW9uIG5hbWVzIG9yIGFuIGVtcHR5IGxpc3QgaWYgbm8gbWF0Y2hlcyB3ZXJlIGZvdW5kLlxuICovXG5jb25zdCBleHRyYWN0TWF0Y2hpbmdQZXJtaXNzaW9ucyA9IGZ1bmN0aW9uIChkdW1wc3lzT3V0cHV0LCBncm91cE5hbWVzLCBncmFudGVkU3RhdGUgPSBudWxsKSB7XG4gIGNvbnN0IGdyb3VwUGF0dGVybkJ5TmFtZSA9IChncm91cE5hbWUpID0+IG5ldyBSZWdFeHAoYF4oXFxcXHMqJHtfLmVzY2FwZVJlZ0V4cChncm91cE5hbWUpfSBwZXJtaXNzaW9uczpbXFxcXHNcXFxcU10rKWAsICdtJyk7XG4gIGNvbnN0IGluZGVudFBhdHRlcm4gPSAvXFxTfCQvO1xuICBjb25zdCBwZXJtaXNzaW9uTmFtZVBhdHRlcm4gPSAvYW5kcm9pZFxcLlxcdypcXC4/cGVybWlzc2lvblxcLlxcdysvO1xuICBjb25zdCBncmFudGVkU3RhdGVQYXR0ZXJuID0gL1xcYmdyYW50ZWQ9KFxcdyspLztcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGZvciAoY29uc3QgZ3JvdXBOYW1lIG9mIGdyb3VwTmFtZXMpIHtcbiAgICBjb25zdCBncm91cE1hdGNoID0gZ3JvdXBQYXR0ZXJuQnlOYW1lKGdyb3VwTmFtZSkuZXhlYyhkdW1wc3lzT3V0cHV0KTtcbiAgICBpZiAoIWdyb3VwTWF0Y2gpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGxpbmVzID0gZ3JvdXBNYXRjaFsxXS5zcGxpdCgnXFxuJyk7XG4gICAgaWYgKGxpbmVzLmxlbmd0aCA8IDIpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHRpdGxlSW5kZW50ID0gbGluZXNbMF0uc2VhcmNoKGluZGVudFBhdHRlcm4pO1xuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcy5zbGljZSgxKSkge1xuICAgICAgY29uc3QgY3VycmVudEluZGVudCA9IGxpbmUuc2VhcmNoKGluZGVudFBhdHRlcm4pO1xuICAgICAgaWYgKGN1cnJlbnRJbmRlbnQgPD0gdGl0bGVJbmRlbnQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBlcm1pc3Npb25OYW1lTWF0Y2ggPSBwZXJtaXNzaW9uTmFtZVBhdHRlcm4uZXhlYyhsaW5lKTtcbiAgICAgIGlmICghcGVybWlzc2lvbk5hbWVNYXRjaCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGl0ZW0gPSB7XG4gICAgICAgIHBlcm1pc3Npb246IHBlcm1pc3Npb25OYW1lTWF0Y2hbMF0sXG4gICAgICB9O1xuICAgICAgY29uc3QgZ3JhbnRlZFN0YXRlTWF0Y2ggPSBncmFudGVkU3RhdGVQYXR0ZXJuLmV4ZWMobGluZSk7XG4gICAgICBpZiAoZ3JhbnRlZFN0YXRlTWF0Y2gpIHtcbiAgICAgICAgaXRlbS5ncmFudGVkID0gZ3JhbnRlZFN0YXRlTWF0Y2hbMV0gPT09ICd0cnVlJztcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGZpbHRlcmVkUmVzdWx0ID0gcmVzdWx0XG4gICAgLmZpbHRlcigoaXRlbSkgPT4gIV8uaXNCb29sZWFuKGdyYW50ZWRTdGF0ZSkgfHwgaXRlbS5ncmFudGVkID09PSBncmFudGVkU3RhdGUpXG4gICAgLm1hcCgoaXRlbSkgPT4gaXRlbS5wZXJtaXNzaW9uKTtcbiAgbG9nLmRlYnVnKGBSZXRyaWV2ZWQgJHt1dGlsLnBsdXJhbGl6ZSgncGVybWlzc2lvbicsIGZpbHRlcmVkUmVzdWx0Lmxlbmd0aCwgdHJ1ZSl9IGAgK1xuICAgIGBmcm9tICR7Z3JvdXBOYW1lc30gJHt1dGlsLnBsdXJhbGl6ZSgnZ3JvdXAnLCBncm91cE5hbWVzLmxlbmd0aCwgZmFsc2UpfWApO1xuICByZXR1cm4gZmlsdGVyZWRSZXN1bHQ7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEluc3RhbGxPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGFsbG93VGVzdFBhY2thZ2VzIFtmYWxzZV0gLSBTZXQgdG8gdHJ1ZSBpbiBvcmRlciB0byBhbGxvdyB0ZXN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWNrYWdlcyBpbnN0YWxsYXRpb24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHVzZVNkY2FyZCBbZmFsc2VdIC0gU2V0IHRvIHRydWUgdG8gaW5zdGFsbCB0aGUgYXBwIG9uIHNkY2FyZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RlYWQgb2YgdGhlIGRldmljZSBtZW1vcnkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGdyYW50UGVybWlzc2lvbnMgW2ZhbHNlXSAtIFNldCB0byB0cnVlIGluIG9yZGVyIHRvIGdyYW50IGFsbCB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbnMgcmVxdWVzdGVkIGluIHRoZSBhcHBsaWNhdGlvbidzIG1hbmlmZXN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHkgYWZ0ZXIgdGhlIGluc3RhbGxhdGlvbiBpcyBjb21wbGV0ZWRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZXIgQW5kcm9pZCA2Ky5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gcmVwbGFjZSBbdHJ1ZV0gLSBTZXQgaXQgdG8gZmFsc2UgaWYgeW91IGRvbid0IHdhbnRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgYXBwbGljYXRpb24gdG8gYmUgdXBncmFkZWQvcmVpbnN0YWxsZWRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpdCBpcyBhbHJlYWR5IHByZXNlbnQgb24gdGhlIGRldmljZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gcGFydGlhbEluc3RhbGwgW2ZhbHNlXSAtIEluc3RhbGwgYXBrcyBwYXJ0aWFsbHkuIEl0IGlzIHVzZWQgZm9yICdpbnN0YWxsLW11bHRpcGxlJy5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHR0cHM6Ly9hbmRyb2lkLnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy8xMTEwNjQvd2hhdC1pcy1hLXBhcnRpYWwtYXBwbGljYXRpb24taW5zdGFsbC12aWEtYWRiXG4gKi9cblxuLyoqXG4gKiBUcmFuc2Zvcm1zIGdpdmVuIG9wdGlvbnMgaW50byB0aGUgbGlzdCBvZiBgYWRiIGluc3RhbGwuaW5zdGFsbC1tdWx0aXBsZWAgY29tbWFuZCBhcmd1bWVudHNcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYXBpTGV2ZWwgLSBUaGUgY3VycmVudCBBUEkgbGV2ZWxcbiAqIEBwYXJhbSB7P0luc3RhbGxPcHRpb25zfSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgbWFwcGluZyB0byB0cmFuc2Zvcm1cbiAqIEByZXR1cm5zIHtBcnJheTxTdHJpbmc+fSBUaGUgYXJyYXkgb2YgYXJndW1lbnRzXG4gKi9cbmZ1bmN0aW9uIGJ1aWxkSW5zdGFsbEFyZ3MgKGFwaUxldmVsLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG5cbiAgaWYgKCF1dGlsLmhhc1ZhbHVlKG9wdGlvbnMucmVwbGFjZSkgfHwgb3B0aW9ucy5yZXBsYWNlKSB7XG4gICAgcmVzdWx0LnB1c2goJy1yJyk7XG4gIH1cbiAgaWYgKG9wdGlvbnMuYWxsb3dUZXN0UGFja2FnZXMpIHtcbiAgICByZXN1bHQucHVzaCgnLXQnKTtcbiAgfVxuICBpZiAob3B0aW9ucy51c2VTZGNhcmQpIHtcbiAgICByZXN1bHQucHVzaCgnLXMnKTtcbiAgfVxuICBpZiAob3B0aW9ucy5ncmFudFBlcm1pc3Npb25zKSB7XG4gICAgaWYgKGFwaUxldmVsIDwgMjMpIHtcbiAgICAgIGxvZy5kZWJ1ZyhgU2tpcHBpbmcgcGVybWlzc2lvbnMgZ3JhbnQgb3B0aW9uLCBzaW5jZSBgICtcbiAgICAgICAgICAgICAgICBgdGhlIGN1cnJlbnQgQVBJIGxldmVsICR7YXBpTGV2ZWx9IGRvZXMgbm90IHN1cHBvcnQgYXBwbGljYXRpb25zIGAgK1xuICAgICAgICAgICAgICAgIGBwZXJtaXNzaW9ucyBjdXN0b21pemF0aW9uYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wdXNoKCctZycpO1xuICAgIH1cbiAgfVxuICAvLyBGb3IgbXVsdGlwbGUtaW5zdGFsbFxuICBpZiAob3B0aW9ucy5wYXJ0aWFsSW5zdGFsbCkge1xuICAgIHJlc3VsdC5wdXNoKCctcCcpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNYW5pZmVzdEluZm9cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwa2cgLSBUaGUgYXBwbGljYXRpb24gaWRlbnRpZmllclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGFjdGl2aXR5IC0gVGhlIG5hbWUgb2YgdGhlIG1haW4gcGFja2FnZSBhY3Rpdml0eVxuICogQHByb3BlcnR5IHs/bnVtYmVyfSB2ZXJzaW9uQ29kZSAtIFRoZSB2ZXJzaW9uIGNvZGUgbnVtYmVyIChtaWdodCBiZSBgTmFOYClcbiAqIEBwcm9wZXJ0eSB7P3N0cmluZ30gdmVyc2lvbk5hbWUgLSBUaGUgdmVyc2lvbiBuYW1lIChtaWdodCBiZSBgbnVsbGApXG4gKi9cblxuLyoqXG4gKiBQZXJmb3JtIHBhcnNpbmcgb2YgdGhlIG1hbmlmZXN0IG9iamVjdCBpbiBvcmRlclxuICogdG8gZXh0cmFjdCBzb21lIHZpdGFsIHZhbHVlcyBmcm9tIGl0XG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG1hbmlmZXN0IFRoZSBtYW5pZmVzdCBjb250ZW50IGZvcm1hdHRlZCBhcyBKU09OXG4gKiBTZWUgaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvYWRia2l0LWFwa3JlYWRlciBmb3IgZGV0YWlsZWQgZm9ybWF0IGRlc2NyaXB0aW9uXG4gKiBAcmV0dXJucyB7TWFuaWZlc3RJbmZvfVxuICovXG5mdW5jdGlvbiBwYXJzZU1hbmlmZXN0IChtYW5pZmVzdCkge1xuICBjb25zdCByZXN1bHQgPSB7XG4gICAgcGtnOiBtYW5pZmVzdC5wYWNrYWdlLFxuICAgIHZlcnNpb25Db2RlOiBwYXJzZUludChtYW5pZmVzdC52ZXJzaW9uQ29kZSwgMTApLFxuICAgIHZlcnNpb25OYW1lOiBtYW5pZmVzdC52ZXJzaW9uTmFtZSB8fCBudWxsLFxuICB9O1xuICBpZiAoIW1hbmlmZXN0LmFwcGxpY2F0aW9uKSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIExvb2sgZm9yIGVuYWJsZWQgYWN0aXZpdHkgb3IgYWN0aXZpdHktYWxpYXMgd2l0aFxuICAvLyBhY3Rpb24gPT0gYW5kcm9pZC5pbnRlbnQuYWN0aW9uLk1BSU4gYW5kXG4gIC8vIGNhdGVnb3J5ID09IGFuZHJvaWQuaW50ZW50LmNhdGVnb3J5LkxBVU5DSEVSXG4gIGZvciAoY29uc3QgYWN0aXZpdHkgb2YgW1xuICAgIC4uLm1hbmlmZXN0LmFwcGxpY2F0aW9uLmFjdGl2aXRpZXMsXG4gICAgLi4ubWFuaWZlc3QuYXBwbGljYXRpb24uYWN0aXZpdHlBbGlhc2VzLFxuICBdKSB7XG4gICAgaWYgKGFjdGl2aXR5LmVuYWJsZWQgPT09IGZhbHNlIHx8IF8uaXNFbXB0eShhY3Rpdml0eS5pbnRlbnRGaWx0ZXJzKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCB7YWN0aW9ucywgY2F0ZWdvcmllc30gb2YgYWN0aXZpdHkuaW50ZW50RmlsdGVycykge1xuICAgICAgaWYgKF8uaXNFbXB0eShhY3Rpb25zKSB8fCBfLmlzRW1wdHkoY2F0ZWdvcmllcykpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzTWFpbkFjdGlvbiA9IGFjdGlvbnMuc29tZSgoe25hbWV9KSA9PiBuYW1lID09PSBNQUlOX0FDVElPTik7XG4gICAgICBjb25zdCBpc0xhdW5jaGVyQ2F0ZWdvcnkgPSBjYXRlZ29yaWVzLnNvbWUoKHtuYW1lfSkgPT4gbmFtZSA9PT0gTEFVTkNIRVJfQ0FURUdPUlkpO1xuICAgICAgaWYgKGlzTWFpbkFjdGlvbiAmJiBpc0xhdW5jaGVyQ2F0ZWdvcnkpIHtcbiAgICAgICAgcmVzdWx0LmFjdGl2aXR5ID0gYWN0aXZpdHkubmFtZTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBQYXJzZXMgYXBrIHN0cmluZ3MgZnJvbSBhYXB0IHRvb2wgb3V0cHV0XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHJhd091dHB1dCBUaGUgYWN0dWFsIHRvb2wgb3V0cHV0XG4gKiBAcGFyYW0ge3N0cmluZ30gY29uZmlnTWFya2VyIFRoZSBjb25maWcgbWFya2VyLiBVc3VhbGx5XG4gKiBhIGxhbmd1YWdlIGFiYnJldmlhdGlvbiBvciBgKGRlZmF1bHQpYFxuICogQHJldHVybnMge09iamVjdH0gU3RyaW5ncyBpZHMgdG8gdmFsdWVzIG1hcHBpbmcuIFBsdXJhbFxuICogdmFsdWVzIGFyZSByZXByZXNlbnRlZCBhcyBhcnJheXMuIElmIG5vIGNvbmZpZyBmb3VuZCBmb3IgdGhlXG4gKiBnaXZlbiBtYXJrZXIgdGhlbiBhbiBlbXB0eSBtYXBwaW5nIGlzIHJldHVybmVkLlxuICovXG5mdW5jdGlvbiBwYXJzZUFhcHRTdHJpbmdzIChyYXdPdXRwdXQsIGNvbmZpZ01hcmtlcikge1xuICBjb25zdCBub3JtYWxpemVTdHJpbmdNYXRjaCA9IGZ1bmN0aW9uIChzKSB7XG4gICAgcmV0dXJuIHMucmVwbGFjZSgvXCIkLywgJycpLnJlcGxhY2UoL15cIi8sICcnKS5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJyk7XG4gIH07XG5cbiAgY29uc3QgYXBrU3RyaW5ncyA9IHt9O1xuICBsZXQgaXNJbkNvbmZpZyA9IGZhbHNlO1xuICBsZXQgY3VycmVudFJlc291cmNlSWQgPSBudWxsO1xuICBsZXQgaXNJblBsdXJhbEdyb3VwID0gZmFsc2U7XG4gIC8vIFRoZSBwYXR0ZXJuIG1hdGNoZXMgYW55IHF1b3RlZCBjb250ZW50IGluY2x1ZGluZyBlc2NhcGVkIHF1b3Rlc1xuICBjb25zdCBxdW90ZWRTdHJpbmdQYXR0ZXJuID0gL1wiW15cIlxcXFxdKig/OlxcXFwuW15cIlxcXFxdKikqXCIvO1xuICBmb3IgKGNvbnN0IGxpbmUgb2YgcmF3T3V0cHV0LnNwbGl0KG9zLkVPTCkpIHtcbiAgICBjb25zdCB0cmltbWVkTGluZSA9IGxpbmUudHJpbSgpO1xuICAgIGlmIChfLmlzRW1wdHkodHJpbW1lZExpbmUpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoWydjb25maWcnLCAndHlwZScsICdzcGVjJywgJ1BhY2thZ2UnXS5zb21lKCh4KSA9PiB0cmltbWVkTGluZS5zdGFydHNXaXRoKHgpKSkge1xuICAgICAgaXNJbkNvbmZpZyA9IHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoYGNvbmZpZyAke2NvbmZpZ01hcmtlcn06YCk7XG4gICAgICBjdXJyZW50UmVzb3VyY2VJZCA9IG51bGw7XG4gICAgICBpc0luUGx1cmFsR3JvdXAgPSBmYWxzZTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmICghaXNJbkNvbmZpZykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJ3Jlc291cmNlJykpIHtcbiAgICAgIGlzSW5QbHVyYWxHcm91cCA9IGZhbHNlO1xuICAgICAgY3VycmVudFJlc291cmNlSWQgPSBudWxsO1xuXG4gICAgICBpZiAodHJpbW1lZExpbmUuaW5jbHVkZXMoJzpzdHJpbmcvJykpIHtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSAvOnN0cmluZ1xcLyhcXFMrKTovLmV4ZWModHJpbW1lZExpbmUpO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICBjdXJyZW50UmVzb3VyY2VJZCA9IG1hdGNoWzFdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLmluY2x1ZGVzKCc6cGx1cmFscy8nKSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IC86cGx1cmFsc1xcLyhcXFMrKTovLmV4ZWModHJpbW1lZExpbmUpO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICBjdXJyZW50UmVzb3VyY2VJZCA9IG1hdGNoWzFdO1xuICAgICAgICAgIGlzSW5QbHVyYWxHcm91cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChjdXJyZW50UmVzb3VyY2VJZCAmJiB0cmltbWVkTGluZS5zdGFydHNXaXRoKCcoc3RyaW5nJykpIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gcXVvdGVkU3RyaW5nUGF0dGVybi5leGVjKHRyaW1tZWRMaW5lKTtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBhcGtTdHJpbmdzW2N1cnJlbnRSZXNvdXJjZUlkXSA9IG5vcm1hbGl6ZVN0cmluZ01hdGNoKG1hdGNoWzBdKTtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnRSZXNvdXJjZUlkID0gbnVsbDtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChjdXJyZW50UmVzb3VyY2VJZCAmJiBpc0luUGx1cmFsR3JvdXAgJiYgdHJpbW1lZExpbmUuaW5jbHVkZXMoJzogKHN0cmluZycpKSB7XG4gICAgICBjb25zdCBtYXRjaCA9IHF1b3RlZFN0cmluZ1BhdHRlcm4uZXhlYyh0cmltbWVkTGluZSk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgYXBrU3RyaW5nc1tjdXJyZW50UmVzb3VyY2VJZF0gPSBbXG4gICAgICAgICAgLi4uKGFwa1N0cmluZ3NbY3VycmVudFJlc291cmNlSWRdIHx8IFtdKSxcbiAgICAgICAgICBub3JtYWxpemVTdHJpbmdNYXRjaChtYXRjaFswXSksXG4gICAgICAgIF07XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFwa1N0cmluZ3M7XG59XG5cbi8qKlxuICogUGFyc2VzIGFwayBzdHJpbmdzIGZyb20gYWFwdDIgdG9vbCBvdXRwdXRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcmF3T3V0cHV0IFRoZSBhY3R1YWwgdG9vbCBvdXRwdXRcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb25maWdNYXJrZXIgVGhlIGNvbmZpZyBtYXJrZXIuIFVzdWFsbHlcbiAqIGEgbGFuZ3VhZ2UgYWJicmV2aWF0aW9uIG9yIGFuIGVtcHR5IHN0cmluZyBmb3IgdGhlIGRlZmF1bHQgb25lXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBTdHJpbmdzIGlkcyB0byB2YWx1ZXMgbWFwcGluZy4gUGx1cmFsXG4gKiB2YWx1ZXMgYXJlIHJlcHJlc2VudGVkIGFzIGFycmF5cy4gSWYgbm8gY29uZmlnIGZvdW5kIGZvciB0aGVcbiAqIGdpdmVuIG1hcmtlciB0aGVuIGFuIGVtcHR5IG1hcHBpbmcgaXMgcmV0dXJuZWQuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQWFwdDJTdHJpbmdzIChyYXdPdXRwdXQsIGNvbmZpZ01hcmtlcikge1xuICBjb25zdCBhbGxMaW5lcyA9IHJhd091dHB1dC5zcGxpdChvcy5FT0wpO1xuICBmdW5jdGlvbiBleHRyYWN0Q29udGVudCAoc3RhcnRJZHgpIHtcbiAgICBsZXQgaWR4ID0gc3RhcnRJZHg7XG4gICAgY29uc3Qgc3RhcnRDaGFyUG9zID0gYWxsTGluZXNbc3RhcnRJZHhdLmluZGV4T2YoJ1wiJyk7XG4gICAgaWYgKHN0YXJ0Q2hhclBvcyA8IDApIHtcbiAgICAgIHJldHVybiBbbnVsbCwgaWR4XTtcbiAgICB9XG4gICAgbGV0IHJlc3VsdCA9ICcnO1xuICAgIHdoaWxlIChpZHggPCBhbGxMaW5lcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHRlcm1pbmF0aW9uQ2hhck1hdGNoID0gL1wiJC8uZXhlYyhhbGxMaW5lc1tpZHhdKTtcbiAgICAgIGlmICh0ZXJtaW5hdGlvbkNoYXJNYXRjaCkge1xuICAgICAgICBjb25zdCB0ZXJtaW5hdGlvbkNoYXJQb3MgPSB0ZXJtaW5hdGlvbkNoYXJNYXRjaC5pbmRleDtcbiAgICAgICAgaWYgKHN0YXJ0SWR4ID09PSBpZHgpIHtcbiAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgYWxsTGluZXNbaWR4XS5zdWJzdHJpbmcoc3RhcnRDaGFyUG9zICsgMSwgdGVybWluYXRpb25DaGFyUG9zKSxcbiAgICAgICAgICAgIGlkeFxuICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBgJHtyZXN1bHR9XFxcXG4ke18udHJpbVN0YXJ0KGFsbExpbmVzW2lkeF0uc3Vic3RyaW5nKDAsIHRlcm1pbmF0aW9uQ2hhclBvcykpfWAsXG4gICAgICAgICAgaWR4LFxuICAgICAgICBdO1xuICAgICAgfVxuICAgICAgaWYgKGlkeCA+IHN0YXJ0SWR4KSB7XG4gICAgICAgIHJlc3VsdCArPSBgXFxcXG4ke18udHJpbVN0YXJ0KGFsbExpbmVzW2lkeF0pfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gYWxsTGluZXNbaWR4XS5zdWJzdHJpbmcoc3RhcnRDaGFyUG9zICsgMSk7XG4gICAgICB9XG4gICAgICArK2lkeDtcbiAgICB9XG4gICAgcmV0dXJuIFtyZXN1bHQsIGlkeF07XG4gIH1cblxuICBjb25zdCBhcGtTdHJpbmdzID0ge307XG4gIGxldCBjdXJyZW50UmVzb3VyY2VJZCA9IG51bGw7XG4gIGxldCBpc0luUGx1cmFsR3JvdXAgPSBmYWxzZTtcbiAgbGV0IGlzSW5DdXJyZW50Q29uZmlnID0gZmFsc2U7XG4gIGxldCBsaW5lSW5kZXggPSAwO1xuICB3aGlsZSAobGluZUluZGV4IDwgYWxsTGluZXMubGVuZ3RoKSB7XG4gICAgY29uc3QgdHJpbW1lZExpbmUgPSBhbGxMaW5lc1tsaW5lSW5kZXhdLnRyaW0oKTtcbiAgICBpZiAoXy5pc0VtcHR5KHRyaW1tZWRMaW5lKSkge1xuICAgICAgKytsaW5lSW5kZXg7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoWyd0eXBlJywgJ1BhY2thZ2UnXS5zb21lKCh4KSA9PiB0cmltbWVkTGluZS5zdGFydHNXaXRoKHgpKSkge1xuICAgICAgY3VycmVudFJlc291cmNlSWQgPSBudWxsO1xuICAgICAgaXNJblBsdXJhbEdyb3VwID0gZmFsc2U7XG4gICAgICBpc0luQ3VycmVudENvbmZpZyA9IGZhbHNlO1xuICAgICAgKytsaW5lSW5kZXg7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgncmVzb3VyY2UnKSkge1xuICAgICAgaXNJblBsdXJhbEdyb3VwID0gZmFsc2U7XG4gICAgICBjdXJyZW50UmVzb3VyY2VJZCA9IG51bGw7XG4gICAgICBpc0luQ3VycmVudENvbmZpZyA9IGZhbHNlO1xuXG4gICAgICBpZiAodHJpbW1lZExpbmUuaW5jbHVkZXMoJ3N0cmluZy8nKSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IC9zdHJpbmdcXC8oXFxTKykvLmV4ZWModHJpbW1lZExpbmUpO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICBjdXJyZW50UmVzb3VyY2VJZCA9IG1hdGNoWzFdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLmluY2x1ZGVzKCdwbHVyYWxzLycpKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gL3BsdXJhbHNcXC8oXFxTKykvLmV4ZWModHJpbW1lZExpbmUpO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICBjdXJyZW50UmVzb3VyY2VJZCA9IG1hdGNoWzFdO1xuICAgICAgICAgIGlzSW5QbHVyYWxHcm91cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgICsrbGluZUluZGV4O1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRSZXNvdXJjZUlkKSB7XG4gICAgICBpZiAoaXNJblBsdXJhbEdyb3VwKSB7XG4gICAgICAgIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcoJykpIHtcbiAgICAgICAgICBpc0luQ3VycmVudENvbmZpZyA9IHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoYCgke2NvbmZpZ01hcmtlcn0pYCk7XG4gICAgICAgICAgKytsaW5lSW5kZXg7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzSW5DdXJyZW50Q29uZmlnKSB7XG4gICAgICAgICAgY29uc3QgW2NvbnRlbnQsIGlkeF0gPSBleHRyYWN0Q29udGVudChsaW5lSW5kZXgpO1xuICAgICAgICAgIGxpbmVJbmRleCA9IGlkeDtcbiAgICAgICAgICBpZiAoXy5pc1N0cmluZyhjb250ZW50KSkge1xuICAgICAgICAgICAgYXBrU3RyaW5nc1tjdXJyZW50UmVzb3VyY2VJZF0gPSBbXG4gICAgICAgICAgICAgIC4uLihhcGtTdHJpbmdzW2N1cnJlbnRSZXNvdXJjZUlkXSB8fCBbXSksXG4gICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICBdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKGAoJHtjb25maWdNYXJrZXJ9KWApKSB7XG4gICAgICAgIGNvbnN0IFtjb250ZW50LCBpZHhdID0gZXh0cmFjdENvbnRlbnQobGluZUluZGV4KTtcbiAgICAgICAgbGluZUluZGV4ID0gaWR4O1xuICAgICAgICBpZiAoXy5pc1N0cmluZyhjb250ZW50KSkge1xuICAgICAgICAgIGFwa1N0cmluZ3NbY3VycmVudFJlc291cmNlSWRdID0gY29udGVudDtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50UmVzb3VyY2VJZCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgICsrbGluZUluZGV4O1xuICB9XG4gIHJldHVybiBhcGtTdHJpbmdzO1xufVxuXG4vKipcbiAqIEZvcm1hdHMgdGhlIGNvbmZpZyBtYXJrZXIsIHdoaWNoIGlzIHRoZW4gcGFzc2VkIHRvIHBhcnNlLi4gbWV0aG9kc1xuICogdG8gbWFrZSBpdCBjb21wYXRpYmxlIHdpdGggcmVzb3VyY2UgZm9ybWF0cyBnZW5lcmF0ZWQgYnkgYWFwdCgyKSB0b29sXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY29uZmlnc0dldHRlciBUaGUgZnVuY3Rpb24gd2hvc2UgcmVzdWx0IGlzIGEgbGlzdFxuICogb2YgYXBrIGNvbmZpZ3NcbiAqIEBwYXJhbSB7c3RyaW5nfSBkZXNpcmVkTWFya2VyIFRoZSBkZXNpcmVkIGNvbmZpZyBtYXJrZXIgdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBkZWZhdWx0TWFya2VyIFRoZSBkZWZhdWx0IGNvbmZpZyBtYXJrZXIgdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGZvcm1hdHRlZCBjb25maWcgbWFya2VyXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZvcm1hdENvbmZpZ01hcmtlciAoY29uZmlnc0dldHRlciwgZGVzaXJlZE1hcmtlciwgZGVmYXVsdE1hcmtlcikge1xuICBsZXQgY29uZmlnTWFya2VyID0gZGVzaXJlZE1hcmtlciB8fCBkZWZhdWx0TWFya2VyO1xuICBpZiAoY29uZmlnTWFya2VyLmluY2x1ZGVzKCctJykgJiYgIWNvbmZpZ01hcmtlci5pbmNsdWRlcygnLXInKSkge1xuICAgIGNvbmZpZ01hcmtlciA9IGNvbmZpZ01hcmtlci5yZXBsYWNlKCctJywgJy1yJyk7XG4gIH1cbiAgY29uc3QgY29uZmlncyA9IGF3YWl0IGNvbmZpZ3NHZXR0ZXIoKTtcbiAgbG9nLmRlYnVnKGBSZXNvdXJjZSBjb25maWd1cmF0aW9uczogJHtKU09OLnN0cmluZ2lmeShjb25maWdzKX1gKTtcbiAgLy8gQXNzdW1lIHRoZSAnZW4nIGNvbmZpZ3VyYXRpb24gaXMgdGhlIGRlZmF1bHQgb25lXG4gIGlmIChjb25maWdNYXJrZXIudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCdlbicpXG4gICAgJiYgIWNvbmZpZ3Muc29tZSgoeCkgPT4geC50cmltKCkgPT09IGNvbmZpZ01hcmtlcikpIHtcbiAgICBsb2cuZGVidWcoYFJlc291cmNlIGNvbmZpZ3VyYXRpb24gbmFtZSAnJHtjb25maWdNYXJrZXJ9JyBpcyB1bmtub3duLiBgICtcbiAgICAgIGBSZXBsYWNpbmcgaXQgd2l0aCAnJHtkZWZhdWx0TWFya2VyfSdgKTtcbiAgICBjb25maWdNYXJrZXIgPSBkZWZhdWx0TWFya2VyO1xuICB9IGVsc2Uge1xuICAgIGxvZy5kZWJ1ZyhgU2VsZWN0ZWQgY29uZmlndXJhdGlvbjogJyR7Y29uZmlnTWFya2VyfSdgKTtcbiAgfVxuICByZXR1cm4gY29uZmlnTWFya2VyO1xufVxuXG4vKipcbiAqIFBhcnNlcyB0aGUgb3V0cHV0IGluIEpTT04gZm9ybWF0IHJldHJpZXZlZCBmcm9tXG4gKiB0aGUgY29ycmVzcG9uZGluZyBBcHBpdW0gU2V0dGluZ3MgYnJvYWRjYXN0IGNhbGxzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG91dHB1dCBUaGUgYWN0dWFsIGNvbW1hbmQgb3V0cHV0XG4gKiBAcGFyYW0ge3N0cmluZ30gZW50aXR5TmFtZSBUaGUgbmFtZSBvZiB0aGUgZW50aXR5IHdoaWNoIGlzXG4gKiBnb2luZyB0byBiZSBwYXJzZWRcbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBwYXJzZWQgSlNPTiBvYmplY3RcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgb3V0cHV0IGNhbm5vdCBiZSBwYXJzZWRcbiAqIGFzIGEgdmFsaWQgSlNPTlxuICovXG5mdW5jdGlvbiBwYXJzZUpzb25EYXRhIChvdXRwdXQsIGVudGl0eU5hbWUpIHtcbiAgaWYgKCEvXFxicmVzdWx0PS0xXFxiLy50ZXN0KG91dHB1dCkgfHwgIS9cXGJkYXRhPVwiLy50ZXN0KG91dHB1dCkpIHtcbiAgICBsb2cuZGVidWcob3V0cHV0KTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCByZXRyaWV2ZSAke2VudGl0eU5hbWV9IGZyb20gdGhlIGRldmljZS4gYCArXG4gICAgICAnQ2hlY2sgdGhlIHNlcnZlciBsb2cgZm9yIG1vcmUgZGV0YWlscycpO1xuICB9XG4gIGNvbnN0IG1hdGNoID0gL1xcYmRhdGE9KFwiLispLy5leGVjKG91dHB1dCk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICBsb2cuZGVidWcob3V0cHV0KTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBwYXJzZSAke2VudGl0eU5hbWV9IGZyb20gdGhlIGNvbW1hbmQgb3V0cHV0LiBgICtcbiAgICAgICdDaGVjayB0aGUgc2VydmVyIGxvZyBmb3IgbW9yZSBkZXRhaWxzJyk7XG4gIH1cbiAgY29uc3QganNvblN0ciA9IF8udHJpbShtYXRjaFsxXSkucmVwbGFjZSgvKF5cIil8KFwiJCkvZywgJycpO1xuICB0cnkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKGpzb25TdHIpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nLmRlYnVnKGpzb25TdHIpO1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHBhcnNlICR7ZW50aXR5TmFtZX0gZnJvbSB0aGUgcmVzdWx0aW5nIGRhdGEgc3RyaW5nLiBgICtcbiAgICAgICdDaGVjayB0aGUgc2VydmVyIGxvZyBmb3IgbW9yZSBkZXRhaWxzJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSBnaXZlbiBsYW5ndWFnZSBhbmQgY291bnRyeSBhYmJyZXZpYXRpb25zXG4gKiB0byBBVkQgYXJndW1lbnRzIGFycmF5XG4gKlxuICogQHBhcmFtIHs/c3RyaW5nfSBsYW5ndWFnZSBMYW5ndWFnZSBuYW1lLCBmb3IgZXhhbXBsZSAnZnInXG4gKiBAcGFyYW0gez9zdHJpbmd9IGNvdW50cnkgQ291bnRyeSBuYW1lLCBmb3IgZXhhbXBsZSAnQ0EnXG4gKiBAcmV0dXJucyB7QXJyYXk8c3RyaW5nPn0gVGhlIGdlbmVyYXRlZCBhcmd1bWVudHMuIFRoZVxuICogcmVzdWx0aW5nIGFycmF5IG1pZ2h0IGJlIGVtcHR5IGlmIGJvdGggYXJndW1lbnRzIGFyZSBlbXB0eVxuICovXG5mdW5jdGlvbiB0b0F2ZExvY2FsZUFyZ3MgKGxhbmd1YWdlLCBjb3VudHJ5KSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBpZiAobGFuZ3VhZ2UgJiYgXy5pc1N0cmluZyhsYW5ndWFnZSkpIHtcbiAgICByZXN1bHQucHVzaCgnLXByb3AnLCBgcGVyc2lzdC5zeXMubGFuZ3VhZ2U9JHtsYW5ndWFnZS50b0xvd2VyQ2FzZSgpfWApO1xuICB9XG4gIGlmIChjb3VudHJ5ICYmIF8uaXNTdHJpbmcoY291bnRyeSkpIHtcbiAgICByZXN1bHQucHVzaCgnLXByb3AnLCBgcGVyc2lzdC5zeXMuY291bnRyeT0ke2NvdW50cnkudG9VcHBlckNhc2UoKX1gKTtcbiAgfVxuICBsZXQgbG9jYWxlO1xuICBpZiAoXy5pc1N0cmluZyhsYW5ndWFnZSkgJiYgXy5pc1N0cmluZyhjb3VudHJ5KSAmJiBsYW5ndWFnZSAmJiBjb3VudHJ5KSB7XG4gICAgbG9jYWxlID0gbGFuZ3VhZ2UudG9Mb3dlckNhc2UoKSArICctJyArIGNvdW50cnkudG9VcHBlckNhc2UoKTtcbiAgfSBlbHNlIGlmIChsYW5ndWFnZSAmJiBfLmlzU3RyaW5nKGxhbmd1YWdlKSkge1xuICAgIGxvY2FsZSA9IGxhbmd1YWdlLnRvTG93ZXJDYXNlKCk7XG4gIH0gZWxzZSBpZiAoY291bnRyeSAmJiBfLmlzU3RyaW5nKGNvdW50cnkpKSB7XG4gICAgbG9jYWxlID0gY291bnRyeTtcbiAgfVxuICBpZiAobG9jYWxlKSB7XG4gICAgcmVzdWx0LnB1c2goJy1wcm9wJywgYHBlcnNpc3Quc3lzLmxvY2FsZT0ke2xvY2FsZX1gKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgZnVsbCBwYXRoIHRvIHRoZSBBbmRyb2lkIHByZWZlcmVuY2VzIHJvb3RcbiAqXG4gKiBAcmV0dXJucyB7P3N0cmluZ30gVGhlIGZ1bGwgcGF0aCB0byB0aGUgZm9sZGVyIG9yIGBudWxsYCBpZiB0aGUgZm9sZGVyIGNhbm5vdCBiZSBmb3VuZFxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRBbmRyb2lkUHJlZnNSb290ICgpIHtcbiAgbGV0IGxvY2F0aW9uID0gcHJvY2Vzcy5lbnYuQU5EUk9JRF9FTVVMQVRPUl9IT01FO1xuICBpZiAoYXdhaXQgZGlyRXhpc3RzKGxvY2F0aW9uKSkge1xuICAgIHJldHVybiBsb2NhdGlvbjtcbiAgfVxuXG4gIGlmIChsb2NhdGlvbikge1xuICAgIGxvZy53YXJuKGBUaGUgdmFsdWUgb2YgdGhlIEFORFJPSURfRU1VTEFUT1JfSE9NRSBlbnZpcm9ubWVudCB2YXJpYWJsZSAnJHtsb2NhdGlvbn0nIGlzIG5vdCBhbiBleGlzdGluZyBkaXJlY3RvcnlgKTtcbiAgfVxuXG4gIGNvbnN0IGhvbWUgPSBwcm9jZXNzLmVudi5IT01FIHx8IHByb2Nlc3MuZW52LlVTRVJQUk9GSUxFO1xuICBpZiAoaG9tZSkge1xuICAgIGxvY2F0aW9uID0gcGF0aC5yZXNvbHZlKGhvbWUsICcuYW5kcm9pZCcpO1xuICB9XG5cbiAgaWYgKCFhd2FpdCBkaXJFeGlzdHMobG9jYXRpb24pKSB7XG4gICAgbG9nLmRlYnVnKGBBbmRyb2lkIGNvbmZpZyByb290ICcke2xvY2F0aW9ufScgaXMgbm90IGFuIGV4aXN0aW5nIGRpcmVjdG9yeWApO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIGxvY2F0aW9uO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgcGF0aCBleGlzdHMgb24gdGhlIGZpbGVzeXN0ZW0gYW5kIGlzIGEgZGlyZWN0b3J5XG4gKlxuICogQHBhcmFtIHs/c3RyaW5nfSBsb2NhdGlvbiBUaGUgZnVsbCBwYXRoIHRvIHRoZSBkaXJlY3RvcnlcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5hc3luYyBmdW5jdGlvbiBkaXJFeGlzdHMgKGxvY2F0aW9uKSB7XG4gIHJldHVybiBsb2NhdGlvblxuICAgICYmIGF3YWl0IGZzLmV4aXN0cyhsb2NhdGlvbilcbiAgICAmJiAoYXdhaXQgZnMuc3RhdChsb2NhdGlvbikpLmlzRGlyZWN0b3J5KCk7XG59XG5cbi8qKlxuICogRXNjYXBlcyBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gY29tbWFuZCBsaW5lIGFyZ3VtZW50cy5cbiAqIFRoaXMgaXMgbmVlZGVkIHRvIGF2b2lkIHBvc3NpYmxlIGlzc3VlcyB3aXRoIGhvdyBzeXN0ZW0gYHNwYXduYFxuICogY2FsbCBoYW5kbGVzIHRoZW0uXG4gKiBTZWUgaHR0cHM6Ly9kaXNjdXNzLmFwcGl1bS5pby90L2hvdy10by1tb2RpZnktd2QtcHJveHktYW5kLXVpYXV0b21hdG9yMi1zb3VyY2UtY29kZS10by1zdXBwb3J0LXVuaWNvZGUvMzM0NjZcbiAqIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGFyZyBOb24tZXNjYXBlZCBhcmd1bWVudCBzdHJpbmdcbiAqIEByZXR1cm5zIFRoZSBlc2NhcGVkIGFyZ3VtZW50XG4gKi9cbmZ1bmN0aW9uIGVzY2FwZVNoZWxsQXJnIChhcmcpIHtcbiAgYXJnID0gYCR7YXJnfWA7XG4gIGlmIChzeXN0ZW0uaXNXaW5kb3dzKCkpIHtcbiAgICByZXR1cm4gL1smfF5cXHNdLy50ZXN0KGFyZykgPyBgXCIke2FyZy5yZXBsYWNlKC9cIi9nLCAnXCJcIicpfVwiYCA6IGFyZztcbiAgfVxuICByZXR1cm4gYXJnLnJlcGxhY2UoLyYvZywgJ1xcXFwmJyk7XG59XG5cbi8qKlxuICogUGFyc2VzIHRoZSBuYW1lIG9mIGxhdW5jaGFibGUgcGFja2FnZSBhY3Rpdml0eVxuICogZnJvbSBkdW1wc3lzIG91dHB1dC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZHVtcHN5cyB0aGUgYWN0dWFsIGR1bXBzeXMgb3V0cHV0XG4gKiBAcmV0dXJucyB7c3RyaW5nW119IEVpdGhlciB0aGUgZnVsbHkgcXVhbGlmaWVkXG4gKiBhY3Rpdml0eSBuYW1lIGFzIGEgc2luZ2xlIGxpc3QgaXRlbSBvciBhbiBlbXB0eSBsaXN0IGlmIG5vdGhpbmcgY291bGQgYmUgcGFyc2VkLlxuICogSW4gQW5kcm9pZCA2IGFuZCBvbGRlciB0aGVyZSBpcyBubyByZWxpYWJsZSB3YXkgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgY2F0ZWdvcnkgbmFtZSBmb3IgdGhlIGdpdmVuIGFjdGl2aXR5LCBzbyB0aGlzIEFQSSBqdXN0XG4gKiByZXR1cm5zIGFsbCBhY3Rpdml0eSBuYW1lcyBiZWxvbmdpbmcgdG8gJ2FuZHJvaWQuaW50ZW50LmFjdGlvbi5NQUlOJ1xuICogd2l0aCB0aGUgZXhwZWN0YXRpb24gdGhhdCB0aGUgYXBwIG1hbmlmZXN0IGNvdWxkIGJlIHBhcnNlZCBuZXh0XG4gKiBpbiBvcmRlciB0byBkZXRlcm1pbmUgY2F0ZWdvcnkgbmFtZXMgZm9yIHRoZXNlLlxuICovXG5mdW5jdGlvbiBwYXJzZUxhdW5jaGFibGVBY3Rpdml0eU5hbWVzIChkdW1wc3lzKSB7XG4gIGNvbnN0IG1haW5BY3Rpdml0eU5hbWVSZSA9IG5ldyBSZWdFeHAoYF5cXFxccyoke18uZXNjYXBlUmVnRXhwKE1BSU5fQUNUSU9OKX06JGApO1xuICBjb25zdCBjYXRlZ29yeU5hbWVSZSA9IC9eXFxzKkNhdGVnb3J5OlxccytcIihbYS16QS1aMC05Ll8vLV0rKVwiJC87XG4gIGNvbnN0IGJsb2NrcyA9IFtdO1xuICBsZXQgYmxvY2tTdGFydEluZGVudDtcbiAgbGV0IGJsb2NrID0gW107XG4gIGZvciAoY29uc3QgbGluZSBvZiBkdW1wc3lzLnNwbGl0KCdcXG4nKS5tYXAoXy50cmltRW5kKSkge1xuICAgIGNvbnN0IGN1cnJlbnRJbmRlbnQgPSBsaW5lLmxlbmd0aCAtIF8udHJpbVN0YXJ0KGxpbmUpLmxlbmd0aDtcbiAgICBpZiAobWFpbkFjdGl2aXR5TmFtZVJlLnRlc3QobGluZSkpIHtcbiAgICAgIGJsb2NrU3RhcnRJbmRlbnQgPSBjdXJyZW50SW5kZW50O1xuICAgICAgaWYgKCFfLmlzRW1wdHkoYmxvY2spKSB7XG4gICAgICAgIGJsb2Nrcy5wdXNoKGJsb2NrKTtcbiAgICAgICAgYmxvY2sgPSBbXTtcbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoXy5pc05pbChibG9ja1N0YXJ0SW5kZW50KSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRJbmRlbnQgPiBibG9ja1N0YXJ0SW5kZW50KSB7XG4gICAgICBibG9jay5wdXNoKGxpbmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIV8uaXNFbXB0eShibG9jaykpIHtcbiAgICAgICAgYmxvY2tzLnB1c2goYmxvY2spO1xuICAgICAgICBibG9jayA9IFtdO1xuICAgICAgfVxuICAgICAgYmxvY2tTdGFydEluZGVudCA9IG51bGw7XG4gICAgfVxuICB9XG4gIGlmICghXy5pc0VtcHR5KGJsb2NrKSkge1xuICAgIGJsb2Nrcy5wdXNoKGJsb2NrKTtcbiAgfVxuXG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBmb3IgKGNvbnN0IGl0ZW0gb2YgYmxvY2tzKSB7XG4gICAgbGV0IGhhc0NhdGVnb3J5ID0gZmFsc2U7XG4gICAgbGV0IGlzTGF1bmNoZXJDYXRlZ29yeSA9IGZhbHNlO1xuICAgIGZvciAoY29uc3QgbGluZSBvZiBpdGVtKSB7XG4gICAgICBjb25zdCBtYXRjaCA9IGNhdGVnb3J5TmFtZVJlLmV4ZWMobGluZSk7XG4gICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBoYXNDYXRlZ29yeSA9IHRydWU7XG4gICAgICBpc0xhdW5jaGVyQ2F0ZWdvcnkgPSBtYXRjaFsxXSA9PT0gTEFVTkNIRVJfQ0FURUdPUlk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgLy8gT24gb2xkZXIgQW5kcm9pZCB2ZXJzaW9ucyB0aGUgY2F0ZWdvcnkgbmFtZVxuICAgIC8vIG1pZ2h0IG5vdCBiZSBsaXN0ZWQsIHNvIHdlIGp1c3QgdHJ5IHRvIGZldGNoXG4gICAgLy8gYWxsIG1hdGNoZXMgaW5zdGVhZFxuICAgIGlmIChoYXNDYXRlZ29yeSAmJiAhaXNMYXVuY2hlckNhdGVnb3J5KSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGFjdGl2aXR5TmFtZVN0ciBvZiBpdGVtLm1hcChfLnRyaW0pLmZpbHRlcihCb29sZWFuKSkge1xuICAgICAgY29uc3QgZnFBY3Rpdml0eU5hbWUgPSBhY3Rpdml0eU5hbWVTdHIuc3BsaXQoL1xccysvKVsxXTtcbiAgICAgIGlmICghbWF0Y2hDb21wb25lbnROYW1lKGZxQWN0aXZpdHlOYW1lKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzTGF1bmNoZXJDYXRlZ29yeSkge1xuICAgICAgICByZXR1cm4gW2ZxQWN0aXZpdHlOYW1lXTtcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5wdXNoKGZxQWN0aXZpdHlOYW1lKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZ2l2ZW4gc3RyaW5nIGlzIGEgdmFsaWQgY29tcG9uZW50IG5hbWVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NTdHJpbmcgVGhlIHN0cmluZyB0byB2ZXJpZnlcbiAqIEByZXR1cm4gez9BcnJheTxNYXRjaD59IFRoZSByZXN1bHQgb2YgUmVnZXhwLmV4ZWMgb3BlcmF0aW9uXG4gKiBvciBfbnVsbF8gaWYgbm8gbWF0Y2hlcyBhcmUgZm91bmRcbiAqL1xuZnVuY3Rpb24gbWF0Y2hDb21wb25lbnROYW1lIChjbGFzc1N0cmluZykge1xuICAvLyBzb21lLnBhY2thZ2Uvc29tZS5wYWNrYWdlLkFjdGl2aXR5XG4gIHJldHVybiAvXlthLXowLTkuL19dKyQvaS5leGVjKGNsYXNzU3RyaW5nKTtcbn1cblxuZXhwb3J0IHtcbiAgZ2V0QW5kcm9pZFBsYXRmb3JtQW5kUGF0aCwgdW56aXBGaWxlLFxuICBnZXRJTUVMaXN0RnJvbU91dHB1dCwgZ2V0SmF2YUZvck9zLCBpc1Nob3dpbmdMb2Nrc2NyZWVuLCBpc0N1cnJlbnRGb2N1c09uS2V5Z3VhcmQsXG4gIGdldFN1cmZhY2VPcmllbnRhdGlvbiwgaXNTY3JlZW5PbkZ1bGx5LCBidWlsZFN0YXJ0Q21kLCBnZXRKYXZhSG9tZSxcbiAgZ2V0U2RrVG9vbHNWZXJzaW9uLCBnZXRBcGtzaWduZXJGb3JPcywgZ2V0QnVpbGRUb29sc0RpcnMsXG4gIGdldEFwa2FuYWx5emVyRm9yT3MsIGdldE9wZW5Tc2xGb3JPcywgZXh0cmFjdE1hdGNoaW5nUGVybWlzc2lvbnMsIEFQS1NfRVhURU5TSU9OLFxuICBBUEtfSU5TVEFMTF9USU1FT1VULCBBUEtTX0lOU1RBTExfVElNRU9VVCwgYnVpbGRJbnN0YWxsQXJncywgQVBLX0VYVEVOU0lPTixcbiAgREVGQVVMVF9BREJfRVhFQ19USU1FT1VULCBwYXJzZU1hbmlmZXN0LCBwYXJzZUFhcHRTdHJpbmdzLCBwYXJzZUFhcHQyU3RyaW5ncyxcbiAgZm9ybWF0Q29uZmlnTWFya2VyLCBwYXJzZUpzb25EYXRhLCB1bnNpZ25BcGssIHRvQXZkTG9jYWxlQXJncywgcmVxdWlyZVNka1Jvb3QsXG4gIGdldFNka1Jvb3RGcm9tRW52LCBnZXRBbmRyb2lkUHJlZnNSb290LCBkaXJFeGlzdHMsIGVzY2FwZVNoZWxsQXJnLFxuICBwYXJzZUxhdW5jaGFibGVBY3Rpdml0eU5hbWVzLCBtYXRjaENvbXBvbmVudE5hbWUsIGdldFJlc291cmNlUGF0aFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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