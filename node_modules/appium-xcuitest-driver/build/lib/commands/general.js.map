{"version":3,"file":"general.js","names":["_lodash","_interopRequireDefault","require","_driver","_support","_momentTimezone","_appiumIosDevice","_teen_process","_appUtils","commands","helpers","extensions","exports","MOMENT_FORMAT_ISO8601","active","isWebContext","cacheWebElements","executeAtom","proxyCommand","background","seconds","homescreen","deactivateApp","endpoint","params","selectEndpoint","timeoutSeconds","util","hasValue","isNaN","duration","parseFloat","_","has","timeout","errors","InvalidArgumentError","JSON","stringify","touchId","match","mobileSendBiometricMatch","toggleEnrollTouchId","isEnabled","mobileEnrollBiometric","getWindowSizeWeb","getWindowSizeNative","getWindowSize","windowHandle","NotYetImplementedError","getDeviceTime","format","log","info","isRealDevice","cmd","args","inputFormat","stdout","exec","trim","debug","join","parsedTimestamp","moment","utc","isValid","warn","utcOffset","_tzm","timestamp","timeZone","utilities","opts","udid","unix","Math","abs","includes","tz","mobileGetDeviceTime","getWindowRect","width","height","x","y","hideKeyboard","strategy","possibleKeys","keyNames","compact","slice","map","push","getStrings","language","stringFile","parseLocalizableStrings","Object","assign","strictMode","removeApp","bundleId","mobileRemoveApp","launchApp","appName","app","start","err","closeApp","stop","keys","UnknownError","el","unwrapElement","isEmpty","NoSuchElementError","setValue","setUrl","url","setCurrentUrl","curWebFrames","remote","navToUrl","device","simctl","openUrl","getViewportRect","scale","getDevicePixelRatio","statusBarHeight","round","getStatusBarHeight","windowSize","left","top","getScreenInfo","statusBarSize","mobilePressButton","name","durationSeconds","isNil","isNumber","mobileSiriCommand","text","_default","default"],"sources":["../../../lib/commands/general.js"],"sourcesContent":["import _ from 'lodash';\nimport { errors } from 'appium/driver';\nimport { util } from 'appium/support';\nimport moment from 'moment-timezone';\nimport { utilities } from 'appium-ios-device';\nimport { exec } from 'teen_process';\nimport { parseLocalizableStrings } from '../app-utils';\n\nlet commands = {}, helpers = {}, extensions = {};\n\nconst MOMENT_FORMAT_ISO8601 = 'YYYY-MM-DDTHH:mm:ssZ';\n\n\ncommands.active = async function active () {\n  if (this.isWebContext()) {\n    return this.cacheWebElements(await this.executeAtom('active_element', []));\n  }\n  return await this.proxyCommand(`/element/active`, 'GET');\n};\n\n/**\n * Close app (simulate device home button). It is possible to restore\n * the app after the timeout or keep it minimized based on the parameter value.\n *\n * @param {?number|Object} seconds\n * - any positive number of seconds: come back after X seconds\n * - any negative number of seconds or zero: never come back\n * - undefined/null: never come back\n * - {timeout: 5000}: come back after 5 seconds\n * - {timeout: null}, {timeout: -2}: never come back\n */\ncommands.background = async function background (seconds) {\n  const homescreen = '/wda/homescreen';\n  const deactivateApp = '/wda/deactivateApp';\n\n  let endpoint;\n  let params = {};\n  const selectEndpoint = (timeoutSeconds) => {\n    if (!util.hasValue(timeoutSeconds)) {\n      endpoint = homescreen;\n    } else if (!isNaN(timeoutSeconds)) {\n      const duration = parseFloat(timeoutSeconds);\n      if (duration >= 0) {\n        params = {duration};\n        endpoint = deactivateApp;\n      } else {\n        endpoint = homescreen;\n      }\n    }\n  };\n  if (_.has(seconds, 'timeout')) {\n    const {timeout} = seconds;\n    selectEndpoint(isNaN(timeout) ? timeout : parseFloat(timeout) / 1000.0);\n  } else {\n    selectEndpoint(seconds);\n  }\n  if (!endpoint) {\n    throw new errors.InvalidArgumentError(`Argument value is expected to be a valid number. ` +\n      `${JSON.stringify(seconds)} has been provided instead`);\n  }\n  return await this.proxyCommand(endpoint, 'POST', params, endpoint !== homescreen);\n};\n\ncommands.touchId = async function touchId (match = true) {\n  await this.mobileSendBiometricMatch({match});\n};\n\ncommands.toggleEnrollTouchId = async function toggleEnrollTouchId (isEnabled = true) {\n  await this.mobileEnrollBiometric({isEnabled});\n};\n\nhelpers.getWindowSizeWeb = async function getWindowSizeWeb () {\n  return await this.executeAtom('get_window_size', []);\n};\n\nhelpers.getWindowSizeNative = async function getWindowSizeNative () {\n  return await this.proxyCommand(`/window/size`, 'GET');\n};\n\ncommands.getWindowSize = async function getWindowSize (windowHandle = 'current') {\n  if (windowHandle !== 'current') {\n    throw new errors.NotYetImplementedError('Currently only getting current window size is supported.');\n  }\n\n  if (!this.isWebContext()) {\n    return await this.getWindowSizeNative();\n  } else {\n    return await this.getWindowSizeWeb();\n  }\n};\n\n/**\n * Retrieves the current device's timestamp.\n *\n * @param {string} format - The set of format specifiers. Read\n *                          https://momentjs.com/docs/ to get the full list of supported\n *                          datetime format specifiers. The default format is\n *                          `YYYY-MM-DDTHH:mm:ssZ`, which complies to ISO-8601\n * @returns Formatted datetime string or the raw command output if formatting fails\n */\ncommands.getDeviceTime = async function getDeviceTime (format = MOMENT_FORMAT_ISO8601) {\n  this.log.info('Attempting to capture iOS device date and time');\n  if (!this.isRealDevice()) {\n    this.log.info('On simulator. Assuming device time is the same as host time');\n    const cmd = 'date';\n    const args = ['+%Y-%m-%dT%H:%M:%S%z'];\n    const inputFormat = 'YYYY-MM-DDTHH:mm:ssZZ';\n    const stdout = (await exec(cmd, args)).stdout.trim();\n    this.log.debug(`Got the following output out of '${cmd} ${args.join(' ')}': ${stdout}`);\n    const parsedTimestamp = moment.utc(stdout, inputFormat);\n    if (!parsedTimestamp.isValid()) {\n      this.log.warn(`Cannot parse the timestamp '${stdout}' returned by '${cmd}' command. Returning it as is`);\n      return stdout;\n    }\n    return parsedTimestamp.utcOffset(parsedTimestamp._tzm || 0).format(format);\n  }\n\n  const {\n    timestamp,\n    utcOffset,\n    timeZone,\n  } = await utilities.getDeviceTime(this.opts.udid);\n  this.log.debug(`timestamp: ${timestamp}, utcOffset: ${utcOffset}, timeZone: ${timeZone}`);\n  const utc = moment.unix(timestamp).utc();\n  // at some point of time Apple started to return timestamps\n  // in utcOffset instead of actual UTC offsets\n  if (Math.abs(utcOffset) <= 12 * 60) {\n    return utc.utcOffset(utcOffset).format(format);\n  }\n  // timeZone could either be a time zone name or\n  // an UTC offset in seconds\n  if (_.includes(timeZone, '/')) {\n    return utc.tz(timeZone).format(format);\n  }\n  if (Math.abs(timeZone) <= 12 * 60 * 60) {\n    return utc.utcOffset(timeZone / 60).format(format);\n  }\n  this.log.warn('Did not know how to apply the UTC offset. Returning the timestamp without it');\n  return utc.format(format);\n};\n\n/**\n * @typedef {Object} DeviceTimeOptions\n * @property {string} format [YYYY-MM-DDTHH:mm:ssZ] - See getDeviceTime#format\n */\n\n/**\n * Retrieves the current device time\n *\n * @param {DeviceTimeOptions} opts\n * @return {string} Formatted datetime string or the raw command output if formatting fails\n */\ncommands.mobileGetDeviceTime = async function mobileGetDeviceTime (opts = {}) {\n  return await this.getDeviceTime(opts.format);\n};\n\n// For W3C\ncommands.getWindowRect = async function getWindowRect () {\n  const {width, height} = await this.getWindowSize();\n  return {\n    width,\n    height,\n    x: 0,\n    y: 0\n  };\n};\n\ncommands.hideKeyboard = async function hideKeyboard (strategy, ...possibleKeys) {\n  // last parameter is the session id\n  const keyNames = _.compact(possibleKeys.slice(0, -1)).map((x) => `${x}`);\n  if (!keyNames.includes('done')) {\n    keyNames.push('done');\n  }\n  await this.proxyCommand('/wda/keyboard/dismiss', 'POST', {keyNames});\n};\n\ncommands.getStrings = async function getStrings (language, stringFile = null) {\n  this.log.debug(`Gettings strings for language '${language}' and string file '${stringFile}'`);\n  return await parseLocalizableStrings(Object.assign({}, this.opts, {\n    language,\n    stringFile,\n    strictMode: true,\n  }));\n};\n\ncommands.removeApp = async function removeApp (bundleId) {\n  return await this.mobileRemoveApp({bundleId});\n};\n\ncommands.launchApp = async function launchApp () {\n  const appName = this.opts.app || this.opts.bundleId;\n  try {\n    await this.start();\n    this.log.info(`Successfully launched the '${appName}' app.`);\n  } catch (err) {\n    this.log.warn(`Something went wrong while launching the '${appName}' app.`);\n    throw err;\n  }\n};\n\ncommands.closeApp = async function closeApp () {\n  const appName = this.opts.app || this.opts.bundleId;\n  try {\n    await this.stop();\n    this.log.info(`Successfully closed the '${appName}' app.`);\n  } catch (err) {\n    this.log.warn(`Something went wrong while closing the '${appName}' app.`);\n    throw err;\n  }\n};\n\ncommands.keys = async function keys (keys) {\n  if (!this.isWebContext()) {\n    throw new errors.UnknownError('Command should be proxied to WDA');\n  }\n  let el = util.unwrapElement(await this.active());\n  if (_.isEmpty(el)) {\n    throw new errors.NoSuchElementError();\n  }\n  await this.setValue(keys, el);\n};\n\ncommands.setUrl = async function setUrl (url) {\n  this.log.debug(`Attempting to set url '${url}'`);\n\n  if (this.isWebContext()) {\n    this.setCurrentUrl(url);\n    // make sure to clear out any leftover web frames\n    this.curWebFrames = [];\n    await this.remote.navToUrl(url);\n    return;\n  }\n\n  if (this.isRealDevice()) {\n    await this.proxyCommand('/url', 'POST', {url});\n  } else {\n    await this.opts.device.simctl.openUrl(url);\n  }\n};\n\ncommands.getViewportRect = async function getViewportRect () {\n  const scale = await this.getDevicePixelRatio();\n  // status bar height comes in unscaled, so scale it\n  const statusBarHeight = Math.round(await this.getStatusBarHeight() * scale);\n  const windowSize = await this.getWindowSize();\n\n  // ios returns coordinates/dimensions in logical pixels, not device pixels,\n  // so scale up to device pixels. status bar height is already scaled.\n  return {\n    left: 0,\n    top: statusBarHeight,\n    width: windowSize.width * scale,\n    height: ((windowSize.height * scale) - statusBarHeight),\n  };\n};\n\n// memoized in constructor\ncommands.getScreenInfo = async function getScreenInfo () {\n  return await this.proxyCommand('/wda/screen', 'GET');\n};\n\ncommands.getStatusBarHeight = async function getStatusBarHeight () {\n  const {statusBarSize} = await this.getScreenInfo();\n  return statusBarSize.height;\n};\n\n// memoized in constructor\ncommands.getDevicePixelRatio = async function getDevicePixelRatio () {\n  const {scale} = await this.getScreenInfo();\n  return scale;\n};\n\n/**\n * @typedef {Object} PressButtonOptions\n * @property {string} name - The name of the button to be pressed.\n * @property {?number} durationSeconds - Duration in float seconds.\n */\n\n/**\n * Emulates press the given devive button name.\n *\n * @param {PressButtonOptions} opts\n */\ncommands.mobilePressButton = async function mobilePressButton (opts = {}) {\n  const {name, durationSeconds} = opts;\n  if (!name) {\n    throw new errors.InvalidArgumentError('Button name is mandatory');\n  }\n  if (!_.isNil(durationSeconds) && !_.isNumber(durationSeconds)) {\n    throw new errors.InvalidArgumentError('durationSeconds should be a number');\n  }\n  return await this.proxyCommand('/wda/pressButton', 'POST',\n    {name, duration: durationSeconds});\n};\n\ncommands.mobileSiriCommand = async function mobileSiriCommand (opts = {}) {\n  const {text} = opts;\n  if (!util.hasValue(text)) {\n    throw new errors.InvalidArgumentError('\"text\" argument is mandatory');\n  }\n  return await this.proxyCommand('/wda/siri/activate', 'POST', {text});\n};\n\nObject.assign(extensions, commands, helpers);\n\nexport { commands, helpers, extensions };\nexport default extensions;\n"],"mappings":"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"}