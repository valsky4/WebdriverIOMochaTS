"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.extensions = exports.default = exports.commands = void 0;
exports.gesturesChainToString = gesturesChainToString;
exports.helpers = void 0;
require("source-map-support/register");
var _driver = require("appium/driver");
var _support = require("appium/support");
var _lodash = _interopRequireDefault(require("lodash"));
var _logger = _interopRequireDefault(require("../logger"));
const SUPPORTED_GESTURE_DIRECTIONS = ['up', 'down', 'left', 'right'];
const helpers = {},
  extensions = {},
  commands = {};
exports.commands = commands;
exports.extensions = extensions;
exports.helpers = helpers;
function toElementId(opts = {}) {
  if (opts.element) {
    _logger.default.info(`The 'element' argument name is deprecated. Consider using 'elementId' instead`);
  }
  const el = opts.elementId || opts.element;
  return el ? _support.util.unwrapElement(el) : null;
}
async function toElementOrApplicationId(driver, opts = {}) {
  return toElementId(opts) || _support.util.unwrapElement(await driver.findNativeElementOrElements(`class name`, `XCUIElementTypeApplication`, false));
}
commands.moveTo = async function moveTo(el, xoffset = 0, yoffset = 0) {
  el = _support.util.unwrapElement(el);
  if (this.isWebContext()) {
    let {
      x,
      y
    } = await this.getLocation(el);
    let coords = {
      x: x + xoffset,
      y: y + yoffset
    };
    this.curWebCoords = coords;
    let atomsElement = this.getAtomsElement(el);
    let relCoords = {
      x: xoffset,
      y: yoffset
    };
    await this.executeAtom('move_mouse', [atomsElement, relCoords]);
  } else {
    if (_lodash.default.isNil(el)) {
      if (!this.curCoords) {
        throw new _driver.errors.UnknownException('Current cursor position unknown, please use moveTo with an element the first time.');
      }
      this.curCoords = {
        x: this.curCoords.x + xoffset,
        y: this.curCoords.y + yoffset
      };
    } else {
      let elPos = await this.getLocation(el);
      this.curCoords = {
        x: elPos.x + xoffset,
        y: elPos.y + yoffset
      };
    }
  }
};
function requireFloatParameter(paramName, paramValue, methodName) {
  if (_lodash.default.isUndefined(paramValue)) {
    throw new _driver.errors.InvalidArgumentError(`"${paramName}" parameter is mandatory for "${methodName}" call`);
  }
  const result = parseFloat(paramValue);
  if (isNaN(result)) {
    throw new _driver.errors.InvalidArgumentError(`"${paramName}" parameter should be a valid number. "${paramValue}" is given instead`);
  }
  return result;
}
function requireIntParameter(paramName, paramValue, methodName) {
  if (_lodash.default.isUndefined(paramValue)) {
    throw new _driver.errors.InvalidArgumentError(`"${paramName}" parameter is mandatory for "${methodName}" call`);
  }
  const result = parseInt(paramValue, 10);
  if (isNaN(result)) {
    throw new _driver.errors.InvalidArgumentError(`"${paramName}" parameter should be a valid integer. "${paramValue}" is given instead`);
  }
  return result;
}
commands.mobileShake = async function mobileShake() {
  if (!this.isSimulator()) {
    throw new _driver.errors.UnknownError('Shake is not supported on real devices');
  }
  await this.opts.device.shake();
};
commands.click = async function click(el) {
  if (!this.isWebContext()) {
    return await this.nativeClick(el);
  }
  el = _support.util.unwrapElement(el);
  if ((await this.settings.getSettings()).nativeWebTap || (await this.settings.getSettings()).nativeWebTapStrict) {
    this.log.debug('Using native web tap');
    await this.nativeWebTap(el);
  } else {
    const atomsElement = this.getAtomsElement(el);
    return await this.executeAtom('click', [atomsElement]);
  }
};
function gesturesChainToString(gestures, keysToInclude = ['options']) {
  return gestures.map(item => {
    let otherKeys = _lodash.default.difference(_lodash.default.keys(item), ['action']);
    otherKeys = _lodash.default.isArray(keysToInclude) ? _lodash.default.intersection(otherKeys, keysToInclude) : otherKeys;
    if (otherKeys.length) {
      return `${item.action}` + `(${_lodash.default.map(otherKeys, x => x + '=' + (_lodash.default.isPlainObject(item[x]) ? JSON.stringify(item[x]) : item[x])).join(', ')})`;
    }
    return item.action;
  }).join('-');
}
commands.performActions = async function performActions(actions) {
  this.log.debug(`Received the following W3C actions: ${JSON.stringify(actions, null, '  ')}`);
  const preprocessedActions = actions.map(action => Object.assign({}, action, action.type === 'pointer' ? {
    parameters: {
      pointerType: 'touch'
    }
  } : {})).map(action => {
    const modifiedAction = _lodash.default.clone(action) || {};
    modifiedAction.actions = (action.actions || []).filter(innerAction => !(innerAction.type === 'pause' && innerAction.duration === 0));
    return modifiedAction;
  });
  this.log.debug(`Preprocessed actions: ${JSON.stringify(preprocessedActions, null, '  ')}`);
  return await this.proxyCommand('/actions', 'POST', {
    actions: preprocessedActions
  });
};
commands.releaseActions = function releaseActions() {
  this.log.warn('On this platform, releaseActions is a no-op');
};
commands.performTouch = async function performTouch(gestures) {
  this.log.debug(`Received the following touch action: ${gesturesChainToString(gestures)}`);
  try {
    return await this.proxyCommand('/wda/touch/perform', 'POST', {
      actions: gestures
    });
  } catch (e) {
    if (!this.isWebContext()) {
      throw e;
    }
    this.log.errorAndThrow('The Touch API is aimed for usage in NATIVE context. ' + 'Consider using "execute" API with custom events trigger script ' + `to emulate touch events being in WEBVIEW context. Original error: ${e.message}`);
  }
};
commands.performMultiAction = async function performMultiAction(actions) {
  this.log.debug(`Received the following multi touch action:`);
  for (let i in actions) {
    this.log.debug(`    ${parseInt(i, 10) + 1}: ${_lodash.default.map(actions[i], 'action').join('-')}`);
  }
  try {
    return await this.proxyCommand('/wda/touch/multi/perform', 'POST', {
      actions
    });
  } catch (e) {
    if (!this.isWebContext()) {
      throw e;
    }
    this.log.errorAndThrow('The MultiTouch API is aimed for usage in NATIVE context. ' + 'Consider using "execute" API with custom events trigger script ' + `to emulate multitouch events being in WEBVIEW context. Original error: ${e.message}`);
  }
};
commands.nativeClick = async function nativeClick(el) {
  el = _support.util.unwrapElement(el);
  let endpoint = `/element/${el}/click`;
  return await this.proxyCommand(endpoint, 'POST', {});
};
commands.mobileScrollToElement = async function mobileScrollToElement(opts = {}) {
  const elementId = await toElementId(opts);
  if (!elementId) {
    throw new _driver.errors.InvalidArgumentError('Element id must be provided');
  }
  return await this.proxyCommand(`/wda/element/${elementId}/scrollTo`, 'POST', {});
};
helpers.mobileScroll = async function mobileScroll(opts = {}) {
  const {
    name,
    direction,
    predicateString,
    toVisible,
    distance
  } = opts;
  const params = {};
  if (name) {
    params.name = name;
  } else if (direction) {
    if (!SUPPORTED_GESTURE_DIRECTIONS.includes(_lodash.default.toLower(direction))) {
      throw new _driver.errors.InvalidArgumentError(`'direction' must be one of: ${SUPPORTED_GESTURE_DIRECTIONS}`);
    }
    params.direction = direction;
  } else if (predicateString) {
    params.predicateString = predicateString;
  } else if (toVisible) {
    params.toVisible = toVisible;
  } else {
    throw new _driver.errors.InvalidArgumentError('Mobile scroll supports the following strategies: name, direction, predicateString, and toVisible. ' + 'Specify one of these');
  }
  if (!_lodash.default.isNil(distance)) {
    params.distance = distance;
  }
  const elementId = await toElementOrApplicationId(this, opts);
  return await this.proxyCommand(`/wda/element/${elementId}/scroll`, 'POST', params);
};
helpers.mobileSwipe = async function mobileSwipe(opts = {}) {
  const {
    direction,
    velocity
  } = opts;
  if (!SUPPORTED_GESTURE_DIRECTIONS.includes(_lodash.default.toLower(direction))) {
    throw new _driver.errors.InvalidArgumentError(`'direction' must be one of: ${SUPPORTED_GESTURE_DIRECTIONS}`);
  }
  const params = {
    direction
  };
  if (!_lodash.default.isNil(velocity)) {
    params.velocity = velocity;
  }
  const elementId = await toElementOrApplicationId(this, opts);
  return await this.proxyCommand(`/wda/element/${elementId}/swipe`, 'POST', params);
};
helpers.mobilePinch = async function mobilePinch(opts = {}) {
  const params = {
    scale: requireFloatParameter('scale', opts.scale, 'pinch'),
    velocity: requireFloatParameter('velocity', opts.velocity, 'pinch')
  };
  const elementId = await toElementOrApplicationId(this, opts);
  return await this.proxyCommand(`/wda/element/${elementId}/pinch`, 'POST', params);
};
helpers.mobileDoubleTap = async function mobileDoubleTap(opts = {}) {
  const elementId = toElementId(opts);
  if (elementId) {
    return await this.proxyCommand(`/wda/element/${elementId}/doubleTap`, 'POST');
  }
  const params = {
    x: requireFloatParameter('x', opts.x, 'doubleTap'),
    y: requireFloatParameter('y', opts.y, 'doubleTap')
  };
  return await this.proxyCommand('/wda/doubleTap', 'POST', params);
};
helpers.mobileTwoFingerTap = async function mobileTwoFingerTap(opts = {}) {
  const elementId = await toElementOrApplicationId(this, opts);
  return await this.proxyCommand(`/wda/element/${elementId}/twoFingerTap`, 'POST');
};
helpers.mobileTouchAndHold = async function mobileTouchAndHold(opts = {}) {
  const params = {
    duration: requireFloatParameter('duration', opts.duration, 'touchAndHold')
  };
  const elementId = toElementId(opts);
  if (elementId) {
    return await this.proxyCommand(`/wda/element/${elementId}/touchAndHold`, 'POST', params);
  }
  params.x = requireFloatParameter('x', opts.x, 'touchAndHold');
  params.y = requireFloatParameter('y', opts.y, 'touchAndHold');
  return await this.proxyCommand('/wda/touchAndHold', 'POST', params);
};
helpers.mobileTap = async function mobileTap(opts = {}) {
  const params = {
    x: requireFloatParameter('x', opts.x, 'tap'),
    y: requireFloatParameter('y', opts.y, 'tap')
  };
  const elementId = toElementId(opts) || '0';
  return await this.proxyCommand(`/wda/tap/${elementId}`, 'POST', params);
};
helpers.mobileDragFromToForDuration = async function mobileDragFromToForDuration(opts = {}) {
  const params = {
    duration: requireFloatParameter('duration', opts.duration, 'dragFromToForDuration'),
    fromX: requireFloatParameter('fromX', opts.fromX, 'dragFromToForDuration'),
    fromY: requireFloatParameter('fromY', opts.fromY, 'dragFromToForDuration'),
    toX: requireFloatParameter('toX', opts.toX, 'dragFromToForDuration'),
    toY: requireFloatParameter('toY', opts.toY, 'dragFromToForDuration')
  };
  const elementId = toElementId(opts);
  return elementId ? await this.proxyCommand(`/wda/element/${elementId}/dragfromtoforduration`, 'POST', params) : await this.proxyCommand('/wda/dragfromtoforduration', 'POST', params);
};
helpers.mobileDragFromToWithVelocity = async function mobileDragFromToWithVelocity(opts = {}) {
  const params = {
    pressDuration: requireFloatParameter('pressDuration', opts.pressDuration, 'dragFromToWithVelocity'),
    holdDuration: requireFloatParameter('holdDuration', opts.holdDuration, 'dragFromToWithVelocity'),
    velocity: requireFloatParameter('velocity', opts.velocity, 'dragFromToWithVelocity')
  };
  const fromElementId = opts.fromElementId ? _support.util.unwrapElement(opts.fromElementId) : null;
  if (fromElementId) {
    const toElement = opts.toElementId ? _support.util.unwrapElement(opts.toElementId) : null;
    if (!toElement) {
      throw new _driver.errors.InvalidArgumentError(`"toElementId" parameter is mandatory for "dragFromToWithVelocity" call`);
    }
    params.toElement = toElement;
    return await this.proxyCommand(`/wda/element/${fromElementId}/pressAndDragWithVelocity`, 'POST', params);
  }
  params.fromX = requireFloatParameter('fromX', opts.fromX, 'dragFromToWithVelocity');
  params.fromY = requireFloatParameter('fromY', opts.fromY, 'dragFromToWithVelocity');
  params.toX = requireFloatParameter('toX', opts.toX, 'dragFromToWithVelocity');
  params.toY = requireFloatParameter('toY', opts.toY, 'dragFromToWithVelocity');
  return await this.proxyCommand('/wda/pressAndDragWithVelocity', 'POST', params);
};
helpers.mobileTapWithNumberOfTaps = async function mobileTapWithNumberOfTaps(opts = {}) {
  const elementId = toElementId(opts);
  if (!elementId) {
    throw new _driver.errors.InvalidArgumentError('Element id is expected to be set for tapWithNumberOfTaps method');
  }
  const params = {
    numberOfTaps: requireIntParameter('numberOfTaps', opts.numberOfTaps, 'tapWithNumberOfTaps'),
    numberOfTouches: requireIntParameter('numberOfTouches', opts.numberOfTouches, 'tapWithNumberOfTaps')
  };
  return await this.proxyCommand(`/wda/element/${elementId}/tapWithNumberOfTaps`, 'POST', params);
};
helpers.mobileForcePress = async function mobileForcePress(opts = {}) {
  const {
    x,
    y,
    duration,
    pressure
  } = opts;
  const elementId = toElementId(opts);
  const endpoint = elementId ? `/wda/element/${elementId}/forceTouch` : `/wda/forceTouch`;
  return await this.proxyCommand(endpoint, 'POST', {
    x,
    y,
    duration,
    pressure
  });
};
helpers.mobileSelectPickerWheelValue = async function mobileSelectPickerWheelValue(opts = {}) {
  const elementId = toElementId(opts);
  if (!elementId) {
    throw new _driver.errors.InvalidArgumentError('Element id is expected to be set for selectPickerWheelValue method');
  }
  if (!_lodash.default.isString(opts.order) || !['next', 'previous'].includes(opts.order.toLowerCase())) {
    throw new _driver.errors.InvalidArgumentError(`The mandatory 'order' parameter is expected to be equal either to 'next' or 'previous'. ` + `'${opts.order}' is given instead`);
  }
  const params = {
    order: opts.order
  };
  if (opts.offset) {
    params.offset = requireFloatParameter('offset', opts.offset, 'selectPickerWheelValue');
  }
  return await this.proxyCommand(`/wda/pickerwheel/${elementId}/select`, 'POST', params);
};
helpers.mobileRotateElement = async function mobileRotateElement(opts = {}) {
  const elementId = toElementId(opts);
  if (!elementId) {
    throw new _driver.errors.InvalidArgumentError('Element id is expected to be set for rotateElement method');
  }
  const params = {
    rotation: requireFloatParameter('rotation', opts.rotation, 'rotateElement'),
    velocity: requireFloatParameter('velocity', opts.velocity, 'rotateElement')
  };
  return await this.proxyCommand(`/wda/element/${elementId}/rotate`, 'POST', params);
};
helpers.getCoordinates = async function getCoordinates(gesture) {
  let coordinates = {
    x: 0,
    y: 0,
    areOffsets: false
  };
  let optionX = null;
  if (gesture.options.x) {
    optionX = requireFloatParameter('x', gesture.options.x, 'getCoordinates');
  }
  let optionY = null;
  if (gesture.options.y) {
    optionY = requireFloatParameter('y', gesture.options.y, 'getCoordinates');
  }
  const elementId = toElementId(gesture.options);
  if (elementId) {
    let rect = await this.getElementRect(elementId);
    let pos = {
      x: rect.x,
      y: rect.y
    };
    let size = {
      w: rect.width,
      h: rect.height
    };
    let offsetX = 0;
    let offsetY = 0;
    if (optionX || optionY) {
      offsetX = optionX || 0;
      offsetY = optionY || 0;
    } else {
      offsetX = size.w / 2;
      offsetY = size.h / 2;
    }
    coordinates.x = pos.x + offsetX;
    coordinates.y = pos.y + offsetY;
  } else {
    coordinates.areOffsets = gesture.action === 'moveTo';
    coordinates.x = optionX || 0;
    coordinates.y = optionY || 0;
  }
  return coordinates;
};
helpers.applyMoveToOffset = function applyMoveToOffset(firstCoordinates, secondCoordinates) {
  if (secondCoordinates.areOffsets) {
    return {
      x: firstCoordinates.x + secondCoordinates.x,
      y: firstCoordinates.y + secondCoordinates.y
    };
  } else {
    return secondCoordinates;
  }
};
Object.assign(extensions, helpers, commands);
var _default = extensions;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZHJpdmVyIiwicmVxdWlyZSIsIl9zdXBwb3J0IiwiX2xvZGFzaCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfbG9nZ2VyIiwiU1VQUE9SVEVEX0dFU1RVUkVfRElSRUNUSU9OUyIsImhlbHBlcnMiLCJleHRlbnNpb25zIiwiY29tbWFuZHMiLCJleHBvcnRzIiwidG9FbGVtZW50SWQiLCJvcHRzIiwiZWxlbWVudCIsImxvZyIsImluZm8iLCJlbCIsImVsZW1lbnRJZCIsInV0aWwiLCJ1bndyYXBFbGVtZW50IiwidG9FbGVtZW50T3JBcHBsaWNhdGlvbklkIiwiZHJpdmVyIiwiZmluZE5hdGl2ZUVsZW1lbnRPckVsZW1lbnRzIiwibW92ZVRvIiwieG9mZnNldCIsInlvZmZzZXQiLCJpc1dlYkNvbnRleHQiLCJ4IiwieSIsImdldExvY2F0aW9uIiwiY29vcmRzIiwiY3VyV2ViQ29vcmRzIiwiYXRvbXNFbGVtZW50IiwiZ2V0QXRvbXNFbGVtZW50IiwicmVsQ29vcmRzIiwiZXhlY3V0ZUF0b20iLCJfIiwiaXNOaWwiLCJjdXJDb29yZHMiLCJlcnJvcnMiLCJVbmtub3duRXhjZXB0aW9uIiwiZWxQb3MiLCJyZXF1aXJlRmxvYXRQYXJhbWV0ZXIiLCJwYXJhbU5hbWUiLCJwYXJhbVZhbHVlIiwibWV0aG9kTmFtZSIsImlzVW5kZWZpbmVkIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJyZXN1bHQiLCJwYXJzZUZsb2F0IiwiaXNOYU4iLCJyZXF1aXJlSW50UGFyYW1ldGVyIiwicGFyc2VJbnQiLCJtb2JpbGVTaGFrZSIsImlzU2ltdWxhdG9yIiwiVW5rbm93bkVycm9yIiwiZGV2aWNlIiwic2hha2UiLCJjbGljayIsIm5hdGl2ZUNsaWNrIiwic2V0dGluZ3MiLCJnZXRTZXR0aW5ncyIsIm5hdGl2ZVdlYlRhcCIsIm5hdGl2ZVdlYlRhcFN0cmljdCIsImRlYnVnIiwiZ2VzdHVyZXNDaGFpblRvU3RyaW5nIiwiZ2VzdHVyZXMiLCJrZXlzVG9JbmNsdWRlIiwibWFwIiwiaXRlbSIsIm90aGVyS2V5cyIsImRpZmZlcmVuY2UiLCJrZXlzIiwiaXNBcnJheSIsImludGVyc2VjdGlvbiIsImxlbmd0aCIsImFjdGlvbiIsImlzUGxhaW5PYmplY3QiLCJKU09OIiwic3RyaW5naWZ5Iiwiam9pbiIsInBlcmZvcm1BY3Rpb25zIiwiYWN0aW9ucyIsInByZXByb2Nlc3NlZEFjdGlvbnMiLCJPYmplY3QiLCJhc3NpZ24iLCJ0eXBlIiwicGFyYW1ldGVycyIsInBvaW50ZXJUeXBlIiwibW9kaWZpZWRBY3Rpb24iLCJjbG9uZSIsImZpbHRlciIsImlubmVyQWN0aW9uIiwiZHVyYXRpb24iLCJwcm94eUNvbW1hbmQiLCJyZWxlYXNlQWN0aW9ucyIsIndhcm4iLCJwZXJmb3JtVG91Y2giLCJlIiwiZXJyb3JBbmRUaHJvdyIsIm1lc3NhZ2UiLCJwZXJmb3JtTXVsdGlBY3Rpb24iLCJpIiwiZW5kcG9pbnQiLCJtb2JpbGVTY3JvbGxUb0VsZW1lbnQiLCJtb2JpbGVTY3JvbGwiLCJuYW1lIiwiZGlyZWN0aW9uIiwicHJlZGljYXRlU3RyaW5nIiwidG9WaXNpYmxlIiwiZGlzdGFuY2UiLCJwYXJhbXMiLCJpbmNsdWRlcyIsInRvTG93ZXIiLCJtb2JpbGVTd2lwZSIsInZlbG9jaXR5IiwibW9iaWxlUGluY2giLCJzY2FsZSIsIm1vYmlsZURvdWJsZVRhcCIsIm1vYmlsZVR3b0ZpbmdlclRhcCIsIm1vYmlsZVRvdWNoQW5kSG9sZCIsIm1vYmlsZVRhcCIsIm1vYmlsZURyYWdGcm9tVG9Gb3JEdXJhdGlvbiIsImZyb21YIiwiZnJvbVkiLCJ0b1giLCJ0b1kiLCJtb2JpbGVEcmFnRnJvbVRvV2l0aFZlbG9jaXR5IiwicHJlc3NEdXJhdGlvbiIsImhvbGREdXJhdGlvbiIsImZyb21FbGVtZW50SWQiLCJ0b0VsZW1lbnQiLCJtb2JpbGVUYXBXaXRoTnVtYmVyT2ZUYXBzIiwibnVtYmVyT2ZUYXBzIiwibnVtYmVyT2ZUb3VjaGVzIiwibW9iaWxlRm9yY2VQcmVzcyIsInByZXNzdXJlIiwibW9iaWxlU2VsZWN0UGlja2VyV2hlZWxWYWx1ZSIsImlzU3RyaW5nIiwib3JkZXIiLCJ0b0xvd2VyQ2FzZSIsIm9mZnNldCIsIm1vYmlsZVJvdGF0ZUVsZW1lbnQiLCJyb3RhdGlvbiIsImdldENvb3JkaW5hdGVzIiwiZ2VzdHVyZSIsImNvb3JkaW5hdGVzIiwiYXJlT2Zmc2V0cyIsIm9wdGlvblgiLCJvcHRpb25zIiwib3B0aW9uWSIsInJlY3QiLCJnZXRFbGVtZW50UmVjdCIsInBvcyIsInNpemUiLCJ3Iiwid2lkdGgiLCJoIiwiaGVpZ2h0Iiwib2Zmc2V0WCIsIm9mZnNldFkiLCJhcHBseU1vdmVUb09mZnNldCIsImZpcnN0Q29vcmRpbmF0ZXMiLCJzZWNvbmRDb29yZGluYXRlcyIsIl9kZWZhdWx0IiwiZGVmYXVsdCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9jb21tYW5kcy9nZXN0dXJlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGVycm9ycyB9IGZyb20gJ2FwcGl1bS9kcml2ZXInO1xuaW1wb3J0IHsgdXRpbCB9IGZyb20gJ2FwcGl1bS9zdXBwb3J0JztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL2xvZ2dlcic7XG5cbmNvbnN0IFNVUFBPUlRFRF9HRVNUVVJFX0RJUkVDVElPTlMgPSBbJ3VwJywgJ2Rvd24nLCAnbGVmdCcsICdyaWdodCddO1xuXG5jb25zdCBoZWxwZXJzID0ge30sIGV4dGVuc2lvbnMgPSB7fSwgY29tbWFuZHMgPSB7fTtcblxuZnVuY3Rpb24gdG9FbGVtZW50SWQgKG9wdHMgPSB7fSkge1xuICBpZiAob3B0cy5lbGVtZW50KSB7XG4gICAgbG9nLmluZm8oYFRoZSAnZWxlbWVudCcgYXJndW1lbnQgbmFtZSBpcyBkZXByZWNhdGVkLiBDb25zaWRlciB1c2luZyAnZWxlbWVudElkJyBpbnN0ZWFkYCk7XG4gIH1cbiAgY29uc3QgZWwgPSBvcHRzLmVsZW1lbnRJZCB8fCBvcHRzLmVsZW1lbnQ7XG4gIHJldHVybiBlbCA/IHV0aWwudW53cmFwRWxlbWVudChlbCkgOiBudWxsO1xufVxuXG5hc3luYyBmdW5jdGlvbiB0b0VsZW1lbnRPckFwcGxpY2F0aW9uSWQgKGRyaXZlciwgb3B0cyA9IHt9KSB7XG4gIHJldHVybiB0b0VsZW1lbnRJZChvcHRzKVxuICAgIHx8IHV0aWwudW53cmFwRWxlbWVudChhd2FpdCBkcml2ZXIuZmluZE5hdGl2ZUVsZW1lbnRPckVsZW1lbnRzKGBjbGFzcyBuYW1lYCwgYFhDVUlFbGVtZW50VHlwZUFwcGxpY2F0aW9uYCwgZmFsc2UpKTtcbn1cblxuY29tbWFuZHMubW92ZVRvID0gYXN5bmMgZnVuY3Rpb24gbW92ZVRvIChlbCwgeG9mZnNldCA9IDAsIHlvZmZzZXQgPSAwKSB7XG4gIGVsID0gdXRpbC51bndyYXBFbGVtZW50KGVsKTtcblxuICBpZiAodGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIGxldCB7eCwgeX0gPSBhd2FpdCB0aGlzLmdldExvY2F0aW9uKGVsKTtcbiAgICBsZXQgY29vcmRzID0ge1xuICAgICAgeDogeCArIHhvZmZzZXQsXG4gICAgICB5OiB5ICsgeW9mZnNldFxuICAgIH07XG4gICAgdGhpcy5jdXJXZWJDb29yZHMgPSBjb29yZHM7XG4gICAgbGV0IGF0b21zRWxlbWVudCA9IHRoaXMuZ2V0QXRvbXNFbGVtZW50KGVsKTtcbiAgICBsZXQgcmVsQ29vcmRzID0ge3g6IHhvZmZzZXQsIHk6IHlvZmZzZXR9O1xuICAgIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ21vdmVfbW91c2UnLCBbYXRvbXNFbGVtZW50LCByZWxDb29yZHNdKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoXy5pc05pbChlbCkpIHtcbiAgICAgIGlmICghdGhpcy5jdXJDb29yZHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9ycy5Vbmtub3duRXhjZXB0aW9uKFxuICAgICAgICAgICdDdXJyZW50IGN1cnNvciBwb3NpdGlvbiB1bmtub3duLCBwbGVhc2UgdXNlIG1vdmVUbyB3aXRoIGFuIGVsZW1lbnQgdGhlIGZpcnN0IHRpbWUuJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmN1ckNvb3JkcyA9IHtcbiAgICAgICAgeDogdGhpcy5jdXJDb29yZHMueCArIHhvZmZzZXQsXG4gICAgICAgIHk6IHRoaXMuY3VyQ29vcmRzLnkgKyB5b2Zmc2V0XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgZWxQb3MgPSBhd2FpdCB0aGlzLmdldExvY2F0aW9uKGVsKTtcbiAgICAgIHRoaXMuY3VyQ29vcmRzID0ge1xuICAgICAgICB4OiBlbFBvcy54ICsgeG9mZnNldCxcbiAgICAgICAgeTogZWxQb3MueSArIHlvZmZzZXRcbiAgICAgIH07XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiByZXF1aXJlRmxvYXRQYXJhbWV0ZXIgKHBhcmFtTmFtZSwgcGFyYW1WYWx1ZSwgbWV0aG9kTmFtZSkge1xuICBpZiAoXy5pc1VuZGVmaW5lZChwYXJhbVZhbHVlKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoYFwiJHtwYXJhbU5hbWV9XCIgcGFyYW1ldGVyIGlzIG1hbmRhdG9yeSBmb3IgXCIke21ldGhvZE5hbWV9XCIgY2FsbGApO1xuICB9XG4gIGNvbnN0IHJlc3VsdCA9IHBhcnNlRmxvYXQocGFyYW1WYWx1ZSk7XG4gIGlmIChpc05hTihyZXN1bHQpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcihgXCIke3BhcmFtTmFtZX1cIiBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgdmFsaWQgbnVtYmVyLiBcIiR7cGFyYW1WYWx1ZX1cIiBpcyBnaXZlbiBpbnN0ZWFkYCk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gcmVxdWlyZUludFBhcmFtZXRlciAocGFyYW1OYW1lLCBwYXJhbVZhbHVlLCBtZXRob2ROYW1lKSB7XG4gIGlmIChfLmlzVW5kZWZpbmVkKHBhcmFtVmFsdWUpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcihgXCIke3BhcmFtTmFtZX1cIiBwYXJhbWV0ZXIgaXMgbWFuZGF0b3J5IGZvciBcIiR7bWV0aG9kTmFtZX1cIiBjYWxsYCk7XG4gIH1cbiAgY29uc3QgcmVzdWx0ID0gcGFyc2VJbnQocGFyYW1WYWx1ZSwgMTApO1xuICBpZiAoaXNOYU4ocmVzdWx0KSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoYFwiJHtwYXJhbU5hbWV9XCIgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHZhbGlkIGludGVnZXIuIFwiJHtwYXJhbVZhbHVlfVwiIGlzIGdpdmVuIGluc3RlYWRgKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5jb21tYW5kcy5tb2JpbGVTaGFrZSA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZVNoYWtlICgpIHtcbiAgaWYgKCF0aGlzLmlzU2ltdWxhdG9yKCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLlVua25vd25FcnJvcignU2hha2UgaXMgbm90IHN1cHBvcnRlZCBvbiByZWFsIGRldmljZXMnKTtcbiAgfVxuICBhd2FpdCB0aGlzLm9wdHMuZGV2aWNlLnNoYWtlKCk7XG59O1xuXG5jb21tYW5kcy5jbGljayA9IGFzeW5jIGZ1bmN0aW9uIGNsaWNrIChlbCkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICAvLyB0aGVyZSBhcmUgbXVsdGlwbGUgY29tbWFuZHMgdGhhdCBtYXAgaGVyZSwgc28gbWFudWFsbHkgcHJveHlcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5uYXRpdmVDbGljayhlbCk7XG4gIH1cbiAgZWwgPSB1dGlsLnVud3JhcEVsZW1lbnQoZWwpO1xuICBpZiAoKGF3YWl0IHRoaXMuc2V0dGluZ3MuZ2V0U2V0dGluZ3MoKSkubmF0aXZlV2ViVGFwIHx8IChhd2FpdCB0aGlzLnNldHRpbmdzLmdldFNldHRpbmdzKCkpLm5hdGl2ZVdlYlRhcFN0cmljdCkge1xuICAgIC8vIGF0b21zLWJhc2VkIGNsaWNrcyBkb24ndCBhbHdheXMgd29yayBpbiBzYWZhcmkgN1xuICAgIHRoaXMubG9nLmRlYnVnKCdVc2luZyBuYXRpdmUgd2ViIHRhcCcpO1xuICAgIGF3YWl0IHRoaXMubmF0aXZlV2ViVGFwKGVsKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBhdG9tc0VsZW1lbnQgPSB0aGlzLmdldEF0b21zRWxlbWVudChlbCk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2NsaWNrJywgW2F0b21zRWxlbWVudF0pO1xuICB9XG59O1xuXG5mdW5jdGlvbiBnZXN0dXJlc0NoYWluVG9TdHJpbmcgKGdlc3R1cmVzLCBrZXlzVG9JbmNsdWRlID0gWydvcHRpb25zJ10pIHtcbiAgcmV0dXJuIGdlc3R1cmVzLm1hcCgoaXRlbSkgPT4ge1xuICAgIGxldCBvdGhlcktleXMgPSBfLmRpZmZlcmVuY2UoXy5rZXlzKGl0ZW0pLCBbJ2FjdGlvbiddKTtcbiAgICBvdGhlcktleXMgPSBfLmlzQXJyYXkoa2V5c1RvSW5jbHVkZSkgPyBfLmludGVyc2VjdGlvbihvdGhlcktleXMsIGtleXNUb0luY2x1ZGUpIDogb3RoZXJLZXlzO1xuICAgIGlmIChvdGhlcktleXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gYCR7aXRlbS5hY3Rpb259YCArXG4gICAgICAgIGAoJHtfLm1hcChvdGhlcktleXMsICh4KSA9PiB4ICsgJz0nICsgKF8uaXNQbGFpbk9iamVjdChpdGVtW3hdKSA/IEpTT04uc3RyaW5naWZ5KGl0ZW1beF0pIDogaXRlbVt4XSkpLmpvaW4oJywgJyl9KWA7XG4gICAgfVxuICAgIHJldHVybiBpdGVtLmFjdGlvbjtcbiAgfSkuam9pbignLScpO1xufVxuXG5jb21tYW5kcy5wZXJmb3JtQWN0aW9ucyA9IGFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb25zIChhY3Rpb25zKSB7XG4gIHRoaXMubG9nLmRlYnVnKGBSZWNlaXZlZCB0aGUgZm9sbG93aW5nIFczQyBhY3Rpb25zOiAke0pTT04uc3RyaW5naWZ5KGFjdGlvbnMsIG51bGwsICcgICcpfWApO1xuICAvLyBUaGlzIGlzIG1hbmRhdG9yeSwgc2luY2UgV0RBIG9ubHkgc3VwcG9ydHMgVE9VQ0ggcG9pbnRlciB0eXBlXG4gIC8vIGFuZCBTZWxlbml1bSBBUEkgdXNlcyBNT1VTRSBhcyB0aGUgZGVmYXVsdCBvbmVcbiAgY29uc3QgcHJlcHJvY2Vzc2VkQWN0aW9ucyA9IGFjdGlvbnNcbiAgICAubWFwKChhY3Rpb24pID0+IE9iamVjdC5hc3NpZ24oe30sIGFjdGlvbiwgYWN0aW9uLnR5cGUgPT09ICdwb2ludGVyJyA/IHtcbiAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgcG9pbnRlclR5cGU6ICd0b3VjaCdcbiAgICAgIH1cbiAgICB9IDoge30pKVxuICAgIC5tYXAoKGFjdGlvbikgPT4ge1xuICAgICAgY29uc3QgbW9kaWZpZWRBY3Rpb24gPSBfLmNsb25lKGFjdGlvbikgfHwge307XG4gICAgICAvLyBTZWxlbml1bSBBUEkgdW5leHBlY3RlZGx5IGluc2VydHMgemVybyBwYXVzZXMsIHdoaWNoIGFyZSBub3Qgc3VwcG9ydGVkIGJ5IFdEQVxuICAgICAgbW9kaWZpZWRBY3Rpb24uYWN0aW9ucyA9IChhY3Rpb24uYWN0aW9ucyB8fCBbXSlcbiAgICAgICAgLmZpbHRlcigoaW5uZXJBY3Rpb24pID0+ICEoaW5uZXJBY3Rpb24udHlwZSA9PT0gJ3BhdXNlJyAmJiBpbm5lckFjdGlvbi5kdXJhdGlvbiA9PT0gMCkpO1xuICAgICAgcmV0dXJuIG1vZGlmaWVkQWN0aW9uO1xuICAgIH0pO1xuICB0aGlzLmxvZy5kZWJ1ZyhgUHJlcHJvY2Vzc2VkIGFjdGlvbnM6ICR7SlNPTi5zdHJpbmdpZnkocHJlcHJvY2Vzc2VkQWN0aW9ucywgbnVsbCwgJyAgJyl9YCk7XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZCgnL2FjdGlvbnMnLCAnUE9TVCcsIHthY3Rpb25zOiBwcmVwcm9jZXNzZWRBY3Rpb25zfSk7XG59O1xuXG5jb21tYW5kcy5yZWxlYXNlQWN0aW9ucyA9IGZ1bmN0aW9uIHJlbGVhc2VBY3Rpb25zICgpIHtcbiAgdGhpcy5sb2cud2FybignT24gdGhpcyBwbGF0Zm9ybSwgcmVsZWFzZUFjdGlvbnMgaXMgYSBuby1vcCcpO1xufTtcblxuY29tbWFuZHMucGVyZm9ybVRvdWNoID0gYXN5bmMgZnVuY3Rpb24gcGVyZm9ybVRvdWNoIChnZXN0dXJlcykge1xuICB0aGlzLmxvZy5kZWJ1ZyhgUmVjZWl2ZWQgdGhlIGZvbGxvd2luZyB0b3VjaCBhY3Rpb246ICR7Z2VzdHVyZXNDaGFpblRvU3RyaW5nKGdlc3R1cmVzKX1gKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoJy93ZGEvdG91Y2gvcGVyZm9ybScsICdQT1NUJywge2FjdGlvbnM6IGdlc3R1cmVzfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIHRoaXMubG9nLmVycm9yQW5kVGhyb3coJ1RoZSBUb3VjaCBBUEkgaXMgYWltZWQgZm9yIHVzYWdlIGluIE5BVElWRSBjb250ZXh0LiAnICtcbiAgICAgICdDb25zaWRlciB1c2luZyBcImV4ZWN1dGVcIiBBUEkgd2l0aCBjdXN0b20gZXZlbnRzIHRyaWdnZXIgc2NyaXB0ICcgK1xuICAgICAgYHRvIGVtdWxhdGUgdG91Y2ggZXZlbnRzIGJlaW5nIGluIFdFQlZJRVcgY29udGV4dC4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG5jb21tYW5kcy5wZXJmb3JtTXVsdGlBY3Rpb24gPSBhc3luYyBmdW5jdGlvbiBwZXJmb3JtTXVsdGlBY3Rpb24gKGFjdGlvbnMpIHtcbiAgdGhpcy5sb2cuZGVidWcoYFJlY2VpdmVkIHRoZSBmb2xsb3dpbmcgbXVsdGkgdG91Y2ggYWN0aW9uOmApO1xuICBmb3IgKGxldCBpIGluIGFjdGlvbnMpIHtcbiAgICB0aGlzLmxvZy5kZWJ1ZyhgICAgICR7cGFyc2VJbnQoaSwgMTApICsgMX06ICR7Xy5tYXAoYWN0aW9uc1tpXSwgJ2FjdGlvbicpLmpvaW4oJy0nKX1gKTtcbiAgfVxuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZCgnL3dkYS90b3VjaC9tdWx0aS9wZXJmb3JtJywgJ1BPU1QnLCB7YWN0aW9uc30pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKCF0aGlzLmlzV2ViQ29udGV4dCgpKSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICB0aGlzLmxvZy5lcnJvckFuZFRocm93KCdUaGUgTXVsdGlUb3VjaCBBUEkgaXMgYWltZWQgZm9yIHVzYWdlIGluIE5BVElWRSBjb250ZXh0LiAnICtcbiAgICAgICdDb25zaWRlciB1c2luZyBcImV4ZWN1dGVcIiBBUEkgd2l0aCBjdXN0b20gZXZlbnRzIHRyaWdnZXIgc2NyaXB0ICcgK1xuICAgICAgYHRvIGVtdWxhdGUgbXVsdGl0b3VjaCBldmVudHMgYmVpbmcgaW4gV0VCVklFVyBjb250ZXh0LiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbmNvbW1hbmRzLm5hdGl2ZUNsaWNrID0gYXN5bmMgZnVuY3Rpb24gbmF0aXZlQ2xpY2sgKGVsKSB7XG4gIGVsID0gdXRpbC51bndyYXBFbGVtZW50KGVsKTtcbiAgbGV0IGVuZHBvaW50ID0gYC9lbGVtZW50LyR7ZWx9L2NsaWNrYDtcbiAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKGVuZHBvaW50LCAnUE9TVCcsIHt9KTtcbn07XG5cbi8qXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL1dlYkRyaXZlckFnZW50L2Jsb2IvbWFzdGVyL1dlYkRyaXZlckFnZW50TGliL0NvbW1hbmRzL0ZCRWxlbWVudENvbW1hbmRzLm1cbiAqIHRvIGdldCB0aGUgaW5mbyBhYm91dCBhdmFpbGFibGUgV0RBIGdlc3R1cmVzIEFQSVxuICpcbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5hcHBsZS5jb20vcmVmZXJlbmNlL3hjdGVzdC94Y3VpZWxlbWVudCBhbmRcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9yZWZlcmVuY2UveGN0ZXN0L3hjdWljb29yZGluYXRlIHRvIGdldCB0aGUgZGV0YWlsZWQgZGVzY3JpcHRpb24gb2ZcbiAqIGFsbCBYQ1Rlc3QgZ2VzdHVyZXNcbiovXG5cbmNvbW1hbmRzLm1vYmlsZVNjcm9sbFRvRWxlbWVudCA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZVNjcm9sbFRvRWxlbWVudCAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IGVsZW1lbnRJZCA9IGF3YWl0IHRvRWxlbWVudElkKG9wdHMpO1xuICBpZiAoIWVsZW1lbnRJZCkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0VsZW1lbnQgaWQgbXVzdCBiZSBwcm92aWRlZCcpO1xuICB9XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3dkYS9lbGVtZW50LyR7ZWxlbWVudElkfS9zY3JvbGxUb2AsICdQT1NUJywge30pO1xufTtcblxuaGVscGVycy5tb2JpbGVTY3JvbGwgPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVTY3JvbGwgKG9wdHMgPSB7fSkge1xuICAvLyBXREEgc3VwcG9ydHMgZm91ciBzY3JvbGxpbmcgc3RyYXRlZ2llczogcHJlZGljYXRpb24gYmFzZWQgb24gbmFtZSwgZGlyZWN0aW9uLFxuICAvLyBwcmVkaWNhdGVTdHJpbmcsIGFuZCB0b1Zpc2libGUsIGluIHRoYXQgb3JkZXJcbiAgY29uc3Qge1xuICAgIG5hbWUsXG4gICAgZGlyZWN0aW9uLFxuICAgIHByZWRpY2F0ZVN0cmluZyxcbiAgICB0b1Zpc2libGUsXG4gICAgZGlzdGFuY2UsXG4gIH0gPSBvcHRzO1xuICBjb25zdCBwYXJhbXMgPSB7fTtcbiAgaWYgKG5hbWUpIHtcbiAgICBwYXJhbXMubmFtZSA9IG5hbWU7XG4gIH0gZWxzZSBpZiAoZGlyZWN0aW9uKSB7XG4gICAgaWYgKCFTVVBQT1JURURfR0VTVFVSRV9ESVJFQ1RJT05TLmluY2x1ZGVzKF8udG9Mb3dlcihkaXJlY3Rpb24pKSkge1xuICAgICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcihgJ2RpcmVjdGlvbicgbXVzdCBiZSBvbmUgb2Y6ICR7U1VQUE9SVEVEX0dFU1RVUkVfRElSRUNUSU9OU31gKTtcbiAgICB9XG4gICAgcGFyYW1zLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgfSBlbHNlIGlmIChwcmVkaWNhdGVTdHJpbmcpIHtcbiAgICBwYXJhbXMucHJlZGljYXRlU3RyaW5nID0gcHJlZGljYXRlU3RyaW5nO1xuICB9IGVsc2UgaWYgKHRvVmlzaWJsZSkge1xuICAgIHBhcmFtcy50b1Zpc2libGUgPSB0b1Zpc2libGU7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICdNb2JpbGUgc2Nyb2xsIHN1cHBvcnRzIHRoZSBmb2xsb3dpbmcgc3RyYXRlZ2llczogbmFtZSwgZGlyZWN0aW9uLCBwcmVkaWNhdGVTdHJpbmcsIGFuZCB0b1Zpc2libGUuICcgK1xuICAgICAgJ1NwZWNpZnkgb25lIG9mIHRoZXNlJyk7XG4gIH1cbiAgLy8gd2UgY2FuIGFsc28gb3B0aW9uYWxseSBwYXNzIGEgZGlzdGFuY2Ugd2hpY2ggYXBwZWFycyB0byBiZSBhIHJhdGlvIG9mXG4gIC8vIHNjcmVlbiBoZWlnaHQsIHNvIDEuMCBtZWFucyBhIGZ1bGwgc2NyZWVuJ3Mgd29ydGggb2Ygc2Nyb2xsaW5nXG4gIGlmICghXy5pc05pbChkaXN0YW5jZSkpIHtcbiAgICBwYXJhbXMuZGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgfVxuICBjb25zdCBlbGVtZW50SWQgPSBhd2FpdCB0b0VsZW1lbnRPckFwcGxpY2F0aW9uSWQodGhpcywgb3B0cyk7XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3dkYS9lbGVtZW50LyR7ZWxlbWVudElkfS9zY3JvbGxgLCAnUE9TVCcsIHBhcmFtcyk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZVN3aXBlID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlU3dpcGUgKG9wdHMgPSB7fSkge1xuICBjb25zdCB7XG4gICAgZGlyZWN0aW9uLFxuICAgIHZlbG9jaXR5LFxuICB9ID0gb3B0cztcbiAgaWYgKCFTVVBQT1JURURfR0VTVFVSRV9ESVJFQ1RJT05TLmluY2x1ZGVzKF8udG9Mb3dlcihkaXJlY3Rpb24pKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoYCdkaXJlY3Rpb24nIG11c3QgYmUgb25lIG9mOiAke1NVUFBPUlRFRF9HRVNUVVJFX0RJUkVDVElPTlN9YCk7XG4gIH1cbiAgY29uc3QgcGFyYW1zID0ge2RpcmVjdGlvbn07XG4gIGlmICghXy5pc05pbCh2ZWxvY2l0eSkpIHtcbiAgICBwYXJhbXMudmVsb2NpdHkgPSB2ZWxvY2l0eTtcbiAgfVxuICBjb25zdCBlbGVtZW50SWQgPSBhd2FpdCB0b0VsZW1lbnRPckFwcGxpY2F0aW9uSWQodGhpcywgb3B0cyk7XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3dkYS9lbGVtZW50LyR7ZWxlbWVudElkfS9zd2lwZWAsICdQT1NUJywgcGFyYW1zKTtcbn07XG5cbmhlbHBlcnMubW9iaWxlUGluY2ggPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVQaW5jaCAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICBzY2FsZTogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdzY2FsZScsIG9wdHMuc2NhbGUsICdwaW5jaCcpLFxuICAgIHZlbG9jaXR5OiByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3ZlbG9jaXR5Jywgb3B0cy52ZWxvY2l0eSwgJ3BpbmNoJylcbiAgfTtcbiAgY29uc3QgZWxlbWVudElkID0gYXdhaXQgdG9FbGVtZW50T3JBcHBsaWNhdGlvbklkKHRoaXMsIG9wdHMpO1xuICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC93ZGEvZWxlbWVudC8ke2VsZW1lbnRJZH0vcGluY2hgLCAnUE9TVCcsIHBhcmFtcyk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZURvdWJsZVRhcCA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZURvdWJsZVRhcCAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IGVsZW1lbnRJZCA9IHRvRWxlbWVudElkKG9wdHMpO1xuICBpZiAoZWxlbWVudElkKSB7XG4gICAgLy8gRG91YmxlIHRhcCBlbGVtZW50XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKGAvd2RhL2VsZW1lbnQvJHtlbGVtZW50SWR9L2RvdWJsZVRhcGAsICdQT1NUJyk7XG4gIH1cbiAgLy8gRG91YmxlIHRhcCBjb29yZGluYXRlc1xuICBjb25zdCBwYXJhbXMgPSB7XG4gICAgeDogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCd4Jywgb3B0cy54LCAnZG91YmxlVGFwJyksXG4gICAgeTogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCd5Jywgb3B0cy55LCAnZG91YmxlVGFwJylcbiAgfTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvd2RhL2RvdWJsZVRhcCcsICdQT1NUJywgcGFyYW1zKTtcbn07XG5cbmhlbHBlcnMubW9iaWxlVHdvRmluZ2VyVGFwID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlVHdvRmluZ2VyVGFwIChvcHRzID0ge30pIHtcbiAgY29uc3QgZWxlbWVudElkID0gYXdhaXQgdG9FbGVtZW50T3JBcHBsaWNhdGlvbklkKHRoaXMsIG9wdHMpO1xuICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC93ZGEvZWxlbWVudC8ke2VsZW1lbnRJZH0vdHdvRmluZ2VyVGFwYCwgJ1BPU1QnKTtcbn07XG5cbmhlbHBlcnMubW9iaWxlVG91Y2hBbmRIb2xkID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlVG91Y2hBbmRIb2xkIChvcHRzID0ge30pIHtcbiAgY29uc3QgcGFyYW1zID0ge1xuICAgIGR1cmF0aW9uOiByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ2R1cmF0aW9uJywgb3B0cy5kdXJhdGlvbiwgJ3RvdWNoQW5kSG9sZCcpXG4gIH07XG4gIGNvbnN0IGVsZW1lbnRJZCA9IHRvRWxlbWVudElkKG9wdHMpO1xuICBpZiAoZWxlbWVudElkKSB7XG4gICAgLy8gTG9uZyB0YXAgZWxlbWVudFxuICAgIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3dkYS9lbGVtZW50LyR7ZWxlbWVudElkfS90b3VjaEFuZEhvbGRgLCAnUE9TVCcsIHBhcmFtcyk7XG4gIH1cbiAgLy8gTG9uZyB0YXAgY29vcmRpbmF0ZXNcbiAgcGFyYW1zLnggPSByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3gnLCBvcHRzLngsICd0b3VjaEFuZEhvbGQnKTtcbiAgcGFyYW1zLnkgPSByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3knLCBvcHRzLnksICd0b3VjaEFuZEhvbGQnKTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvd2RhL3RvdWNoQW5kSG9sZCcsICdQT1NUJywgcGFyYW1zKTtcbn07XG5cbmhlbHBlcnMubW9iaWxlVGFwID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlVGFwIChvcHRzID0ge30pIHtcbiAgY29uc3QgcGFyYW1zID0ge1xuICAgIHg6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigneCcsIG9wdHMueCwgJ3RhcCcpLFxuICAgIHk6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigneScsIG9wdHMueSwgJ3RhcCcpXG4gIH07XG4gIGNvbnN0IGVsZW1lbnRJZCA9IHRvRWxlbWVudElkKG9wdHMpIHx8ICcwJztcbiAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKGAvd2RhL3RhcC8ke2VsZW1lbnRJZH1gLCAnUE9TVCcsIHBhcmFtcyk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZURyYWdGcm9tVG9Gb3JEdXJhdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZURyYWdGcm9tVG9Gb3JEdXJhdGlvbiAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICBkdXJhdGlvbjogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdkdXJhdGlvbicsIG9wdHMuZHVyYXRpb24sICdkcmFnRnJvbVRvRm9yRHVyYXRpb24nKSxcbiAgICBmcm9tWDogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdmcm9tWCcsIG9wdHMuZnJvbVgsICdkcmFnRnJvbVRvRm9yRHVyYXRpb24nKSxcbiAgICBmcm9tWTogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdmcm9tWScsIG9wdHMuZnJvbVksICdkcmFnRnJvbVRvRm9yRHVyYXRpb24nKSxcbiAgICB0b1g6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigndG9YJywgb3B0cy50b1gsICdkcmFnRnJvbVRvRm9yRHVyYXRpb24nKSxcbiAgICB0b1k6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigndG9ZJywgb3B0cy50b1ksICdkcmFnRnJvbVRvRm9yRHVyYXRpb24nKVxuICB9O1xuICBjb25zdCBlbGVtZW50SWQgPSB0b0VsZW1lbnRJZChvcHRzKTtcbiAgcmV0dXJuIGVsZW1lbnRJZFxuICAgIC8vIERyYWcgZWxlbWVudFxuICAgID8gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC93ZGEvZWxlbWVudC8ke2VsZW1lbnRJZH0vZHJhZ2Zyb210b2ZvcmR1cmF0aW9uYCwgJ1BPU1QnLCBwYXJhbXMpXG4gICAgLy8gRHJhZyBjb29yZGluYXRlc1xuICAgIDogYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoJy93ZGEvZHJhZ2Zyb210b2ZvcmR1cmF0aW9uJywgJ1BPU1QnLCBwYXJhbXMpO1xufTtcblxuaGVscGVycy5tb2JpbGVEcmFnRnJvbVRvV2l0aFZlbG9jaXR5ID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlRHJhZ0Zyb21Ub1dpdGhWZWxvY2l0eSAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICBwcmVzc0R1cmF0aW9uOiByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3ByZXNzRHVyYXRpb24nLCBvcHRzLnByZXNzRHVyYXRpb24sICdkcmFnRnJvbVRvV2l0aFZlbG9jaXR5JyksXG4gICAgaG9sZER1cmF0aW9uOiByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ2hvbGREdXJhdGlvbicsIG9wdHMuaG9sZER1cmF0aW9uLCAnZHJhZ0Zyb21Ub1dpdGhWZWxvY2l0eScpLFxuICAgIHZlbG9jaXR5OiByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3ZlbG9jaXR5Jywgb3B0cy52ZWxvY2l0eSwgJ2RyYWdGcm9tVG9XaXRoVmVsb2NpdHknKSxcbiAgfTtcbiAgY29uc3QgZnJvbUVsZW1lbnRJZCA9IG9wdHMuZnJvbUVsZW1lbnRJZCA/IHV0aWwudW53cmFwRWxlbWVudChvcHRzLmZyb21FbGVtZW50SWQpIDogbnVsbDtcbiAgaWYgKGZyb21FbGVtZW50SWQpIHtcbiAgICBjb25zdCB0b0VsZW1lbnQgPSBvcHRzLnRvRWxlbWVudElkID8gdXRpbC51bndyYXBFbGVtZW50KG9wdHMudG9FbGVtZW50SWQpIDogbnVsbDtcbiAgICBpZiAoIXRvRWxlbWVudCkge1xuICAgICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcihgXCJ0b0VsZW1lbnRJZFwiIHBhcmFtZXRlciBpcyBtYW5kYXRvcnkgZm9yIFwiZHJhZ0Zyb21Ub1dpdGhWZWxvY2l0eVwiIGNhbGxgKTtcbiAgICB9XG4gICAgcGFyYW1zLnRvRWxlbWVudCA9IHRvRWxlbWVudDtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC93ZGEvZWxlbWVudC8ke2Zyb21FbGVtZW50SWR9L3ByZXNzQW5kRHJhZ1dpdGhWZWxvY2l0eWAsICdQT1NUJywgcGFyYW1zKTtcbiAgfVxuICBwYXJhbXMuZnJvbVggPSByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ2Zyb21YJywgb3B0cy5mcm9tWCwgJ2RyYWdGcm9tVG9XaXRoVmVsb2NpdHknKTtcbiAgcGFyYW1zLmZyb21ZID0gcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdmcm9tWScsIG9wdHMuZnJvbVksICdkcmFnRnJvbVRvV2l0aFZlbG9jaXR5Jyk7XG4gIHBhcmFtcy50b1ggPSByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3RvWCcsIG9wdHMudG9YLCAnZHJhZ0Zyb21Ub1dpdGhWZWxvY2l0eScpO1xuICBwYXJhbXMudG9ZID0gcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCd0b1knLCBvcHRzLnRvWSwgJ2RyYWdGcm9tVG9XaXRoVmVsb2NpdHknKTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvd2RhL3ByZXNzQW5kRHJhZ1dpdGhWZWxvY2l0eScsICdQT1NUJywgcGFyYW1zKTtcbn07XG5cbmhlbHBlcnMubW9iaWxlVGFwV2l0aE51bWJlck9mVGFwcyA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZVRhcFdpdGhOdW1iZXJPZlRhcHMgKG9wdHMgPSB7fSkge1xuICBjb25zdCBlbGVtZW50SWQgPSB0b0VsZW1lbnRJZChvcHRzKTtcbiAgaWYgKCFlbGVtZW50SWQpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLkludmFsaWRBcmd1bWVudEVycm9yKCdFbGVtZW50IGlkIGlzIGV4cGVjdGVkIHRvIGJlIHNldCBmb3IgdGFwV2l0aE51bWJlck9mVGFwcyBtZXRob2QnKTtcbiAgfVxuICBjb25zdCBwYXJhbXMgPSB7XG4gICAgbnVtYmVyT2ZUYXBzOiByZXF1aXJlSW50UGFyYW1ldGVyKCdudW1iZXJPZlRhcHMnLCBvcHRzLm51bWJlck9mVGFwcywgJ3RhcFdpdGhOdW1iZXJPZlRhcHMnKSxcbiAgICBudW1iZXJPZlRvdWNoZXM6IHJlcXVpcmVJbnRQYXJhbWV0ZXIoJ251bWJlck9mVG91Y2hlcycsIG9wdHMubnVtYmVyT2ZUb3VjaGVzLCAndGFwV2l0aE51bWJlck9mVGFwcycpLFxuICB9O1xuICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC93ZGEvZWxlbWVudC8ke2VsZW1lbnRJZH0vdGFwV2l0aE51bWJlck9mVGFwc2AsICdQT1NUJywgcGFyYW1zKTtcbn07XG5cbmhlbHBlcnMubW9iaWxlRm9yY2VQcmVzcyA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZUZvcmNlUHJlc3MgKG9wdHMgPSB7fSkge1xuICBjb25zdCB7eCwgeSwgZHVyYXRpb24sIHByZXNzdXJlfSA9IG9wdHM7XG4gIGNvbnN0IGVsZW1lbnRJZCA9IHRvRWxlbWVudElkKG9wdHMpO1xuICBjb25zdCBlbmRwb2ludCA9IGVsZW1lbnRJZCA/IGAvd2RhL2VsZW1lbnQvJHtlbGVtZW50SWR9L2ZvcmNlVG91Y2hgIDogYC93ZGEvZm9yY2VUb3VjaGA7XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChlbmRwb2ludCwgJ1BPU1QnLCB7eCwgeSwgZHVyYXRpb24sIHByZXNzdXJlfSk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZVNlbGVjdFBpY2tlcldoZWVsVmFsdWUgPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVTZWxlY3RQaWNrZXJXaGVlbFZhbHVlIChvcHRzID0ge30pIHtcbiAgY29uc3QgZWxlbWVudElkID0gdG9FbGVtZW50SWQob3B0cyk7XG4gIGlmICghZWxlbWVudElkKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcignRWxlbWVudCBpZCBpcyBleHBlY3RlZCB0byBiZSBzZXQgZm9yIHNlbGVjdFBpY2tlcldoZWVsVmFsdWUgbWV0aG9kJyk7XG4gIH1cbiAgaWYgKCFfLmlzU3RyaW5nKG9wdHMub3JkZXIpIHx8ICFbJ25leHQnLCAncHJldmlvdXMnXS5pbmNsdWRlcyhvcHRzLm9yZGVyLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcihgVGhlIG1hbmRhdG9yeSAnb3JkZXInIHBhcmFtZXRlciBpcyBleHBlY3RlZCB0byBiZSBlcXVhbCBlaXRoZXIgdG8gJ25leHQnIG9yICdwcmV2aW91cycuIGAgK1xuICAgICAgYCcke29wdHMub3JkZXJ9JyBpcyBnaXZlbiBpbnN0ZWFkYCk7XG4gIH1cbiAgY29uc3QgcGFyYW1zID0ge29yZGVyOiBvcHRzLm9yZGVyfTtcbiAgaWYgKG9wdHMub2Zmc2V0KSB7XG4gICAgcGFyYW1zLm9mZnNldCA9IHJlcXVpcmVGbG9hdFBhcmFtZXRlcignb2Zmc2V0Jywgb3B0cy5vZmZzZXQsICdzZWxlY3RQaWNrZXJXaGVlbFZhbHVlJyk7XG4gIH1cbiAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKGAvd2RhL3BpY2tlcndoZWVsLyR7ZWxlbWVudElkfS9zZWxlY3RgLCAnUE9TVCcsIHBhcmFtcyk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZVJvdGF0ZUVsZW1lbnQgPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVSb3RhdGVFbGVtZW50IChvcHRzID0ge30pIHtcbiAgY29uc3QgZWxlbWVudElkID0gdG9FbGVtZW50SWQob3B0cyk7XG4gIGlmICghZWxlbWVudElkKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcignRWxlbWVudCBpZCBpcyBleHBlY3RlZCB0byBiZSBzZXQgZm9yIHJvdGF0ZUVsZW1lbnQgbWV0aG9kJyk7XG4gIH1cbiAgY29uc3QgcGFyYW1zID0ge1xuICAgIHJvdGF0aW9uOiByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3JvdGF0aW9uJywgb3B0cy5yb3RhdGlvbiwgJ3JvdGF0ZUVsZW1lbnQnKSxcbiAgICB2ZWxvY2l0eTogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCd2ZWxvY2l0eScsIG9wdHMudmVsb2NpdHksICdyb3RhdGVFbGVtZW50JyksXG4gIH07XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3dkYS9lbGVtZW50LyR7ZWxlbWVudElkfS9yb3RhdGVgLCAnUE9TVCcsIHBhcmFtcyk7XG59O1xuXG5oZWxwZXJzLmdldENvb3JkaW5hdGVzID0gYXN5bmMgZnVuY3Rpb24gZ2V0Q29vcmRpbmF0ZXMgKGdlc3R1cmUpIHtcbiAgLy8gZGVmYXVsdHNcbiAgbGV0IGNvb3JkaW5hdGVzID0ge3g6IDAsIHk6IDAsIGFyZU9mZnNldHM6IGZhbHNlfTtcblxuICBsZXQgb3B0aW9uWCA9IG51bGw7XG4gIGlmIChnZXN0dXJlLm9wdGlvbnMueCkge1xuICAgIG9wdGlvblggPSByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3gnLCBnZXN0dXJlLm9wdGlvbnMueCwgJ2dldENvb3JkaW5hdGVzJyk7XG4gIH1cbiAgbGV0IG9wdGlvblkgPSBudWxsO1xuICBpZiAoZ2VzdHVyZS5vcHRpb25zLnkpIHtcbiAgICBvcHRpb25ZID0gcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCd5JywgZ2VzdHVyZS5vcHRpb25zLnksICdnZXRDb29yZGluYXRlcycpO1xuICB9XG5cbiAgLy8gZmlndXJlIG91dCB0aGUgZWxlbWVudCBjb29yZGluYXRlcy5cbiAgY29uc3QgZWxlbWVudElkID0gdG9FbGVtZW50SWQoZ2VzdHVyZS5vcHRpb25zKTtcbiAgaWYgKGVsZW1lbnRJZCkge1xuICAgIGxldCByZWN0ID0gYXdhaXQgdGhpcy5nZXRFbGVtZW50UmVjdChlbGVtZW50SWQpO1xuICAgIGxldCBwb3MgPSB7eDogcmVjdC54LCB5OiByZWN0Lnl9O1xuICAgIGxldCBzaXplID0ge3c6IHJlY3Qud2lkdGgsIGg6IHJlY3QuaGVpZ2h0fTtcblxuICAgIC8vIGRlZmF1bHRzXG4gICAgbGV0IG9mZnNldFggPSAwO1xuICAgIGxldCBvZmZzZXRZID0gMDtcblxuICAgIC8vIGdldCB0aGUgcmVhbCBvZmZzZXRzXG4gICAgaWYgKG9wdGlvblggfHwgb3B0aW9uWSkge1xuICAgICAgb2Zmc2V0WCA9IChvcHRpb25YIHx8IDApO1xuICAgICAgb2Zmc2V0WSA9IChvcHRpb25ZIHx8IDApO1xuICAgIH0gZWxzZSB7XG4gICAgICBvZmZzZXRYID0gKHNpemUudyAvIDIpO1xuICAgICAgb2Zmc2V0WSA9IChzaXplLmggLyAyKTtcbiAgICB9XG5cbiAgICAvLyBhcHBseSB0aGUgb2Zmc2V0c1xuICAgIGNvb3JkaW5hdGVzLnggPSBwb3MueCArIG9mZnNldFg7XG4gICAgY29vcmRpbmF0ZXMueSA9IHBvcy55ICsgb2Zmc2V0WTtcbiAgfSBlbHNlIHtcbiAgICAvLyBtb3ZlVG8gY29vcmRpbmF0ZXMgYXJlIHBhc3NlZCBpbiBhcyBvZmZzZXRzXG4gICAgY29vcmRpbmF0ZXMuYXJlT2Zmc2V0cyA9IChnZXN0dXJlLmFjdGlvbiA9PT0gJ21vdmVUbycpO1xuICAgIGNvb3JkaW5hdGVzLnggPSAob3B0aW9uWCB8fCAwKTtcbiAgICBjb29yZGluYXRlcy55ID0gKG9wdGlvblkgfHwgMCk7XG4gIH1cbiAgcmV0dXJuIGNvb3JkaW5hdGVzO1xufTtcblxuaGVscGVycy5hcHBseU1vdmVUb09mZnNldCA9IGZ1bmN0aW9uIGFwcGx5TW92ZVRvT2Zmc2V0IChmaXJzdENvb3JkaW5hdGVzLCBzZWNvbmRDb29yZGluYXRlcykge1xuICBpZiAoc2Vjb25kQ29vcmRpbmF0ZXMuYXJlT2Zmc2V0cykge1xuICAgIHJldHVybiB7XG4gICAgICB4OiBmaXJzdENvb3JkaW5hdGVzLnggKyBzZWNvbmRDb29yZGluYXRlcy54LFxuICAgICAgeTogZmlyc3RDb29yZGluYXRlcy55ICsgc2Vjb25kQ29vcmRpbmF0ZXMueSxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzZWNvbmRDb29yZGluYXRlcztcbiAgfVxufTtcblxuT2JqZWN0LmFzc2lnbihleHRlbnNpb25zLCBoZWxwZXJzLCBjb21tYW5kcyk7XG5leHBvcnQgeyBleHRlbnNpb25zLCBoZWxwZXJzLCBjb21tYW5kcywgZ2VzdHVyZXNDaGFpblRvU3RyaW5nIH07XG5leHBvcnQgZGVmYXVsdCBleHRlbnNpb25zO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBQyxzQkFBQSxDQUFBSCxPQUFBO0FBQ0EsSUFBQUksT0FBQSxHQUFBRCxzQkFBQSxDQUFBSCxPQUFBO0FBRUEsTUFBTUssNEJBQTRCLEdBQUcsQ0FB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