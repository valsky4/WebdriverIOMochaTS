{"version":3,"file":"gesture.js","names":["_driver","require","_support","_lodash","_interopRequireDefault","_logger","SUPPORTED_GESTURE_DIRECTIONS","helpers","extensions","commands","exports","toElementId","opts","element","log","info","el","elementId","util","unwrapElement","toElementOrApplicationId","driver","findNativeElementOrElements","moveTo","xoffset","yoffset","isWebContext","x","y","getLocation","coords","curWebCoords","atomsElement","getAtomsElement","relCoords","executeAtom","_","isNil","curCoords","errors","UnknownException","elPos","requireFloatParameter","paramName","paramValue","methodName","isUndefined","InvalidArgumentError","result","parseFloat","isNaN","requireIntParameter","parseInt","mobileShake","isSimulator","UnknownError","device","shake","click","nativeClick","settings","getSettings","nativeWebTap","nativeWebTapStrict","debug","gesturesChainToString","gestures","keysToInclude","map","item","otherKeys","difference","keys","isArray","intersection","length","action","isPlainObject","JSON","stringify","join","performActions","actions","preprocessedActions","Object","assign","type","parameters","pointerType","modifiedAction","clone","filter","innerAction","duration","proxyCommand","releaseActions","warn","performTouch","e","errorAndThrow","message","performMultiAction","i","endpoint","mobileScrollToElement","mobileScroll","name","direction","predicateString","toVisible","distance","params","includes","toLower","mobileSwipe","velocity","mobilePinch","scale","mobileDoubleTap","mobileTwoFingerTap","mobileTouchAndHold","mobileTap","mobileDragFromToForDuration","fromX","fromY","toX","toY","mobileDragFromToWithVelocity","pressDuration","holdDuration","fromElementId","toElement","mobileTapWithNumberOfTaps","numberOfTaps","numberOfTouches","mobileForcePress","pressure","mobileSelectPickerWheelValue","isString","order","toLowerCase","offset","mobileRotateElement","rotation","getCoordinates","gesture","coordinates","areOffsets","optionX","options","optionY","rect","getElementRect","pos","size","w","width","h","height","offsetX","offsetY","applyMoveToOffset","firstCoordinates","secondCoordinates","_default","default"],"sources":["../../../lib/commands/gesture.js"],"sourcesContent":["import { errors } from 'appium/driver';\nimport { util } from 'appium/support';\nimport _ from 'lodash';\nimport log from '../logger';\n\nconst SUPPORTED_GESTURE_DIRECTIONS = ['up', 'down', 'left', 'right'];\n\nconst helpers = {}, extensions = {}, commands = {};\n\nfunction toElementId (opts = {}) {\n  if (opts.element) {\n    log.info(`The 'element' argument name is deprecated. Consider using 'elementId' instead`);\n  }\n  const el = opts.elementId || opts.element;\n  return el ? util.unwrapElement(el) : null;\n}\n\nasync function toElementOrApplicationId (driver, opts = {}) {\n  return toElementId(opts)\n    || util.unwrapElement(await driver.findNativeElementOrElements(`class name`, `XCUIElementTypeApplication`, false));\n}\n\ncommands.moveTo = async function moveTo (el, xoffset = 0, yoffset = 0) {\n  el = util.unwrapElement(el);\n\n  if (this.isWebContext()) {\n    let {x, y} = await this.getLocation(el);\n    let coords = {\n      x: x + xoffset,\n      y: y + yoffset\n    };\n    this.curWebCoords = coords;\n    let atomsElement = this.getAtomsElement(el);\n    let relCoords = {x: xoffset, y: yoffset};\n    await this.executeAtom('move_mouse', [atomsElement, relCoords]);\n  } else {\n    if (_.isNil(el)) {\n      if (!this.curCoords) {\n        throw new errors.UnknownException(\n          'Current cursor position unknown, please use moveTo with an element the first time.');\n      }\n      this.curCoords = {\n        x: this.curCoords.x + xoffset,\n        y: this.curCoords.y + yoffset\n      };\n    } else {\n      let elPos = await this.getLocation(el);\n      this.curCoords = {\n        x: elPos.x + xoffset,\n        y: elPos.y + yoffset\n      };\n    }\n  }\n};\n\nfunction requireFloatParameter (paramName, paramValue, methodName) {\n  if (_.isUndefined(paramValue)) {\n    throw new errors.InvalidArgumentError(`\"${paramName}\" parameter is mandatory for \"${methodName}\" call`);\n  }\n  const result = parseFloat(paramValue);\n  if (isNaN(result)) {\n    throw new errors.InvalidArgumentError(`\"${paramName}\" parameter should be a valid number. \"${paramValue}\" is given instead`);\n  }\n  return result;\n}\n\nfunction requireIntParameter (paramName, paramValue, methodName) {\n  if (_.isUndefined(paramValue)) {\n    throw new errors.InvalidArgumentError(`\"${paramName}\" parameter is mandatory for \"${methodName}\" call`);\n  }\n  const result = parseInt(paramValue, 10);\n  if (isNaN(result)) {\n    throw new errors.InvalidArgumentError(`\"${paramName}\" parameter should be a valid integer. \"${paramValue}\" is given instead`);\n  }\n  return result;\n}\n\ncommands.mobileShake = async function mobileShake () {\n  if (!this.isSimulator()) {\n    throw new errors.UnknownError('Shake is not supported on real devices');\n  }\n  await this.opts.device.shake();\n};\n\ncommands.click = async function click (el) {\n  if (!this.isWebContext()) {\n    // there are multiple commands that map here, so manually proxy\n    return await this.nativeClick(el);\n  }\n  el = util.unwrapElement(el);\n  if ((await this.settings.getSettings()).nativeWebTap || (await this.settings.getSettings()).nativeWebTapStrict) {\n    // atoms-based clicks don't always work in safari 7\n    this.log.debug('Using native web tap');\n    await this.nativeWebTap(el);\n  } else {\n    const atomsElement = this.getAtomsElement(el);\n    return await this.executeAtom('click', [atomsElement]);\n  }\n};\n\nfunction gesturesChainToString (gestures, keysToInclude = ['options']) {\n  return gestures.map((item) => {\n    let otherKeys = _.difference(_.keys(item), ['action']);\n    otherKeys = _.isArray(keysToInclude) ? _.intersection(otherKeys, keysToInclude) : otherKeys;\n    if (otherKeys.length) {\n      return `${item.action}` +\n        `(${_.map(otherKeys, (x) => x + '=' + (_.isPlainObject(item[x]) ? JSON.stringify(item[x]) : item[x])).join(', ')})`;\n    }\n    return item.action;\n  }).join('-');\n}\n\ncommands.performActions = async function performActions (actions) {\n  this.log.debug(`Received the following W3C actions: ${JSON.stringify(actions, null, '  ')}`);\n  // This is mandatory, since WDA only supports TOUCH pointer type\n  // and Selenium API uses MOUSE as the default one\n  const preprocessedActions = actions\n    .map((action) => Object.assign({}, action, action.type === 'pointer' ? {\n      parameters: {\n        pointerType: 'touch'\n      }\n    } : {}))\n    .map((action) => {\n      const modifiedAction = _.clone(action) || {};\n      // Selenium API unexpectedly inserts zero pauses, which are not supported by WDA\n      modifiedAction.actions = (action.actions || [])\n        .filter((innerAction) => !(innerAction.type === 'pause' && innerAction.duration === 0));\n      return modifiedAction;\n    });\n  this.log.debug(`Preprocessed actions: ${JSON.stringify(preprocessedActions, null, '  ')}`);\n  return await this.proxyCommand('/actions', 'POST', {actions: preprocessedActions});\n};\n\ncommands.releaseActions = function releaseActions () {\n  this.log.warn('On this platform, releaseActions is a no-op');\n};\n\ncommands.performTouch = async function performTouch (gestures) {\n  this.log.debug(`Received the following touch action: ${gesturesChainToString(gestures)}`);\n  try {\n    return await this.proxyCommand('/wda/touch/perform', 'POST', {actions: gestures});\n  } catch (e) {\n    if (!this.isWebContext()) {\n      throw e;\n    }\n    this.log.errorAndThrow('The Touch API is aimed for usage in NATIVE context. ' +\n      'Consider using \"execute\" API with custom events trigger script ' +\n      `to emulate touch events being in WEBVIEW context. Original error: ${e.message}`);\n  }\n};\n\ncommands.performMultiAction = async function performMultiAction (actions) {\n  this.log.debug(`Received the following multi touch action:`);\n  for (let i in actions) {\n    this.log.debug(`    ${parseInt(i, 10) + 1}: ${_.map(actions[i], 'action').join('-')}`);\n  }\n  try {\n    return await this.proxyCommand('/wda/touch/multi/perform', 'POST', {actions});\n  } catch (e) {\n    if (!this.isWebContext()) {\n      throw e;\n    }\n    this.log.errorAndThrow('The MultiTouch API is aimed for usage in NATIVE context. ' +\n      'Consider using \"execute\" API with custom events trigger script ' +\n      `to emulate multitouch events being in WEBVIEW context. Original error: ${e.message}`);\n  }\n};\n\ncommands.nativeClick = async function nativeClick (el) {\n  el = util.unwrapElement(el);\n  let endpoint = `/element/${el}/click`;\n  return await this.proxyCommand(endpoint, 'POST', {});\n};\n\n/*\n * See https://github.com/facebook/WebDriverAgent/blob/master/WebDriverAgentLib/Commands/FBElementCommands.m\n * to get the info about available WDA gestures API\n *\n * See https://developer.apple.com/reference/xctest/xcuielement and\n * https://developer.apple.com/reference/xctest/xcuicoordinate to get the detailed description of\n * all XCTest gestures\n*/\n\ncommands.mobileScrollToElement = async function mobileScrollToElement (opts = {}) {\n  const elementId = await toElementId(opts);\n  if (!elementId) {\n    throw new errors.InvalidArgumentError('Element id must be provided');\n  }\n  return await this.proxyCommand(`/wda/element/${elementId}/scrollTo`, 'POST', {});\n};\n\nhelpers.mobileScroll = async function mobileScroll (opts = {}) {\n  // WDA supports four scrolling strategies: predication based on name, direction,\n  // predicateString, and toVisible, in that order\n  const {\n    name,\n    direction,\n    predicateString,\n    toVisible,\n    distance,\n  } = opts;\n  const params = {};\n  if (name) {\n    params.name = name;\n  } else if (direction) {\n    if (!SUPPORTED_GESTURE_DIRECTIONS.includes(_.toLower(direction))) {\n      throw new errors.InvalidArgumentError(`'direction' must be one of: ${SUPPORTED_GESTURE_DIRECTIONS}`);\n    }\n    params.direction = direction;\n  } else if (predicateString) {\n    params.predicateString = predicateString;\n  } else if (toVisible) {\n    params.toVisible = toVisible;\n  } else {\n    throw new errors.InvalidArgumentError(\n      'Mobile scroll supports the following strategies: name, direction, predicateString, and toVisible. ' +\n      'Specify one of these');\n  }\n  // we can also optionally pass a distance which appears to be a ratio of\n  // screen height, so 1.0 means a full screen's worth of scrolling\n  if (!_.isNil(distance)) {\n    params.distance = distance;\n  }\n  const elementId = await toElementOrApplicationId(this, opts);\n  return await this.proxyCommand(`/wda/element/${elementId}/scroll`, 'POST', params);\n};\n\nhelpers.mobileSwipe = async function mobileSwipe (opts = {}) {\n  const {\n    direction,\n    velocity,\n  } = opts;\n  if (!SUPPORTED_GESTURE_DIRECTIONS.includes(_.toLower(direction))) {\n    throw new errors.InvalidArgumentError(`'direction' must be one of: ${SUPPORTED_GESTURE_DIRECTIONS}`);\n  }\n  const params = {direction};\n  if (!_.isNil(velocity)) {\n    params.velocity = velocity;\n  }\n  const elementId = await toElementOrApplicationId(this, opts);\n  return await this.proxyCommand(`/wda/element/${elementId}/swipe`, 'POST', params);\n};\n\nhelpers.mobilePinch = async function mobilePinch (opts = {}) {\n  const params = {\n    scale: requireFloatParameter('scale', opts.scale, 'pinch'),\n    velocity: requireFloatParameter('velocity', opts.velocity, 'pinch')\n  };\n  const elementId = await toElementOrApplicationId(this, opts);\n  return await this.proxyCommand(`/wda/element/${elementId}/pinch`, 'POST', params);\n};\n\nhelpers.mobileDoubleTap = async function mobileDoubleTap (opts = {}) {\n  const elementId = toElementId(opts);\n  if (elementId) {\n    // Double tap element\n    return await this.proxyCommand(`/wda/element/${elementId}/doubleTap`, 'POST');\n  }\n  // Double tap coordinates\n  const params = {\n    x: requireFloatParameter('x', opts.x, 'doubleTap'),\n    y: requireFloatParameter('y', opts.y, 'doubleTap')\n  };\n  return await this.proxyCommand('/wda/doubleTap', 'POST', params);\n};\n\nhelpers.mobileTwoFingerTap = async function mobileTwoFingerTap (opts = {}) {\n  const elementId = await toElementOrApplicationId(this, opts);\n  return await this.proxyCommand(`/wda/element/${elementId}/twoFingerTap`, 'POST');\n};\n\nhelpers.mobileTouchAndHold = async function mobileTouchAndHold (opts = {}) {\n  const params = {\n    duration: requireFloatParameter('duration', opts.duration, 'touchAndHold')\n  };\n  const elementId = toElementId(opts);\n  if (elementId) {\n    // Long tap element\n    return await this.proxyCommand(`/wda/element/${elementId}/touchAndHold`, 'POST', params);\n  }\n  // Long tap coordinates\n  params.x = requireFloatParameter('x', opts.x, 'touchAndHold');\n  params.y = requireFloatParameter('y', opts.y, 'touchAndHold');\n  return await this.proxyCommand('/wda/touchAndHold', 'POST', params);\n};\n\nhelpers.mobileTap = async function mobileTap (opts = {}) {\n  const params = {\n    x: requireFloatParameter('x', opts.x, 'tap'),\n    y: requireFloatParameter('y', opts.y, 'tap')\n  };\n  const elementId = toElementId(opts) || '0';\n  return await this.proxyCommand(`/wda/tap/${elementId}`, 'POST', params);\n};\n\nhelpers.mobileDragFromToForDuration = async function mobileDragFromToForDuration (opts = {}) {\n  const params = {\n    duration: requireFloatParameter('duration', opts.duration, 'dragFromToForDuration'),\n    fromX: requireFloatParameter('fromX', opts.fromX, 'dragFromToForDuration'),\n    fromY: requireFloatParameter('fromY', opts.fromY, 'dragFromToForDuration'),\n    toX: requireFloatParameter('toX', opts.toX, 'dragFromToForDuration'),\n    toY: requireFloatParameter('toY', opts.toY, 'dragFromToForDuration')\n  };\n  const elementId = toElementId(opts);\n  return elementId\n    // Drag element\n    ? await this.proxyCommand(`/wda/element/${elementId}/dragfromtoforduration`, 'POST', params)\n    // Drag coordinates\n    : await this.proxyCommand('/wda/dragfromtoforduration', 'POST', params);\n};\n\nhelpers.mobileDragFromToWithVelocity = async function mobileDragFromToWithVelocity (opts = {}) {\n  const params = {\n    pressDuration: requireFloatParameter('pressDuration', opts.pressDuration, 'dragFromToWithVelocity'),\n    holdDuration: requireFloatParameter('holdDuration', opts.holdDuration, 'dragFromToWithVelocity'),\n    velocity: requireFloatParameter('velocity', opts.velocity, 'dragFromToWithVelocity'),\n  };\n  const fromElementId = opts.fromElementId ? util.unwrapElement(opts.fromElementId) : null;\n  if (fromElementId) {\n    const toElement = opts.toElementId ? util.unwrapElement(opts.toElementId) : null;\n    if (!toElement) {\n      throw new errors.InvalidArgumentError(`\"toElementId\" parameter is mandatory for \"dragFromToWithVelocity\" call`);\n    }\n    params.toElement = toElement;\n    return await this.proxyCommand(`/wda/element/${fromElementId}/pressAndDragWithVelocity`, 'POST', params);\n  }\n  params.fromX = requireFloatParameter('fromX', opts.fromX, 'dragFromToWithVelocity');\n  params.fromY = requireFloatParameter('fromY', opts.fromY, 'dragFromToWithVelocity');\n  params.toX = requireFloatParameter('toX', opts.toX, 'dragFromToWithVelocity');\n  params.toY = requireFloatParameter('toY', opts.toY, 'dragFromToWithVelocity');\n  return await this.proxyCommand('/wda/pressAndDragWithVelocity', 'POST', params);\n};\n\nhelpers.mobileTapWithNumberOfTaps = async function mobileTapWithNumberOfTaps (opts = {}) {\n  const elementId = toElementId(opts);\n  if (!elementId) {\n    throw new errors.InvalidArgumentError('Element id is expected to be set for tapWithNumberOfTaps method');\n  }\n  const params = {\n    numberOfTaps: requireIntParameter('numberOfTaps', opts.numberOfTaps, 'tapWithNumberOfTaps'),\n    numberOfTouches: requireIntParameter('numberOfTouches', opts.numberOfTouches, 'tapWithNumberOfTaps'),\n  };\n  return await this.proxyCommand(`/wda/element/${elementId}/tapWithNumberOfTaps`, 'POST', params);\n};\n\nhelpers.mobileForcePress = async function mobileForcePress (opts = {}) {\n  const {x, y, duration, pressure} = opts;\n  const elementId = toElementId(opts);\n  const endpoint = elementId ? `/wda/element/${elementId}/forceTouch` : `/wda/forceTouch`;\n  return await this.proxyCommand(endpoint, 'POST', {x, y, duration, pressure});\n};\n\nhelpers.mobileSelectPickerWheelValue = async function mobileSelectPickerWheelValue (opts = {}) {\n  const elementId = toElementId(opts);\n  if (!elementId) {\n    throw new errors.InvalidArgumentError('Element id is expected to be set for selectPickerWheelValue method');\n  }\n  if (!_.isString(opts.order) || !['next', 'previous'].includes(opts.order.toLowerCase())) {\n    throw new errors.InvalidArgumentError(`The mandatory 'order' parameter is expected to be equal either to 'next' or 'previous'. ` +\n      `'${opts.order}' is given instead`);\n  }\n  const params = {order: opts.order};\n  if (opts.offset) {\n    params.offset = requireFloatParameter('offset', opts.offset, 'selectPickerWheelValue');\n  }\n  return await this.proxyCommand(`/wda/pickerwheel/${elementId}/select`, 'POST', params);\n};\n\nhelpers.mobileRotateElement = async function mobileRotateElement (opts = {}) {\n  const elementId = toElementId(opts);\n  if (!elementId) {\n    throw new errors.InvalidArgumentError('Element id is expected to be set for rotateElement method');\n  }\n  const params = {\n    rotation: requireFloatParameter('rotation', opts.rotation, 'rotateElement'),\n    velocity: requireFloatParameter('velocity', opts.velocity, 'rotateElement'),\n  };\n  return await this.proxyCommand(`/wda/element/${elementId}/rotate`, 'POST', params);\n};\n\nhelpers.getCoordinates = async function getCoordinates (gesture) {\n  // defaults\n  let coordinates = {x: 0, y: 0, areOffsets: false};\n\n  let optionX = null;\n  if (gesture.options.x) {\n    optionX = requireFloatParameter('x', gesture.options.x, 'getCoordinates');\n  }\n  let optionY = null;\n  if (gesture.options.y) {\n    optionY = requireFloatParameter('y', gesture.options.y, 'getCoordinates');\n  }\n\n  // figure out the element coordinates.\n  const elementId = toElementId(gesture.options);\n  if (elementId) {\n    let rect = await this.getElementRect(elementId);\n    let pos = {x: rect.x, y: rect.y};\n    let size = {w: rect.width, h: rect.height};\n\n    // defaults\n    let offsetX = 0;\n    let offsetY = 0;\n\n    // get the real offsets\n    if (optionX || optionY) {\n      offsetX = (optionX || 0);\n      offsetY = (optionY || 0);\n    } else {\n      offsetX = (size.w / 2);\n      offsetY = (size.h / 2);\n    }\n\n    // apply the offsets\n    coordinates.x = pos.x + offsetX;\n    coordinates.y = pos.y + offsetY;\n  } else {\n    // moveTo coordinates are passed in as offsets\n    coordinates.areOffsets = (gesture.action === 'moveTo');\n    coordinates.x = (optionX || 0);\n    coordinates.y = (optionY || 0);\n  }\n  return coordinates;\n};\n\nhelpers.applyMoveToOffset = function applyMoveToOffset (firstCoordinates, secondCoordinates) {\n  if (secondCoordinates.areOffsets) {\n    return {\n      x: firstCoordinates.x + secondCoordinates.x,\n      y: firstCoordinates.y + secondCoordinates.y,\n    };\n  } else {\n    return secondCoordinates;\n  }\n};\n\nObject.assign(extensions, helpers, commands);\nexport { extensions, helpers, commands, gesturesChainToString };\nexport default extensions;\n"],"mappings":"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"}