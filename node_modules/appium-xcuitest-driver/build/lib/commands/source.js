"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.helpers = exports.default = exports.commands = void 0;
require("source-map-support/register");
var _xmldom = _interopRequireDefault(require("@xmldom/xmldom"));
var _js2xmlparser = _interopRequireDefault(require("js2xmlparser2"));
let commands = {},
  helpers = {},
  extensions = {};
exports.helpers = helpers;
exports.commands = commands;
const APPIUM_AUT_TAG = 'AppiumAUT';
const APPIUM_SRC_XML = `<?xml version="1.0" encoding="UTF-8"?><${APPIUM_AUT_TAG}/>`;
const APPIUM_TAG_PATTERN = new RegExp(`</?${APPIUM_AUT_TAG}/?>`);
commands.getPageSource = async function getPageSource() {
  if (this.isWebContext()) {
    const script = 'return document.documentElement.outerHTML';
    return await this.executeAtom('execute_script', [script, []]);
  }
  if ((await this.settings.getSettings()).useJSONSource) {
    const srcTree = await this.mobileGetSource({
      format: 'json'
    });
    return getSourceXml(getTreeForXML(srcTree));
  }
  return await this.getNativePageSource();
};
helpers.getNativePageSource = async function getNativePageSource() {
  const srcTree = await this.proxyCommand(`/source?scope=${APPIUM_AUT_TAG}`, 'GET');
  if (APPIUM_TAG_PATTERN.test(srcTree)) {
    return srcTree;
  }
  const parser = new _xmldom.default.DOMParser();
  const tree = parser.parseFromString(srcTree);
  const doc = parser.parseFromString(APPIUM_SRC_XML);
  doc.documentElement.appendChild(tree.documentElement);
  return new _xmldom.default.XMLSerializer().serializeToString(doc);
};
helpers.mobileGetSource = async function mobileGetSource(opts = {}) {
  const paramsMap = {
    format: opts.format || 'xml',
    scope: APPIUM_AUT_TAG
  };
  if (opts.excludedAttributes) {
    paramsMap.excluded_attributes = opts.excludedAttributes;
  }
  const query = Object.entries(paramsMap).map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`).join('&');
  return await this.proxyCommand(`/source?${query}`, 'GET');
};
function getTreeForXML(srcTree) {
  function getTree(element, elementIndex, parentPath) {
    let curPath = `${parentPath}/${elementIndex}`;
    let rect = element.rect || {};
    let subtree = {
      '@': {
        type: `XCUIElementType${element.type}`,
        enabled: parseInt(element.isEnabled, 10) === 1,
        visible: parseInt(element.isVisible, 10) === 1,
        x: rect.x,
        y: rect.y,
        width: rect.width,
        height: rect.height
      },
      '>': []
    };
    if (element.name !== null) {
      subtree['@'].name = element.name;
    }
    if (element.label !== null) {
      subtree['@'].label = element.label;
    }
    if (element.value !== null) {
      subtree['@'].value = element.value;
    }
    for (let i = 0; i < (element.children || []).length; i++) {
      subtree['>'].push(getTree(element.children[i], i, curPath));
    }
    return {
      [`XCUIElementType${element.type}`]: subtree
    };
  }
  let tree = getTree(srcTree, 0, '');
  return tree;
}
function getSourceXml(jsonSource) {
  return (0, _js2xmlparser.default)('AppiumAUT', jsonSource, {
    wrapArray: {
      enabled: false,
      elementName: 'element'
    },
    declaration: {
      include: true
    },
    prettyPrinting: {
      indentString: '  '
    }
  });
}
Object.assign(extensions, commands, helpers);
var _default = extensions;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfeG1sZG9tIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfanMyeG1scGFyc2VyIiwiY29tbWFuZHMiLCJoZWxwZXJzIiwiZXh0ZW5zaW9ucyIsImV4cG9ydHMiLCJBUFBJVU1fQVVUX1RBRyIsIkFQUElVTV9TUkNfWE1MIiwiQVBQSVVNX1RBR19QQVRURVJOIiwiUmVnRXhwIiwiZ2V0UGFnZVNvdXJjZSIsImlzV2ViQ29udGV4dCIsInNjcmlwdCIsImV4ZWN1dGVBdG9tIiwic2V0dGluZ3MiLCJnZXRTZXR0aW5ncyIsInVzZUpTT05Tb3VyY2UiLCJzcmNUcmVlIiwibW9iaWxlR2V0U291cmNlIiwiZm9ybWF0IiwiZ2V0U291cmNlWG1sIiwiZ2V0VHJlZUZvclhNTCIsImdldE5hdGl2ZVBhZ2VTb3VyY2UiLCJwcm94eUNvbW1hbmQiLCJ0ZXN0IiwicGFyc2VyIiwieG1sZG9tIiwiRE9NUGFyc2VyIiwidHJlZSIsInBhcnNlRnJvbVN0cmluZyIsImRvYyIsImRvY3VtZW50RWxlbWVudCIsImFwcGVuZENoaWxkIiwiWE1MU2VyaWFsaXplciIsInNlcmlhbGl6ZVRvU3RyaW5nIiwib3B0cyIsInBhcmFtc01hcCIsInNjb3BlIiwiZXhjbHVkZWRBdHRyaWJ1dGVzIiwiZXhjbHVkZWRfYXR0cmlidXRlcyIsInF1ZXJ5IiwiT2JqZWN0IiwiZW50cmllcyIsIm1hcCIsImsiLCJ2IiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsImdldFRyZWUiLCJlbGVtZW50IiwiZWxlbWVudEluZGV4IiwicGFyZW50UGF0aCIsImN1clBhdGgiLCJyZWN0Iiwic3VidHJlZSIsInR5cGUiLCJlbmFibGVkIiwicGFyc2VJbnQiLCJpc0VuYWJsZWQiLCJ2aXNpYmxlIiwiaXNWaXNpYmxlIiwieCIsInkiLCJ3aWR0aCIsImhlaWdodCIsIm5hbWUiLCJsYWJlbCIsInZhbHVlIiwiaSIsImNoaWxkcmVuIiwibGVuZ3RoIiwicHVzaCIsImpzb25Tb3VyY2UiLCJqczJ4bWwiLCJ3cmFwQXJyYXkiLCJlbGVtZW50TmFtZSIsImRlY2xhcmF0aW9uIiwiaW5jbHVkZSIsInByZXR0eVByaW50aW5nIiwiaW5kZW50U3RyaW5nIiwiYXNzaWduIiwiX2RlZmF1bHQiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vbGliL2NvbW1hbmRzL3NvdXJjZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeG1sZG9tIGZyb20gJ0B4bWxkb20veG1sZG9tJztcbmltcG9ydCBqczJ4bWwgZnJvbSAnanMyeG1scGFyc2VyMic7XG5cblxubGV0IGNvbW1hbmRzID0ge30sIGhlbHBlcnMgPSB7fSwgZXh0ZW5zaW9ucyA9IHt9O1xuXG5jb25zdCBBUFBJVU1fQVVUX1RBRyA9ICdBcHBpdW1BVVQnO1xuY29uc3QgQVBQSVVNX1NSQ19YTUwgPSBgPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIj8+PCR7QVBQSVVNX0FVVF9UQUd9Lz5gO1xuY29uc3QgQVBQSVVNX1RBR19QQVRURVJOID0gbmV3IFJlZ0V4cChgPC8/JHtBUFBJVU1fQVVUX1RBR30vPz5gKTtcblxuXG5jb21tYW5kcy5nZXRQYWdlU291cmNlID0gYXN5bmMgZnVuY3Rpb24gZ2V0UGFnZVNvdXJjZSAoKSB7XG4gIGlmICh0aGlzLmlzV2ViQ29udGV4dCgpKSB7XG4gICAgY29uc3Qgc2NyaXB0ID0gJ3JldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MJztcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXRvbSgnZXhlY3V0ZV9zY3JpcHQnLCBbc2NyaXB0LCBbXV0pO1xuICB9XG5cbiAgaWYgKChhd2FpdCB0aGlzLnNldHRpbmdzLmdldFNldHRpbmdzKCkpLnVzZUpTT05Tb3VyY2UpIHtcbiAgICBjb25zdCBzcmNUcmVlID0gYXdhaXQgdGhpcy5tb2JpbGVHZXRTb3VyY2Uoe2Zvcm1hdDogJ2pzb24nfSk7XG4gICAgcmV0dXJuIGdldFNvdXJjZVhtbChnZXRUcmVlRm9yWE1MKHNyY1RyZWUpKTtcbiAgfVxuICByZXR1cm4gYXdhaXQgdGhpcy5nZXROYXRpdmVQYWdlU291cmNlKCk7XG59O1xuXG5oZWxwZXJzLmdldE5hdGl2ZVBhZ2VTb3VyY2UgPSBhc3luYyBmdW5jdGlvbiBnZXROYXRpdmVQYWdlU291cmNlICgpIHtcbiAgY29uc3Qgc3JjVHJlZSA9IGF3YWl0IHRoaXMucHJveHlDb21tYW5kKGAvc291cmNlP3Njb3BlPSR7QVBQSVVNX0FVVF9UQUd9YCwgJ0dFVCcpO1xuICBpZiAoQVBQSVVNX1RBR19QQVRURVJOLnRlc3Qoc3JjVHJlZSkpIHtcbiAgICByZXR1cm4gc3JjVHJlZTtcbiAgfVxuICAvLyBUaGlzIG1pZ2h0IG9ubHkgaGFwcGVuIGlmIHRoZSBkcml2ZXIgaXMgdXNpbmcgYW4gb2xkZXIvY2FjaGVkIFdEQVxuICAvLyBidWlsZCAoZS5nLiBiZWxvdyAzLjE2LjApXG4gIC8vIFRPRE86IHJlbW92ZSB0aGlzIGJsb2NrIGFmdGVyIGEgd2hpbGVcbiAgY29uc3QgcGFyc2VyID0gbmV3IHhtbGRvbS5ET01QYXJzZXIoKTtcbiAgY29uc3QgdHJlZSA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoc3JjVHJlZSk7XG4gIGNvbnN0IGRvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoQVBQSVVNX1NSQ19YTUwpO1xuICBkb2MuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHRyZWUuZG9jdW1lbnRFbGVtZW50KTtcbiAgcmV0dXJuIG5ldyB4bWxkb20uWE1MU2VyaWFsaXplcigpLnNlcmlhbGl6ZVRvU3RyaW5nKGRvYyk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZUdldFNvdXJjZSA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZUdldFNvdXJjZSAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IHBhcmFtc01hcCA9IHtcbiAgICBmb3JtYXQ6IG9wdHMuZm9ybWF0IHx8ICd4bWwnLFxuICAgIHNjb3BlOiBBUFBJVU1fQVVUX1RBRyxcbiAgfTtcbiAgaWYgKG9wdHMuZXhjbHVkZWRBdHRyaWJ1dGVzKSB7XG4gICAgcGFyYW1zTWFwLmV4Y2x1ZGVkX2F0dHJpYnV0ZXMgPSBvcHRzLmV4Y2x1ZGVkQXR0cmlidXRlcztcbiAgfVxuICBjb25zdCBxdWVyeSA9IE9iamVjdC5lbnRyaWVzKHBhcmFtc01hcClcbiAgICAubWFwKChbaywgdl0pID0+IGAke2VuY29kZVVSSUNvbXBvbmVudChrKX09JHtlbmNvZGVVUklDb21wb25lbnQodil9YClcbiAgICAuam9pbignJicpO1xuICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC9zb3VyY2U/JHtxdWVyeX1gLCAnR0VUJyk7XG59O1xuXG4vKiBXaWxsIGdldCBKU09OIG9mIHRoZSBmb3JtOlxuICogICB7IGlzRW5hYmxlZDogJzEnLFxuICogICAgIGlzVmlzaWJsZTogJzEnLFxuICogICAgIGZyYW1lOiAne3swLCAwfSwgezM3NSwgNjY3fX0nLFxuICogICAgIGNoaWxkcmVuOlxuICogICAgICBbIHsgaXNFbmFibGVkOiAnMScsXG4gKiAgICAgICAgICBpc1Zpc2libGU6ICcxJyxcbiAqICAgICAgICAgIGZyYW1lOiAne3swLCAwfSwgezM3NSwgNjY3fX0nLFxuICogICAgICAgICAgY2hpbGRyZW46IFtdLFxuICogICAgICAgICAgcmVjdDogeyB4OiAwLCB5OiAwLCB3aWR0aDogMzc1LCBoZWlnaHQ6IDY2NyB9LFxuICogICAgICAgICAgdmFsdWU6IG51bGwsXG4gKiAgICAgICAgICBsYWJlbDogbnVsbCxcbiAqICAgICAgICAgIHR5cGU6ICdPdGhlcicsXG4gKiAgICAgICAgICBuYW1lOiBudWxsLFxuICogICAgICAgICAgcmF3SWRlbnRpZmllcjogbnVsbCB9LFxuICogICAgIHJlY3Q6IHsgb3JpZ2luOiB7IHg6IDAsIHk6IDAgfSwgc2l6ZTogeyB3aWR0aDogMzc1LCBoZWlnaHQ6IDY2NyB9IH0sXG4gKiAgICAgdmFsdWU6IG51bGwsXG4gKiAgICAgbGFiZWw6ICdVSUNhdGFsb2cnLFxuICogICAgIHR5cGU6ICdBcHBsaWNhdGlvbicsXG4gKiAgICAgbmFtZTogJ1VJQ2F0YWxvZycsXG4gKiAgICAgcmF3SWRlbnRpZmllcjogbnVsbCB9XG4gKi9cbmZ1bmN0aW9uIGdldFRyZWVGb3JYTUwgKHNyY1RyZWUpIHtcbiAgZnVuY3Rpb24gZ2V0VHJlZSAoZWxlbWVudCwgZWxlbWVudEluZGV4LCBwYXJlbnRQYXRoKSB7XG4gICAgbGV0IGN1clBhdGggPSBgJHtwYXJlbnRQYXRofS8ke2VsZW1lbnRJbmRleH1gO1xuICAgIGxldCByZWN0ID0gZWxlbWVudC5yZWN0IHx8IHt9O1xuICAgIGxldCBzdWJ0cmVlID0ge1xuICAgICAgJ0AnOiB7XG4gICAgICAgIHR5cGU6IGBYQ1VJRWxlbWVudFR5cGUke2VsZW1lbnQudHlwZX1gLFxuICAgICAgICBlbmFibGVkOiBwYXJzZUludChlbGVtZW50LmlzRW5hYmxlZCwgMTApID09PSAxLFxuICAgICAgICB2aXNpYmxlOiBwYXJzZUludChlbGVtZW50LmlzVmlzaWJsZSwgMTApID09PSAxLFxuICAgICAgICB4OiByZWN0LngsXG4gICAgICAgIHk6IHJlY3QueSxcbiAgICAgICAgd2lkdGg6IHJlY3Qud2lkdGgsXG4gICAgICAgIGhlaWdodDogcmVjdC5oZWlnaHQsXG4gICAgICB9LFxuICAgICAgJz4nOiBbXVxuICAgIH07XG4gICAgaWYgKGVsZW1lbnQubmFtZSAhPT0gbnVsbCkge1xuICAgICAgc3VidHJlZVsnQCddLm5hbWUgPSBlbGVtZW50Lm5hbWU7XG4gICAgfVxuICAgIGlmIChlbGVtZW50LmxhYmVsICE9PSBudWxsKSB7XG4gICAgICBzdWJ0cmVlWydAJ10ubGFiZWwgPSBlbGVtZW50LmxhYmVsO1xuICAgIH1cbiAgICBpZiAoZWxlbWVudC52YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgc3VidHJlZVsnQCddLnZhbHVlID0gZWxlbWVudC52YWx1ZTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAoZWxlbWVudC5jaGlsZHJlbiB8fCBbXSkubGVuZ3RoOyBpKyspIHtcbiAgICAgIHN1YnRyZWVbJz4nXS5wdXNoKGdldFRyZWUoZWxlbWVudC5jaGlsZHJlbltpXSwgaSwgY3VyUGF0aCkpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgW2BYQ1VJRWxlbWVudFR5cGUke2VsZW1lbnQudHlwZX1gXTogc3VidHJlZVxuICAgIH07XG4gIH1cbiAgbGV0IHRyZWUgPSBnZXRUcmVlKHNyY1RyZWUsIDAsICcnKTtcbiAgcmV0dXJuIHRyZWU7XG59XG5cbmZ1bmN0aW9uIGdldFNvdXJjZVhtbCAoanNvblNvdXJjZSkge1xuICByZXR1cm4ganMyeG1sKCdBcHBpdW1BVVQnLCBqc29uU291cmNlLCB7XG4gICAgd3JhcEFycmF5OiB7ZW5hYmxlZDogZmFsc2UsIGVsZW1lbnROYW1lOiAnZWxlbWVudCd9LFxuICAgIGRlY2xhcmF0aW9uOiB7aW5jbHVkZTogdHJ1ZX0sXG4gICAgcHJldHR5UHJpbnRpbmc6IHtpbmRlbnRTdHJpbmc6ICcgICd9XG4gIH0pO1xufVxuXG5cbk9iamVjdC5hc3NpZ24oZXh0ZW5zaW9ucywgY29tbWFuZHMsIGhlbHBlcnMpO1xuZXhwb3J0IHsgY29tbWFuZHMsIGhlbHBlcnMgfTtcbmV4cG9ydCBkZWZhdWx0IGV4dGVuc2lvbnM7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsYUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBR0EsSUFBSUUsUUFBUSxHQUFHLENBQUMsQ0FBQztFQUFFQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO0VBQUVDLFVBQVUsR0FBRyxDQUFDLENBQUM7QUFBQ0MsT0FBQSxDQUFBRixPQUFBLEdBQUFBLE9BQUE7QUFBQUUsT0FBQSxDQUFBSCxRQUFBLEdBQUFBLFFBQUE7QUFFakQsTUFBTUksY0FBYyxHQUFHLFdBQVc7QUFDbEMsTUFBTUMsY0FBYyxHQUFJLDBDQUF5Q0QsY0FBZSxJQUFHO0FBQ25GLE1BQU1FLGtCQUFrQixHQUFHLElBQUlDLE1BQU0s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