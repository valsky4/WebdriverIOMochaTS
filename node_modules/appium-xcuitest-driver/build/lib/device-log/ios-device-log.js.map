{"version":3,"file":"ios-device-log.js","names":["_support","require","_iosLog","_appiumIosDevice","log","logger","getLogger","IOSDeviceLog","IOSLog","constructor","opts","udid","showLogs","service","startCapture","services","startSyslogService","start","onLog","bind","logLine","broadcast","info","isCapturing","stopCapture","close","exports","_default","default"],"sources":["../../../lib/device-log/ios-device-log.js"],"sourcesContent":["import { logger } from 'appium/support';\nimport { IOSLog } from './ios-log';\nimport { services } from 'appium-ios-device';\n\nconst log = logger.getLogger('IOSDeviceLog');\n\nclass IOSDeviceLog extends IOSLog {\n\n  constructor (opts) {\n    super();\n    this.udid = opts.udid;\n    this.showLogs = !!opts.showLogs;\n    this.service = null;\n  }\n\n  async startCapture () {\n    if (this.service) {\n      return;\n    }\n    this.service = await services.startSyslogService(this.udid);\n    this.service.start(this.onLog.bind(this));\n  }\n\n  onLog (logLine) {\n    this.broadcast(logLine);\n    if (this.showLogs) {\n      log.info(logLine);\n    }\n  }\n\n  get isCapturing () {\n    return !!this.service;\n  }\n\n  stopCapture () {\n    if (!this.service) {\n      return;\n    }\n    this.service.close();\n    this.service = null;\n  }\n}\n\nexport { IOSDeviceLog };\nexport default IOSDeviceLog;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AACA,IAAAE,gBAAA,GAAAF,OAAA;AAEA,MAAMG,GAAG,GAAGC,eAAM,CAACC,SAAS,CAAC,cAAc,CAAC;AAE5C,MAAMC,YAAY,SAASC,cAAM,CAAC;EAEhCC,WAAWA,CAAEC,IAAI,EAAE;IACjB,KAAK,EAAE;IACP,IAAI,CAACC,IAAI,GAAGD,IAAI,CAACC,IAAI;IACrB,IAAI,CAACC,QAAQ,GAAG,CAAC,CAACF,IAAI,CAACE,QAAQ;IAC/B,IAAI,CAACC,OAAO,GAAG,IAAI;EACrB;EAEA,MAAMC,YAAYA,CAAA,EAAI;IACpB,IAAI,IAAI,CAACD,OAAO,EAAE;MAChB;IACF;IACA,IAAI,CAACA,OAAO,GAAG,MAAME,yBAAQ,CAACC,kBAAkB,CAAC,IAAI,CAACL,IAAI,CAAC;IAC3D,IAAI,CAACE,OAAO,CAACI,KAAK,CAAC,IAAI,CAACC,KAAK,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;EAC3C;EAEAD,KAAKA,CAAEE,OAAO,EAAE;IACd,IAAI,CAACC,SAAS,CAACD,OAAO,CAAC;IACvB,IAAI,IAAI,CAACR,QAAQ,EAAE;MACjBR,GAAG,CAACkB,IAAI,CAACF,OAAO,CAAC;IACnB;EACF;EAEA,IAAIG,WAAWA,CAAA,EAAI;IACjB,OAAO,CAAC,CAAC,IAAI,CAACV,OAAO;EACvB;EAEAW,WAAWA,CAAA,EAAI;IACb,IAAI,CAAC,IAAI,CAACX,OAAO,EAAE;MACjB;IACF;IACA,IAAI,CAACA,OAAO,CAACY,KAAK,EAAE;IACpB,IAAI,CAACZ,OAAO,GAAG,IAAI;EACrB;AACF;AAACa,OAAA,CAAAnB,YAAA,GAAAA,YAAA;AAAA,IAAAoB,QAAA,GAGcpB,YAAY;AAAAmB,OAAA,CAAAE,OAAA,GAAAD,QAAA"}