"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.IOSSimulatorLog = void 0;
require("source-map-support/register");
var _lodash = _interopRequireDefault(require("lodash"));
var _iosLog = require("./ios-log");
var _support = require("appium/support");
var _teen_process = require("teen_process");
const log = _support.logger.getLogger('IOSSimulatorLog');
const START_TIMEOUT = 10000;
class IOSSimulatorLog extends _iosLog.IOSLog {
  constructor({
    sim,
    showLogs,
    xcodeVersion,
    iosSimulatorLogsPredicate
  }) {
    super();
    this.sim = sim;
    this.showLogs = !!showLogs;
    this.xcodeVersion = xcodeVersion;
    this.predicate = iosSimulatorLogsPredicate;
    this.proc = null;
  }
  async startCapture() {
    if (_lodash.default.isUndefined(this.sim.udid)) {
      throw new Error(`Log capture requires a sim udid`);
    }
    if (!(await this.sim.isRunning())) {
      throw new Error(`iOS Simulator with udid '${this.sim.udid}' is not running`);
    }
    const spawnArgs = ['log', 'stream', '--style', 'compact'];
    if (this.predicate) {
      spawnArgs.push('--predicate', this.predicate);
    }
    log.debug(`Starting log capture for iOS Simulator with udid '${this.sim.udid}' ` + `using simctl`);
    try {
      await (0, _teen_process.exec)('pkill', ['-f', [this.sim.udid, ...spawnArgs].join(' ')]);
    } catch (ign) {}
    try {
      this.proc = await this.sim.simctl.spawnSubProcess(spawnArgs);
      await this.finishStartingLogCapture();
    } catch (e) {
      throw new Error(`Simulator log capture failed. Original error: ${e.message}`);
    }
  }
  async finishStartingLogCapture() {
    if (!this.proc) {
      log.errorAndThrow('Could not capture simulator log');
    }
    let firstLine = true;
    let logRow = '';
    this.proc.on('output', (stdout, stderr) => {
      if (stdout) {
        if (firstLine) {
          if (stdout.endsWith('\n')) {
            firstLine = false;
          }
        } else {
          logRow += stdout;
          if (stdout.endsWith('\n')) {
            this.onOutput(logRow);
            logRow = '';
          }
        }
      }
      if (stderr) {
        this.onOutput(logRow, 'STDERR');
      }
    });
    let sd = (stdout, stderr) => {
      if (/execvp\(\)/.test(stderr)) {
        throw new Error('iOS log capture process failed to start');
      }
      return stdout || stderr;
    };
    await this.proc.start(sd, START_TIMEOUT);
  }
  async stopCapture() {
    if (!this.proc) {
      return;
    }
    await this.killLogSubProcess();
    this.proc = null;
  }
  async killLogSubProcess() {
    if (!this.proc.isRunning) {
      return;
    }
    log.debug('Stopping iOS log capture');
    try {
      await this.proc.stop('SIGTERM', 1000);
    } catch (e) {
      if (!this.proc.isRunning) {
        return;
      }
      log.warn('Cannot stop log capture process. Sending SIGKILL');
      await this.proc.stop('SIGKILL');
    }
  }
  get isCapturing() {
    return this.proc && this.proc.isRunning;
  }
  onOutput(logRow, prefix = '') {
    const logs = _lodash.default.cloneDeep(logRow.split('\n'));
    for (const logLine of logs) {
      if (!logLine) continue;
      this.broadcast(logLine);
      if (this.showLogs) {
        const space = prefix.length > 0 ? ' ' : '';
        log.info(`[IOS_SYSLOG_ROW${space}${prefix}] ${logLine}`);
      }
    }
  }
}
exports.IOSSimulatorLog = IOSSimulatorLog;
var _default = IOSSimulatorLog;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9kYXNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfaW9zTG9nIiwiX3N1cHBvcnQiLCJfdGVlbl9wcm9jZXNzIiwibG9nIiwibG9nZ2VyIiwiZ2V0TG9nZ2VyIiwiU1RBUlRfVElNRU9VVCIsIklPU1NpbXVsYXRvckxvZyIsIklPU0xvZyIsImNvbnN0cnVjdG9yIiwic2ltIiwic2hvd0xvZ3MiLCJ4Y29kZVZlcnNpb24iLCJpb3NTaW11bGF0b3JMb2dzUHJlZGljYXRlIiwicHJlZGljYXRlIiwicHJvYyIsInN0YXJ0Q2FwdHVyZSIsIl8iLCJpc1VuZGVmaW5lZCIsInVkaWQiLCJFcnJvciIsImlzUnVubmluZyIsInNwYXduQXJncyIsInB1c2giLCJkZWJ1ZyIsImV4ZWMiLCJqb2luIiwiaWduIiwic2ltY3RsIiwic3Bhd25TdWJQcm9jZXNzIiwiZmluaXNoU3RhcnRpbmdMb2dDYXB0dXJlIiwiZSIsIm1lc3NhZ2UiLCJlcnJvckFuZFRocm93IiwiZmlyc3RMaW5lIiwibG9nUm93Iiwib24iLCJzdGRvdXQiLCJzdGRlcnIiLCJlbmRzV2l0aCIsIm9uT3V0cHV0Iiwic2QiLCJ0ZXN0Iiwic3RhcnQiLCJzdG9wQ2FwdHVyZSIsImtpbGxMb2dTdWJQcm9jZXNzIiwic3RvcCIsIndhcm4iLCJpc0NhcHR1cmluZyIsInByZWZpeCIsImxvZ3MiLCJjbG9uZURlZXAiLCJzcGxpdCIsImxvZ0xpbmUiLCJicm9hZGNhc3QiLCJzcGFjZSIsImxlbmd0aCIsImluZm8iLCJleHBvcnRzIiwiX2RlZmF1bHQiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vbGliL2RldmljZS1sb2cvaW9zLXNpbXVsYXRvci1sb2cuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IElPU0xvZyB9IGZyb20gJy4vaW9zLWxvZyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdhcHBpdW0vc3VwcG9ydCc7XG5pbXBvcnQgeyBleGVjIH0gZnJvbSAndGVlbl9wcm9jZXNzJztcblxuY29uc3QgbG9nID0gbG9nZ2VyLmdldExvZ2dlcignSU9TU2ltdWxhdG9yTG9nJyk7XG5cbmNvbnN0IFNUQVJUX1RJTUVPVVQgPSAxMDAwMDtcblxuY2xhc3MgSU9TU2ltdWxhdG9yTG9nIGV4dGVuZHMgSU9TTG9nIHtcbiAgY29uc3RydWN0b3IgKHtzaW0sIHNob3dMb2dzLCB4Y29kZVZlcnNpb24sIGlvc1NpbXVsYXRvckxvZ3NQcmVkaWNhdGV9KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnNpbSA9IHNpbTtcbiAgICB0aGlzLnNob3dMb2dzID0gISFzaG93TG9ncztcbiAgICB0aGlzLnhjb2RlVmVyc2lvbiA9IHhjb2RlVmVyc2lvbjtcbiAgICB0aGlzLnByZWRpY2F0ZSA9IGlvc1NpbXVsYXRvckxvZ3NQcmVkaWNhdGU7XG4gICAgdGhpcy5wcm9jID0gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0Q2FwdHVyZSAoKSB7XG4gICAgaWYgKF8uaXNVbmRlZmluZWQodGhpcy5zaW0udWRpZCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTG9nIGNhcHR1cmUgcmVxdWlyZXMgYSBzaW0gdWRpZGApO1xuICAgIH1cblxuICAgIGlmICghYXdhaXQgdGhpcy5zaW0uaXNSdW5uaW5nKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgaU9TIFNpbXVsYXRvciB3aXRoIHVkaWQgJyR7dGhpcy5zaW0udWRpZH0nIGlzIG5vdCBydW5uaW5nYCk7XG4gICAgfVxuICAgIGNvbnN0IHNwYXduQXJncyA9IFtcbiAgICAgICdsb2cnLFxuICAgICAgJ3N0cmVhbScsXG4gICAgICAnLS1zdHlsZScsICdjb21wYWN0JyxcbiAgICBdO1xuICAgIGlmICh0aGlzLnByZWRpY2F0ZSkge1xuICAgICAgc3Bhd25BcmdzLnB1c2goJy0tcHJlZGljYXRlJywgdGhpcy5wcmVkaWNhdGUpO1xuICAgIH1cbiAgICBsb2cuZGVidWcoYFN0YXJ0aW5nIGxvZyBjYXB0dXJlIGZvciBpT1MgU2ltdWxhdG9yIHdpdGggdWRpZCAnJHt0aGlzLnNpbS51ZGlkfScgYCArXG4gICAgICBgdXNpbmcgc2ltY3RsYCk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGNsZWFudXAgZXhpc3RpbmcgbGlzdGVuZXJzIGlmIHRoZSBwcmV2aW91cyBzZXNzaW9uIGhhcyBub3QgYmVlbiB0ZXJtaW5hdGVkIHByb3Blcmx5XG4gICAgICBhd2FpdCBleGVjKCdwa2lsbCcsIFsnLWYnLCBbdGhpcy5zaW0udWRpZCwgLi4uc3Bhd25BcmdzXS5qb2luKCcgJyldKTtcbiAgICB9IGNhdGNoIChpZ24pIHt9XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucHJvYyA9IGF3YWl0IHRoaXMuc2ltLnNpbWN0bC5zcGF3blN1YlByb2Nlc3Moc3Bhd25BcmdzKTtcbiAgICAgIGF3YWl0IHRoaXMuZmluaXNoU3RhcnRpbmdMb2dDYXB0dXJlKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTaW11bGF0b3IgbG9nIGNhcHR1cmUgZmFpbGVkLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZmluaXNoU3RhcnRpbmdMb2dDYXB0dXJlICgpIHtcbiAgICBpZiAoIXRoaXMucHJvYykge1xuICAgICAgbG9nLmVycm9yQW5kVGhyb3coJ0NvdWxkIG5vdCBjYXB0dXJlIHNpbXVsYXRvciBsb2cnKTtcbiAgICB9XG4gICAgbGV0IGZpcnN0TGluZSA9IHRydWU7XG4gICAgbGV0IGxvZ1JvdyA9ICcnO1xuICAgIHRoaXMucHJvYy5vbignb3V0cHV0JywgKHN0ZG91dCwgc3RkZXJyKSA9PiB7XG4gICAgICBpZiAoc3Rkb3V0KSB7XG4gICAgICAgIGlmIChmaXJzdExpbmUpIHtcbiAgICAgICAgICBpZiAoc3Rkb3V0LmVuZHNXaXRoKCdcXG4nKSkge1xuICAgICAgICAgICAgLy8gZG9uJ3Qgc3RvcmUgdGhlIGZpcnN0IGxpbmUgb2YgdGhlIGxvZyBiZWNhdXNlIGl0IGNhbWUgYmVmb3JlIHRoZSBzaW0gd2FzIGxhdW5jaGVkXG4gICAgICAgICAgICBmaXJzdExpbmUgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbG9nUm93ICs9IHN0ZG91dDtcbiAgICAgICAgICBpZiAoc3Rkb3V0LmVuZHNXaXRoKCdcXG4nKSkge1xuICAgICAgICAgICAgdGhpcy5vbk91dHB1dChsb2dSb3cpO1xuICAgICAgICAgICAgbG9nUm93ID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc3RkZXJyKSB7XG4gICAgICAgIHRoaXMub25PdXRwdXQobG9nUm93LCAnU1RERVJSJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsZXQgc2QgPSAoc3Rkb3V0LCBzdGRlcnIpID0+IHtcbiAgICAgIGlmICgvZXhlY3ZwXFwoXFwpLy50ZXN0KHN0ZGVycikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpT1MgbG9nIGNhcHR1cmUgcHJvY2VzcyBmYWlsZWQgdG8gc3RhcnQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdGRvdXQgfHwgc3RkZXJyO1xuICAgIH07XG4gICAgYXdhaXQgdGhpcy5wcm9jLnN0YXJ0KHNkLCBTVEFSVF9USU1FT1VUKTtcbiAgfVxuXG4gIGFzeW5jIHN0b3BDYXB0dXJlICgpIHtcbiAgICBpZiAoIXRoaXMucHJvYykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLmtpbGxMb2dTdWJQcm9jZXNzKCk7XG4gICAgdGhpcy5wcm9jID0gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGtpbGxMb2dTdWJQcm9jZXNzICgpIHtcbiAgICBpZiAoIXRoaXMucHJvYy5pc1J1bm5pbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbG9nLmRlYnVnKCdTdG9wcGluZyBpT1MgbG9nIGNhcHR1cmUnKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wcm9jLnN0b3AoJ1NJR1RFUk0nLCAxMDAwKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoIXRoaXMucHJvYy5pc1J1bm5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbG9nLndhcm4oJ0Nhbm5vdCBzdG9wIGxvZyBjYXB0dXJlIHByb2Nlc3MuIFNlbmRpbmcgU0lHS0lMTCcpO1xuICAgICAgYXdhaXQgdGhpcy5wcm9jLnN0b3AoJ1NJR0tJTEwnKTtcbiAgICB9XG4gIH1cblxuICBnZXQgaXNDYXB0dXJpbmcgKCkge1xuICAgIHJldHVybiB0aGlzLnByb2MgJiYgdGhpcy5wcm9jLmlzUnVubmluZztcbiAgfVxuXG4gIG9uT3V0cHV0IChsb2dSb3csIHByZWZpeCA9ICcnKSB7XG4gICAgY29uc3QgbG9ncyA9IF8uY2xvbmVEZWVwKGxvZ1Jvdy5zcGxpdCgnXFxuJykpO1xuICAgIGZvciAoY29uc3QgbG9nTGluZSBvZiBsb2dzKSB7XG4gICAgICBpZiAoIWxvZ0xpbmUpIGNvbnRpbnVlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGN1cmx5XG4gICAgICB0aGlzLmJyb2FkY2FzdChsb2dMaW5lKTtcbiAgICAgIGlmICh0aGlzLnNob3dMb2dzKSB7XG4gICAgICAgIGNvbnN0IHNwYWNlID0gcHJlZml4Lmxlbmd0aCA+IDAgPyAnICcgOiAnJztcbiAgICAgICAgbG9nLmluZm8oYFtJT1NfU1lTTE9HX1JPVyR7c3BhY2V9JHtwcmVmaXh9XSAke2xvZ0xpbmV9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IElPU1NpbXVsYXRvckxvZyB9O1xuZXhwb3J0IGRlZmF1bHQgSU9TU2ltdWxhdG9yTG9nO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLGFB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