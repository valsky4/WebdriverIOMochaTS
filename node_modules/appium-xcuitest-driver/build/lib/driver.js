"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.XCUITestDriver = void 0;
require("source-map-support/register");
var _driver = require("appium/driver");
var _support = require("appium/support");
var _lodash = _interopRequireDefault(require("lodash"));
var _url = _interopRequireDefault(require("url"));
var _appiumWebdriveragent = require("appium-webdriveragent");
var _lruCache = _interopRequireDefault(require("lru-cache"));
var _methodMap = require("./method-map");
var _simulatorManagement = require("./simulator-management");
var _appiumIosSimulator = require("appium-ios-simulator");
var _asyncbox = require("asyncbox");
var _appUtils = require("./app-utils");
var _desiredCaps = require("./desired-caps");
var _index = _interopRequireDefault(require("./commands/index"));
var _utils = require("./utils");
var _realDeviceManagement = require("./real-device-management");
var _bluebird = _interopRequireDefault(require("bluebird"));
var _asyncLock = _interopRequireDefault(require("async-lock"));
var _path = _interopRequireDefault(require("path"));
var _appiumIdb = _interopRequireDefault(require("appium-idb"));
var _deviceConnectionsFactory = _interopRequireDefault(require("./device-connections-factory"));
var _pyIosDeviceClient = _interopRequireDefault(require("./py-ios-device-client"));
const SHUTDOWN_OTHER_FEAT_NAME = 'shutdown_other_sims';
const CUSTOMIZE_RESULT_BUNDPE_PATH = 'customize_result_bundle_path';
const SUPPORTED_EXTENSIONS = [_appUtils.IPA_EXT, _appUtils.APP_EXT];
const MAX_ARCHIVE_SCAN_DEPTH = 1;
const defaultServerCaps = {
  webStorageEnabled: false,
  locationContextEnabled: false,
  browserName: '',
  platform: 'MAC',
  javascriptEnabled: true,
  databaseEnabled: false,
  takesScreenshot: true,
  networkConnectionEnabled: false
};
const WDA_SIM_STARTUP_RETRIES = 2;
const WDA_REAL_DEV_STARTUP_RETRIES = 1;
const WDA_REAL_DEV_TUTORIAL_URL = 'https://github.com/appium/appium-xcuitest-driver/blob/master/docs/real-device-config.md';
const WDA_STARTUP_RETRY_INTERVAL = 10000;
const DEFAULT_SETTINGS = {
  nativeWebTap: false,
  nativeWebTapStrict: false,
  useJSONSource: false,
  shouldUseCompactResponses: true,
  elementResponseAttributes: 'type,label',
  mjpegServerScreenshotQuality: 25,
  mjpegServerFramerate: 10,
  screenshotQuality: 1,
  mjpegScalingFactor: 100,
  reduceMotion: null
};
const SHARED_RESOURCES_GUARD = new _asyncLock.default();
const WEB_ELEMENTS_CACHE_SIZE = 500;
const SUPPORTED_ORIENATIONS = ['LANDSCAPE', 'PORTRAIT'];
const NO_PROXY_NATIVE_LIST = [['DELETE', /window/], ['GET', /^\/session\/[^\/]+$/], ['GET', /alert_text/], ['GET', /alert\/[^\/]+/], ['GET', /appium/], ['GET', /attribute/], ['GET', /context/], ['GET', /location/], ['GET', /log/], ['GET', /screenshot/], ['GET', /size/], ['GET', /source/], ['GET', /timeouts$/], ['GET', /url/], ['GET', /window/], ['POST', /accept_alert/], ['POST', /actions$/], ['DELETE', /actions$/], ['POST', /alert_text/], ['POST', /alert\/[^\/]+/], ['POST', /appium/], ['POST', /appium\/device\/is_locked/], ['POST', /appium\/device\/lock/], ['POST', /appium\/device\/unlock/], ['POST', /back/], ['POST', /clear/], ['POST', /context/], ['POST', /dismiss_alert/], ['POST', /element\/active/], ['POST', /element$/], ['POST', /elements$/], ['POST', /execute/], ['POST', /keys/], ['POST', /log/], ['POST', /moveto/], ['POST', /receive_async_response/], ['POST', /session\/[^\/]+\/location/], ['POST', /shake/], ['POST', /timeouts/], ['POST', /touch/], ['POST', /url/], ['POST', /value/], ['POST', /window/], ['DELETE', /cookie/], ['GET', /cookie/], ['POST', /cookie/]];
const NO_PROXY_WEB_LIST = [['GET', /attribute/], ['GET', /element/], ['GET', /text/], ['GET', /title/], ['POST', /clear/], ['POST', /click/], ['POST', /element/], ['POST', /forward/], ['POST', /frame/], ['POST', /keys/], ['POST', /refresh/]].concat(NO_PROXY_NATIVE_LIST);
const MEMOIZED_FUNCTIONS = ['getStatusBarHeight', 'getDevicePixelRatio', 'getScreenInfo'];
const BUNDLE_VERSION_PATTERN = /CFBundleVersion\s+=\s+"?([^(;|")]+)/;
class XCUITestDriver extends _driver.BaseDriver {
  static newMethodMap = _methodMap.newMethodMap;
  constructor(opts = {}, shouldValidateCaps = true) {
    super(opts, shouldValidateCaps);
    this.desiredCapConstraints = _desiredCaps.desiredCapConstraints;
    this.locatorStrategies = ['xpath', 'id', 'name', 'class name', '-ios predicate string', '-ios class chain', 'accessibility id', 'css selector'];
    this.webLocatorStrategies = ['link text', 'css selector', 'tag name', 'link text', 'partial link text'];
    this.resetIos();
    this.settings = new _driver.DeviceSettings(DEFAULT_SETTINGS, this.onSettingsUpdate.bind(this));
    this.logs = {};
    for (const fn of MEMOIZED_FUNCTIONS) {
      this[fn] = _lodash.default.memoize(this[fn]);
    }
  }
  async onSettingsUpdate(key, value) {
    if (key !== 'nativeWebTap' && key !== 'nativeWebTapStrict') {
      return await this.proxyCommand('/appium/settings', 'POST', {
        settings: {
          [key]: value
        }
      });
    }
    this.opts[key] = !!value;
  }
  resetIos() {
    this.opts = this.opts || {};
    this.wda = null;
    this.opts.device = null;
    this.jwpProxyActive = false;
    this.proxyReqRes = null;
    this.jwpProxyAvoid = [];
    this.safari = false;
    this.cachedWdaStatus = null;
    this.curWebFrames = [];
    this._currentUrl = null;
    this.curContext = null;
    this.xcodeVersion = {};
    this.contexts = [];
    this.implicitWaitMs = 0;
    this.asynclibWaitMs = 0;
    this.pageLoadMs = 6000;
    this.landscapeWebCoordsOffset = 0;
    this.remote = null;
    this._conditionInducerService = null;
    this.webElementsCache = new _lruCache.default({
      max: WEB_ELEMENTS_CACHE_SIZE
    });
  }
  get driverData() {
    return {};
  }
  async getStatus() {
    if (typeof this.driverInfo === 'undefined') {
      this.driverInfo = await (0, _utils.getDriverInfo)();
    }
    let status = {
      build: {
        version: this.driverInfo.version
      }
    };
    if (this.cachedWdaStatus) {
      status.wda = this.cachedWdaStatus;
    }
    return status;
  }
  mergeCliArgsToOpts() {
    let didMerge = false;
    for (const [key, value] of Object.entries(this.cliArgs ?? {})) {
      if (_lodash.default.has(this.opts, key)) {
        this.log.info(`CLI arg '${key}' with value '${value}' overwrites value '${this.opts[key]}' sent in via caps)`);
        didMerge = true;
      }
      this.opts[key] = value;
    }
    return didMerge;
  }
  async createSession(...args) {
    this.lifecycleData = {};
    try {
      let [sessionId, caps] = await super.createSession(...args);
      this.opts.sessionId = sessionId;
      if (this.mergeCliArgsToOpts()) {
        this.validateDesiredCaps({
          ...caps,
          ...this.cliArgs
        });
      }
      await this.start();
      caps = Object.assign({}, defaultServerCaps, caps);
      caps.udid = this.opts.udid;
      if (_lodash.default.has(this.opts, 'nativeWebTap')) {
        await this.updateSettings({
          nativeWebTap: this.opts.nativeWebTap
        });
      }
      if (_lodash.default.has(this.opts, 'nativeWebTapStrict')) {
        await this.updateSettings({
          nativeWebTapStrict: this.opts.nativeWebTapStrict
        });
      }
      if (_lodash.default.has(this.opts, 'useJSONSource')) {
        await this.updateSettings({
          useJSONSource: this.opts.useJSONSource
        });
      }
      let wdaSettings = {
        elementResponseAttributes: DEFAULT_SETTINGS.elementResponseAttributes,
        shouldUseCompactResponses: DEFAULT_SETTINGS.shouldUseCompactResponses
      };
      if (_lodash.default.has(this.opts, 'elementResponseAttributes')) {
        wdaSettings.elementResponseAttributes = this.opts.elementResponseAttributes;
      }
      if (_lodash.default.has(this.opts, 'shouldUseCompactResponses')) {
        wdaSettings.shouldUseCompactResponses = this.opts.shouldUseCompactResponses;
      }
      if (_lodash.default.has(this.opts, 'mjpegServerScreenshotQuality')) {
        wdaSettings.mjpegServerScreenshotQuality = this.opts.mjpegServerScreenshotQuality;
      }
      if (_lodash.default.has(this.opts, 'mjpegServerFramerate')) {
        wdaSettings.mjpegServerFramerate = this.opts.mjpegServerFramerate;
      }
      if (_lodash.default.has(this.opts, 'screenshotQuality')) {
        this.log.info(`Setting the quality of phone screenshot: '${this.opts.screenshotQuality}'`);
        wdaSettings.screenshotQuality = this.opts.screenshotQuality;
      }
      await this.updateSettings(wdaSettings);
      if (this.opts.mjpegScreenshotUrl) {
        this.log.info(`Starting MJPEG stream reading URL: '${this.opts.mjpegScreenshotUrl}'`);
        this.mjpegStream = new _support.mjpeg.MJpegStream(this.opts.mjpegScreenshotUrl);
        await this.mjpegStream.start();
      }
      return [sessionId, caps];
    } catch (e) {
      this.log.error(JSON.stringify(e));
      await this.deleteSession();
      throw e;
    }
  }
  getDefaultUrl() {
    return this.isRealDevice() ? `http://127.0.0.1:${this.opts.wdaLocalPort || 8100}/health` : `http://${this.opts.address.includes(':') ? `[${this.opts.address}]` : this.opts.address}:${this.opts.port}/welcome`;
  }
  async start() {
    this.opts.noReset = !!this.opts.noReset;
    this.opts.fullReset = !!this.opts.fullReset;
    await (0, _utils.printUser)();
    this.opts.iosSdkVersion = null;
    const {
      device,
      udid,
      realDevice
    } = await this.determineDevice();
    this.log.info(`Determining device to run tests on: udid: '${udid}', real device: ${realDevice}`);
    this.opts.device = device;
    this.opts.udid = udid;
    this.opts.realDevice = realDevice;
    if (this.opts.simulatorDevicesSetPath) {
      if (realDevice) {
        this.log.info(`The 'simulatorDevicesSetPath' capability is only supported for Simulator devices`);
      } else {
        this.log.info(`Setting simulator devices set path to '${this.opts.simulatorDevicesSetPath}'`);
        this.opts.device.devicesSetPath = this.opts.simulatorDevicesSetPath;
      }
    }
    if (!this.opts.platformVersion && this.opts.device) {
      this.opts.platformVersion = await this.opts.device.getPlatformVersion();
      this.log.info(`No platformVersion specified. Using device version: '${this.opts.platformVersion}'`);
    }
    const normalizedVersion = (0, _utils.normalizePlatformVersion)(this.opts.platformVersion);
    if (this.opts.platformVersion !== normalizedVersion) {
      this.log.info(`Normalized platformVersion capability value '${this.opts.platformVersion}' to '${normalizedVersion}'`);
      this.opts.platformVersion = normalizedVersion;
    }
    if (_support.util.compareVersions(this.opts.platformVersion, '<', '9.3')) {
      throw new Error(`Platform version must be 9.3 or above. '${this.opts.platformVersion}' is not supported.`);
    }
    if (_lodash.default.isEmpty(this.xcodeVersion) && (!this.opts.webDriverAgentUrl || !this.opts.realDevice)) {
      this.xcodeVersion = await (0, _utils.getAndCheckXcodeVersion)();
    }
    this.logEvent('xcodeDetailsRetrieved');
    if (_lodash.default.toLower(this.opts.browserName) === 'safari') {
      this.log.info('Safari test requested');
      this.safari = true;
      this.opts.app = undefined;
      this.opts.processArguments = this.opts.processArguments || {};
      this.opts.bundleId = _appUtils.SAFARI_BUNDLE_ID;
      this._currentUrl = this.opts.safariInitialUrl || this.getDefaultUrl();
    } else if (this.opts.app || this.opts.bundleId) {
      await this.configureApp();
    }
    this.logEvent('appConfigured');
    if (this.opts.app) {
      await (0, _utils.checkAppPresent)(this.opts.app);
      if (!this.opts.bundleId) {
        this.opts.bundleId = await _appUtils.extractBundleId.bind(this)(this.opts.app);
      }
    }
    await this.runReset();
    this.wda = new _appiumWebdriveragent.WebDriverAgent(this.xcodeVersion, this.opts, this.log);
    this.wda.retrieveDerivedDataPath().catch(e => this.log.debug(e));
    const memoizedLogInfo = _lodash.default.memoize(() => {
      this.log.info("'skipLogCapture' is set. Skipping starting logs such as crash, system, safari console and safari network.");
    });
    const startLogCapture = async () => {
      if (this.opts.skipLogCapture) {
        memoizedLogInfo();
        return false;
      }
      const result = await this.startLogCapture();
      if (result) {
        this.logEvent('logCaptureStarted');
      }
      return result;
    };
    const isLogCaptureStarted = await startLogCapture();
    this.log.info(`Setting up ${this.isRealDevice() ? 'real device' : 'simulator'}`);
    if (this.isSimulator()) {
      if (this.opts.shutdownOtherSimulators) {
        this.ensureFeatureEnabled(SHUTDOWN_OTHER_FEAT_NAME);
        await (0, _simulatorManagement.shutdownOtherSimulators)(this.opts.device);
      }
      await this.startSim();
      if (this.opts.customSSLCert) {
        await this.opts.device.addCertificate(this.opts.customSSLCert);
        this.logEvent('customCertInstalled');
      }
      if (await (0, _simulatorManagement.setSafariPrefs)(this.opts.device, this.opts)) {
        this.log.debug('Safari preferences have been updated');
      }
      if (await (0, _simulatorManagement.setLocalizationPrefs)(this.opts.device, this.opts)) {
        this.log.debug('Localization preferences have been updated');
      }
      if (_lodash.default.isBoolean(this.opts.reduceMotion)) {
        this.log.info(`Setting reduceMotion to ${this.opts.reduceMotion}`);
        await this.opts.device.setReduceMotion(this.opts.reduceMotion);
      }
      if (_lodash.default.isBoolean(this.opts.reduceTransparency)) {
        this.log.info(`Setting reduceTransparency to ${this.opts.reduceTransparency}`);
        await this.opts.device.setReduceTransparency(this.opts.reduceTransparency);
      }
      if (this.opts.launchWithIDB) {
        try {
          const idb = new _appiumIdb.default({
            udid
          });
          await idb.connect();
          this.opts.device.idb = idb;
        } catch (e) {
          this.log.debug(e.stack);
          this.log.warn(`idb will not be used for Simulator interaction. Original error: ${e.message}`);
        }
      }
      this.logEvent('simStarted');
      if (!isLogCaptureStarted) {
        await startLogCapture();
      }
    } else if (this.opts.customSSLCert) {
      await new _pyIosDeviceClient.default(udid).installProfile({
        payload: this.opts.customSSLCert
      });
      this.logEvent('customCertInstalled');
    }
    if (this.opts.app) {
      await this.installAUT();
      this.logEvent('appInstalled');
    }
    if (!this.opts.app && this.opts.bundleId && !this.isSafari() && !(await this.opts.device.isAppInstalled(this.opts.bundleId))) {
      this.log.errorAndThrow(`App with bundle identifier '${this.opts.bundleId}' unknown`);
    }
    if (this.isSimulator()) {
      if (this.opts.permissions) {
        this.log.debug('Setting the requested permissions before WDA is started');
        for (const [bundleId, permissionsMapping] of _lodash.default.toPairs(JSON.parse(this.opts.permissions))) {
          await this.opts.device.setPermissions(bundleId, permissionsMapping);
        }
      }
      if (_lodash.default.isBoolean(this.opts.calendarAccessAuthorized)) {
        this.log.warn(`The 'calendarAccessAuthorized' capability is deprecated and will be removed soon. ` + `Consider using 'permissions' one instead with 'calendar' key`);
        const methodName = `${this.opts.calendarAccessAuthorized ? 'enable' : 'disable'}CalendarAccess`;
        await this.opts.device[methodName](this.opts.bundleId);
      }
    }
    await this.startWda(this.opts.sessionId, realDevice);
    if (this.opts.orientation) {
      await this.setInitialOrientation(this.opts.orientation);
      this.logEvent('orientationSet');
    }
    if (this.isSafari() || this.opts.autoWebview) {
      await this.activateRecentWebview();
    }
    if (this.isSafari()) {
      if (!(this.opts.safariInitialUrl === '' || this.opts.noReset && _lodash.default.isNil(this.opts.safariInitialUrl))) {
        this.log.info(`About to set the initial Safari URL to '${this.getCurrentUrl()}'.` + `Use 'safariInitialUrl' capability in order to customize it`);
        await this.setUrl(this.getCurrentUrl());
      } else {
        this.setCurrentUrl(await this.getUrl());
      }
    }
  }
  async startWda(sessionId, realDevice) {
    if (!_support.util.hasValue(this.wda.webDriverAgentUrl)) {
      await this.wda.cleanupObsoleteProcesses();
    }
    const usePortForwarding = this.isRealDevice() && !this.wda.webDriverAgentUrl && (0, _utils.isLocalHost)(this.wda.wdaBaseUrl);
    await _deviceConnectionsFactory.default.requestConnection(this.opts.udid, this.wda.url.port, {
      devicePort: usePortForwarding ? this.wda.wdaRemotePort : null,
      usePortForwarding
    });
    let synchronizationKey = XCUITestDriver.name;
    if (this.opts.useXctestrunFile || !(await this.wda.isSourceFresh())) {
      const derivedDataPath = await this.wda.retrieveDerivedDataPath();
      if (derivedDataPath) {
        synchronizationKey = _path.default.normalize(derivedDataPath);
      }
    }
    this.log.debug(`Starting WebDriverAgent initialization with the synchronization key '${synchronizationKey}'`);
    if (SHARED_RESOURCES_GUARD.isBusy() && !this.opts.derivedDataPath && !this.opts.bootstrapPath) {
      this.log.debug(`Consider setting a unique 'derivedDataPath' capability value for each parallel driver instance ` + `to avoid conflicts and speed up the building process`);
    }
    return await SHARED_RESOURCES_GUARD.acquire(synchronizationKey, async () => {
      if (this.opts.useNewWDA) {
        this.log.debug(`Capability 'useNewWDA' set to true, so uninstalling WDA before proceeding`);
        await this.wda.quitAndUninstall();
        this.logEvent('wdaUninstalled');
      } else if (!_support.util.hasValue(this.wda.webDriverAgentUrl)) {
        await this.wda.setupCaching();
      }
      const quitAndUninstall = async msg => {
        this.log.debug(msg);
        if (this.opts.webDriverAgentUrl) {
          this.log.debug('Not quitting/uninstalling WebDriverAgent since webDriverAgentUrl capability is provided');
          throw new Error(msg);
        }
        this.log.warn('Quitting and uninstalling WebDriverAgent');
        await this.wda.quitAndUninstall();
        throw new Error(msg);
      };
      if (this.opts.resultBundlePath) {
        this.ensureFeatureEnabled(CUSTOMIZE_RESULT_BUNDPE_PATH);
      }
      const startupRetries = this.opts.wdaStartupRetries || (this.isRealDevice() ? WDA_REAL_DEV_STARTUP_RETRIES : WDA_SIM_STARTUP_RETRIES);
      const startupRetryInterval = this.opts.wdaStartupRetryInterval || WDA_STARTUP_RETRY_INTERVAL;
      this.log.debug(`Trying to start WebDriverAgent ${startupRetries} times with ${startupRetryInterval}ms interval`);
      if (!_support.util.hasValue(this.opts.wdaStartupRetries) && !_support.util.hasValue(this.opts.wdaStartupRetryInterval)) {
        this.log.debug(`These values can be customized by changing wdaStartupRetries/wdaStartupRetryInterval capabilities`);
      }
      let retryCount = 0;
      await (0, _asyncbox.retryInterval)(startupRetries, startupRetryInterval, async () => {
        this.logEvent('wdaStartAttempted');
        if (retryCount > 0) {
          this.log.info(`Retrying WDA startup (${retryCount + 1} of ${startupRetries})`);
        }
        try {
          const retries = this.xcodeVersion.major >= 10 ? 2 : 1;
          this.cachedWdaStatus = await (0, _asyncbox.retry)(retries, this.wda.launch.bind(this.wda), sessionId, realDevice);
        } catch (err) {
          this.logEvent('wdaStartFailed');
          retryCount++;
          let errorMsg = `Unable to launch WebDriverAgent because of xcodebuild failure: ${err.message}`;
          if (this.isRealDevice()) {
            errorMsg += `. Make sure you follow the tutorial at ${WDA_REAL_DEV_TUTORIAL_URL}. ` + `Try to remove the WebDriverAgentRunner application from the device if it is installed ` + `and reboot the device.`;
          }
          await quitAndUninstall(errorMsg);
        }
        this.proxyReqRes = this.wda.proxyReqRes.bind(this.wda);
        this.jwpProxyActive = true;
        let originalStacktrace = null;
        try {
          await (0, _asyncbox.retryInterval)(15, 1000, async () => {
            this.logEvent('wdaSessionAttempted');
            this.log.debug('Sending createSession command to WDA');
            try {
              this.cachedWdaStatus = this.cachedWdaStatus || (await this.proxyCommand('/status', 'GET'));
              await this.startWdaSession(this.opts.bundleId, this.opts.processArguments);
            } catch (err) {
              originalStacktrace = err.stack;
              this.log.debug(`Failed to create WDA session (${err.message}). Retrying...`);
              throw err;
            }
          });
          this.logEvent('wdaSessionStarted');
        } catch (err) {
          if (originalStacktrace) {
            this.log.debug(originalStacktrace);
          }
          let errorMsg = `Unable to start WebDriverAgent session because of xcodebuild failure: ${err.message}`;
          if (this.isRealDevice()) {
            errorMsg += ` Make sure you follow the tutorial at ${WDA_REAL_DEV_TUTORIAL_URL}. ` + `Try to remove the WebDriverAgentRunner application from the device if it is installed ` + `and reboot the device.`;
          }
          await quitAndUninstall(errorMsg);
        }
        if (this.opts.clearSystemFiles && !this.opts.webDriverAgentUrl) {
          await (0, _utils.markSystemFilesForCleanup)(this.wda);
        }
        this.wda.fullyStarted = true;
        this.logEvent('wdaStarted');
      });
    });
  }
  async runReset(opts = null) {
    this.logEvent('resetStarted');
    if (this.isRealDevice()) {
      await (0, _realDeviceManagement.runRealDeviceReset)(this.opts.device, opts || this.opts);
    } else {
      await (0, _simulatorManagement.runSimulatorReset)(this.opts.device, opts || this.opts);
    }
    this.logEvent('resetComplete');
  }
  async deleteSession() {
    await (0, _utils.removeAllSessionWebSocketHandlers)(this.server, this.sessionId);
    for (const recorder of _lodash.default.compact([this._recentScreenRecorder, this._audioRecorder, this._trafficCapture])) {
      await recorder.interrupt(true);
      await recorder.cleanup();
    }
    if (!_lodash.default.isEmpty(this._perfRecorders)) {
      await _bluebird.default.all(this._perfRecorders.map(x => x.stop(true)));
      this._perfRecorders = [];
    }
    if (this._conditionInducerService) {
      this.mobileDisableConditionInducer();
    }
    await this.stop();
    if (this.wda && !this.opts.webDriverAgentUrl) {
      if (this.opts.clearSystemFiles) {
        let synchronizationKey = XCUITestDriver.name;
        const derivedDataPath = await this.wda.retrieveDerivedDataPath();
        if (derivedDataPath) {
          synchronizationKey = _path.default.normalize(derivedDataPath);
        }
        await SHARED_RESOURCES_GUARD.acquire(synchronizationKey, async () => {
          await (0, _utils.clearSystemFiles)(this.wda);
        });
      } else {
        this.log.debug('Not clearing log files. Use `clearSystemFiles` capability to turn on.');
      }
    }
    if (this.remote) {
      this.log.debug('Found a remote debugger session. Removing...');
      await this.stopRemote();
    }
    if (this.opts.resetOnSessionStartOnly === false) {
      await this.runReset(Object.assign({}, this.opts, {
        enforceSimulatorShutdown: true
      }));
    }
    if (this.isSimulator() && !this.opts.noReset && !!this.opts.device) {
      if (this.lifecycleData.createSim) {
        this.log.debug(`Deleting simulator created for this run (udid: '${this.opts.udid}')`);
        await (0, _simulatorManagement.shutdownSimulator)(this.opts.device);
        await this.opts.device.delete();
      }
    }
    const shouldResetLocationServivce = this.isRealDevice() && !!this.opts.resetLocationService;
    if (shouldResetLocationServivce) {
      try {
        await this.mobileResetLocationService();
      } catch (ignore) {}
    }
    if (!_lodash.default.isEmpty(this.logs)) {
      await this.logs.syslog.stopCapture();
      this.logs = {};
    }
    if (this.mjpegStream) {
      this.log.info('Closing MJPEG stream');
      this.mjpegStream.stop();
    }
    this.resetIos();
    await super.deleteSession();
  }
  async stop() {
    this.jwpProxyActive = false;
    this.proxyReqRes = null;
    if (this.wda && this.wda.fullyStarted) {
      if (this.wda.jwproxy) {
        try {
          await this.proxyCommand(`/session/${this.sessionId}`, 'DELETE');
        } catch (err) {
          this.log.debug(`Unable to DELETE session on WDA: '${err.message}'. Continuing shutdown.`);
        }
      }
      if (!this.wda.webDriverAgentUrl && this.opts.useNewWDA) {
        await this.wda.quit();
      }
    }
    _deviceConnectionsFactory.default.releaseConnection(this.opts.udid);
  }
  async executeCommand(cmd, ...args) {
    this.log.debug(`Executing command '${cmd}'`);
    if (cmd === 'receiveAsyncResponse') {
      return await this.receiveAsyncResponse(...args);
    }
    if (cmd === 'getStatus') {
      return await this.getStatus();
    }
    return await super.executeCommand(cmd, ...args);
  }
  async configureApp() {
    function appIsPackageOrBundle(app) {
      return /^([a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+)+$/.test(app);
    }
    if (!this.opts.bundleId && appIsPackageOrBundle(this.opts.app)) {
      this.opts.bundleId = this.opts.app;
      this.opts.app = '';
    }
    if (this.opts.bundleId && appIsPackageOrBundle(this.opts.bundleId) && (this.opts.app === '' || appIsPackageOrBundle(this.opts.app))) {
      this.log.debug('App is an iOS bundle, will attempt to run as pre-existing');
      return;
    }
    switch (_lodash.default.toLower(this.opts.app)) {
      case 'settings':
        this.opts.bundleId = 'com.apple.Preferences';
        this.opts.app = null;
        return;
      case 'calendar':
        this.opts.bundleId = 'com.apple.mobilecal';
        this.opts.app = null;
        return;
    }
    this.opts.app = await this.helpers.configureApp(this.opts.app, {
      onPostProcess: this.onPostConfigureApp.bind(this),
      supportedExtensions: SUPPORTED_EXTENSIONS
    });
  }
  async unzipApp(appPath, depth = 0) {
    if (depth > MAX_ARCHIVE_SCAN_DEPTH) {
      throw new Error('Nesting of package bundles is not supported');
    }
    const [rootDir, matchedPaths] = await (0, _appUtils.findApps)(appPath, SUPPORTED_EXTENSIONS);
    if (_lodash.default.isEmpty(matchedPaths)) {
      this.log.debug(`'${_path.default.basename(appPath)}' has no bundles`);
    } else {
      this.log.debug(`Found ${_support.util.pluralize('bundle', matchedPaths.length, true)} in ` + `'${_path.default.basename(appPath)}': ${matchedPaths}`);
    }
    try {
      for (const matchedPath of matchedPaths) {
        const fullPath = _path.default.join(rootDir, matchedPath);
        if (await (0, _appUtils.isAppBundle)(fullPath)) {
          const supportedPlatforms = await (0, _appUtils.fetchSupportedAppPlatforms)(fullPath);
          if (this.isSimulator() && !supportedPlatforms.some(p => _lodash.default.includes(p, 'Simulator'))) {
            this.log.info(`'${matchedPath}' does not have Simulator devices in the list of supported platforms ` + `(${supportedPlatforms.join(',')}). Skipping it`);
            ;
            continue;
          }
          if (this.isRealDevice() && !supportedPlatforms.some(p => _lodash.default.includes(p, 'OS'))) {
            this.log.info(`'${matchedPath}' does not have real devices in the list of supported platforms ` + `(${supportedPlatforms.join(',')}). Skipping it`);
            ;
            continue;
          }
          this.log.info(`'${matchedPath}' is the resulting application bundle selected from '${appPath}'`);
          return await (0, _appUtils.isolateAppBundle)(fullPath);
        } else if (_lodash.default.endsWith(_lodash.default.toLower(fullPath), _appUtils.IPA_EXT) && (await _support.fs.stat(fullPath)).isFile()) {
          try {
            return await this.unzipApp(fullPath, depth + 1);
          } catch (e) {
            this.log.warn(`Skipping processing of '${matchedPath}': ${e.message}`);
          }
        }
      }
    } finally {
      await _support.fs.rimraf(rootDir);
    }
    throw new Error(`${this.opts.app} did not have any matching ${_appUtils.APP_EXT} or ${_appUtils.IPA_EXT} ` + `bundles. Please make sure the provided package is valid and contains at least one matching ` + `application bundle which is not nested.`);
  }
  async onPostConfigureApp({
    cachedAppInfo,
    isUrl,
    appPath
  }) {
    if (_lodash.default.isPlainObject(cachedAppInfo) && (await _support.fs.stat(appPath)).isFile() && (await _support.fs.hash(appPath)) === cachedAppInfo.packageHash && (await _support.fs.exists(cachedAppInfo.fullPath)) && (await _support.fs.glob('**/*', {
      cwd: cachedAppInfo.fullPath,
      strict: false,
      nosort: true
    })).length === cachedAppInfo.integrity.folder) {
      this.log.info(`Using '${cachedAppInfo.fullPath}' which was cached from '${appPath}'`);
      return {
        appPath: cachedAppInfo.fullPath
      };
    }
    if (await (0, _appUtils.isAppBundle)(appPath)) {
      return false;
    }
    try {
      return {
        appPath: await this.unzipApp(appPath)
      };
    } finally {
      if (isUrl) {
        await _support.fs.rimraf(appPath);
      }
    }
  }
  async determineDevice() {
    this.lifecycleData.createSim = false;
    this.opts.deviceName = (0, _utils.translateDeviceName)(this.opts.platformVersion, this.opts.deviceName);
    const setupVersionCaps = async () => {
      this.opts.iosSdkVersion = await (0, _utils.getAndCheckIosSdkVersion)();
      this.log.info(`iOS SDK Version set to '${this.opts.iosSdkVersion}'`);
      if (!this.opts.platformVersion && this.opts.iosSdkVersion) {
        this.log.info(`No platformVersion specified. Using the latest version Xcode supports: '${this.opts.iosSdkVersion}'. ` + `This may cause problems if a simulator does not exist for this platform version.`);
        this.opts.platformVersion = (0, _utils.normalizePlatformVersion)(this.opts.iosSdkVersion);
      }
    };
    if (this.opts.udid) {
      if (this.opts.udid.toLowerCase() === 'auto') {
        try {
          this.opts.udid = await (0, _utils.detectUdid)();
        } catch (err) {
          this.log.warn(`Cannot detect any connected real devices. Falling back to Simulator. Original error: ${err.message}`);
          const device = await (0, _simulatorManagement.getExistingSim)(this.opts);
          if (!device) {
            this.log.errorAndThrow(`Cannot detect udid for ${this.opts.deviceName} Simulator running iOS ${this.opts.platformVersion}`);
          }
          this.opts.udid = device.udid;
          const devicePlatform = (0, _utils.normalizePlatformVersion)(await device.getPlatformVersion());
          if (this.opts.platformVersion !== devicePlatform) {
            this.opts.platformVersion = devicePlatform;
            this.log.info(`Set platformVersion to '${devicePlatform}' to match the device with given UDID`);
          }
          await setupVersionCaps();
          return {
            device,
            realDevice: false,
            udid: device.udid
          };
        }
      } else {
        const devices = await (0, _realDeviceManagement.getConnectedDevices)();
        this.log.debug(`Available devices: ${devices.join(', ')}`);
        if (!devices.includes(this.opts.udid)) {
          this.log.debug(`No real device with udid '${this.opts.udid}'. Looking for simulator`);
          try {
            const device = await (0, _appiumIosSimulator.getSimulator)(this.opts.udid, {
              devicesSetPath: this.opts.simulatorDevicesSetPath
            });
            return {
              device,
              realDevice: false,
              udid: this.opts.udid
            };
          } catch (ign) {
            throw new Error(`Unknown device or simulator UDID: '${this.opts.udid}'`);
          }
        }
      }
      const device = await (0, _realDeviceManagement.getRealDeviceObj)(this.opts.udid);
      return {
        device,
        realDevice: true,
        udid: this.opts.udid
      };
    }
    await setupVersionCaps();
    if (this.opts.enforceFreshSimulatorCreation) {
      this.log.debug(`New simulator is requested. If this is not wanted, set 'enforceFreshSimulatorCreation' capability to false`);
    } else {
      const device = await (0, _simulatorManagement.getExistingSim)(this.opts);
      if (device) {
        return {
          device,
          realDevice: false,
          udid: device.udid
        };
      }
      this.log.info('Simulator udid not provided');
    }
    this.log.info('Using desired caps to create a new simulator');
    const device = await this.createSim();
    return {
      device,
      realDevice: false,
      udid: device.udid
    };
  }
  async startSim() {
    const runOpts = {
      scaleFactor: this.opts.scaleFactor,
      connectHardwareKeyboard: !!this.opts.connectHardwareKeyboard,
      pasteboardAutomaticSync: this.opts.simulatorPasteboardAutomaticSync ?? 'off',
      isHeadless: !!this.opts.isHeadless,
      tracePointer: this.opts.simulatorTracePointer,
      devicePreferences: {}
    };
    if (this.opts.SimulatorWindowCenter) {
      runOpts.devicePreferences.SimulatorWindowCenter = this.opts.SimulatorWindowCenter;
    }
    if (_lodash.default.isInteger(this.opts.simulatorStartupTimeout)) {
      runOpts.startupTimeout = this.opts.simulatorStartupTimeout;
    }
    const orientation = _lodash.default.isString(this.opts.orientation) && this.opts.orientation.toUpperCase();
    switch (orientation) {
      case 'LANDSCAPE':
        runOpts.devicePreferences.SimulatorWindowOrientation = 'LandscapeLeft';
        runOpts.devicePreferences.SimulatorWindowRotationAngle = 90;
        break;
      case 'PORTRAIT':
        runOpts.devicePreferences.SimulatorWindowOrientation = 'Portrait';
        runOpts.devicePreferences.SimulatorWindowRotationAngle = 0;
        break;
    }
    await this.opts.device.run(runOpts);
  }
  async createSim() {
    this.lifecycleData.createSim = true;
    const platformName = this.isTvOS() ? _desiredCaps.PLATFORM_NAME_TVOS : _desiredCaps.PLATFORM_NAME_IOS;
    const sim = await (0, _simulatorManagement.createSim)(this.opts, platformName);
    this.log.info(`Created simulator with udid '${sim.udid}'.`);
    return sim;
  }
  async launchApp() {
    const APP_LAUNCH_TIMEOUT = 20 * 1000;
    this.logEvent('appLaunchAttempted');
    await this.opts.device.launchApp(this.opts.bundleId);
    let checkStatus = async () => {
      let response = await this.proxyCommand('/status', 'GET');
      let currentApp = response.currentApp.bundleID;
      if (currentApp !== this.opts.bundleId) {
        throw new Error(`${this.opts.bundleId} not in foreground. ${currentApp} is in foreground`);
      }
    };
    this.log.info(`Waiting for '${this.opts.bundleId}' to be in foreground`);
    let retries = parseInt(APP_LAUNCH_TIMEOUT / 200, 10);
    await (0, _asyncbox.retryInterval)(retries, 200, checkStatus);
    this.log.info(`${this.opts.bundleId} is in foreground`);
    this.logEvent('appLaunched');
  }
  async startWdaSession(bundleId, processArguments) {
    const args = processArguments ? processArguments.args || [] : [];
    if (!_lodash.default.isArray(args)) {
      throw new Error(`processArguments.args capability is expected to be an array. ` + `${JSON.stringify(args)} is given instead`);
    }
    const env = processArguments ? processArguments.env || {} : {};
    if (!_lodash.default.isPlainObject(env)) {
      throw new Error(`processArguments.env capability is expected to be a dictionary. ` + `${JSON.stringify(env)} is given instead`);
    }
    if (_support.util.hasValue(this.opts.language)) {
      args.push('-AppleLanguages', `(${this.opts.language})`);
      args.push('-NSLanguages', `(${this.opts.language})`);
    }
    if (_support.util.hasValue(this.opts.locale)) {
      args.push('-AppleLocale', this.opts.locale);
    }
    if (this.opts.noReset) {
      if (_lodash.default.isNil(this.opts.shouldTerminateApp)) {
        this.opts.shouldTerminateApp = false;
      }
      if (_lodash.default.isNil(this.opts.forceAppLaunch)) {
        this.opts.forceAppLaunch = false;
      }
    }
    const wdaCaps = {
      bundleId: this.opts.autoLaunch === false ? undefined : bundleId,
      arguments: args,
      environment: env,
      eventloopIdleDelaySec: this.opts.wdaEventloopIdleDelay ?? 0,
      shouldWaitForQuiescence: this.opts.waitForQuiescence ?? true,
      shouldUseTestManagerForVisibilityDetection: this.opts.simpleIsVisibleCheck ?? false,
      maxTypingFrequency: this.opts.maxTypingFrequency ?? 60,
      shouldUseSingletonTestManager: this.opts.shouldUseSingletonTestManager ?? true,
      waitForIdleTimeout: this.opts.waitForIdleTimeout,
      shouldUseCompactResponses: this.opts.shouldUseCompactResponses,
      elementResponseFields: this.opts.elementResponseFields,
      disableAutomaticScreenshots: this.opts.disableAutomaticScreenshots,
      shouldTerminateApp: this.opts.shouldTerminateApp ?? true,
      forceAppLaunch: this.opts.forceAppLaunch ?? true,
      useNativeCachingStrategy: this.opts.useNativeCachingStrategy ?? true,
      forceSimulatorSoftwareKeyboardPresence: this.opts.forceSimulatorSoftwareKeyboardPresence ?? (this.opts.connectHardwareKeyboard === true ? false : true)
    };
    if (this.opts.autoAcceptAlerts) {
      wdaCaps.defaultAlertAction = 'accept';
    } else if (this.opts.autoDismissAlerts) {
      wdaCaps.defaultAlertAction = 'dismiss';
    }
    await this.proxyCommand('/session', 'POST', {
      capabilities: {
        firstMatch: [wdaCaps],
        alwaysMatch: {}
      }
    });
  }
  proxyActive() {
    return this.jwpProxyActive;
  }
  getProxyAvoidList() {
    if (this.isWebview()) {
      return NO_PROXY_WEB_LIST;
    }
    return NO_PROXY_NATIVE_LIST;
  }
  canProxy() {
    return true;
  }
  isSafari() {
    return !!this.safari;
  }
  isRealDevice() {
    return this.opts.realDevice;
  }
  isSimulator() {
    return !this.opts.realDevice;
  }
  isTvOS() {
    return _lodash.default.toLower(this.opts.platformName) === _lodash.default.toLower(_desiredCaps.PLATFORM_NAME_TVOS);
  }
  isWebview() {
    return this.isSafari() || this.isWebContext();
  }
  validateLocatorStrategy(strategy) {
    super.validateLocatorStrategy(strategy, this.isWebContext());
  }
  validateDesiredCaps(caps) {
    if (!super.validateDesiredCaps(caps)) {
      return false;
    }
    if (_lodash.default.toLower(caps.browserName) !== 'safari' && !caps.app && !caps.bundleId) {
      this.log.info('The desired capabilities include neither an app nor a bundleId. ' + 'WebDriverAgent will be started without the default app');
    }
    if (!_support.util.coerceVersion(caps.platformVersion, false)) {
      this.log.warn(`'platformVersion' capability ('${caps.platformVersion}') is not a valid version number. ` + `Consider fixing it or be ready to experience an inconsistent driver behavior.`);
    }
    let verifyProcessArgument = processArguments => {
      const {
        args,
        env
      } = processArguments;
      if (!_lodash.default.isNil(args) && !_lodash.default.isArray(args)) {
        this.log.errorAndThrow('processArguments.args must be an array of strings');
      }
      if (!_lodash.default.isNil(env) && !_lodash.default.isPlainObject(env)) {
        this.log.errorAndThrow('processArguments.env must be an object <key,value> pair {a:b, c:d}');
      }
    };
    if (caps.processArguments) {
      if (_lodash.default.isString(caps.processArguments)) {
        try {
          caps.processArguments = JSON.parse(caps.processArguments);
          verifyProcessArgument(caps.processArguments);
        } catch (err) {
          this.log.errorAndThrow(`processArguments must be a JSON format or an object with format {args : [], env : {a:b, c:d}}. ` + `Both environment and argument can be null. Error: ${err}`);
        }
      } else if (_lodash.default.isPlainObject(caps.processArguments)) {
        verifyProcessArgument(caps.processArguments);
      } else {
        this.log.errorAndThrow(`'processArguments must be an object, or a string JSON object with format {args : [], env : {a:b, c:d}}. ` + `Both environment and argument can be null.`);
      }
    }
    if (caps.keychainPath && !caps.keychainPassword || !caps.keychainPath && caps.keychainPassword) {
      this.log.errorAndThrow(`If 'keychainPath' is set, 'keychainPassword' must also be set (and vice versa).`);
    }
    this.opts.resetOnSessionStartOnly = !_support.util.hasValue(this.opts.resetOnSessionStartOnly) || this.opts.resetOnSessionStartOnly;
    this.opts.useNewWDA = _support.util.hasValue(this.opts.useNewWDA) ? this.opts.useNewWDA : false;
    if (caps.commandTimeouts) {
      caps.commandTimeouts = (0, _utils.normalizeCommandTimeouts)(caps.commandTimeouts);
    }
    if (_lodash.default.isString(caps.webDriverAgentUrl)) {
      const {
        protocol,
        host
      } = _url.default.parse(caps.webDriverAgentUrl);
      if (_lodash.default.isEmpty(protocol) || _lodash.default.isEmpty(host)) {
        this.log.errorAndThrow(`'webDriverAgentUrl' capability is expected to contain a valid WebDriverAgent server URL. ` + `'${caps.webDriverAgentUrl}' is given instead`);
      }
    }
    if (caps.browserName) {
      if (caps.bundleId) {
        this.log.errorAndThrow(`'browserName' cannot be set together with 'bundleId' capability`);
      }
      if (caps.app) {
        this.log.warn(`The capabilities should generally not include both an 'app' and a 'browserName'`);
      }
    }
    if (caps.permissions) {
      try {
        for (const [bundleId, perms] of _lodash.default.toPairs(JSON.parse(caps.permissions))) {
          if (!_lodash.default.isString(bundleId)) {
            throw new Error(`'${JSON.stringify(bundleId)}' must be a string`);
          }
          if (!_lodash.default.isPlainObject(perms)) {
            throw new Error(`'${JSON.stringify(perms)}' must be a JSON object`);
          }
        }
      } catch (e) {
        this.log.errorAndThrow(`'${caps.permissions}' is expected to be a valid object with format ` + `{"<bundleId1>": {"<serviceName1>": "<serviceStatus1>", ...}, ...}. Original error: ${e.message}`);
      }
    }
    if (caps.platformVersion && !_support.util.coerceVersion(caps.platformVersion, false)) {
      this.log.errorAndThrow(`'platformVersion' must be a valid version number. ` + `'${caps.platformVersion}' is given instead.`);
    }
    if (caps.additionalWebviewBundleIds) {
      caps.additionalWebviewBundleIds = this.helpers.parseCapsArray(caps.additionalWebviewBundleIds);
    }
    return true;
  }
  async checkAutInstallationState() {
    var _await$device$fetchAp, _BUNDLE_VERSION_PATTE;
    const {
      enforceAppInstall,
      fullReset,
      noReset,
      bundleId,
      device,
      app
    } = this.opts;
    const wasAppInstalled = await device.isAppInstalled(bundleId);
    if (wasAppInstalled) {
      this.log.info(`App '${bundleId}' is already installed`);
      if (noReset) {
        this.log.info('noReset is requested. The app will not be be (re)installed');
        return {
          install: false,
          skipUninstall: true
        };
      }
    } else {
      this.log.info(`App '${bundleId}' is not installed on the device yet`);
    }
    if (enforceAppInstall !== false || fullReset || !wasAppInstalled) {
      return {
        install: true,
        skipUninstall: !wasAppInstalled
      };
    }
    const candidateBundleVersion = await _appUtils.extractBundleVersion.bind(this)(app);
    this.log.debug(`CFBundleVersion from Info.plist: ${candidateBundleVersion}`);
    if (!candidateBundleVersion) {
      return {
        install: true,
        skipUninstall: false
      };
    }
    const appBundleVersion = this.isRealDevice() ? (_await$device$fetchAp = await device.fetchAppInfo(bundleId)) === null || _await$device$fetchAp === void 0 ? void 0 : _await$device$fetchAp.CFBundleVersion : (_BUNDLE_VERSION_PATTE = BUNDLE_VERSION_PATTERN.exec(await device.simctl.appInfo(bundleId))) === null || _BUNDLE_VERSION_PATTE === void 0 ? void 0 : _BUNDLE_VERSION_PATTE[1];
    this.log.debug(`CFBundleVersion from installed app info: ${appBundleVersion}`);
    if (!appBundleVersion) {
      return {
        install: true,
        skipUninstall: false
      };
    }
    let shouldUpgrade;
    try {
      shouldUpgrade = _support.util.compareVersions(candidateBundleVersion, '>', appBundleVersion);
    } catch (err) {
      this.log.warn(`App versions comparison is not possible: ${err.message}`);
      return {
        install: true,
        skipUninstall: false
      };
    }
    if (shouldUpgrade) {
      this.log.info(`The installed version of ${bundleId} is lower than the candidate one ` + `(${candidateBundleVersion} > ${appBundleVersion}). The app will be upgraded.`);
    } else {
      this.log.info(`The candidate version of ${bundleId} is lower than the installed one ` + `(${candidateBundleVersion} <= ${appBundleVersion}). The app won't be reinstalled.`);
    }
    return {
      install: shouldUpgrade,
      skipUninstall: true
    };
  }
  async installAUT() {
    if (this.isSafari()) {
      return;
    }
    await _appUtils.verifyApplicationPlatform.bind(this)(this.opts.app, {
      isSimulator: this.isSimulator(),
      isTvOS: this.isTvOS()
    });
    const {
      install,
      skipUninstall
    } = await this.checkAutInstallationState();
    if (install) {
      if (this.isRealDevice()) {
        await (0, _realDeviceManagement.installToRealDevice)(this.opts.device, this.opts.app, this.opts.bundleId, {
          skipUninstall,
          timeout: this.opts.appPushTimeout,
          strategy: this.opts.appInstallStrategy
        });
      } else {
        await (0, _simulatorManagement.installToSimulator)(this.opts.device, this.opts.app, this.opts.bundleId, {
          skipUninstall,
          newSimulator: this.lifecycleData.createSim
        });
      }
      if (_support.util.hasValue(this.opts.iosInstallPause)) {
        const pauseMs = parseInt(this.opts.iosInstallPause, 10);
        this.log.debug(`iosInstallPause set. Pausing ${pauseMs} ms before continuing`);
        await _bluebird.default.delay(pauseMs);
      }
    }
    if (this.opts.otherApps) {
      await this.installOtherApps(this.opts.otherApps);
    }
  }
  async installOtherApps(otherApps) {
    if (this.isRealDevice()) {
      this.log.warn('Capability otherApps is only supported for Simulators');
      return;
    }
    let appsList;
    try {
      appsList = this.helpers.parseCapsArray(otherApps);
    } catch (e) {
      this.log.errorAndThrow(`Could not parse "otherApps" capability: ${e.message}`);
    }
    if (_lodash.default.isEmpty(appsList)) {
      this.log.info(`Got zero apps from 'otherApps' capability value. Doing nothing`);
      return;
    }
    const appPaths = await _bluebird.default.all(appsList.map(app => this.helpers.configureApp(app, '.app')));
    for (const otherApp of appPaths) {
      await (0, _simulatorManagement.installToSimulator)(this.opts.device, otherApp, undefined, {
        newSimulator: this.lifecycleData.createSim
      });
    }
  }
  async setInitialOrientation(orientation) {
    const dstOrientation = _lodash.default.toUpper(orientation);
    if (!SUPPORTED_ORIENATIONS.includes(dstOrientation)) {
      this.log.debug(`The initial orientation value '${orientation}' is unknown. ` + `Only ${JSON.stringify(SUPPORTED_ORIENATIONS)} are supported.`);
      return;
    }
    this.log.debug(`Setting initial orientation to '${dstOrientation}'`);
    try {
      await this.proxyCommand('/orientation', 'POST', {
        orientation: dstOrientation
      });
    } catch (err) {
      this.log.warn(`Setting initial orientation failed with: ${err.message}`);
    }
  }
  _getCommandTimeout(cmdName) {
    if (this.opts.commandTimeouts) {
      if (cmdName && _lodash.default.has(this.opts.commandTimeouts, cmdName)) {
        return this.opts.commandTimeouts[cmdName];
      }
      return this.opts.commandTimeouts[_utils.DEFAULT_TIMEOUT_KEY];
    }
  }
  async getSession() {
    const driverSession = await super.getSession();
    if (!this.wdaCaps) {
      this.wdaCaps = await this.proxyCommand('/', 'GET');
    }
    const shouldGetDeviceCaps = _lodash.default.isBoolean(this.opts.includeDeviceCapsToSessionInfo) ? this.opts.includeDeviceCapsToSessionInfo : true;
    if (shouldGetDeviceCaps && !this.deviceCaps) {
      const {
        statusBarSize,
        scale
      } = await this.getScreenInfo();
      this.deviceCaps = {
        pixelRatio: scale,
        statBarHeight: statusBarSize.height,
        viewportRect: await this.getViewportRect()
      };
    }
    this.log.info('Merging WDA caps over Appium caps for session detail response');
    return Object.assign({
      udid: this.opts.udid
    }, driverSession, this.wdaCaps.capabilities, this.deviceCaps || {});
  }
  async reset() {
    if (this.opts.noReset) {
      let opts = _lodash.default.cloneDeep(this.opts);
      opts.noReset = false;
      opts.fullReset = false;
      const shutdownHandler = this.resetOnUnexpectedShutdown;
      this.resetOnUnexpectedShutdown = () => {};
      try {
        await this.runReset(opts);
      } finally {
        this.resetOnUnexpectedShutdown = shutdownHandler;
      }
    }
    await super.reset();
  }
}
exports.XCUITestDriver = XCUITestDriver;
Object.assign(XCUITestDriver.prototype, _index.default);
var _default = XCUITestDriver;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZHJpdmVyIiwicmVxdWlyZSIsIl9zdXBwb3J0IiwiX2xvZGFzaCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfdXJsIiwiX2FwcGl1bVdlYmRyaXZlcmFnZW50IiwiX2xydUNhY2hlIiwiX21ldGhvZE1hcCIsIl9zaW11bGF0b3JNYW5hZ2VtZW50IiwiX2FwcGl1bUlvc1NpbXVsYXRvciIsIl9hc3luY2JveCIsIl9hcHBVdGlscyIsIl9kZXNpcmVkQ2FwcyIsIl9pbmRleCIsIl91dGlscyIsIl9yZWFsRGV2aWNlTWFuYWdlbWVudCIsIl9ibHVlYmlyZCIsIl9hc3luY0xvY2siLCJfcGF0aCIsIl9hcHBpdW1JZGIiLCJfZGV2aWNlQ29ubmVjdGlvbnNGYWN0b3J5IiwiX3B5SW9zRGV2aWNlQ2xpZW50IiwiU0hVVERPV05fT1RIRVJfRkVBVF9OQU1FIiwiQ1VTVE9NSVpFX1JFU1VMVF9CVU5EUEVfUEFUSCIsIlNVUFBPUlRFRF9FWFRFTlNJT05TIiwiSVBBX0VYVCIsIkFQUF9FWFQiLCJNQVhfQVJDSElWRV9TQ0FOX0RFUFRIIiwiZGVmYXVsdFNlcnZlckNhcHMiLCJ3ZWJTdG9yYWdlRW5hYmxlZCIsImxvY2F0aW9uQ29udGV4dEVuYWJsZWQiLCJicm93c2VyTmFtZSIsInBsYXRmb3JtIiwiamF2YXNjcmlwdEVuYWJsZWQiLCJkYXRhYmFzZUVuYWJsZWQiLCJ0YWtlc1NjcmVlbnNob3QiLCJuZXR3b3JrQ29ubmVjdGlvbkVuYWJsZWQiLCJXREFfU0lNX1NUQVJUVVBfUkVUUklFUyIsIldEQV9SRUFMX0RFVl9TVEFSVFVQX1JFVFJJRVMiLCJXREFfUkVBTF9ERVZfVFVUT1JJQUxfVVJMIiwiV0RBX1NUQVJUVVBfUkVUUllfSU5URVJWQUwiLCJERUZBVUxUX1NFVFRJTkdTIiwibmF0aXZlV2ViVGFwIiwibmF0aXZlV2ViVGFwU3RyaWN0IiwidXNlSlNPTlNvdXJjZSIsInNob3VsZFVzZUNvbXBhY3RSZXNwb25zZXMiLCJlbGVtZW50UmVzcG9uc2VBdHRyaWJ1dGVzIiwibWpwZWdTZXJ2ZXJTY3JlZW5zaG90UXVhbGl0eSIsIm1qcGVnU2VydmVyRnJhbWVyYXRlIiwic2NyZWVuc2hvdFF1YWxpdHkiLCJtanBlZ1NjYWxpbmdGYWN0b3IiLCJyZWR1Y2VNb3Rpb24iLCJTSEFSRURfUkVTT1VSQ0VTX0dVQVJEIiwiQXN5bmNMb2NrIiwiV0VCX0VMRU1FTlRTX0NBQ0hFX1NJWkUiLCJTVVBQT1JURURfT1JJRU5BVElPTlMiLCJOT19QUk9YWV9OQVRJVkVfTElTVCIsIk5PX1BST1hZX1dFQl9MSVNUIiwiY29uY2F0IiwiTUVNT0laRURfRlVOQ1RJT05TIiwiQlVORExFX1ZFUlNJT05fUEFUVEVSTiIsIlhDVUlUZXN0RHJpdmVyIiwiQmFzZURyaXZlciIsIm5ld01ldGhvZE1hcCIsImNvbnN0cnVjdG9yIiwib3B0cyIsInNob3VsZFZhbGlkYXRlQ2FwcyIsImRlc2lyZWRDYXBDb25zdHJhaW50cyIsImxvY2F0b3JTdHJhdGVnaWVzIiwid2ViTG9jYXRvclN0cmF0ZWdpZXMiLCJyZXNldElvcyIsInNldHRpbmdzIiwiRGV2aWNlU2V0dGluZ3MiLCJvblNldHRpbmdzVXBkYXRlIiwiYmluZCIsImxvZ3MiLCJmbiIsIl8iLCJtZW1vaXplIiwia2V5IiwidmFsdWUiLCJwcm94eUNvbW1hbmQiLCJ3ZGEiLCJkZXZpY2UiLCJqd3BQcm94eUFjdGl2ZSIsInByb3h5UmVxUmVzIiwiandwUHJveHlBdm9pZCIsInNhZmFyaSIsImNhY2hlZFdkYVN0YXR1cyIsImN1cldlYkZyYW1lcyIsIl9jdXJyZW50VXJsIiwiY3VyQ29udGV4dCIsInhjb2RlVmVyc2lvbiIsImNvbnRleHRzIiwiaW1wbGljaXRXYWl0TXMiLCJhc3luY2xpYldhaXRNcyIsInBhZ2VMb2FkTXMiLCJsYW5kc2NhcGVXZWJDb29yZHNPZmZzZXQiLCJyZW1vdGUiLCJfY29uZGl0aW9uSW5kdWNlclNlcnZpY2UiLCJ3ZWJFbGVtZW50c0NhY2hlIiwiTFJVIiwibWF4IiwiZHJpdmVyRGF0YSIsImdldFN0YXR1cyIsImRyaXZlckluZm8iLCJnZXREcml2ZXJJbmZvIiwic3RhdHVzIiwiYnVpbGQiLCJ2ZXJzaW9uIiwibWVyZ2VDbGlBcmdzVG9PcHRzIiwiZGlkTWVyZ2UiLCJPYmplY3QiLCJlbnRyaWVzIiwiY2xpQXJncyIsImhhcyIsImxvZyIsImluZm8iLCJjcmVhdGVTZXNzaW9uIiwiYXJncyIsImxpZmVjeWNsZURhdGEiLCJzZXNzaW9uSWQiLCJjYXBzIiwidmFsaWRhdGVEZXNpcmVkQ2FwcyIsInN0YXJ0IiwiYXNzaWduIiwidWRpZCIsInVwZGF0ZVNldHRpbmdzIiwid2RhU2V0dGluZ3MiLCJtanBlZ1NjcmVlbnNob3RVcmwiLCJtanBlZ1N0cmVhbSIsIm1qcGVnIiwiTUpwZWdTdHJlYW0iLCJlIiwiZXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVsZXRlU2Vzc2lvbiIsImdldERlZmF1bHRVcmwiLCJpc1JlYWxEZXZpY2UiLCJ3ZGFMb2NhbFBvcnQiLCJhZGRyZXNzIiwiaW5jbHVkZXMiLCJwb3J0Iiwibm9SZXNldCIsImZ1bGxSZXNldCIsInByaW50VXNlciIsImlvc1Nka1ZlcnNpb24iLCJyZWFsRGV2aWNlIiwiZGV0ZXJtaW5lRGV2aWNlIiwic2ltdWxhdG9yRGV2aWNlc1NldFBhdGgiLCJkZXZpY2VzU2V0UGF0aCIsInBsYXRmb3JtVmVyc2lvbiIsImdldFBsYXRmb3JtVmVyc2lvbiIsIm5vcm1hbGl6ZWRWZXJzaW9uIiwibm9ybWFsaXplUGxhdGZvcm1WZXJzaW9uIiwidXRpbCIsImNvbXBhcmVWZXJzaW9ucyIsIkVycm9yIiwiaXNFbXB0eSIsIndlYkRyaXZlckFnZW50VXJsIiwiZ2V0QW5kQ2hlY2tYY29kZVZlcnNpb24iLCJsb2dFdmVudCIsInRvTG93ZXIiLCJhcHAiLCJ1bmRlZmluZWQiLCJwcm9jZXNzQXJndW1lbnRzIiwiYnVuZGxlSWQiLCJTQUZBUklfQlVORExFX0lEIiwic2FmYXJpSW5pdGlhbFVybCIsImNvbmZpZ3VyZUFwcCIsImNoZWNrQXBwUHJlc2VudCIsImV4dHJhY3RCdW5kbGVJZCIsInJ1blJlc2V0IiwiV2ViRHJpdmVyQWdlbnQiLCJyZXRyaWV2ZURlcml2ZWREYXRhUGF0aCIsImNhdGNoIiwiZGVidWciLCJtZW1vaXplZExvZ0luZm8iLCJzdGFydExvZ0NhcHR1cmUiLCJza2lwTG9nQ2FwdHVyZSIsInJlc3VsdCIsImlzTG9nQ2FwdHVyZVN0YXJ0ZWQiLCJpc1NpbXVsYXRvciIsInNodXRkb3duT3RoZXJTaW11bGF0b3JzIiwiZW5zdXJlRmVhdHVyZUVuYWJsZWQiLCJzdGFydFNpbSIsImN1c3RvbVNTTENlcnQiLCJhZGRDZXJ0aWZpY2F0ZSIsInNldFNhZmFyaVByZWZzIiwic2V0TG9jYWxpemF0aW9uUHJlZnMiLCJpc0Jvb2xlYW4iLCJzZXRSZWR1Y2VNb3Rpb24iLCJyZWR1Y2VUcmFuc3BhcmVuY3kiLCJzZXRSZWR1Y2VUcmFuc3BhcmVuY3kiLCJsYXVuY2hXaXRoSURCIiwiaWRiIiwiSURCIiwiY29ubmVjdCIsInN0YWNrIiwid2FybiIsIm1lc3NhZ2UiLCJQeWlkZXZpY2UiLCJpbnN0YWxsUHJvZmlsZSIsInBheWxvYWQiLCJpbnN0YWxsQVVUIiwiaXNTYWZhcmkiLCJpc0FwcEluc3RhbGxlZCIsImVycm9yQW5kVGhyb3ciLCJwZXJtaXNzaW9ucyIsInBlcm1pc3Npb25zTWFwcGluZyIsInRvUGFpcnMiLCJwYXJzZSIsInNldFBlcm1pc3Npb25zIiwiY2FsZW5kYXJBY2Nlc3NBdXRob3JpemVkIiwibWV0aG9kTmFtZSIsInN0YXJ0V2RhIiwib3JpZW50YXRpb24iLCJzZXRJbml0aWFsT3JpZW50YXRpb24iLCJhdXRvV2VidmlldyIsImFjdGl2YXRlUmVjZW50V2VidmlldyIsImlzTmlsIiwiZ2V0Q3VycmVudFVybCIsInNldFVybCIsInNldEN1cnJlbnRVcmwiLCJnZXRVcmwiLCJoYXNWYWx1ZSIsImNsZWFudXBPYnNvbGV0ZVByb2Nlc3NlcyIsInVzZVBvcnRGb3J3YXJkaW5nIiwiaXNMb2NhbEhvc3QiLCJ3ZGFCYXNlVXJsIiwiREVWSUNFX0NPTk5FQ1RJT05TX0ZBQ1RPUlkiLCJyZXF1ZXN0Q29ubmVjdGlvbiIsInVybCIsImRldmljZVBvcnQiLCJ3ZGFSZW1vdGVQb3J0Iiwic3luY2hyb25pemF0aW9uS2V5IiwibmFtZSIsInVzZVhjdGVzdHJ1bkZpbGUiLCJpc1NvdXJjZUZyZXNoIiwiZGVyaXZlZERhdGFQYXRoIiwicGF0aCIsIm5vcm1hbGl6ZSIsImlzQnVzeSIsImJvb3RzdHJhcFBhdGgiLCJhY3F1aXJlIiwidXNlTmV3V0RBIiwicXVpdEFuZFVuaW5zdGFsbCIsInNldHVwQ2FjaGluZyIsIm1zZyIsInJlc3VsdEJ1bmRsZVBhdGgiLCJzdGFydHVwUmV0cmllcyIsIndkYVN0YXJ0dXBSZXRyaWVzIiwic3RhcnR1cFJldHJ5SW50ZXJ2YWwiLCJ3ZGFTdGFydHVwUmV0cnlJbnRlcnZhbCIsInJldHJ5Q291bnQiLCJyZXRyeUludGVydmFsIiwicmV0cmllcyIsIm1ham9yIiwicmV0cnkiLCJsYXVuY2giLCJlcnIiLCJlcnJvck1zZyIsIm9yaWdpbmFsU3RhY2t0cmFjZSIsInN0YXJ0V2RhU2Vzc2lvbiIsImNsZWFyU3lzdGVtRmlsZXMiLCJtYXJrU3lzdGVtRmlsZXNGb3JDbGVhbnVwIiwiZnVsbHlTdGFydGVkIiwicnVuUmVhbERldmljZVJlc2V0IiwicnVuU2ltdWxhdG9yUmVzZXQiLCJyZW1vdmVBbGxTZXNzaW9uV2ViU29ja2V0SGFuZGxlcnMiLCJzZXJ2ZXIiLCJyZWNvcmRlciIsImNvbXBhY3QiLCJfcmVjZW50U2NyZWVuUmVjb3JkZXIiLCJfYXVkaW9SZWNvcmRlciIsIl90cmFmZmljQ2FwdHVyZSIsImludGVycnVwdCIsImNsZWFudXAiLCJfcGVyZlJlY29yZGVycyIsIkIiLCJhbGwiLCJtYXAiLCJ4Iiwic3RvcCIsIm1vYmlsZURpc2FibGVDb25kaXRpb25JbmR1Y2VyIiwic3RvcFJlbW90ZSIsInJlc2V0T25TZXNzaW9uU3RhcnRPbmx5IiwiZW5mb3JjZVNpbXVsYXRvclNodXRkb3duIiwiY3JlYXRlU2ltIiwic2h1dGRvd25TaW11bGF0b3IiLCJkZWxldGUiLCJzaG91bGRSZXNldExvY2F0aW9uU2Vydml2Y2UiLCJyZXNldExvY2F0aW9uU2VydmljZSIsIm1vYmlsZVJlc2V0TG9jYXRpb25TZXJ2aWNlIiwiaWdub3JlIiwic3lzbG9nIiwic3RvcENhcHR1cmUiLCJqd3Byb3h5IiwicXVpdCIsInJlbGVhc2VDb25uZWN0aW9uIiwiZXhlY3V0ZUNvbW1hbmQiLCJjbWQiLCJyZWNlaXZlQXN5bmNSZXNwb25zZSIsImFwcElzUGFja2FnZU9yQnVuZGxlIiwidGVzdCIsImhlbHBlcnMiLCJvblBvc3RQcm9jZXNzIiwib25Qb3N0Q29uZmlndXJlQXBwIiwic3VwcG9ydGVkRXh0ZW5zaW9ucyIsInVuemlwQXBwIiwiYXBwUGF0aCIsImRlcHRoIiwicm9vdERpciIsIm1hdGNoZWRQYXRocyIsImZpbmRBcHBzIiwiYmFzZW5hbWUiLCJwbHVyYWxpemUiLCJsZW5ndGgiLCJtYXRjaGVkUGF0aCIsImZ1bGxQYXRoIiwiam9pbiIsImlzQXBwQnVuZGxlIiwic3VwcG9ydGVkUGxhdGZvcm1zIiwiZmV0Y2hTdXBwb3J0ZWRBcHBQbGF0Zm9ybXMiLCJzb21lIiwicCIsImlzb2xhdGVBcHBCdW5kbGUiLCJlbmRzV2l0aCIsImZzIiwic3RhdCIsImlzRmlsZSIsInJpbXJhZiIsImNhY2hlZEFwcEluZm8iLCJpc1VybCIsImlzUGxhaW5PYmplY3QiLCJoYXNoIiwicGFja2FnZUhhc2giLCJleGlzdHMiLCJnbG9iIiwiY3dkIiwic3RyaWN0Iiwibm9zb3J0IiwiaW50ZWdyaXR5IiwiZm9sZGVyIiwiZGV2aWNlTmFtZSIsInRyYW5zbGF0ZURldmljZU5hbWUiLCJzZXR1cFZlcnNpb25DYXBzIiwiZ2V0QW5kQ2hlY2tJb3NTZGtWZXJzaW9uIiwidG9Mb3dlckNhc2UiLCJkZXRlY3RVZGlkIiwiZ2V0RXhpc3RpbmdTaW0iLCJkZXZpY2VQbGF0Zm9ybSIsImRldmljZXMiLCJnZXRDb25uZWN0ZWREZXZpY2VzIiwiZ2V0U2ltdWxhdG9yIiwiaWduIiwiZ2V0UmVhbERldmljZU9iaiIsImVuZm9yY2VGcmVzaFNpbXVsYXRvckNyZWF0aW9uIiwicnVuT3B0cyIsInNjYWxlRmFjdG9yIiwiY29ubmVjdEhhcmR3YXJlS2V5Ym9hcmQiLCJwYXN0ZWJvYXJkQXV0b21hdGljU3luYyIsInNpbXVsYXRvclBhc3RlYm9hcmRBdXRvbWF0aWNTeW5jIiwiaXNIZWFkbGVzcyIsInRyYWNlUG9pbnRlciIsInNpbXVsYXRvclRyYWNlUG9pbnRlciIsImRldmljZVByZWZlcmVuY2VzIiwiU2ltdWxhdG9yV2luZG93Q2VudGVyIiwiaXNJbnRlZ2VyIiwic2ltdWxhdG9yU3RhcnR1cFRpbWVvdXQiLCJzdGFydHVwVGltZW91dCIsImlzU3RyaW5nIiwidG9VcHBlckNhc2UiLCJTaW11bGF0b3JXaW5kb3dPcmllbnRhdGlvbiIsIlNpbXVsYXRvcldpbmRvd1JvdGF0aW9uQW5nbGUiLCJydW4iLCJwbGF0Zm9ybU5hbWUiLCJpc1R2T1MiLCJQTEFURk9STV9OQU1FX1RWT1MiLCJQTEFURk9STV9OQU1FX0lPUyIsInNpbSIsImxhdW5jaEFwcCIsIkFQUF9MQVVOQ0hfVElNRU9VVCIsImNoZWNrU3RhdHVzIiwicmVzcG9uc2UiLCJjdXJyZW50QXBwIiwiYnVuZGxlSUQiLCJwYXJzZUludCIsImlzQXJyYXkiLCJlbnYiLCJsYW5ndWFnZSIsInB1c2giLCJsb2NhbGUiLCJzaG91bGRUZXJtaW5hdGVBcHAiLCJmb3JjZUFwcExhdW5jaCIsIndkYUNhcHMiLCJhdXRvTGF1bmNoIiwiYXJndW1lbnRzIiwiZW52aXJvbm1lbnQiLCJldmVudGxvb3BJZGxlRGVsYXlTZWMiLCJ3ZGFFdmVudGxvb3BJZGxlRGVsYXkiLCJzaG91bGRXYWl0Rm9yUXVpZXNjZW5jZSIsIndhaXRGb3JRdWllc2NlbmNlIiwic2hvdWxkVXNlVGVzdE1hbmFnZXJGb3JWaXNpYmlsaXR5RGV0ZWN0aW9uIiwic2ltcGxlSXNWaXNpYmxlQ2hlY2siLCJtYXhUeXBpbmdGcmVxdWVuY3kiLCJzaG91bGRVc2VTaW5nbGV0b25UZXN0TWFuYWdlciIsIndhaXRGb3JJZGxlVGltZW91dCIsImVsZW1lbnRSZXNwb25zZUZpZWxkcyIsImRpc2FibGVBdXRvbWF0aWNTY3JlZW5zaG90cyIsInVzZU5hdGl2ZUNhY2hpbmdTdHJhdGVneSIsImZvcmNlU2ltdWxhdG9yU29mdHdhcmVLZXlib2FyZFByZXNlbmNlIiwiYXV0b0FjY2VwdEFsZXJ0cyIsImRlZmF1bHRBbGVydEFjdGlvbiIsImF1dG9EaXNtaXNzQWxlcnRzIiwiY2FwYWJpbGl0aWVzIiwiZmlyc3RNYXRjaCIsImFsd2F5c01hdGNoIiwicHJveHlBY3RpdmUiLCJnZXRQcm94eUF2b2lkTGlzdCIsImlzV2VidmlldyIsImNhblByb3h5IiwiaXNXZWJDb250ZXh0IiwidmFsaWRhdGVMb2NhdG9yU3RyYXRlZ3kiLCJzdHJhdGVneSIsImNvZXJjZVZlcnNpb24iLCJ2ZXJpZnlQcm9jZXNzQXJndW1lbnQiLCJrZXljaGFpblBhdGgiLCJrZXljaGFpblBhc3N3b3JkIiwiY29tbWFuZFRpbWVvdXRzIiwibm9ybWFsaXplQ29tbWFuZFRpbWVvdXRzIiwicHJvdG9jb2wiLCJob3N0IiwicGVybXMiLCJhZGRpdGlvbmFsV2Vidmlld0J1bmRsZUlkcyIsInBhcnNlQ2Fwc0FycmF5IiwiY2hlY2tBdXRJbnN0YWxsYXRpb25TdGF0ZSIsIl9hd2FpdCRkZXZpY2UkZmV0Y2hBcCIsIl9CVU5ETEVfVkVSU0lPTl9QQVRURSIsImVuZm9yY2VBcHBJbnN0YWxsIiwid2FzQXBwSW5zdGFsbGVkIiwiaW5zdGFsbCIsInNraXBVbmluc3RhbGwiLCJjYW5kaWRhdGVCdW5kbGVWZXJzaW9uIiwiZXh0cmFjdEJ1bmRsZVZlcnNpb24iLCJhcHBCdW5kbGVWZXJzaW9uIiwiZmV0Y2hBcHBJbmZvIiwiQ0ZCdW5kbGVWZXJzaW9uIiwiZXhlYyIsInNpbWN0bCIsImFwcEluZm8iLCJzaG91bGRVcGdyYWRlIiwidmVyaWZ5QXBwbGljYXRpb25QbGF0Zm9ybSIsImluc3RhbGxUb1JlYWxEZXZpY2UiLCJ0aW1lb3V0IiwiYXBwUHVzaFRpbWVvdXQiLCJhcHBJbnN0YWxsU3RyYXRlZ3kiLCJpbnN0YWxsVG9TaW11bGF0b3IiLCJuZXdTaW11bGF0b3IiLCJpb3NJbnN0YWxsUGF1c2UiLCJwYXVzZU1zIiwiZGVsYXkiLCJvdGhlckFwcHMiLCJpbnN0YWxsT3RoZXJBcHBzIiwiYXBwc0xpc3QiLCJhcHBQYXRocyIsIm90aGVyQXBwIiwiZHN0T3JpZW50YXRpb24iLCJ0b1VwcGVyIiwiX2dldENvbW1hbmRUaW1lb3V0IiwiY21kTmFtZSIsIkRFRkFVTFRfVElNRU9VVF9LRVkiLCJnZXRTZXNzaW9uIiwiZHJpdmVyU2Vzc2lvbiIsInNob3VsZEdldERldmljZUNhcHMiLCJpbmNsdWRlRGV2aWNlQ2Fwc1RvU2Vzc2lvbkluZm8iLCJkZXZpY2VDYXBzIiwic3RhdHVzQmFyU2l6ZSIsInNjYWxlIiwiZ2V0U2NyZWVuSW5mbyIsInBpeGVsUmF0aW8iLCJzdGF0QmFySGVpZ2h0IiwiaGVpZ2h0Iiwidmlld3BvcnRSZWN0IiwiZ2V0Vmlld3BvcnRSZWN0IiwicmVzZXQiLCJjbG9uZURlZXAiLCJzaHV0ZG93bkhhbmRsZXIiLCJyZXNldE9uVW5leHBlY3RlZFNodXRkb3duIiwiZXhwb3J0cyIsInByb3RvdHlwZSIsImNvbW1hbmRzIiwiX2RlZmF1bHQiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vbGliL2RyaXZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlRHJpdmVyLCBEZXZpY2VTZXR0aW5ncyB9IGZyb20gJ2FwcGl1bS9kcml2ZXInO1xuaW1wb3J0IHsgdXRpbCwgbWpwZWcsIGZzIH0gZnJvbSAnYXBwaXVtL3N1cHBvcnQnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB1cmwgZnJvbSAndXJsJztcbmltcG9ydCB7IFdlYkRyaXZlckFnZW50IH0gZnJvbSAnYXBwaXVtLXdlYmRyaXZlcmFnZW50JztcbmltcG9ydCBMUlUgZnJvbSAnbHJ1LWNhY2hlJztcbmltcG9ydCB7IG5ld01ldGhvZE1hcCB9IGZyb20gJy4vbWV0aG9kLW1hcCc7XG5pbXBvcnQge1xuICBjcmVhdGVTaW0sIGdldEV4aXN0aW5nU2ltLCBydW5TaW11bGF0b3JSZXNldCwgaW5zdGFsbFRvU2ltdWxhdG9yLFxuICBzaHV0ZG93bk90aGVyU2ltdWxhdG9ycywgc2h1dGRvd25TaW11bGF0b3IsIHNldFNhZmFyaVByZWZzLCBzZXRMb2NhbGl6YXRpb25QcmVmc1xufSBmcm9tICcuL3NpbXVsYXRvci1tYW5hZ2VtZW50JztcbmltcG9ydCB7IGdldFNpbXVsYXRvciB9IGZyb20gJ2FwcGl1bS1pb3Mtc2ltdWxhdG9yJztcbmltcG9ydCB7IHJldHJ5SW50ZXJ2YWwsIHJldHJ5IH0gZnJvbSAnYXN5bmNib3gnO1xuaW1wb3J0IHtcbiAgdmVyaWZ5QXBwbGljYXRpb25QbGF0Zm9ybSwgZXh0cmFjdEJ1bmRsZUlkLCBTQUZBUklfQlVORExFX0lELFxuICBmZXRjaFN1cHBvcnRlZEFwcFBsYXRmb3JtcywgQVBQX0VYVCwgSVBBX0VYVCxcbiAgaXNBcHBCdW5kbGUsIGZpbmRBcHBzLCBpc29sYXRlQXBwQnVuZGxlLCBleHRyYWN0QnVuZGxlVmVyc2lvbixcbn0gZnJvbSAnLi9hcHAtdXRpbHMnO1xuaW1wb3J0IHtcbiAgZGVzaXJlZENhcENvbnN0cmFpbnRzLCBQTEFURk9STV9OQU1FX0lPUywgUExBVEZPUk1fTkFNRV9UVk9TXG59IGZyb20gJy4vZGVzaXJlZC1jYXBzJztcbmltcG9ydCBjb21tYW5kcyBmcm9tICcuL2NvbW1hbmRzL2luZGV4JztcbmltcG9ydCB7XG4gIGRldGVjdFVkaWQsIGdldEFuZENoZWNrWGNvZGVWZXJzaW9uLCBnZXRBbmRDaGVja0lvc1Nka1ZlcnNpb24sXG4gIGNoZWNrQXBwUHJlc2VudCwgZ2V0RHJpdmVySW5mbyxcbiAgY2xlYXJTeXN0ZW1GaWxlcywgdHJhbnNsYXRlRGV2aWNlTmFtZSwgbm9ybWFsaXplQ29tbWFuZFRpbWVvdXRzLFxuICBERUZBVUxUX1RJTUVPVVRfS0VZLCBtYXJrU3lzdGVtRmlsZXNGb3JDbGVhbnVwLFxuICBwcmludFVzZXIsIHJlbW92ZUFsbFNlc3Npb25XZWJTb2NrZXRIYW5kbGVycyxcbiAgbm9ybWFsaXplUGxhdGZvcm1WZXJzaW9uLCBpc0xvY2FsSG9zdFxufSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7XG4gIGdldENvbm5lY3RlZERldmljZXMsIHJ1blJlYWxEZXZpY2VSZXNldCwgaW5zdGFsbFRvUmVhbERldmljZSxcbiAgZ2V0UmVhbERldmljZU9ialxufSBmcm9tICcuL3JlYWwtZGV2aWNlLW1hbmFnZW1lbnQnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IEFzeW5jTG9jayBmcm9tICdhc3luYy1sb2NrJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IElEQiBmcm9tICdhcHBpdW0taWRiJztcbmltcG9ydCBERVZJQ0VfQ09OTkVDVElPTlNfRkFDVE9SWSBmcm9tICcuL2RldmljZS1jb25uZWN0aW9ucy1mYWN0b3J5JztcbmltcG9ydCBQeWlkZXZpY2UgZnJvbSAnLi9weS1pb3MtZGV2aWNlLWNsaWVudCc7XG5cblxuY29uc3QgU0hVVERPV05fT1RIRVJfRkVBVF9OQU1FID0gJ3NodXRkb3duX290aGVyX3NpbXMnO1xuY29uc3QgQ1VTVE9NSVpFX1JFU1VMVF9CVU5EUEVfUEFUSCA9ICdjdXN0b21pemVfcmVzdWx0X2J1bmRsZV9wYXRoJztcblxuY29uc3QgU1VQUE9SVEVEX0VYVEVOU0lPTlMgPSBbSVBBX0VYVCwgQVBQX0VYVF07XG5jb25zdCBNQVhfQVJDSElWRV9TQ0FOX0RFUFRIID0gMTtcbmNvbnN0IGRlZmF1bHRTZXJ2ZXJDYXBzID0ge1xuICB3ZWJTdG9yYWdlRW5hYmxlZDogZmFsc2UsXG4gIGxvY2F0aW9uQ29udGV4dEVuYWJsZWQ6IGZhbHNlLFxuICBicm93c2VyTmFtZTogJycsXG4gIHBsYXRmb3JtOiAnTUFDJyxcbiAgamF2YXNjcmlwdEVuYWJsZWQ6IHRydWUsXG4gIGRhdGFiYXNlRW5hYmxlZDogZmFsc2UsXG4gIHRha2VzU2NyZWVuc2hvdDogdHJ1ZSxcbiAgbmV0d29ya0Nvbm5lY3Rpb25FbmFibGVkOiBmYWxzZSxcbn07XG5jb25zdCBXREFfU0lNX1NUQVJUVVBfUkVUUklFUyA9IDI7XG5jb25zdCBXREFfUkVBTF9ERVZfU1RBUlRVUF9SRVRSSUVTID0gMTtcbmNvbnN0IFdEQV9SRUFMX0RFVl9UVVRPUklBTF9VUkwgPSAnaHR0cHM6Ly9naXRodWIuY29tL2FwcGl1bS9hcHBpdW0teGN1aXRlc3QtZHJpdmVyL2Jsb2IvbWFzdGVyL2RvY3MvcmVhbC1kZXZpY2UtY29uZmlnLm1kJztcbmNvbnN0IFdEQV9TVEFSVFVQX1JFVFJZX0lOVEVSVkFMID0gMTAwMDA7XG5jb25zdCBERUZBVUxUX1NFVFRJTkdTID0ge1xuICBuYXRpdmVXZWJUYXA6IGZhbHNlLFxuICBuYXRpdmVXZWJUYXBTdHJpY3Q6IGZhbHNlLFxuICB1c2VKU09OU291cmNlOiBmYWxzZSxcbiAgc2hvdWxkVXNlQ29tcGFjdFJlc3BvbnNlczogdHJ1ZSxcbiAgZWxlbWVudFJlc3BvbnNlQXR0cmlidXRlczogJ3R5cGUsbGFiZWwnLFxuICAvLyBSZWFkIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vV2ViRHJpdmVyQWdlbnQvYmxvYi9tYXN0ZXIvV2ViRHJpdmVyQWdlbnRMaWIvVXRpbGl0aWVzL0ZCQ29uZmlndXJhdGlvbi5tIGZvciBmb2xsb3dpbmcgc2V0dGluZ3MnIHZhbHVlc1xuICBtanBlZ1NlcnZlclNjcmVlbnNob3RRdWFsaXR5OiAyNSxcbiAgbWpwZWdTZXJ2ZXJGcmFtZXJhdGU6IDEwLFxuICBzY3JlZW5zaG90UXVhbGl0eTogMSxcbiAgbWpwZWdTY2FsaW5nRmFjdG9yOiAxMDAsXG4gIC8vIHNldCBgcmVkdWNlTW90aW9uYCB0byBgbnVsbGAgc28gdGhhdCBpdCB3aWxsIGJlIHZlcmlmaWVkIGJ1dCBzdGlsbCBzZXQgZWl0aGVyIHRydWUvZmFsc2VcbiAgcmVkdWNlTW90aW9uOiBudWxsLFxufTtcbi8vIFRoaXMgbG9jayBhc3N1cmVzLCB0aGF0IGVhY2ggZHJpdmVyIHNlc3Npb24gZG9lcyBub3Rcbi8vIGFmZmVjdCBzaGFyZWQgcmVzb3VyY2VzIG9mIHRoZSBvdGhlciBwYXJhbGxlbCBzZXNzaW9uc1xuY29uc3QgU0hBUkVEX1JFU09VUkNFU19HVUFSRCA9IG5ldyBBc3luY0xvY2soKTtcbmNvbnN0IFdFQl9FTEVNRU5UU19DQUNIRV9TSVpFID0gNTAwO1xuY29uc3QgU1VQUE9SVEVEX09SSUVOQVRJT05TID0gWydMQU5EU0NBUEUnLCAnUE9SVFJBSVQnXTtcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZWxlc3MtZXNjYXBlICovXG5jb25zdCBOT19QUk9YWV9OQVRJVkVfTElTVCA9IFtcbiAgWydERUxFVEUnLCAvd2luZG93L10sXG4gIFsnR0VUJywgL15cXC9zZXNzaW9uXFwvW15cXC9dKyQvXSxcbiAgWydHRVQnLCAvYWxlcnRfdGV4dC9dLFxuICBbJ0dFVCcsIC9hbGVydFxcL1teXFwvXSsvXSxcbiAgWydHRVQnLCAvYXBwaXVtL10sXG4gIFsnR0VUJywgL2F0dHJpYnV0ZS9dLFxuICBbJ0dFVCcsIC9jb250ZXh0L10sXG4gIFsnR0VUJywgL2xvY2F0aW9uL10sXG4gIFsnR0VUJywgL2xvZy9dLFxuICBbJ0dFVCcsIC9zY3JlZW5zaG90L10sXG4gIFsnR0VUJywgL3NpemUvXSxcbiAgWydHRVQnLCAvc291cmNlL10sXG4gIFsnR0VUJywgL3RpbWVvdXRzJC9dLFxuICBbJ0dFVCcsIC91cmwvXSxcbiAgWydHRVQnLCAvd2luZG93L10sXG4gIFsnUE9TVCcsIC9hY2NlcHRfYWxlcnQvXSxcbiAgWydQT1NUJywgL2FjdGlvbnMkL10sXG4gIFsnREVMRVRFJywgL2FjdGlvbnMkL10sXG4gIFsnUE9TVCcsIC9hbGVydF90ZXh0L10sXG4gIFsnUE9TVCcsIC9hbGVydFxcL1teXFwvXSsvXSxcbiAgWydQT1NUJywgL2FwcGl1bS9dLFxuICBbJ1BPU1QnLCAvYXBwaXVtXFwvZGV2aWNlXFwvaXNfbG9ja2VkL10sXG4gIFsnUE9TVCcsIC9hcHBpdW1cXC9kZXZpY2VcXC9sb2NrL10sXG4gIFsnUE9TVCcsIC9hcHBpdW1cXC9kZXZpY2VcXC91bmxvY2svXSxcbiAgWydQT1NUJywgL2JhY2svXSxcbiAgWydQT1NUJywgL2NsZWFyL10sXG4gIFsnUE9TVCcsIC9jb250ZXh0L10sXG4gIFsnUE9TVCcsIC9kaXNtaXNzX2FsZXJ0L10sXG4gIFsnUE9TVCcsIC9lbGVtZW50XFwvYWN0aXZlL10sIC8vIE1KU09OV1AgZ2V0IGFjdGl2ZSBlbGVtZW50IHNob3VsZCBwcm94eVxuICBbJ1BPU1QnLCAvZWxlbWVudCQvXSxcbiAgWydQT1NUJywgL2VsZW1lbnRzJC9dLFxuICBbJ1BPU1QnLCAvZXhlY3V0ZS9dLFxuICBbJ1BPU1QnLCAva2V5cy9dLFxuICBbJ1BPU1QnLCAvbG9nL10sXG4gIFsnUE9TVCcsIC9tb3ZldG8vXSxcbiAgWydQT1NUJywgL3JlY2VpdmVfYXN5bmNfcmVzcG9uc2UvXSwgLy8gYWx3YXlzLCBpbiBjYXNlIGNvbnRleHQgc3dpdGNoZXMgd2hpbGUgd2FpdGluZ1xuICBbJ1BPU1QnLCAvc2Vzc2lvblxcL1teXFwvXStcXC9sb2NhdGlvbi9dLCAvLyBnZW8gbG9jYXRpb24sIGJ1dCBub3QgZWxlbWVudCBsb2NhdGlvblxuICBbJ1BPU1QnLCAvc2hha2UvXSxcbiAgWydQT1NUJywgL3RpbWVvdXRzL10sXG4gIFsnUE9TVCcsIC90b3VjaC9dLFxuICBbJ1BPU1QnLCAvdXJsL10sXG4gIFsnUE9TVCcsIC92YWx1ZS9dLFxuICBbJ1BPU1QnLCAvd2luZG93L10sXG4gIFsnREVMRVRFJywgL2Nvb2tpZS9dLFxuICBbJ0dFVCcsIC9jb29raWUvXSxcbiAgWydQT1NUJywgL2Nvb2tpZS9dLFxuXTtcbmNvbnN0IE5PX1BST1hZX1dFQl9MSVNUID0gW1xuICBbJ0dFVCcsIC9hdHRyaWJ1dGUvXSxcbiAgWydHRVQnLCAvZWxlbWVudC9dLFxuICBbJ0dFVCcsIC90ZXh0L10sXG4gIFsnR0VUJywgL3RpdGxlL10sXG4gIFsnUE9TVCcsIC9jbGVhci9dLFxuICBbJ1BPU1QnLCAvY2xpY2svXSxcbiAgWydQT1NUJywgL2VsZW1lbnQvXSxcbiAgWydQT1NUJywgL2ZvcndhcmQvXSxcbiAgWydQT1NUJywgL2ZyYW1lL10sXG4gIFsnUE9TVCcsIC9rZXlzL10sXG4gIFsnUE9TVCcsIC9yZWZyZXNoL10sXG5dLmNvbmNhdChOT19QUk9YWV9OQVRJVkVfTElTVCk7XG4vKiBlc2xpbnQtZW5hYmxlIG5vLXVzZWxlc3MtZXNjYXBlICovXG5cbmNvbnN0IE1FTU9JWkVEX0ZVTkNUSU9OUyA9IFtcbiAgJ2dldFN0YXR1c0JhckhlaWdodCcsXG4gICdnZXREZXZpY2VQaXhlbFJhdGlvJyxcbiAgJ2dldFNjcmVlbkluZm8nLFxuXTtcbmNvbnN0IEJVTkRMRV9WRVJTSU9OX1BBVFRFUk4gPSAvQ0ZCdW5kbGVWZXJzaW9uXFxzKz1cXHMrXCI/KFteKDt8XCIpXSspLztcblxuXG5jbGFzcyBYQ1VJVGVzdERyaXZlciBleHRlbmRzIEJhc2VEcml2ZXIge1xuXG4gIHN0YXRpYyBuZXdNZXRob2RNYXAgPSBuZXdNZXRob2RNYXA7XG5cbiAgY29uc3RydWN0b3IgKG9wdHMgPSB7fSwgc2hvdWxkVmFsaWRhdGVDYXBzID0gdHJ1ZSkge1xuICAgIHN1cGVyKG9wdHMsIHNob3VsZFZhbGlkYXRlQ2Fwcyk7XG5cbiAgICB0aGlzLmRlc2lyZWRDYXBDb25zdHJhaW50cyA9IGRlc2lyZWRDYXBDb25zdHJhaW50cztcblxuICAgIHRoaXMubG9jYXRvclN0cmF0ZWdpZXMgPSBbXG4gICAgICAneHBhdGgnLFxuICAgICAgJ2lkJyxcbiAgICAgICduYW1lJyxcbiAgICAgICdjbGFzcyBuYW1lJyxcbiAgICAgICctaW9zIHByZWRpY2F0ZSBzdHJpbmcnLFxuICAgICAgJy1pb3MgY2xhc3MgY2hhaW4nLFxuICAgICAgJ2FjY2Vzc2liaWxpdHkgaWQnLFxuICAgICAgJ2NzcyBzZWxlY3RvcicsXG4gICAgXTtcbiAgICB0aGlzLndlYkxvY2F0b3JTdHJhdGVnaWVzID0gW1xuICAgICAgJ2xpbmsgdGV4dCcsXG4gICAgICAnY3NzIHNlbGVjdG9yJyxcbiAgICAgICd0YWcgbmFtZScsXG4gICAgICAnbGluayB0ZXh0JyxcbiAgICAgICdwYXJ0aWFsIGxpbmsgdGV4dCcsXG4gICAgXTtcbiAgICB0aGlzLnJlc2V0SW9zKCk7XG4gICAgdGhpcy5zZXR0aW5ncyA9IG5ldyBEZXZpY2VTZXR0aW5ncyhERUZBVUxUX1NFVFRJTkdTLCB0aGlzLm9uU2V0dGluZ3NVcGRhdGUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5sb2dzID0ge307XG5cbiAgICAvLyBtZW1vaXplIGZ1bmN0aW9ucyBoZXJlLCBzbyB0aGF0IHRoZXkgYXJlIGRvbmUgb24gYSBwZXItaW5zdGFuY2UgYmFzaXNcbiAgICBmb3IgKGNvbnN0IGZuIG9mIE1FTU9JWkVEX0ZVTkNUSU9OUykge1xuICAgICAgdGhpc1tmbl0gPSBfLm1lbW9pemUodGhpc1tmbl0pO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG9uU2V0dGluZ3NVcGRhdGUgKGtleSwgdmFsdWUpIHtcbiAgICBpZiAoa2V5ICE9PSAnbmF0aXZlV2ViVGFwJyAmJiBrZXkgIT09ICduYXRpdmVXZWJUYXBTdHJpY3QnKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoJy9hcHBpdW0vc2V0dGluZ3MnLCAnUE9TVCcsIHtcbiAgICAgICAgc2V0dGluZ3M6IHtba2V5XTogdmFsdWV9XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5vcHRzW2tleV0gPSAhIXZhbHVlO1xuICB9XG5cbiAgcmVzZXRJb3MgKCkge1xuICAgIHRoaXMub3B0cyA9IHRoaXMub3B0cyB8fCB7fTtcbiAgICB0aGlzLndkYSA9IG51bGw7XG4gICAgdGhpcy5vcHRzLmRldmljZSA9IG51bGw7XG4gICAgdGhpcy5qd3BQcm94eUFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMucHJveHlSZXFSZXMgPSBudWxsO1xuICAgIHRoaXMuandwUHJveHlBdm9pZCA9IFtdO1xuICAgIHRoaXMuc2FmYXJpID0gZmFsc2U7XG4gICAgdGhpcy5jYWNoZWRXZGFTdGF0dXMgPSBudWxsO1xuXG4gICAgdGhpcy5jdXJXZWJGcmFtZXMgPSBbXTtcbiAgICB0aGlzLl9jdXJyZW50VXJsID0gbnVsbDtcbiAgICB0aGlzLmN1ckNvbnRleHQgPSBudWxsO1xuICAgIHRoaXMueGNvZGVWZXJzaW9uID0ge307XG4gICAgdGhpcy5jb250ZXh0cyA9IFtdO1xuICAgIHRoaXMuaW1wbGljaXRXYWl0TXMgPSAwO1xuICAgIHRoaXMuYXN5bmNsaWJXYWl0TXMgPSAwO1xuICAgIHRoaXMucGFnZUxvYWRNcyA9IDYwMDA7XG4gICAgdGhpcy5sYW5kc2NhcGVXZWJDb29yZHNPZmZzZXQgPSAwO1xuICAgIHRoaXMucmVtb3RlID0gbnVsbDtcbiAgICB0aGlzLl9jb25kaXRpb25JbmR1Y2VyU2VydmljZSA9IG51bGw7XG5cbiAgICB0aGlzLndlYkVsZW1lbnRzQ2FjaGUgPSBuZXcgTFJVKHtcbiAgICAgIG1heDogV0VCX0VMRU1FTlRTX0NBQ0hFX1NJWkUsXG4gICAgfSk7XG4gIH1cblxuICBnZXQgZHJpdmVyRGF0YSAoKSB7XG4gICAgLy8gVE9ETyBmaWxsIG91dCByZXNvdXJjZSBpbmZvIGhlcmVcbiAgICByZXR1cm4ge307XG4gIH1cblxuICBhc3luYyBnZXRTdGF0dXMgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5kcml2ZXJJbmZvID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5kcml2ZXJJbmZvID0gYXdhaXQgZ2V0RHJpdmVySW5mbygpO1xuICAgIH1cbiAgICBsZXQgc3RhdHVzID0ge2J1aWxkOiB7dmVyc2lvbjogdGhpcy5kcml2ZXJJbmZvLnZlcnNpb259fTtcbiAgICBpZiAodGhpcy5jYWNoZWRXZGFTdGF0dXMpIHtcbiAgICAgIHN0YXR1cy53ZGEgPSB0aGlzLmNhY2hlZFdkYVN0YXR1cztcbiAgICB9XG4gICAgcmV0dXJuIHN0YXR1cztcbiAgfVxuXG4gIG1lcmdlQ2xpQXJnc1RvT3B0cyAoKSB7XG4gICAgbGV0IGRpZE1lcmdlID0gZmFsc2U7XG4gICAgLy8gdGhpcy5jbGlBcmdzIHNob3VsZCBuZXZlciBpbmNsdWRlIGFueXRoaW5nIHdlIGRvIG5vdCBleHBlY3QuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5jbGlBcmdzID8/IHt9KSkge1xuICAgICAgaWYgKF8uaGFzKHRoaXMub3B0cywga2V5KSkge1xuICAgICAgICB0aGlzLmxvZy5pbmZvKGBDTEkgYXJnICcke2tleX0nIHdpdGggdmFsdWUgJyR7dmFsdWV9JyBvdmVyd3JpdGVzIHZhbHVlICcke3RoaXMub3B0c1trZXldfScgc2VudCBpbiB2aWEgY2FwcylgKTtcbiAgICAgICAgZGlkTWVyZ2UgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5vcHRzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGRpZE1lcmdlO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlU2Vzc2lvbiAoLi4uYXJncykge1xuICAgIHRoaXMubGlmZWN5Y2xlRGF0YSA9IHt9OyAvLyB0aGlzIGlzIHVzZWQgZm9yIGtlZXBpbmcgdHJhY2sgb2YgdGhlIHN0YXRlIHdlIHN0YXJ0IHNvIHdoZW4gd2UgZGVsZXRlIHRoZSBzZXNzaW9uIHdlIGNhbiBwdXQgdGhpbmdzIGJhY2tcbiAgICB0cnkge1xuICAgICAgbGV0IFtzZXNzaW9uSWQsIGNhcHNdID0gYXdhaXQgc3VwZXIuY3JlYXRlU2Vzc2lvbiguLi5hcmdzKTtcbiAgICAgIHRoaXMub3B0cy5zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG5cbiAgICAgIC8vIG1lcmdlIGNsaSBhcmdzIHRvIG9wdHMsIGFuZCBpZiB3ZSBkaWQgbWVyZ2UgYW55LCByZXZhbGlkYXRlIG9wdHMgdG8gZW5zdXJlIHRoZSBmaW5hbCBzZXRcbiAgICAgIC8vIGlzIGFsc28gY29uc2lzdGVudFxuICAgICAgaWYgKHRoaXMubWVyZ2VDbGlBcmdzVG9PcHRzKCkpIHtcbiAgICAgICAgdGhpcy52YWxpZGF0ZURlc2lyZWRDYXBzKHsuLi5jYXBzLCAuLi50aGlzLmNsaUFyZ3N9KTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5zdGFydCgpO1xuXG4gICAgICAvLyBtZXJnZSBzZXJ2ZXIgY2FwYWJpbGl0aWVzICsgZGVzaXJlZCBjYXBhYmlsaXRpZXNcbiAgICAgIGNhcHMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0U2VydmVyQ2FwcywgY2Fwcyk7XG4gICAgICAvLyB1cGRhdGUgdGhlIHVkaWQgd2l0aCB3aGF0IGlzIGFjdHVhbGx5IHVzZWRcbiAgICAgIGNhcHMudWRpZCA9IHRoaXMub3B0cy51ZGlkO1xuICAgICAgLy8gZW5zdXJlIHdlIHRyYWNrIG5hdGl2ZVdlYlRhcCBjYXBhYmlsaXR5IGFzIGEgc2V0dGluZyBhcyB3ZWxsXG4gICAgICBpZiAoXy5oYXModGhpcy5vcHRzLCAnbmF0aXZlV2ViVGFwJykpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVTZXR0aW5ncyh7bmF0aXZlV2ViVGFwOiB0aGlzLm9wdHMubmF0aXZlV2ViVGFwfSk7XG4gICAgICB9XG4gICAgICAvLyBlbnN1cmUgd2UgdHJhY2sgbmF0aXZlV2ViVGFwU3RyaWN0IGNhcGFiaWxpdHkgYXMgYSBzZXR0aW5nIGFzIHdlbGxcbiAgICAgIGlmIChfLmhhcyh0aGlzLm9wdHMsICduYXRpdmVXZWJUYXBTdHJpY3QnKSkge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVNldHRpbmdzKHtuYXRpdmVXZWJUYXBTdHJpY3Q6IHRoaXMub3B0cy5uYXRpdmVXZWJUYXBTdHJpY3R9KTtcbiAgICAgIH1cbiAgICAgIC8vIGVuc3VyZSB3ZSB0cmFjayB1c2VKU09OU291cmNlIGNhcGFiaWxpdHkgYXMgYSBzZXR0aW5nIGFzIHdlbGxcbiAgICAgIGlmIChfLmhhcyh0aGlzLm9wdHMsICd1c2VKU09OU291cmNlJykpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVTZXR0aW5ncyh7dXNlSlNPTlNvdXJjZTogdGhpcy5vcHRzLnVzZUpTT05Tb3VyY2V9KTtcbiAgICAgIH1cblxuICAgICAgbGV0IHdkYVNldHRpbmdzID0ge1xuICAgICAgICBlbGVtZW50UmVzcG9uc2VBdHRyaWJ1dGVzOiBERUZBVUxUX1NFVFRJTkdTLmVsZW1lbnRSZXNwb25zZUF0dHJpYnV0ZXMsXG4gICAgICAgIHNob3VsZFVzZUNvbXBhY3RSZXNwb25zZXM6IERFRkFVTFRfU0VUVElOR1Muc2hvdWxkVXNlQ29tcGFjdFJlc3BvbnNlcyxcbiAgICAgIH07XG4gICAgICBpZiAoXy5oYXModGhpcy5vcHRzLCAnZWxlbWVudFJlc3BvbnNlQXR0cmlidXRlcycpKSB7XG4gICAgICAgIHdkYVNldHRpbmdzLmVsZW1lbnRSZXNwb25zZUF0dHJpYnV0ZXMgPSB0aGlzLm9wdHMuZWxlbWVudFJlc3BvbnNlQXR0cmlidXRlcztcbiAgICAgIH1cbiAgICAgIGlmIChfLmhhcyh0aGlzLm9wdHMsICdzaG91bGRVc2VDb21wYWN0UmVzcG9uc2VzJykpIHtcbiAgICAgICAgd2RhU2V0dGluZ3Muc2hvdWxkVXNlQ29tcGFjdFJlc3BvbnNlcyA9IHRoaXMub3B0cy5zaG91bGRVc2VDb21wYWN0UmVzcG9uc2VzO1xuICAgICAgfVxuICAgICAgaWYgKF8uaGFzKHRoaXMub3B0cywgJ21qcGVnU2VydmVyU2NyZWVuc2hvdFF1YWxpdHknKSkge1xuICAgICAgICB3ZGFTZXR0aW5ncy5tanBlZ1NlcnZlclNjcmVlbnNob3RRdWFsaXR5ID0gdGhpcy5vcHRzLm1qcGVnU2VydmVyU2NyZWVuc2hvdFF1YWxpdHk7XG4gICAgICB9XG4gICAgICBpZiAoXy5oYXModGhpcy5vcHRzLCAnbWpwZWdTZXJ2ZXJGcmFtZXJhdGUnKSkge1xuICAgICAgICB3ZGFTZXR0aW5ncy5tanBlZ1NlcnZlckZyYW1lcmF0ZSA9IHRoaXMub3B0cy5tanBlZ1NlcnZlckZyYW1lcmF0ZTtcbiAgICAgIH1cbiAgICAgIGlmIChfLmhhcyh0aGlzLm9wdHMsICdzY3JlZW5zaG90UXVhbGl0eScpKSB7XG4gICAgICAgIHRoaXMubG9nLmluZm8oYFNldHRpbmcgdGhlIHF1YWxpdHkgb2YgcGhvbmUgc2NyZWVuc2hvdDogJyR7dGhpcy5vcHRzLnNjcmVlbnNob3RRdWFsaXR5fSdgKTtcbiAgICAgICAgd2RhU2V0dGluZ3Muc2NyZWVuc2hvdFF1YWxpdHkgPSB0aGlzLm9wdHMuc2NyZWVuc2hvdFF1YWxpdHk7XG4gICAgICB9XG4gICAgICAvLyBlbnN1cmUgV0RBIGdldHMgb3VyIGRlZmF1bHRzIGluc3RlYWQgb2Ygd2hhdGV2ZXIgaXRzIG93biBtaWdodCBiZVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVTZXR0aW5ncyh3ZGFTZXR0aW5ncyk7XG5cbiAgICAgIC8vIHR1cm4gb24gbWpwZWcgc3RyZWFtIHJlYWRpbmcgaWYgcmVxdWVzdGVkXG4gICAgICBpZiAodGhpcy5vcHRzLm1qcGVnU2NyZWVuc2hvdFVybCkge1xuICAgICAgICB0aGlzLmxvZy5pbmZvKGBTdGFydGluZyBNSlBFRyBzdHJlYW0gcmVhZGluZyBVUkw6ICcke3RoaXMub3B0cy5tanBlZ1NjcmVlbnNob3RVcmx9J2ApO1xuICAgICAgICB0aGlzLm1qcGVnU3RyZWFtID0gbmV3IG1qcGVnLk1KcGVnU3RyZWFtKHRoaXMub3B0cy5tanBlZ1NjcmVlbnNob3RVcmwpO1xuICAgICAgICBhd2FpdCB0aGlzLm1qcGVnU3RyZWFtLnN0YXJ0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW3Nlc3Npb25JZCwgY2Fwc107XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5sb2cuZXJyb3IoSlNPTi5zdHJpbmdpZnkoZSkpO1xuICAgICAgYXdhaXQgdGhpcy5kZWxldGVTZXNzaW9uKCk7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkZWZhdWx0IFVSTCBmb3IgU2FmYXJpIGJyb3dzZXJcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGRlZmF1bHQgVVJMXG4gICAqL1xuICBnZXREZWZhdWx0VXJsICgpIHtcbiAgICAvLyBTZXR0aW5nIHRoaXMgdG8gc29tZSBleHRlcm5hbCBVUkwgc2xvd3MgZG93biBBcHBpdW0gc3RhcnR1cFxuICAgIHJldHVybiB0aGlzLmlzUmVhbERldmljZSgpXG4gICAgICA/IGBodHRwOi8vMTI3LjAuMC4xOiR7dGhpcy5vcHRzLndkYUxvY2FsUG9ydCB8fCA4MTAwfS9oZWFsdGhgXG4gICAgICA6IGBodHRwOi8vJHtcbiAgICAgICAgdGhpcy5vcHRzLmFkZHJlc3MuaW5jbHVkZXMoJzonKSA/IGBbJHt0aGlzLm9wdHMuYWRkcmVzc31dYCA6IHRoaXMub3B0cy5hZGRyZXNzXG4gICAgICB9OiR7dGhpcy5vcHRzLnBvcnR9L3dlbGNvbWVgO1xuICB9XG5cbiAgYXN5bmMgc3RhcnQgKCkge1xuICAgIHRoaXMub3B0cy5ub1Jlc2V0ID0gISF0aGlzLm9wdHMubm9SZXNldDtcbiAgICB0aGlzLm9wdHMuZnVsbFJlc2V0ID0gISF0aGlzLm9wdHMuZnVsbFJlc2V0O1xuXG4gICAgYXdhaXQgcHJpbnRVc2VyKCk7XG5cbiAgICB0aGlzLm9wdHMuaW9zU2RrVmVyc2lvbiA9IG51bGw7IC8vIEZvciBXREEgYW5kIHhjb2RlYnVpbGRcbiAgICBjb25zdCB7ZGV2aWNlLCB1ZGlkLCByZWFsRGV2aWNlfSA9IGF3YWl0IHRoaXMuZGV0ZXJtaW5lRGV2aWNlKCk7XG4gICAgdGhpcy5sb2cuaW5mbyhgRGV0ZXJtaW5pbmcgZGV2aWNlIHRvIHJ1biB0ZXN0cyBvbjogdWRpZDogJyR7dWRpZH0nLCByZWFsIGRldmljZTogJHtyZWFsRGV2aWNlfWApO1xuICAgIHRoaXMub3B0cy5kZXZpY2UgPSBkZXZpY2U7XG4gICAgdGhpcy5vcHRzLnVkaWQgPSB1ZGlkO1xuICAgIHRoaXMub3B0cy5yZWFsRGV2aWNlID0gcmVhbERldmljZTtcblxuICAgIGlmICh0aGlzLm9wdHMuc2ltdWxhdG9yRGV2aWNlc1NldFBhdGgpIHtcbiAgICAgIGlmIChyZWFsRGV2aWNlKSB7XG4gICAgICAgIHRoaXMubG9nLmluZm8oYFRoZSAnc2ltdWxhdG9yRGV2aWNlc1NldFBhdGgnIGNhcGFiaWxpdHkgaXMgb25seSBzdXBwb3J0ZWQgZm9yIFNpbXVsYXRvciBkZXZpY2VzYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxvZy5pbmZvKGBTZXR0aW5nIHNpbXVsYXRvciBkZXZpY2VzIHNldCBwYXRoIHRvICcke3RoaXMub3B0cy5zaW11bGF0b3JEZXZpY2VzU2V0UGF0aH0nYCk7XG4gICAgICAgIHRoaXMub3B0cy5kZXZpY2UuZGV2aWNlc1NldFBhdGggPSB0aGlzLm9wdHMuc2ltdWxhdG9yRGV2aWNlc1NldFBhdGg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gYXQgdGhpcyBwb2ludCBpZiB0aGVyZSBpcyBubyBwbGF0Zm9ybVZlcnNpb24sIGdldCBpdCBmcm9tIHRoZSBkZXZpY2VcbiAgICBpZiAoIXRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24gJiYgdGhpcy5vcHRzLmRldmljZSkge1xuICAgICAgdGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbiA9IGF3YWl0IHRoaXMub3B0cy5kZXZpY2UuZ2V0UGxhdGZvcm1WZXJzaW9uKCk7XG4gICAgICB0aGlzLmxvZy5pbmZvKGBObyBwbGF0Zm9ybVZlcnNpb24gc3BlY2lmaWVkLiBVc2luZyBkZXZpY2UgdmVyc2lvbjogJyR7dGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbn0nYCk7XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFsaXplZFZlcnNpb24gPSBub3JtYWxpemVQbGF0Zm9ybVZlcnNpb24odGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbik7XG4gICAgaWYgKHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24gIT09IG5vcm1hbGl6ZWRWZXJzaW9uKSB7XG4gICAgICB0aGlzLmxvZy5pbmZvKGBOb3JtYWxpemVkIHBsYXRmb3JtVmVyc2lvbiBjYXBhYmlsaXR5IHZhbHVlICcke3RoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb259JyB0byAnJHtub3JtYWxpemVkVmVyc2lvbn0nYCk7XG4gICAgICB0aGlzLm9wdHMucGxhdGZvcm1WZXJzaW9uID0gbm9ybWFsaXplZFZlcnNpb247XG4gICAgfVxuICAgIGlmICh1dGlsLmNvbXBhcmVWZXJzaW9ucyh0aGlzLm9wdHMucGxhdGZvcm1WZXJzaW9uLCAnPCcsICc5LjMnKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBQbGF0Zm9ybSB2ZXJzaW9uIG11c3QgYmUgOS4zIG9yIGFib3ZlLiAnJHt0aGlzLm9wdHMucGxhdGZvcm1WZXJzaW9ufScgaXMgbm90IHN1cHBvcnRlZC5gKTtcbiAgICB9XG5cbiAgICBpZiAoXy5pc0VtcHR5KHRoaXMueGNvZGVWZXJzaW9uKSAmJiAoIXRoaXMub3B0cy53ZWJEcml2ZXJBZ2VudFVybCB8fCAhdGhpcy5vcHRzLnJlYWxEZXZpY2UpKSB7XG4gICAgICAvLyBubyBgd2ViRHJpdmVyQWdlbnRVcmxgLCBvciBvbiBhIHNpbXVsYXRvciwgc28gd2UgbmVlZCBhbiBYY29kZSB2ZXJzaW9uXG4gICAgICB0aGlzLnhjb2RlVmVyc2lvbiA9IGF3YWl0IGdldEFuZENoZWNrWGNvZGVWZXJzaW9uKCk7XG4gICAgfVxuICAgIHRoaXMubG9nRXZlbnQoJ3hjb2RlRGV0YWlsc1JldHJpZXZlZCcpO1xuXG4gICAgaWYgKF8udG9Mb3dlcih0aGlzLm9wdHMuYnJvd3Nlck5hbWUpID09PSAnc2FmYXJpJykge1xuICAgICAgdGhpcy5sb2cuaW5mbygnU2FmYXJpIHRlc3QgcmVxdWVzdGVkJyk7XG4gICAgICB0aGlzLnNhZmFyaSA9IHRydWU7XG4gICAgICB0aGlzLm9wdHMuYXBwID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5vcHRzLnByb2Nlc3NBcmd1bWVudHMgPSB0aGlzLm9wdHMucHJvY2Vzc0FyZ3VtZW50cyB8fCB7fTtcbiAgICAgIHRoaXMub3B0cy5idW5kbGVJZCA9IFNBRkFSSV9CVU5ETEVfSUQ7XG4gICAgICB0aGlzLl9jdXJyZW50VXJsID0gdGhpcy5vcHRzLnNhZmFyaUluaXRpYWxVcmwgfHwgdGhpcy5nZXREZWZhdWx0VXJsKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLm9wdHMuYXBwIHx8IHRoaXMub3B0cy5idW5kbGVJZCkge1xuICAgICAgYXdhaXQgdGhpcy5jb25maWd1cmVBcHAoKTtcbiAgICB9XG4gICAgdGhpcy5sb2dFdmVudCgnYXBwQ29uZmlndXJlZCcpO1xuXG4gICAgLy8gZmFpbCB2ZXJ5IGVhcmx5IGlmIHRoZSBhcHAgZG9lc24ndCBhY3R1YWxseSBleGlzdFxuICAgIC8vIG9yIGlmIGJ1bmRsZSBpZCBkb2Vzbid0IHBvaW50IHRvIGFuIGluc3RhbGxlZCBhcHBcbiAgICBpZiAodGhpcy5vcHRzLmFwcCkge1xuICAgICAgYXdhaXQgY2hlY2tBcHBQcmVzZW50KHRoaXMub3B0cy5hcHApO1xuXG4gICAgICBpZiAoIXRoaXMub3B0cy5idW5kbGVJZCkge1xuICAgICAgICB0aGlzLm9wdHMuYnVuZGxlSWQgPSBhd2FpdCBleHRyYWN0QnVuZGxlSWQuYmluZCh0aGlzKSh0aGlzLm9wdHMuYXBwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnJ1blJlc2V0KCk7XG5cbiAgICB0aGlzLndkYSA9IG5ldyBXZWJEcml2ZXJBZ2VudCh0aGlzLnhjb2RlVmVyc2lvbiwgdGhpcy5vcHRzLCB0aGlzLmxvZyk7XG4gICAgLy8gRGVyaXZlZCBkYXRhIHBhdGggcmV0cmlldmFsIGlzIGFuIGV4cGVuc2l2ZSBvcGVyYXRpb25cbiAgICAvLyBXZSBjb3VsZCBzdGFydCB0aGF0IG5vdyBpbiBiYWNrZ3JvdW5kIGFuZCBnZXQgdGhlIGNhY2hlZCByZXN1bHRcbiAgICAvLyB3aGVuZXZlciBpdCBpcyBuZWVkZWRcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJvbWlzZS9wcmVmZXItYXdhaXQtdG8tdGhlblxuICAgIHRoaXMud2RhLnJldHJpZXZlRGVyaXZlZERhdGFQYXRoKCkuY2F0Y2goKGUpID0+IHRoaXMubG9nLmRlYnVnKGUpKTtcblxuICAgIGNvbnN0IG1lbW9pemVkTG9nSW5mbyA9IF8ubWVtb2l6ZSgoKSA9PiB7XG4gICAgICB0aGlzLmxvZy5pbmZvKFwiJ3NraXBMb2dDYXB0dXJlJyBpcyBzZXQuIFNraXBwaW5nIHN0YXJ0aW5nIGxvZ3Mgc3VjaCBhcyBjcmFzaCwgc3lzdGVtLCBzYWZhcmkgY29uc29sZSBhbmQgc2FmYXJpIG5ldHdvcmsuXCIpO1xuICAgIH0pO1xuICAgIGNvbnN0IHN0YXJ0TG9nQ2FwdHVyZSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGlmICh0aGlzLm9wdHMuc2tpcExvZ0NhcHR1cmUpIHtcbiAgICAgICAgbWVtb2l6ZWRMb2dJbmZvKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zdGFydExvZ0NhcHR1cmUoKTtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgdGhpcy5sb2dFdmVudCgnbG9nQ2FwdHVyZVN0YXJ0ZWQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBjb25zdCBpc0xvZ0NhcHR1cmVTdGFydGVkID0gYXdhaXQgc3RhcnRMb2dDYXB0dXJlKCk7XG5cbiAgICB0aGlzLmxvZy5pbmZvKGBTZXR0aW5nIHVwICR7dGhpcy5pc1JlYWxEZXZpY2UoKSA/ICdyZWFsIGRldmljZScgOiAnc2ltdWxhdG9yJ31gKTtcblxuICAgIGlmICh0aGlzLmlzU2ltdWxhdG9yKCkpIHtcbiAgICAgIGlmICh0aGlzLm9wdHMuc2h1dGRvd25PdGhlclNpbXVsYXRvcnMpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVGZWF0dXJlRW5hYmxlZChTSFVURE9XTl9PVEhFUl9GRUFUX05BTUUpO1xuICAgICAgICBhd2FpdCBzaHV0ZG93bk90aGVyU2ltdWxhdG9ycyh0aGlzLm9wdHMuZGV2aWNlKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5zdGFydFNpbSgpO1xuXG4gICAgICBpZiAodGhpcy5vcHRzLmN1c3RvbVNTTENlcnQpIHtcbiAgICAgICAgLy8gU2ltdWxhdG9yIG11c3QgYmUgYm9vdGVkIGluIG9yZGVyIHRvIGNhbGwgdGhpcyBoZWxwZXJcbiAgICAgICAgYXdhaXQgdGhpcy5vcHRzLmRldmljZS5hZGRDZXJ0aWZpY2F0ZSh0aGlzLm9wdHMuY3VzdG9tU1NMQ2VydCk7XG4gICAgICAgIHRoaXMubG9nRXZlbnQoJ2N1c3RvbUNlcnRJbnN0YWxsZWQnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGF3YWl0IHNldFNhZmFyaVByZWZzKHRoaXMub3B0cy5kZXZpY2UsIHRoaXMub3B0cykpIHtcbiAgICAgICAgdGhpcy5sb2cuZGVidWcoJ1NhZmFyaSBwcmVmZXJlbmNlcyBoYXZlIGJlZW4gdXBkYXRlZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYXdhaXQgc2V0TG9jYWxpemF0aW9uUHJlZnModGhpcy5vcHRzLmRldmljZSwgdGhpcy5vcHRzKSkge1xuICAgICAgICB0aGlzLmxvZy5kZWJ1ZygnTG9jYWxpemF0aW9uIHByZWZlcmVuY2VzIGhhdmUgYmVlbiB1cGRhdGVkJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChfLmlzQm9vbGVhbih0aGlzLm9wdHMucmVkdWNlTW90aW9uKSkge1xuICAgICAgICB0aGlzLmxvZy5pbmZvKGBTZXR0aW5nIHJlZHVjZU1vdGlvbiB0byAke3RoaXMub3B0cy5yZWR1Y2VNb3Rpb259YCk7XG4gICAgICAgIGF3YWl0IHRoaXMub3B0cy5kZXZpY2Uuc2V0UmVkdWNlTW90aW9uKHRoaXMub3B0cy5yZWR1Y2VNb3Rpb24pO1xuICAgICAgfVxuXG4gICAgICBpZiAoXy5pc0Jvb2xlYW4odGhpcy5vcHRzLnJlZHVjZVRyYW5zcGFyZW5jeSkpIHtcbiAgICAgICAgdGhpcy5sb2cuaW5mbyhgU2V0dGluZyByZWR1Y2VUcmFuc3BhcmVuY3kgdG8gJHt0aGlzLm9wdHMucmVkdWNlVHJhbnNwYXJlbmN5fWApO1xuICAgICAgICBhd2FpdCB0aGlzLm9wdHMuZGV2aWNlLnNldFJlZHVjZVRyYW5zcGFyZW5jeSh0aGlzLm9wdHMucmVkdWNlVHJhbnNwYXJlbmN5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0cy5sYXVuY2hXaXRoSURCKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgaWRiID0gbmV3IElEQih7dWRpZH0pO1xuICAgICAgICAgIGF3YWl0IGlkYi5jb25uZWN0KCk7XG4gICAgICAgICAgdGhpcy5vcHRzLmRldmljZS5pZGIgPSBpZGI7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICB0aGlzLmxvZy5kZWJ1ZyhlLnN0YWNrKTtcbiAgICAgICAgICB0aGlzLmxvZy53YXJuKGBpZGIgd2lsbCBub3QgYmUgdXNlZCBmb3IgU2ltdWxhdG9yIGludGVyYWN0aW9uLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2dFdmVudCgnc2ltU3RhcnRlZCcpO1xuICAgICAgaWYgKCFpc0xvZ0NhcHR1cmVTdGFydGVkKSB7XG4gICAgICAgIC8vIFJldHJ5IGxvZyBjYXB0dXJlIGlmIFNpbXVsYXRvciB3YXMgbm90IHJ1bm5pbmcgYmVmb3JlXG4gICAgICAgIGF3YWl0IHN0YXJ0TG9nQ2FwdHVyZSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5vcHRzLmN1c3RvbVNTTENlcnQpIHtcbiAgICAgIGF3YWl0IG5ldyBQeWlkZXZpY2UodWRpZCkuaW5zdGFsbFByb2ZpbGUoe3BheWxvYWQ6IHRoaXMub3B0cy5jdXN0b21TU0xDZXJ0fSk7XG4gICAgICB0aGlzLmxvZ0V2ZW50KCdjdXN0b21DZXJ0SW5zdGFsbGVkJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0cy5hcHApIHtcbiAgICAgIGF3YWl0IHRoaXMuaW5zdGFsbEFVVCgpO1xuICAgICAgdGhpcy5sb2dFdmVudCgnYXBwSW5zdGFsbGVkJyk7XG4gICAgfVxuXG4gICAgLy8gaWYgd2Ugb25seSBoYXZlIGJ1bmRsZSBpZGVudGlmaWVyIGFuZCBubyBhcHAsIGZhaWwgaWYgaXQgaXMgbm90IGFscmVhZHkgaW5zdGFsbGVkXG4gICAgaWYgKCF0aGlzLm9wdHMuYXBwICYmIHRoaXMub3B0cy5idW5kbGVJZCAmJiAhdGhpcy5pc1NhZmFyaSgpXG4gICAgICAgICYmICFhd2FpdCB0aGlzLm9wdHMuZGV2aWNlLmlzQXBwSW5zdGFsbGVkKHRoaXMub3B0cy5idW5kbGVJZCkpIHtcbiAgICAgIHRoaXMubG9nLmVycm9yQW5kVGhyb3coYEFwcCB3aXRoIGJ1bmRsZSBpZGVudGlmaWVyICcke3RoaXMub3B0cy5idW5kbGVJZH0nIHVua25vd25gKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc1NpbXVsYXRvcigpKSB7XG4gICAgICBpZiAodGhpcy5vcHRzLnBlcm1pc3Npb25zKSB7XG4gICAgICAgIHRoaXMubG9nLmRlYnVnKCdTZXR0aW5nIHRoZSByZXF1ZXN0ZWQgcGVybWlzc2lvbnMgYmVmb3JlIFdEQSBpcyBzdGFydGVkJyk7XG4gICAgICAgIGZvciAoY29uc3QgW2J1bmRsZUlkLCBwZXJtaXNzaW9uc01hcHBpbmddIG9mIF8udG9QYWlycyhKU09OLnBhcnNlKHRoaXMub3B0cy5wZXJtaXNzaW9ucykpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5vcHRzLmRldmljZS5zZXRQZXJtaXNzaW9ucyhidW5kbGVJZCwgcGVybWlzc2lvbnNNYXBwaW5nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUT0RPOiBEZXByZWNhdGUgYW5kIHJlbW92ZSB0aGlzIGJsb2NrIHRvZ2V0aGVyIHdpdGggY2FsZW5kYXJBY2Nlc3NBdXRob3JpemVkIGNhcGFiaWxpdHlcbiAgICAgIGlmIChfLmlzQm9vbGVhbih0aGlzLm9wdHMuY2FsZW5kYXJBY2Nlc3NBdXRob3JpemVkKSkge1xuICAgICAgICB0aGlzLmxvZy53YXJuKGBUaGUgJ2NhbGVuZGFyQWNjZXNzQXV0aG9yaXplZCcgY2FwYWJpbGl0eSBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgc29vbi4gYCArXG4gICAgICAgICAgYENvbnNpZGVyIHVzaW5nICdwZXJtaXNzaW9ucycgb25lIGluc3RlYWQgd2l0aCAnY2FsZW5kYXInIGtleWApO1xuICAgICAgICBjb25zdCBtZXRob2ROYW1lID0gYCR7dGhpcy5vcHRzLmNhbGVuZGFyQWNjZXNzQXV0aG9yaXplZCA/ICdlbmFibGUnIDogJ2Rpc2FibGUnIH1DYWxlbmRhckFjY2Vzc2A7XG4gICAgICAgIGF3YWl0IHRoaXMub3B0cy5kZXZpY2VbbWV0aG9kTmFtZV0odGhpcy5vcHRzLmJ1bmRsZUlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnN0YXJ0V2RhKHRoaXMub3B0cy5zZXNzaW9uSWQsIHJlYWxEZXZpY2UpO1xuXG4gICAgaWYgKHRoaXMub3B0cy5vcmllbnRhdGlvbikge1xuICAgICAgYXdhaXQgdGhpcy5zZXRJbml0aWFsT3JpZW50YXRpb24odGhpcy5vcHRzLm9yaWVudGF0aW9uKTtcbiAgICAgIHRoaXMubG9nRXZlbnQoJ29yaWVudGF0aW9uU2V0Jyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNTYWZhcmkoKSB8fCB0aGlzLm9wdHMuYXV0b1dlYnZpZXcpIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVSZWNlbnRXZWJ2aWV3KCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmlzU2FmYXJpKCkpIHtcbiAgICAgIGlmICghKHRoaXMub3B0cy5zYWZhcmlJbml0aWFsVXJsID09PSAnJ1xuICAgICAgICAgIHx8ICh0aGlzLm9wdHMubm9SZXNldCAmJiBfLmlzTmlsKHRoaXMub3B0cy5zYWZhcmlJbml0aWFsVXJsKSkpKSB7XG4gICAgICAgIHRoaXMubG9nLmluZm8oYEFib3V0IHRvIHNldCB0aGUgaW5pdGlhbCBTYWZhcmkgVVJMIHRvICcke3RoaXMuZ2V0Q3VycmVudFVybCgpfScuYCArXG4gICAgICAgICAgYFVzZSAnc2FmYXJpSW5pdGlhbFVybCcgY2FwYWJpbGl0eSBpbiBvcmRlciB0byBjdXN0b21pemUgaXRgKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRVcmwodGhpcy5nZXRDdXJyZW50VXJsKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRDdXJyZW50VXJsKGF3YWl0IHRoaXMuZ2V0VXJsKCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCBXZWJEcml2ZXJBZ2VudFJ1bm5lclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2Vzc2lvbklkIC0gVGhlIGlkIG9mIHRoZSB0YXJnZXQgc2Vzc2lvbiB0byBsYXVuY2ggV0RBIHdpdGguXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVhbERldmljZSAtIEVxdWFscyB0byB0cnVlIGlmIHRoZSB0ZXN0IHRhcmdldCBkZXZpY2UgaXMgYSByZWFsIGRldmljZS5cbiAgICovXG4gIGFzeW5jIHN0YXJ0V2RhIChzZXNzaW9uSWQsIHJlYWxEZXZpY2UpIHtcbiAgICAvLyBEb24ndCBjbGVhbnVwIHRoZSBwcm9jZXNzZXMgaWYgd2ViRHJpdmVyQWdlbnRVcmwgaXMgc2V0XG4gICAgaWYgKCF1dGlsLmhhc1ZhbHVlKHRoaXMud2RhLndlYkRyaXZlckFnZW50VXJsKSkge1xuICAgICAgYXdhaXQgdGhpcy53ZGEuY2xlYW51cE9ic29sZXRlUHJvY2Vzc2VzKCk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlUG9ydEZvcndhcmRpbmcgPSB0aGlzLmlzUmVhbERldmljZSgpXG4gICAgICAmJiAhdGhpcy53ZGEud2ViRHJpdmVyQWdlbnRVcmxcbiAgICAgICYmIGlzTG9jYWxIb3N0KHRoaXMud2RhLndkYUJhc2VVcmwpO1xuICAgIGF3YWl0IERFVklDRV9DT05ORUNUSU9OU19GQUNUT1JZLnJlcXVlc3RDb25uZWN0aW9uKHRoaXMub3B0cy51ZGlkLCB0aGlzLndkYS51cmwucG9ydCwge1xuICAgICAgZGV2aWNlUG9ydDogdXNlUG9ydEZvcndhcmRpbmcgPyB0aGlzLndkYS53ZGFSZW1vdGVQb3J0IDogbnVsbCxcbiAgICAgIHVzZVBvcnRGb3J3YXJkaW5nLFxuICAgIH0pO1xuXG4gICAgLy8gTGV0IG11bHRpcGxlIFdEQSBiaW5hcmllcyB3aXRoIGRpZmZlcmVudCBkZXJpdmVkIGRhdGEgZm9sZGVycyBiZSBidWlsdCBpbiBwYXJhbGxlbFxuICAgIC8vIENvbmN1cnJlbnQgV0RBIGJ1aWxkcyBmcm9tIHRoZSBzYW1lIHNvdXJjZSB3aWxsIGNhdXNlIHhjb2RlYnVpbGQgc3luY2hyb25pemF0aW9uIGVycm9yc1xuICAgIGxldCBzeW5jaHJvbml6YXRpb25LZXkgPSBYQ1VJVGVzdERyaXZlci5uYW1lO1xuICAgIGlmICh0aGlzLm9wdHMudXNlWGN0ZXN0cnVuRmlsZSB8fCAhKGF3YWl0IHRoaXMud2RhLmlzU291cmNlRnJlc2goKSkpIHtcbiAgICAgIC8vIEZpcnN0LXRpbWUgY29tcGlsYXRpb24gaXMgYW4gZXhwZW5zaXZlIG9wZXJhdGlvbiwgd2hpY2ggaXMgZG9uZSBmYXN0ZXIgaWYgZXhlY3V0ZWRcbiAgICAgIC8vIHNlcXVlbnRpYWxseS4gWGNvZGVidWlsZCBzcHJlYWRzIHRoZSBsb2FkIGNhdXNlZCBieSB0aGUgY2xhbmcgY29tcGlsZXIgdG8gYWxsIGF2YWlsYWJsZSBDUFUgY29yZXNcbiAgICAgIGNvbnN0IGRlcml2ZWREYXRhUGF0aCA9IGF3YWl0IHRoaXMud2RhLnJldHJpZXZlRGVyaXZlZERhdGFQYXRoKCk7XG4gICAgICBpZiAoZGVyaXZlZERhdGFQYXRoKSB7XG4gICAgICAgIHN5bmNocm9uaXphdGlvbktleSA9IHBhdGgubm9ybWFsaXplKGRlcml2ZWREYXRhUGF0aCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubG9nLmRlYnVnKGBTdGFydGluZyBXZWJEcml2ZXJBZ2VudCBpbml0aWFsaXphdGlvbiB3aXRoIHRoZSBzeW5jaHJvbml6YXRpb24ga2V5ICcke3N5bmNocm9uaXphdGlvbktleX0nYCk7XG4gICAgaWYgKFNIQVJFRF9SRVNPVVJDRVNfR1VBUkQuaXNCdXN5KCkgJiYgIXRoaXMub3B0cy5kZXJpdmVkRGF0YVBhdGggJiYgIXRoaXMub3B0cy5ib290c3RyYXBQYXRoKSB7XG4gICAgICB0aGlzLmxvZy5kZWJ1ZyhgQ29uc2lkZXIgc2V0dGluZyBhIHVuaXF1ZSAnZGVyaXZlZERhdGFQYXRoJyBjYXBhYmlsaXR5IHZhbHVlIGZvciBlYWNoIHBhcmFsbGVsIGRyaXZlciBpbnN0YW5jZSBgICtcbiAgICAgICAgYHRvIGF2b2lkIGNvbmZsaWN0cyBhbmQgc3BlZWQgdXAgdGhlIGJ1aWxkaW5nIHByb2Nlc3NgKTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IFNIQVJFRF9SRVNPVVJDRVNfR1VBUkQuYWNxdWlyZShzeW5jaHJvbml6YXRpb25LZXksIGFzeW5jICgpID0+IHtcbiAgICAgIGlmICh0aGlzLm9wdHMudXNlTmV3V0RBKSB7XG4gICAgICAgIHRoaXMubG9nLmRlYnVnKGBDYXBhYmlsaXR5ICd1c2VOZXdXREEnIHNldCB0byB0cnVlLCBzbyB1bmluc3RhbGxpbmcgV0RBIGJlZm9yZSBwcm9jZWVkaW5nYCk7XG4gICAgICAgIGF3YWl0IHRoaXMud2RhLnF1aXRBbmRVbmluc3RhbGwoKTtcbiAgICAgICAgdGhpcy5sb2dFdmVudCgnd2RhVW5pbnN0YWxsZWQnKTtcbiAgICAgIH0gZWxzZSBpZiAoIXV0aWwuaGFzVmFsdWUodGhpcy53ZGEud2ViRHJpdmVyQWdlbnRVcmwpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMud2RhLnNldHVwQ2FjaGluZygpO1xuICAgICAgfVxuXG4gICAgICAvLyBsb2NhbCBoZWxwZXIgZm9yIHRoZSB0d28gcGxhY2VzIHdlIG5lZWQgdG8gdW5pbnN0YWxsIHdkYSBhbmQgcmUtc3RhcnQgaXRcbiAgICAgIGNvbnN0IHF1aXRBbmRVbmluc3RhbGwgPSBhc3luYyAobXNnKSA9PiB7XG4gICAgICAgIHRoaXMubG9nLmRlYnVnKG1zZyk7XG4gICAgICAgIGlmICh0aGlzLm9wdHMud2ViRHJpdmVyQWdlbnRVcmwpIHtcbiAgICAgICAgICB0aGlzLmxvZy5kZWJ1ZygnTm90IHF1aXR0aW5nL3VuaW5zdGFsbGluZyBXZWJEcml2ZXJBZ2VudCBzaW5jZSB3ZWJEcml2ZXJBZ2VudFVybCBjYXBhYmlsaXR5IGlzIHByb3ZpZGVkJyk7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2cud2FybignUXVpdHRpbmcgYW5kIHVuaW5zdGFsbGluZyBXZWJEcml2ZXJBZ2VudCcpO1xuICAgICAgICBhd2FpdCB0aGlzLndkYS5xdWl0QW5kVW5pbnN0YWxsKCk7XG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICB9O1xuXG4gICAgICAvLyBVc2VkIGluIHRoZSBmb2xsb3dpbmcgV0RBIGJ1aWxkXG4gICAgICBpZiAodGhpcy5vcHRzLnJlc3VsdEJ1bmRsZVBhdGgpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVGZWF0dXJlRW5hYmxlZChDVVNUT01JWkVfUkVTVUxUX0JVTkRQRV9QQVRIKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RhcnR1cFJldHJpZXMgPSB0aGlzLm9wdHMud2RhU3RhcnR1cFJldHJpZXMgfHwgKHRoaXMuaXNSZWFsRGV2aWNlKCkgPyBXREFfUkVBTF9ERVZfU1RBUlRVUF9SRVRSSUVTIDogV0RBX1NJTV9TVEFSVFVQX1JFVFJJRVMpO1xuICAgICAgY29uc3Qgc3RhcnR1cFJldHJ5SW50ZXJ2YWwgPSB0aGlzLm9wdHMud2RhU3RhcnR1cFJldHJ5SW50ZXJ2YWwgfHwgV0RBX1NUQVJUVVBfUkVUUllfSU5URVJWQUw7XG4gICAgICB0aGlzLmxvZy5kZWJ1ZyhgVHJ5aW5nIHRvIHN0YXJ0IFdlYkRyaXZlckFnZW50ICR7c3RhcnR1cFJldHJpZXN9IHRpbWVzIHdpdGggJHtzdGFydHVwUmV0cnlJbnRlcnZhbH1tcyBpbnRlcnZhbGApO1xuICAgICAgaWYgKCF1dGlsLmhhc1ZhbHVlKHRoaXMub3B0cy53ZGFTdGFydHVwUmV0cmllcykgJiYgIXV0aWwuaGFzVmFsdWUodGhpcy5vcHRzLndkYVN0YXJ0dXBSZXRyeUludGVydmFsKSkge1xuICAgICAgICB0aGlzLmxvZy5kZWJ1ZyhgVGhlc2UgdmFsdWVzIGNhbiBiZSBjdXN0b21pemVkIGJ5IGNoYW5naW5nIHdkYVN0YXJ0dXBSZXRyaWVzL3dkYVN0YXJ0dXBSZXRyeUludGVydmFsIGNhcGFiaWxpdGllc2ApO1xuICAgICAgfVxuICAgICAgbGV0IHJldHJ5Q291bnQgPSAwO1xuICAgICAgYXdhaXQgcmV0cnlJbnRlcnZhbChzdGFydHVwUmV0cmllcywgc3RhcnR1cFJldHJ5SW50ZXJ2YWwsIGFzeW5jICgpID0+IHtcbiAgICAgICAgdGhpcy5sb2dFdmVudCgnd2RhU3RhcnRBdHRlbXB0ZWQnKTtcbiAgICAgICAgaWYgKHJldHJ5Q291bnQgPiAwKSB7XG4gICAgICAgICAgdGhpcy5sb2cuaW5mbyhgUmV0cnlpbmcgV0RBIHN0YXJ0dXAgKCR7cmV0cnlDb3VudCArIDF9IG9mICR7c3RhcnR1cFJldHJpZXN9KWApO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gb24geGNvZGUgMTAgaW5zdGFsbGQgd2lsbCBvZnRlbiB0cnkgdG8gYWNjZXNzIHRoZSBhcHAgZnJvbSBpdHMgc3RhZ2luZ1xuICAgICAgICAgIC8vIGRpcmVjdG9yeSBiZWZvcmUgZnVsbHkgbW92aW5nIGl0IHRoZXJlLCBhbmQgZmFpbC4gUmV0cnlpbmcgb25jZVxuICAgICAgICAgIC8vIGltbWVkaWF0ZWx5IGhlbHBzXG4gICAgICAgICAgY29uc3QgcmV0cmllcyA9IHRoaXMueGNvZGVWZXJzaW9uLm1ham9yID49IDEwID8gMiA6IDE7XG4gICAgICAgICAgdGhpcy5jYWNoZWRXZGFTdGF0dXMgPSBhd2FpdCByZXRyeShyZXRyaWVzLCB0aGlzLndkYS5sYXVuY2guYmluZCh0aGlzLndkYSksIHNlc3Npb25JZCwgcmVhbERldmljZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIHRoaXMubG9nRXZlbnQoJ3dkYVN0YXJ0RmFpbGVkJyk7XG4gICAgICAgICAgcmV0cnlDb3VudCsrO1xuICAgICAgICAgIGxldCBlcnJvck1zZyA9IGBVbmFibGUgdG8gbGF1bmNoIFdlYkRyaXZlckFnZW50IGJlY2F1c2Ugb2YgeGNvZGVidWlsZCBmYWlsdXJlOiAke2Vyci5tZXNzYWdlfWA7XG4gICAgICAgICAgaWYgKHRoaXMuaXNSZWFsRGV2aWNlKCkpIHtcbiAgICAgICAgICAgIGVycm9yTXNnICs9IGAuIE1ha2Ugc3VyZSB5b3UgZm9sbG93IHRoZSB0dXRvcmlhbCBhdCAke1dEQV9SRUFMX0RFVl9UVVRPUklBTF9VUkx9LiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBUcnkgdG8gcmVtb3ZlIHRoZSBXZWJEcml2ZXJBZ2VudFJ1bm5lciBhcHBsaWNhdGlvbiBmcm9tIHRoZSBkZXZpY2UgaWYgaXQgaXMgaW5zdGFsbGVkIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYGFuZCByZWJvb3QgdGhlIGRldmljZS5gO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhd2FpdCBxdWl0QW5kVW5pbnN0YWxsKGVycm9yTXNnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJveHlSZXFSZXMgPSB0aGlzLndkYS5wcm94eVJlcVJlcy5iaW5kKHRoaXMud2RhKTtcbiAgICAgICAgdGhpcy5qd3BQcm94eUFjdGl2ZSA9IHRydWU7XG5cbiAgICAgICAgbGV0IG9yaWdpbmFsU3RhY2t0cmFjZSA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgcmV0cnlJbnRlcnZhbCgxNSwgMTAwMCwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dFdmVudCgnd2RhU2Vzc2lvbkF0dGVtcHRlZCcpO1xuICAgICAgICAgICAgdGhpcy5sb2cuZGVidWcoJ1NlbmRpbmcgY3JlYXRlU2Vzc2lvbiBjb21tYW5kIHRvIFdEQScpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgdGhpcy5jYWNoZWRXZGFTdGF0dXMgPSB0aGlzLmNhY2hlZFdkYVN0YXR1cyB8fCBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZCgnL3N0YXR1cycsICdHRVQnKTtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zdGFydFdkYVNlc3Npb24odGhpcy5vcHRzLmJ1bmRsZUlkLCB0aGlzLm9wdHMucHJvY2Vzc0FyZ3VtZW50cyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgb3JpZ2luYWxTdGFja3RyYWNlID0gZXJyLnN0YWNrO1xuICAgICAgICAgICAgICB0aGlzLmxvZy5kZWJ1ZyhgRmFpbGVkIHRvIGNyZWF0ZSBXREEgc2Vzc2lvbiAoJHtlcnIubWVzc2FnZX0pLiBSZXRyeWluZy4uLmApO1xuICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5sb2dFdmVudCgnd2RhU2Vzc2lvblN0YXJ0ZWQnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKG9yaWdpbmFsU3RhY2t0cmFjZSkge1xuICAgICAgICAgICAgdGhpcy5sb2cuZGVidWcob3JpZ2luYWxTdGFja3RyYWNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IGVycm9yTXNnID0gYFVuYWJsZSB0byBzdGFydCBXZWJEcml2ZXJBZ2VudCBzZXNzaW9uIGJlY2F1c2Ugb2YgeGNvZGVidWlsZCBmYWlsdXJlOiAke2Vyci5tZXNzYWdlfWA7XG4gICAgICAgICAgaWYgKHRoaXMuaXNSZWFsRGV2aWNlKCkpIHtcbiAgICAgICAgICAgIGVycm9yTXNnICs9IGAgTWFrZSBzdXJlIHlvdSBmb2xsb3cgdGhlIHR1dG9yaWFsIGF0ICR7V0RBX1JFQUxfREVWX1RVVE9SSUFMX1VSTH0uIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYFRyeSB0byByZW1vdmUgdGhlIFdlYkRyaXZlckFnZW50UnVubmVyIGFwcGxpY2F0aW9uIGZyb20gdGhlIGRldmljZSBpZiBpdCBpcyBpbnN0YWxsZWQgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgYW5kIHJlYm9vdCB0aGUgZGV2aWNlLmA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IHF1aXRBbmRVbmluc3RhbGwoZXJyb3JNc2cpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMub3B0cy5jbGVhclN5c3RlbUZpbGVzICYmICF0aGlzLm9wdHMud2ViRHJpdmVyQWdlbnRVcmwpIHtcbiAgICAgICAgICBhd2FpdCBtYXJrU3lzdGVtRmlsZXNGb3JDbGVhbnVwKHRoaXMud2RhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdlIGV4cGVjdCBjZXJ0YWluIHNvY2tldCBlcnJvcnMgdW50aWwgdGhpcyBwb2ludCwgYnV0IG5vd1xuICAgICAgICAvLyBtYXJrIHRoaW5ncyBhcyBmdWxseSB3b3JraW5nXG4gICAgICAgIHRoaXMud2RhLmZ1bGx5U3RhcnRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMubG9nRXZlbnQoJ3dkYVN0YXJ0ZWQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgcnVuUmVzZXQgKG9wdHMgPSBudWxsKSB7XG4gICAgdGhpcy5sb2dFdmVudCgncmVzZXRTdGFydGVkJyk7XG4gICAgaWYgKHRoaXMuaXNSZWFsRGV2aWNlKCkpIHtcbiAgICAgIGF3YWl0IHJ1blJlYWxEZXZpY2VSZXNldCh0aGlzLm9wdHMuZGV2aWNlLCBvcHRzIHx8IHRoaXMub3B0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHJ1blNpbXVsYXRvclJlc2V0KHRoaXMub3B0cy5kZXZpY2UsIG9wdHMgfHwgdGhpcy5vcHRzKTtcbiAgICB9XG4gICAgdGhpcy5sb2dFdmVudCgncmVzZXRDb21wbGV0ZScpO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlU2Vzc2lvbiAoKSB7XG4gICAgYXdhaXQgcmVtb3ZlQWxsU2Vzc2lvbldlYlNvY2tldEhhbmRsZXJzKHRoaXMuc2VydmVyLCB0aGlzLnNlc3Npb25JZCk7XG5cbiAgICBmb3IgKGNvbnN0IHJlY29yZGVyIG9mIF8uY29tcGFjdChbXG4gICAgICB0aGlzLl9yZWNlbnRTY3JlZW5SZWNvcmRlciwgdGhpcy5fYXVkaW9SZWNvcmRlciwgdGhpcy5fdHJhZmZpY0NhcHR1cmVcbiAgICBdKSkge1xuICAgICAgYXdhaXQgcmVjb3JkZXIuaW50ZXJydXB0KHRydWUpO1xuICAgICAgYXdhaXQgcmVjb3JkZXIuY2xlYW51cCgpO1xuICAgIH1cblxuICAgIGlmICghXy5pc0VtcHR5KHRoaXMuX3BlcmZSZWNvcmRlcnMpKSB7XG4gICAgICBhd2FpdCBCLmFsbCh0aGlzLl9wZXJmUmVjb3JkZXJzLm1hcCgoeCkgPT4geC5zdG9wKHRydWUpKSk7XG4gICAgICB0aGlzLl9wZXJmUmVjb3JkZXJzID0gW107XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2NvbmRpdGlvbkluZHVjZXJTZXJ2aWNlKSB7XG4gICAgICB0aGlzLm1vYmlsZURpc2FibGVDb25kaXRpb25JbmR1Y2VyKCk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5zdG9wKCk7XG5cbiAgICBpZiAodGhpcy53ZGEgJiYgIXRoaXMub3B0cy53ZWJEcml2ZXJBZ2VudFVybCkge1xuICAgICAgaWYgKHRoaXMub3B0cy5jbGVhclN5c3RlbUZpbGVzKSB7XG4gICAgICAgIGxldCBzeW5jaHJvbml6YXRpb25LZXkgPSBYQ1VJVGVzdERyaXZlci5uYW1lO1xuICAgICAgICBjb25zdCBkZXJpdmVkRGF0YVBhdGggPSBhd2FpdCB0aGlzLndkYS5yZXRyaWV2ZURlcml2ZWREYXRhUGF0aCgpO1xuICAgICAgICBpZiAoZGVyaXZlZERhdGFQYXRoKSB7XG4gICAgICAgICAgc3luY2hyb25pemF0aW9uS2V5ID0gcGF0aC5ub3JtYWxpemUoZGVyaXZlZERhdGFQYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBTSEFSRURfUkVTT1VSQ0VTX0dVQVJELmFjcXVpcmUoc3luY2hyb25pemF0aW9uS2V5LCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgY2xlYXJTeXN0ZW1GaWxlcyh0aGlzLndkYSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2cuZGVidWcoJ05vdCBjbGVhcmluZyBsb2cgZmlsZXMuIFVzZSBgY2xlYXJTeXN0ZW1GaWxlc2AgY2FwYWJpbGl0eSB0byB0dXJuIG9uLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnJlbW90ZSkge1xuICAgICAgdGhpcy5sb2cuZGVidWcoJ0ZvdW5kIGEgcmVtb3RlIGRlYnVnZ2VyIHNlc3Npb24uIFJlbW92aW5nLi4uJyk7XG4gICAgICBhd2FpdCB0aGlzLnN0b3BSZW1vdGUoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRzLnJlc2V0T25TZXNzaW9uU3RhcnRPbmx5ID09PSBmYWxzZSkge1xuICAgICAgYXdhaXQgdGhpcy5ydW5SZXNldChPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdHMsIHtcbiAgICAgICAgZW5mb3JjZVNpbXVsYXRvclNodXRkb3duOiB0cnVlLFxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzU2ltdWxhdG9yKCkgJiYgIXRoaXMub3B0cy5ub1Jlc2V0ICYmICEhdGhpcy5vcHRzLmRldmljZSkge1xuICAgICAgaWYgKHRoaXMubGlmZWN5Y2xlRGF0YS5jcmVhdGVTaW0pIHtcbiAgICAgICAgdGhpcy5sb2cuZGVidWcoYERlbGV0aW5nIHNpbXVsYXRvciBjcmVhdGVkIGZvciB0aGlzIHJ1biAodWRpZDogJyR7dGhpcy5vcHRzLnVkaWR9JylgKTtcbiAgICAgICAgYXdhaXQgc2h1dGRvd25TaW11bGF0b3IodGhpcy5vcHRzLmRldmljZSk7XG4gICAgICAgIGF3YWl0IHRoaXMub3B0cy5kZXZpY2UuZGVsZXRlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2hvdWxkUmVzZXRMb2NhdGlvblNlcnZpdmNlID0gdGhpcy5pc1JlYWxEZXZpY2UoKSAmJiAhIXRoaXMub3B0cy5yZXNldExvY2F0aW9uU2VydmljZTtcbiAgICBpZiAoc2hvdWxkUmVzZXRMb2NhdGlvblNlcnZpdmNlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLm1vYmlsZVJlc2V0TG9jYXRpb25TZXJ2aWNlKCk7XG4gICAgICB9IGNhdGNoIChpZ25vcmUpIHsgLyogSWdub3JlIHRoaXMgZXJyb3Igc2luY2UgbW9iaWxlUmVzZXRMb2NhdGlvblNlcnZpY2UgYWxyZWFkeSBsb2dnZWQgdGhlIGVycm9yICovIH1cbiAgICB9XG5cbiAgICBpZiAoIV8uaXNFbXB0eSh0aGlzLmxvZ3MpKSB7XG4gICAgICBhd2FpdCB0aGlzLmxvZ3Muc3lzbG9nLnN0b3BDYXB0dXJlKCk7XG4gICAgICB0aGlzLmxvZ3MgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5tanBlZ1N0cmVhbSkge1xuICAgICAgdGhpcy5sb2cuaW5mbygnQ2xvc2luZyBNSlBFRyBzdHJlYW0nKTtcbiAgICAgIHRoaXMubWpwZWdTdHJlYW0uc3RvcCgpO1xuICAgIH1cblxuICAgIHRoaXMucmVzZXRJb3MoKTtcblxuICAgIGF3YWl0IHN1cGVyLmRlbGV0ZVNlc3Npb24oKTtcbiAgfVxuXG4gIGFzeW5jIHN0b3AgKCkge1xuICAgIHRoaXMuandwUHJveHlBY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLnByb3h5UmVxUmVzID0gbnVsbDtcblxuXG4gICAgaWYgKHRoaXMud2RhICYmIHRoaXMud2RhLmZ1bGx5U3RhcnRlZCkge1xuICAgICAgaWYgKHRoaXMud2RhLmp3cHJveHkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3Nlc3Npb24vJHt0aGlzLnNlc3Npb25JZH1gLCAnREVMRVRFJyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIC8vIGFuIGVycm9yIGhlcmUgc2hvdWxkIG5vdCBzaG9ydC1jaXJjdWl0IHRoZSByZXN0IG9mIGNsZWFuIHVwXG4gICAgICAgICAgdGhpcy5sb2cuZGVidWcoYFVuYWJsZSB0byBERUxFVEUgc2Vzc2lvbiBvbiBXREE6ICcke2Vyci5tZXNzYWdlfScuIENvbnRpbnVpbmcgc2h1dGRvd24uYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy53ZGEud2ViRHJpdmVyQWdlbnRVcmwgJiYgdGhpcy5vcHRzLnVzZU5ld1dEQSkge1xuICAgICAgICBhd2FpdCB0aGlzLndkYS5xdWl0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgREVWSUNFX0NPTk5FQ1RJT05TX0ZBQ1RPUlkucmVsZWFzZUNvbm5lY3Rpb24odGhpcy5vcHRzLnVkaWQpO1xuICB9XG5cbiAgYXN5bmMgZXhlY3V0ZUNvbW1hbmQgKGNtZCwgLi4uYXJncykge1xuICAgIHRoaXMubG9nLmRlYnVnKGBFeGVjdXRpbmcgY29tbWFuZCAnJHtjbWR9J2ApO1xuXG4gICAgaWYgKGNtZCA9PT0gJ3JlY2VpdmVBc3luY1Jlc3BvbnNlJykge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmVjZWl2ZUFzeW5jUmVzcG9uc2UoLi4uYXJncyk7XG4gICAgfVxuICAgIC8vIFRPRE86IG9uY2UgdGhpcyBmaXggZ2V0cyBpbnRvIGJhc2UgZHJpdmVyIHJlbW92ZSBmcm9tIGhlcmVcbiAgICBpZiAoY21kID09PSAnZ2V0U3RhdHVzJykge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0U3RhdHVzKCk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBzdXBlci5leGVjdXRlQ29tbWFuZChjbWQsIC4uLmFyZ3MpO1xuICB9XG5cbiAgYXN5bmMgY29uZmlndXJlQXBwICgpIHtcbiAgICBmdW5jdGlvbiBhcHBJc1BhY2thZ2VPckJ1bmRsZSAoYXBwKSB7XG4gICAgICByZXR1cm4gKC9eKFthLXpBLVowLTlcXC1fXStcXC5bYS16QS1aMC05XFwtX10rKSskLykudGVzdChhcHApO1xuICAgIH1cblxuICAgIC8vIHRoZSBhcHAgbmFtZSBpcyBhIGJ1bmRsZUlkIGFzc2lnbiBpdCB0byB0aGUgYnVuZGxlSWQgcHJvcGVydHlcbiAgICBpZiAoIXRoaXMub3B0cy5idW5kbGVJZCAmJiBhcHBJc1BhY2thZ2VPckJ1bmRsZSh0aGlzLm9wdHMuYXBwKSkge1xuICAgICAgdGhpcy5vcHRzLmJ1bmRsZUlkID0gdGhpcy5vcHRzLmFwcDtcbiAgICAgIHRoaXMub3B0cy5hcHAgPSAnJztcbiAgICB9XG4gICAgLy8gd2UgaGF2ZSBhIGJ1bmRsZSBJRCwgYnV0IG5vIGFwcCwgb3IgYXBwIGlzIGFsc28gYSBidW5kbGVcbiAgICBpZiAoKHRoaXMub3B0cy5idW5kbGVJZCAmJiBhcHBJc1BhY2thZ2VPckJ1bmRsZSh0aGlzLm9wdHMuYnVuZGxlSWQpKSAmJlxuICAgICAgICAodGhpcy5vcHRzLmFwcCA9PT0gJycgfHwgYXBwSXNQYWNrYWdlT3JCdW5kbGUodGhpcy5vcHRzLmFwcCkpKSB7XG4gICAgICB0aGlzLmxvZy5kZWJ1ZygnQXBwIGlzIGFuIGlPUyBidW5kbGUsIHdpbGwgYXR0ZW1wdCB0byBydW4gYXMgcHJlLWV4aXN0aW5nJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gY2hlY2sgZm9yIHN1cHBvcnRlZCBidWlsZC1pbiBhcHBzXG4gICAgc3dpdGNoIChfLnRvTG93ZXIodGhpcy5vcHRzLmFwcCkpIHtcbiAgICAgIGNhc2UgJ3NldHRpbmdzJzpcbiAgICAgICAgdGhpcy5vcHRzLmJ1bmRsZUlkID0gJ2NvbS5hcHBsZS5QcmVmZXJlbmNlcyc7XG4gICAgICAgIHRoaXMub3B0cy5hcHAgPSBudWxsO1xuICAgICAgICByZXR1cm47XG4gICAgICBjYXNlICdjYWxlbmRhcic6XG4gICAgICAgIHRoaXMub3B0cy5idW5kbGVJZCA9ICdjb20uYXBwbGUubW9iaWxlY2FsJztcbiAgICAgICAgdGhpcy5vcHRzLmFwcCA9IG51bGw7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm9wdHMuYXBwID0gYXdhaXQgdGhpcy5oZWxwZXJzLmNvbmZpZ3VyZUFwcCh0aGlzLm9wdHMuYXBwLCB7XG4gICAgICBvblBvc3RQcm9jZXNzOiB0aGlzLm9uUG9zdENvbmZpZ3VyZUFwcC5iaW5kKHRoaXMpLFxuICAgICAgc3VwcG9ydGVkRXh0ZW5zaW9uczogU1VQUE9SVEVEX0VYVEVOU0lPTlNcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbnppcCB0aGUgZ2l2ZW4gYXJjaGl2ZSBhbmQgZmluZCBhIG1hdGNoaW5nIC5hcHAgYnVuZGxlIGluIGl0XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhcHBQYXRoIFRoZSBwYXRoIHRvIHRoZSBhcmNoaXZlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVwdGggWzBdIHRoZSBjdXJyZW50IG5lc3RpbmcgZGVwdGguIEFwcCBidW5kbGVzIHdob3NlIG5lc3RpbmcgbGV2ZWxcbiAgICogaXMgZ3JlYXRlciB0aGFuIDEgYXJlIG5vdCBzdXBwb3J0ZWQuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IEZ1bGwgcGF0aCB0byB0aGUgZmlyc3QgbWF0Y2hpbmcgLmFwcCBidW5kbGUuLlxuICAgKiBAdGhyb3dzIElmIG5vIG1hdGNoaW5nIC5hcHAgYnVuZGxlcyB3ZXJlIGZvdW5kIGluIHRoZSBwcm92aWRlZCBhcmNoaXZlLlxuICAgKi9cbiAgYXN5bmMgdW56aXBBcHAgKGFwcFBhdGgsIGRlcHRoID0gMCkge1xuICAgIGlmIChkZXB0aCA+IE1BWF9BUkNISVZFX1NDQU5fREVQVEgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTmVzdGluZyBvZiBwYWNrYWdlIGJ1bmRsZXMgaXMgbm90IHN1cHBvcnRlZCcpO1xuICAgIH1cbiAgICBjb25zdCBbcm9vdERpciwgbWF0Y2hlZFBhdGhzXSA9IGF3YWl0IGZpbmRBcHBzKGFwcFBhdGgsIFNVUFBPUlRFRF9FWFRFTlNJT05TKTtcbiAgICBpZiAoXy5pc0VtcHR5KG1hdGNoZWRQYXRocykpIHtcbiAgICAgIHRoaXMubG9nLmRlYnVnKGAnJHtwYXRoLmJhc2VuYW1lKGFwcFBhdGgpfScgaGFzIG5vIGJ1bmRsZXNgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2cuZGVidWcoXG4gICAgICAgIGBGb3VuZCAke3V0aWwucGx1cmFsaXplKCdidW5kbGUnLCBtYXRjaGVkUGF0aHMubGVuZ3RoLCB0cnVlKX0gaW4gYCArXG4gICAgICAgIGAnJHtwYXRoLmJhc2VuYW1lKGFwcFBhdGgpfSc6ICR7bWF0Y2hlZFBhdGhzfWBcbiAgICAgICk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBmb3IgKGNvbnN0IG1hdGNoZWRQYXRoIG9mIG1hdGNoZWRQYXRocykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IHBhdGguam9pbihyb290RGlyLCBtYXRjaGVkUGF0aCk7XG4gICAgICAgIGlmIChhd2FpdCBpc0FwcEJ1bmRsZShmdWxsUGF0aCkpIHtcbiAgICAgICAgICBjb25zdCBzdXBwb3J0ZWRQbGF0Zm9ybXMgPSBhd2FpdCBmZXRjaFN1cHBvcnRlZEFwcFBsYXRmb3JtcyhmdWxsUGF0aCk7XG4gICAgICAgICAgaWYgKHRoaXMuaXNTaW11bGF0b3IoKSAmJiAhc3VwcG9ydGVkUGxhdGZvcm1zLnNvbWUoKHApID0+IF8uaW5jbHVkZXMocCwgJ1NpbXVsYXRvcicpKSkge1xuICAgICAgICAgICAgdGhpcy5sb2cuaW5mbyhgJyR7bWF0Y2hlZFBhdGh9JyBkb2VzIG5vdCBoYXZlIFNpbXVsYXRvciBkZXZpY2VzIGluIHRoZSBsaXN0IG9mIHN1cHBvcnRlZCBwbGF0Zm9ybXMgYCArXG4gICAgICAgICAgICAgIGAoJHtzdXBwb3J0ZWRQbGF0Zm9ybXMuam9pbignLCcpfSkuIFNraXBwaW5nIGl0YCk7O1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLmlzUmVhbERldmljZSgpICYmICFzdXBwb3J0ZWRQbGF0Zm9ybXMuc29tZSgocCkgPT4gXy5pbmNsdWRlcyhwLCAnT1MnKSkpIHtcbiAgICAgICAgICAgIHRoaXMubG9nLmluZm8oYCcke21hdGNoZWRQYXRofScgZG9lcyBub3QgaGF2ZSByZWFsIGRldmljZXMgaW4gdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIHBsYXRmb3JtcyBgICtcbiAgICAgICAgICAgICAgYCgke3N1cHBvcnRlZFBsYXRmb3Jtcy5qb2luKCcsJyl9KS4gU2tpcHBpbmcgaXRgKTs7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5sb2cuaW5mbyhgJyR7bWF0Y2hlZFBhdGh9JyBpcyB0aGUgcmVzdWx0aW5nIGFwcGxpY2F0aW9uIGJ1bmRsZSBzZWxlY3RlZCBmcm9tICcke2FwcFBhdGh9J2ApO1xuICAgICAgICAgIHJldHVybiBhd2FpdCBpc29sYXRlQXBwQnVuZGxlKGZ1bGxQYXRoKTtcbiAgICAgICAgfSBlbHNlIGlmIChfLmVuZHNXaXRoKF8udG9Mb3dlcihmdWxsUGF0aCksIElQQV9FWFQpICYmIChhd2FpdCBmcy5zdGF0KGZ1bGxQYXRoKSkuaXNGaWxlKCkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudW56aXBBcHAoZnVsbFBhdGgsIGRlcHRoICsgMSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5sb2cud2FybihgU2tpcHBpbmcgcHJvY2Vzc2luZyBvZiAnJHttYXRjaGVkUGF0aH0nOiAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgYXdhaXQgZnMucmltcmFmKHJvb3REaXIpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGhpcy5vcHRzLmFwcH0gZGlkIG5vdCBoYXZlIGFueSBtYXRjaGluZyAke0FQUF9FWFR9IG9yICR7SVBBX0VYVH0gYCArXG4gICAgICBgYnVuZGxlcy4gUGxlYXNlIG1ha2Ugc3VyZSB0aGUgcHJvdmlkZWQgcGFja2FnZSBpcyB2YWxpZCBhbmQgY29udGFpbnMgYXQgbGVhc3Qgb25lIG1hdGNoaW5nIGAgK1xuICAgICAgYGFwcGxpY2F0aW9uIGJ1bmRsZSB3aGljaCBpcyBub3QgbmVzdGVkLmBcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgb25Qb3N0Q29uZmlndXJlQXBwICh7Y2FjaGVkQXBwSW5mbywgaXNVcmwsIGFwcFBhdGh9KSB7XG4gICAgLy8gUGljayB0aGUgcHJldmlvdXNseSBjYWNoZWQgZW50cnkgaWYgaXRzIGludGVncml0eSBoYXMgYmVlbiBwcmVzZXJ2ZWRcbiAgICBpZiAoXy5pc1BsYWluT2JqZWN0KGNhY2hlZEFwcEluZm8pXG4gICAgICAgICYmIChhd2FpdCBmcy5zdGF0KGFwcFBhdGgpKS5pc0ZpbGUoKVxuICAgICAgICAmJiBhd2FpdCBmcy5oYXNoKGFwcFBhdGgpID09PSBjYWNoZWRBcHBJbmZvLnBhY2thZ2VIYXNoXG4gICAgICAgICYmIGF3YWl0IGZzLmV4aXN0cyhjYWNoZWRBcHBJbmZvLmZ1bGxQYXRoKVxuICAgICAgICAmJiAoYXdhaXQgZnMuZ2xvYignKiovKicsIHtcbiAgICAgICAgICBjd2Q6IGNhY2hlZEFwcEluZm8uZnVsbFBhdGgsIHN0cmljdDogZmFsc2UsIG5vc29ydDogdHJ1ZVxuICAgICAgICB9KSkubGVuZ3RoID09PSBjYWNoZWRBcHBJbmZvLmludGVncml0eS5mb2xkZXIpIHtcbiAgICAgIHRoaXMubG9nLmluZm8oYFVzaW5nICcke2NhY2hlZEFwcEluZm8uZnVsbFBhdGh9JyB3aGljaCB3YXMgY2FjaGVkIGZyb20gJyR7YXBwUGF0aH0nYCk7XG4gICAgICByZXR1cm4ge2FwcFBhdGg6IGNhY2hlZEFwcEluZm8uZnVsbFBhdGh9O1xuICAgIH1cblxuICAgIC8vIE9ubHkgbG9jYWwgLmFwcCBidW5kbGVzIHRoYXQgYXJlIGF2YWlsYWJsZSBpbi1wbGFjZSBzaG91bGQgbm90IGJlIGNhY2hlZFxuICAgIGlmIChhd2FpdCBpc0FwcEJ1bmRsZShhcHBQYXRoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEV4dHJhY3QgdGhlIGFwcCBidW5kbGUgYW5kIGNhY2hlIGl0XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7YXBwUGF0aDogYXdhaXQgdGhpcy51bnppcEFwcChhcHBQYXRoKX07XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIENsZWFudXAgcHJldmlvdXNseSBkb3dubG9hZGVkIGFyY2hpdmVcbiAgICAgIGlmIChpc1VybCkge1xuICAgICAgICBhd2FpdCBmcy5yaW1yYWYoYXBwUGF0aCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGV0ZXJtaW5lRGV2aWNlICgpIHtcbiAgICAvLyBpbiB0aGUgb25lIGNhc2Ugd2hlcmUgd2UgY3JlYXRlIGEgc2ltLCB3ZSB3aWxsIHNldCB0aGlzIHN0YXRlXG4gICAgdGhpcy5saWZlY3ljbGVEYXRhLmNyZWF0ZVNpbSA9IGZhbHNlO1xuXG4gICAgLy8gaWYgd2UgZ2V0IGdlbmVyaWMgbmFtZXMsIHRyYW5zbGF0ZSB0aGVtXG4gICAgdGhpcy5vcHRzLmRldmljZU5hbWUgPSB0cmFuc2xhdGVEZXZpY2VOYW1lKHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24sIHRoaXMub3B0cy5kZXZpY2VOYW1lKTtcblxuICAgIGNvbnN0IHNldHVwVmVyc2lvbkNhcHMgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0aGlzLm9wdHMuaW9zU2RrVmVyc2lvbiA9IGF3YWl0IGdldEFuZENoZWNrSW9zU2RrVmVyc2lvbigpO1xuICAgICAgdGhpcy5sb2cuaW5mbyhgaU9TIFNESyBWZXJzaW9uIHNldCB0byAnJHt0aGlzLm9wdHMuaW9zU2RrVmVyc2lvbn0nYCk7XG4gICAgICBpZiAoIXRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24gJiYgdGhpcy5vcHRzLmlvc1Nka1ZlcnNpb24pIHtcbiAgICAgICAgdGhpcy5sb2cuaW5mbyhgTm8gcGxhdGZvcm1WZXJzaW9uIHNwZWNpZmllZC4gVXNpbmcgdGhlIGxhdGVzdCB2ZXJzaW9uIFhjb2RlIHN1cHBvcnRzOiAnJHt0aGlzLm9wdHMuaW9zU2RrVmVyc2lvbn0nLiBgICtcbiAgICAgICAgICBgVGhpcyBtYXkgY2F1c2UgcHJvYmxlbXMgaWYgYSBzaW11bGF0b3IgZG9lcyBub3QgZXhpc3QgZm9yIHRoaXMgcGxhdGZvcm0gdmVyc2lvbi5gKTtcbiAgICAgICAgdGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbiA9IG5vcm1hbGl6ZVBsYXRmb3JtVmVyc2lvbih0aGlzLm9wdHMuaW9zU2RrVmVyc2lvbik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmICh0aGlzLm9wdHMudWRpZCkge1xuICAgICAgaWYgKHRoaXMub3B0cy51ZGlkLnRvTG93ZXJDYXNlKCkgPT09ICdhdXRvJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMub3B0cy51ZGlkID0gYXdhaXQgZGV0ZWN0VWRpZCgpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAvLyBUcnlpbmcgdG8gZmluZCBtYXRjaGluZyBVRElEIGZvciBTaW11bGF0b3JcbiAgICAgICAgICB0aGlzLmxvZy53YXJuKGBDYW5ub3QgZGV0ZWN0IGFueSBjb25uZWN0ZWQgcmVhbCBkZXZpY2VzLiBGYWxsaW5nIGJhY2sgdG8gU2ltdWxhdG9yLiBPcmlnaW5hbCBlcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcbiAgICAgICAgICBjb25zdCBkZXZpY2UgPSBhd2FpdCBnZXRFeGlzdGluZ1NpbSh0aGlzLm9wdHMpO1xuICAgICAgICAgIGlmICghZGV2aWNlKSB7XG4gICAgICAgICAgICAvLyBObyBtYXRjaGluZyBTaW11bGF0b3IgaXMgZm91bmQuIFRocm93IGFuIGVycm9yXG4gICAgICAgICAgICB0aGlzLmxvZy5lcnJvckFuZFRocm93KGBDYW5ub3QgZGV0ZWN0IHVkaWQgZm9yICR7dGhpcy5vcHRzLmRldmljZU5hbWV9IFNpbXVsYXRvciBydW5uaW5nIGlPUyAke3RoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb259YCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gTWF0Y2hpbmcgU2ltdWxhdG9yIGV4aXN0cyBhbmQgaXMgZm91bmQuIFVzZSBpdFxuICAgICAgICAgIHRoaXMub3B0cy51ZGlkID0gZGV2aWNlLnVkaWQ7XG4gICAgICAgICAgY29uc3QgZGV2aWNlUGxhdGZvcm0gPSBub3JtYWxpemVQbGF0Zm9ybVZlcnNpb24oYXdhaXQgZGV2aWNlLmdldFBsYXRmb3JtVmVyc2lvbigpKTtcbiAgICAgICAgICBpZiAodGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbiAhPT0gZGV2aWNlUGxhdGZvcm0pIHtcbiAgICAgICAgICAgIHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24gPSBkZXZpY2VQbGF0Zm9ybTtcbiAgICAgICAgICAgIHRoaXMubG9nLmluZm8oYFNldCBwbGF0Zm9ybVZlcnNpb24gdG8gJyR7ZGV2aWNlUGxhdGZvcm19JyB0byBtYXRjaCB0aGUgZGV2aWNlIHdpdGggZ2l2ZW4gVURJRGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhd2FpdCBzZXR1cFZlcnNpb25DYXBzKCk7XG4gICAgICAgICAgcmV0dXJuIHtkZXZpY2UsIHJlYWxEZXZpY2U6IGZhbHNlLCB1ZGlkOiBkZXZpY2UudWRpZH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG1ha2Ugc3VyZSBpdCBpcyBhIGNvbm5lY3RlZCBkZXZpY2UuIElmIG5vdCwgdGhlIHVkaWQgcGFzc2VkIGluIGlzIGludmFsaWRcbiAgICAgICAgY29uc3QgZGV2aWNlcyA9IGF3YWl0IGdldENvbm5lY3RlZERldmljZXMoKTtcbiAgICAgICAgdGhpcy5sb2cuZGVidWcoYEF2YWlsYWJsZSBkZXZpY2VzOiAke2RldmljZXMuam9pbignLCAnKX1gKTtcbiAgICAgICAgaWYgKCFkZXZpY2VzLmluY2x1ZGVzKHRoaXMub3B0cy51ZGlkKSkge1xuICAgICAgICAgIC8vIGNoZWNrIGZvciBhIHBhcnRpY3VsYXIgc2ltdWxhdG9yXG4gICAgICAgICAgdGhpcy5sb2cuZGVidWcoYE5vIHJlYWwgZGV2aWNlIHdpdGggdWRpZCAnJHt0aGlzLm9wdHMudWRpZH0nLiBMb29raW5nIGZvciBzaW11bGF0b3JgKTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZGV2aWNlID0gYXdhaXQgZ2V0U2ltdWxhdG9yKHRoaXMub3B0cy51ZGlkLCB7XG4gICAgICAgICAgICAgIGRldmljZXNTZXRQYXRoOiB0aGlzLm9wdHMuc2ltdWxhdG9yRGV2aWNlc1NldFBhdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7ZGV2aWNlLCByZWFsRGV2aWNlOiBmYWxzZSwgdWRpZDogdGhpcy5vcHRzLnVkaWR9O1xuICAgICAgICAgIH0gY2F0Y2ggKGlnbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGRldmljZSBvciBzaW11bGF0b3IgVURJRDogJyR7dGhpcy5vcHRzLnVkaWR9J2ApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBkZXZpY2UgPSBhd2FpdCBnZXRSZWFsRGV2aWNlT2JqKHRoaXMub3B0cy51ZGlkKTtcbiAgICAgIHJldHVybiB7ZGV2aWNlLCByZWFsRGV2aWNlOiB0cnVlLCB1ZGlkOiB0aGlzLm9wdHMudWRpZH07XG4gICAgfVxuXG4gICAgLy8gTm93IHdlIGtub3cgZm9yIHN1cmUgdGhlIGRldmljZSB3aWxsIGJlIGEgU2ltdWxhdG9yXG4gICAgYXdhaXQgc2V0dXBWZXJzaW9uQ2FwcygpO1xuICAgIGlmICh0aGlzLm9wdHMuZW5mb3JjZUZyZXNoU2ltdWxhdG9yQ3JlYXRpb24pIHtcbiAgICAgIHRoaXMubG9nLmRlYnVnKGBOZXcgc2ltdWxhdG9yIGlzIHJlcXVlc3RlZC4gSWYgdGhpcyBpcyBub3Qgd2FudGVkLCBzZXQgJ2VuZm9yY2VGcmVzaFNpbXVsYXRvckNyZWF0aW9uJyBjYXBhYmlsaXR5IHRvIGZhbHNlYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3Qgc2ltdWxhdG9yIHRvIHVzZSwgZ2l2ZW4gdGhlIGRlc2lyZWQgY2FwYWJpbGl0aWVzXG4gICAgICBjb25zdCBkZXZpY2UgPSBhd2FpdCBnZXRFeGlzdGluZ1NpbSh0aGlzLm9wdHMpO1xuXG4gICAgICAvLyBjaGVjayBmb3IgYW4gZXhpc3Rpbmcgc2ltdWxhdG9yXG4gICAgICBpZiAoZGV2aWNlKSB7XG4gICAgICAgIHJldHVybiB7ZGV2aWNlLCByZWFsRGV2aWNlOiBmYWxzZSwgdWRpZDogZGV2aWNlLnVkaWR9O1xuICAgICAgfVxuXG4gICAgICB0aGlzLmxvZy5pbmZvKCdTaW11bGF0b3IgdWRpZCBub3QgcHJvdmlkZWQnKTtcbiAgICB9XG5cbiAgICAvLyBubyBkZXZpY2Ugb2YgdGhpcyB0eXBlIGV4aXN0cywgb3IgdGhleSByZXF1ZXN0IG5ldyBzaW0sIHNvIGNyZWF0ZSBvbmVcbiAgICB0aGlzLmxvZy5pbmZvKCdVc2luZyBkZXNpcmVkIGNhcHMgdG8gY3JlYXRlIGEgbmV3IHNpbXVsYXRvcicpO1xuICAgIGNvbnN0IGRldmljZSA9IGF3YWl0IHRoaXMuY3JlYXRlU2ltKCk7XG4gICAgcmV0dXJuIHtkZXZpY2UsIHJlYWxEZXZpY2U6IGZhbHNlLCB1ZGlkOiBkZXZpY2UudWRpZH07XG4gIH1cblxuICBhc3luYyBzdGFydFNpbSAoKSB7XG4gICAgY29uc3QgcnVuT3B0cyA9IHtcbiAgICAgIHNjYWxlRmFjdG9yOiB0aGlzLm9wdHMuc2NhbGVGYWN0b3IsXG4gICAgICBjb25uZWN0SGFyZHdhcmVLZXlib2FyZDogISF0aGlzLm9wdHMuY29ubmVjdEhhcmR3YXJlS2V5Ym9hcmQsXG4gICAgICBwYXN0ZWJvYXJkQXV0b21hdGljU3luYzogdGhpcy5vcHRzLnNpbXVsYXRvclBhc3RlYm9hcmRBdXRvbWF0aWNTeW5jID8/ICdvZmYnLFxuICAgICAgaXNIZWFkbGVzczogISF0aGlzLm9wdHMuaXNIZWFkbGVzcyxcbiAgICAgIHRyYWNlUG9pbnRlcjogdGhpcy5vcHRzLnNpbXVsYXRvclRyYWNlUG9pbnRlcixcbiAgICAgIGRldmljZVByZWZlcmVuY2VzOiB7fSxcbiAgICB9O1xuXG4gICAgLy8gYWRkIHRoZSB3aW5kb3cgY2VudGVyLCBpZiBpdCBpcyBzcGVjaWZpZWRcbiAgICBpZiAodGhpcy5vcHRzLlNpbXVsYXRvcldpbmRvd0NlbnRlcikge1xuICAgICAgcnVuT3B0cy5kZXZpY2VQcmVmZXJlbmNlcy5TaW11bGF0b3JXaW5kb3dDZW50ZXIgPSB0aGlzLm9wdHMuU2ltdWxhdG9yV2luZG93Q2VudGVyO1xuICAgIH1cblxuICAgIGlmIChfLmlzSW50ZWdlcih0aGlzLm9wdHMuc2ltdWxhdG9yU3RhcnR1cFRpbWVvdXQpKSB7XG4gICAgICBydW5PcHRzLnN0YXJ0dXBUaW1lb3V0ID0gdGhpcy5vcHRzLnNpbXVsYXRvclN0YXJ0dXBUaW1lb3V0O1xuICAgIH1cblxuICAgIC8vIFRoaXMgaXMgdG8gd29ya2Fyb3VuZCBYQ1Rlc3QgYnVnIGFib3V0IGNoYW5naW5nIFNpbXVsYXRvclxuICAgIC8vIG9yaWVudGF0aW9uIGlzIG5vdCBzeW5jaHJvbml6ZWQgdG8gdGhlIGFjdHVhbCB3aW5kb3cgb3JpZW50YXRpb25cbiAgICBjb25zdCBvcmllbnRhdGlvbiA9IF8uaXNTdHJpbmcodGhpcy5vcHRzLm9yaWVudGF0aW9uKSAmJiB0aGlzLm9wdHMub3JpZW50YXRpb24udG9VcHBlckNhc2UoKTtcbiAgICBzd2l0Y2ggKG9yaWVudGF0aW9uKSB7XG4gICAgICBjYXNlICdMQU5EU0NBUEUnOlxuICAgICAgICBydW5PcHRzLmRldmljZVByZWZlcmVuY2VzLlNpbXVsYXRvcldpbmRvd09yaWVudGF0aW9uID0gJ0xhbmRzY2FwZUxlZnQnO1xuICAgICAgICBydW5PcHRzLmRldmljZVByZWZlcmVuY2VzLlNpbXVsYXRvcldpbmRvd1JvdGF0aW9uQW5nbGUgPSA5MDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdQT1JUUkFJVCc6XG4gICAgICAgIHJ1bk9wdHMuZGV2aWNlUHJlZmVyZW5jZXMuU2ltdWxhdG9yV2luZG93T3JpZW50YXRpb24gPSAnUG9ydHJhaXQnO1xuICAgICAgICBydW5PcHRzLmRldmljZVByZWZlcmVuY2VzLlNpbXVsYXRvcldpbmRvd1JvdGF0aW9uQW5nbGUgPSAwO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLm9wdHMuZGV2aWNlLnJ1bihydW5PcHRzKTtcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVNpbSAoKSB7XG4gICAgdGhpcy5saWZlY3ljbGVEYXRhLmNyZWF0ZVNpbSA9IHRydWU7XG5cbiAgICAvLyBHZXQgcGxhdGZvcm0gbmFtZSBmcm9tIGNvbnN0IHNpbmNlIGl0IG11c3QgYmUgY2FzZSBzZW5zaXRpdmUgdG8gY3JlYXRlIGEgbmV3IHNpbXVsYXRvclxuICAgIGNvbnN0IHBsYXRmb3JtTmFtZSA9IHRoaXMuaXNUdk9TKCkgPyBQTEFURk9STV9OQU1FX1RWT1MgOiBQTEFURk9STV9OQU1FX0lPUztcblxuICAgIC8vIGNyZWF0ZSBzaW0gZm9yIGNhcHNcbiAgICBjb25zdCBzaW0gPSBhd2FpdCBjcmVhdGVTaW0odGhpcy5vcHRzLCBwbGF0Zm9ybU5hbWUpO1xuICAgIHRoaXMubG9nLmluZm8oYENyZWF0ZWQgc2ltdWxhdG9yIHdpdGggdWRpZCAnJHtzaW0udWRpZH0nLmApO1xuXG4gICAgcmV0dXJuIHNpbTtcbiAgfVxuXG4gIGFzeW5jIGxhdW5jaEFwcCAoKSB7XG4gICAgY29uc3QgQVBQX0xBVU5DSF9USU1FT1VUID0gMjAgKiAxMDAwO1xuXG4gICAgdGhpcy5sb2dFdmVudCgnYXBwTGF1bmNoQXR0ZW1wdGVkJyk7XG4gICAgYXdhaXQgdGhpcy5vcHRzLmRldmljZS5sYXVuY2hBcHAodGhpcy5vcHRzLmJ1bmRsZUlkKTtcblxuICAgIGxldCBjaGVja1N0YXR1cyA9IGFzeW5jICgpID0+IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvc3RhdHVzJywgJ0dFVCcpO1xuICAgICAgbGV0IGN1cnJlbnRBcHAgPSByZXNwb25zZS5jdXJyZW50QXBwLmJ1bmRsZUlEO1xuICAgICAgaWYgKGN1cnJlbnRBcHAgIT09IHRoaXMub3B0cy5idW5kbGVJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGhpcy5vcHRzLmJ1bmRsZUlkfSBub3QgaW4gZm9yZWdyb3VuZC4gJHtjdXJyZW50QXBwfSBpcyBpbiBmb3JlZ3JvdW5kYCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubG9nLmluZm8oYFdhaXRpbmcgZm9yICcke3RoaXMub3B0cy5idW5kbGVJZH0nIHRvIGJlIGluIGZvcmVncm91bmRgKTtcbiAgICBsZXQgcmV0cmllcyA9IHBhcnNlSW50KEFQUF9MQVVOQ0hfVElNRU9VVCAvIDIwMCwgMTApO1xuICAgIGF3YWl0IHJldHJ5SW50ZXJ2YWwocmV0cmllcywgMjAwLCBjaGVja1N0YXR1cyk7XG4gICAgdGhpcy5sb2cuaW5mbyhgJHt0aGlzLm9wdHMuYnVuZGxlSWR9IGlzIGluIGZvcmVncm91bmRgKTtcbiAgICB0aGlzLmxvZ0V2ZW50KCdhcHBMYXVuY2hlZCcpO1xuICB9XG5cbiAgYXN5bmMgc3RhcnRXZGFTZXNzaW9uIChidW5kbGVJZCwgcHJvY2Vzc0FyZ3VtZW50cykge1xuICAgIGNvbnN0IGFyZ3MgPSBwcm9jZXNzQXJndW1lbnRzID8gKHByb2Nlc3NBcmd1bWVudHMuYXJncyB8fCBbXSkgOiBbXTtcbiAgICBpZiAoIV8uaXNBcnJheShhcmdzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBwcm9jZXNzQXJndW1lbnRzLmFyZ3MgY2FwYWJpbGl0eSBpcyBleHBlY3RlZCB0byBiZSBhbiBhcnJheS4gYCArXG4gICAgICAgIGAke0pTT04uc3RyaW5naWZ5KGFyZ3MpfSBpcyBnaXZlbiBpbnN0ZWFkYCk7XG4gICAgfVxuICAgIGNvbnN0IGVudiA9IHByb2Nlc3NBcmd1bWVudHMgPyAocHJvY2Vzc0FyZ3VtZW50cy5lbnYgfHwge30pIDoge307XG4gICAgaWYgKCFfLmlzUGxhaW5PYmplY3QoZW52KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBwcm9jZXNzQXJndW1lbnRzLmVudiBjYXBhYmlsaXR5IGlzIGV4cGVjdGVkIHRvIGJlIGEgZGljdGlvbmFyeS4gYCArXG4gICAgICAgIGAke0pTT04uc3RyaW5naWZ5KGVudil9IGlzIGdpdmVuIGluc3RlYWRgKTtcbiAgICB9XG5cbiAgICBpZiAodXRpbC5oYXNWYWx1ZSh0aGlzLm9wdHMubGFuZ3VhZ2UpKSB7XG4gICAgICBhcmdzLnB1c2goJy1BcHBsZUxhbmd1YWdlcycsIGAoJHt0aGlzLm9wdHMubGFuZ3VhZ2V9KWApO1xuICAgICAgYXJncy5wdXNoKCctTlNMYW5ndWFnZXMnLCBgKCR7dGhpcy5vcHRzLmxhbmd1YWdlfSlgKTtcbiAgICB9XG4gICAgaWYgKHV0aWwuaGFzVmFsdWUodGhpcy5vcHRzLmxvY2FsZSkpIHtcbiAgICAgIGFyZ3MucHVzaCgnLUFwcGxlTG9jYWxlJywgdGhpcy5vcHRzLmxvY2FsZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0cy5ub1Jlc2V0KSB7XG4gICAgICBpZiAoXy5pc05pbCh0aGlzLm9wdHMuc2hvdWxkVGVybWluYXRlQXBwKSkge1xuICAgICAgICB0aGlzLm9wdHMuc2hvdWxkVGVybWluYXRlQXBwID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoXy5pc05pbCh0aGlzLm9wdHMuZm9yY2VBcHBMYXVuY2gpKSB7XG4gICAgICAgIHRoaXMub3B0cy5mb3JjZUFwcExhdW5jaCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHdkYUNhcHMgPSB7XG4gICAgICBidW5kbGVJZDogdGhpcy5vcHRzLmF1dG9MYXVuY2ggPT09IGZhbHNlID8gdW5kZWZpbmVkIDogYnVuZGxlSWQsXG4gICAgICBhcmd1bWVudHM6IGFyZ3MsXG4gICAgICBlbnZpcm9ubWVudDogZW52LFxuICAgICAgZXZlbnRsb29wSWRsZURlbGF5U2VjOiB0aGlzLm9wdHMud2RhRXZlbnRsb29wSWRsZURlbGF5ID8/IDAsXG4gICAgICBzaG91bGRXYWl0Rm9yUXVpZXNjZW5jZTogdGhpcy5vcHRzLndhaXRGb3JRdWllc2NlbmNlID8/IHRydWUsXG4gICAgICBzaG91bGRVc2VUZXN0TWFuYWdlckZvclZpc2liaWxpdHlEZXRlY3Rpb246IHRoaXMub3B0cy5zaW1wbGVJc1Zpc2libGVDaGVjayA/PyBmYWxzZSxcbiAgICAgIG1heFR5cGluZ0ZyZXF1ZW5jeTogdGhpcy5vcHRzLm1heFR5cGluZ0ZyZXF1ZW5jeSA/PyA2MCxcbiAgICAgIHNob3VsZFVzZVNpbmdsZXRvblRlc3RNYW5hZ2VyOiB0aGlzLm9wdHMuc2hvdWxkVXNlU2luZ2xldG9uVGVzdE1hbmFnZXIgPz8gdHJ1ZSxcbiAgICAgIHdhaXRGb3JJZGxlVGltZW91dDogdGhpcy5vcHRzLndhaXRGb3JJZGxlVGltZW91dCxcbiAgICAgIHNob3VsZFVzZUNvbXBhY3RSZXNwb25zZXM6IHRoaXMub3B0cy5zaG91bGRVc2VDb21wYWN0UmVzcG9uc2VzLFxuICAgICAgZWxlbWVudFJlc3BvbnNlRmllbGRzOiB0aGlzLm9wdHMuZWxlbWVudFJlc3BvbnNlRmllbGRzLFxuICAgICAgZGlzYWJsZUF1dG9tYXRpY1NjcmVlbnNob3RzOiB0aGlzLm9wdHMuZGlzYWJsZUF1dG9tYXRpY1NjcmVlbnNob3RzLFxuICAgICAgc2hvdWxkVGVybWluYXRlQXBwOiB0aGlzLm9wdHMuc2hvdWxkVGVybWluYXRlQXBwID8/IHRydWUsXG4gICAgICBmb3JjZUFwcExhdW5jaDogdGhpcy5vcHRzLmZvcmNlQXBwTGF1bmNoID8/IHRydWUsXG4gICAgICB1c2VOYXRpdmVDYWNoaW5nU3RyYXRlZ3k6IHRoaXMub3B0cy51c2VOYXRpdmVDYWNoaW5nU3RyYXRlZ3kgPz8gdHJ1ZSxcbiAgICAgIGZvcmNlU2ltdWxhdG9yU29mdHdhcmVLZXlib2FyZFByZXNlbmNlOiB0aGlzLm9wdHMuZm9yY2VTaW11bGF0b3JTb2Z0d2FyZUtleWJvYXJkUHJlc2VuY2VcbiAgICAgICAgPz8gKHRoaXMub3B0cy5jb25uZWN0SGFyZHdhcmVLZXlib2FyZCA9PT0gdHJ1ZSA/IGZhbHNlIDogdHJ1ZSksXG4gICAgfTtcbiAgICBpZiAodGhpcy5vcHRzLmF1dG9BY2NlcHRBbGVydHMpIHtcbiAgICAgIHdkYUNhcHMuZGVmYXVsdEFsZXJ0QWN0aW9uID0gJ2FjY2VwdCc7XG4gICAgfSBlbHNlIGlmICh0aGlzLm9wdHMuYXV0b0Rpc21pc3NBbGVydHMpIHtcbiAgICAgIHdkYUNhcHMuZGVmYXVsdEFsZXJ0QWN0aW9uID0gJ2Rpc21pc3MnO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvc2Vzc2lvbicsICdQT1NUJywge1xuICAgICAgY2FwYWJpbGl0aWVzOiB7XG4gICAgICAgIGZpcnN0TWF0Y2g6IFt3ZGFDYXBzXSxcbiAgICAgICAgYWx3YXlzTWF0Y2g6IHt9LFxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gT3ZlcnJpZGUgUHJveHkgbWV0aG9kcyBmcm9tIEJhc2VEcml2ZXJcbiAgcHJveHlBY3RpdmUgKCkge1xuICAgIHJldHVybiB0aGlzLmp3cFByb3h5QWN0aXZlO1xuICB9XG5cbiAgZ2V0UHJveHlBdm9pZExpc3QgKCkge1xuICAgIGlmICh0aGlzLmlzV2VidmlldygpKSB7XG4gICAgICByZXR1cm4gTk9fUFJPWFlfV0VCX0xJU1Q7XG4gICAgfVxuICAgIHJldHVybiBOT19QUk9YWV9OQVRJVkVfTElTVDtcbiAgfVxuXG4gIGNhblByb3h5ICgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlzU2FmYXJpICgpIHtcbiAgICByZXR1cm4gISF0aGlzLnNhZmFyaTtcbiAgfVxuXG4gIGlzUmVhbERldmljZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0cy5yZWFsRGV2aWNlO1xuICB9XG5cbiAgaXNTaW11bGF0b3IgKCkge1xuICAgIHJldHVybiAhdGhpcy5vcHRzLnJlYWxEZXZpY2U7XG4gIH1cblxuICBpc1R2T1MgKCkge1xuICAgIHJldHVybiBfLnRvTG93ZXIodGhpcy5vcHRzLnBsYXRmb3JtTmFtZSkgPT09IF8udG9Mb3dlcihQTEFURk9STV9OQU1FX1RWT1MpO1xuICB9XG5cbiAgaXNXZWJ2aWV3ICgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1NhZmFyaSgpIHx8IHRoaXMuaXNXZWJDb250ZXh0KCk7XG4gIH1cblxuICB2YWxpZGF0ZUxvY2F0b3JTdHJhdGVneSAoc3RyYXRlZ3kpIHtcbiAgICBzdXBlci52YWxpZGF0ZUxvY2F0b3JTdHJhdGVneShzdHJhdGVneSwgdGhpcy5pc1dlYkNvbnRleHQoKSk7XG4gIH1cblxuICB2YWxpZGF0ZURlc2lyZWRDYXBzIChjYXBzKSB7XG4gICAgaWYgKCFzdXBlci52YWxpZGF0ZURlc2lyZWRDYXBzKGNhcHMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gbWFrZSBzdXJlIHRoYXQgdGhlIGNhcGFiaWxpdGllcyBoYXZlIG9uZSBvZiBgYXBwYCBvciBgYnVuZGxlSWRgXG4gICAgaWYgKF8udG9Mb3dlcihjYXBzLmJyb3dzZXJOYW1lKSAhPT0gJ3NhZmFyaScgJiYgIWNhcHMuYXBwICYmICFjYXBzLmJ1bmRsZUlkKSB7XG4gICAgICB0aGlzLmxvZy5pbmZvKCdUaGUgZGVzaXJlZCBjYXBhYmlsaXRpZXMgaW5jbHVkZSBuZWl0aGVyIGFuIGFwcCBub3IgYSBidW5kbGVJZC4gJyArXG4gICAgICAgICdXZWJEcml2ZXJBZ2VudCB3aWxsIGJlIHN0YXJ0ZWQgd2l0aG91dCB0aGUgZGVmYXVsdCBhcHAnKTtcbiAgICB9XG5cbiAgICBpZiAoIXV0aWwuY29lcmNlVmVyc2lvbihjYXBzLnBsYXRmb3JtVmVyc2lvbiwgZmFsc2UpKSB7XG4gICAgICB0aGlzLmxvZy53YXJuKGAncGxhdGZvcm1WZXJzaW9uJyBjYXBhYmlsaXR5ICgnJHtjYXBzLnBsYXRmb3JtVmVyc2lvbn0nKSBpcyBub3QgYSB2YWxpZCB2ZXJzaW9uIG51bWJlci4gYCArXG4gICAgICAgIGBDb25zaWRlciBmaXhpbmcgaXQgb3IgYmUgcmVhZHkgdG8gZXhwZXJpZW5jZSBhbiBpbmNvbnNpc3RlbnQgZHJpdmVyIGJlaGF2aW9yLmApO1xuICAgIH1cblxuICAgIGxldCB2ZXJpZnlQcm9jZXNzQXJndW1lbnQgPSAocHJvY2Vzc0FyZ3VtZW50cykgPT4ge1xuICAgICAgY29uc3Qge2FyZ3MsIGVudn0gPSBwcm9jZXNzQXJndW1lbnRzO1xuICAgICAgaWYgKCFfLmlzTmlsKGFyZ3MpICYmICFfLmlzQXJyYXkoYXJncykpIHtcbiAgICAgICAgdGhpcy5sb2cuZXJyb3JBbmRUaHJvdygncHJvY2Vzc0FyZ3VtZW50cy5hcmdzIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncycpO1xuICAgICAgfVxuICAgICAgaWYgKCFfLmlzTmlsKGVudikgJiYgIV8uaXNQbGFpbk9iamVjdChlbnYpKSB7XG4gICAgICAgIHRoaXMubG9nLmVycm9yQW5kVGhyb3coJ3Byb2Nlc3NBcmd1bWVudHMuZW52IG11c3QgYmUgYW4gb2JqZWN0IDxrZXksdmFsdWU+IHBhaXIge2E6YiwgYzpkfScpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBgcHJvY2Vzc0FyZ3VtZW50c2Agc2hvdWxkIGJlIEpTT04gc3RyaW5nIG9yIGFuIG9iamVjdCB3aXRoIGFyZ3VtZW50cyBhbmQvIGVudmlyb25tZW50IGRldGFpbHNcbiAgICBpZiAoY2Fwcy5wcm9jZXNzQXJndW1lbnRzKSB7XG4gICAgICBpZiAoXy5pc1N0cmluZyhjYXBzLnByb2Nlc3NBcmd1bWVudHMpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gdHJ5IHRvIHBhcnNlIHRoZSBzdHJpbmcgYXMgSlNPTlxuICAgICAgICAgIGNhcHMucHJvY2Vzc0FyZ3VtZW50cyA9IEpTT04ucGFyc2UoY2Fwcy5wcm9jZXNzQXJndW1lbnRzKTtcbiAgICAgICAgICB2ZXJpZnlQcm9jZXNzQXJndW1lbnQoY2Fwcy5wcm9jZXNzQXJndW1lbnRzKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgdGhpcy5sb2cuZXJyb3JBbmRUaHJvdyhgcHJvY2Vzc0FyZ3VtZW50cyBtdXN0IGJlIGEgSlNPTiBmb3JtYXQgb3IgYW4gb2JqZWN0IHdpdGggZm9ybWF0IHthcmdzIDogW10sIGVudiA6IHthOmIsIGM6ZH19LiBgICtcbiAgICAgICAgICAgIGBCb3RoIGVudmlyb25tZW50IGFuZCBhcmd1bWVudCBjYW4gYmUgbnVsbC4gRXJyb3I6ICR7ZXJyfWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKF8uaXNQbGFpbk9iamVjdChjYXBzLnByb2Nlc3NBcmd1bWVudHMpKSB7XG4gICAgICAgIHZlcmlmeVByb2Nlc3NBcmd1bWVudChjYXBzLnByb2Nlc3NBcmd1bWVudHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2cuZXJyb3JBbmRUaHJvdyhgJ3Byb2Nlc3NBcmd1bWVudHMgbXVzdCBiZSBhbiBvYmplY3QsIG9yIGEgc3RyaW5nIEpTT04gb2JqZWN0IHdpdGggZm9ybWF0IHthcmdzIDogW10sIGVudiA6IHthOmIsIGM6ZH19LiBgICtcbiAgICAgICAgICBgQm90aCBlbnZpcm9ubWVudCBhbmQgYXJndW1lbnQgY2FuIGJlIG51bGwuYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdGhlcmUgaXMgbm8gcG9pbnQgaW4gaGF2aW5nIGBrZXljaGFpblBhdGhgIHdpdGhvdXQgYGtleWNoYWluUGFzc3dvcmRgXG4gICAgaWYgKChjYXBzLmtleWNoYWluUGF0aCAmJiAhY2Fwcy5rZXljaGFpblBhc3N3b3JkKSB8fCAoIWNhcHMua2V5Y2hhaW5QYXRoICYmIGNhcHMua2V5Y2hhaW5QYXNzd29yZCkpIHtcbiAgICAgIHRoaXMubG9nLmVycm9yQW5kVGhyb3coYElmICdrZXljaGFpblBhdGgnIGlzIHNldCwgJ2tleWNoYWluUGFzc3dvcmQnIG11c3QgYWxzbyBiZSBzZXQgKGFuZCB2aWNlIHZlcnNhKS5gKTtcbiAgICB9XG5cbiAgICAvLyBgcmVzZXRPblNlc3Npb25TdGFydE9ubHlgIHNob3VsZCBiZSBzZXQgdG8gdHJ1ZSBieSBkZWZhdWx0XG4gICAgdGhpcy5vcHRzLnJlc2V0T25TZXNzaW9uU3RhcnRPbmx5ID0gIXV0aWwuaGFzVmFsdWUodGhpcy5vcHRzLnJlc2V0T25TZXNzaW9uU3RhcnRPbmx5KSB8fCB0aGlzLm9wdHMucmVzZXRPblNlc3Npb25TdGFydE9ubHk7XG4gICAgdGhpcy5vcHRzLnVzZU5ld1dEQSA9IHV0aWwuaGFzVmFsdWUodGhpcy5vcHRzLnVzZU5ld1dEQSkgPyB0aGlzLm9wdHMudXNlTmV3V0RBIDogZmFsc2U7XG5cbiAgICBpZiAoY2Fwcy5jb21tYW5kVGltZW91dHMpIHtcbiAgICAgIGNhcHMuY29tbWFuZFRpbWVvdXRzID0gbm9ybWFsaXplQ29tbWFuZFRpbWVvdXRzKGNhcHMuY29tbWFuZFRpbWVvdXRzKTtcbiAgICB9XG5cbiAgICBpZiAoXy5pc1N0cmluZyhjYXBzLndlYkRyaXZlckFnZW50VXJsKSkge1xuICAgICAgY29uc3Qge3Byb3RvY29sLCBob3N0fSA9IHVybC5wYXJzZShjYXBzLndlYkRyaXZlckFnZW50VXJsKTtcbiAgICAgIGlmIChfLmlzRW1wdHkocHJvdG9jb2wpIHx8IF8uaXNFbXB0eShob3N0KSkge1xuICAgICAgICB0aGlzLmxvZy5lcnJvckFuZFRocm93KGAnd2ViRHJpdmVyQWdlbnRVcmwnIGNhcGFiaWxpdHkgaXMgZXhwZWN0ZWQgdG8gY29udGFpbiBhIHZhbGlkIFdlYkRyaXZlckFnZW50IHNlcnZlciBVUkwuIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICBgJyR7Y2Fwcy53ZWJEcml2ZXJBZ2VudFVybH0nIGlzIGdpdmVuIGluc3RlYWRgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2Fwcy5icm93c2VyTmFtZSkge1xuICAgICAgaWYgKGNhcHMuYnVuZGxlSWQpIHtcbiAgICAgICAgdGhpcy5sb2cuZXJyb3JBbmRUaHJvdyhgJ2Jyb3dzZXJOYW1lJyBjYW5ub3QgYmUgc2V0IHRvZ2V0aGVyIHdpdGggJ2J1bmRsZUlkJyBjYXBhYmlsaXR5YCk7XG4gICAgICB9XG4gICAgICAvLyB3YXJuIGlmIHRoZSBjYXBhYmlsaXRpZXMgaGF2ZSBib3RoIGBhcHBgIGFuZCBgYnJvd3NlciwgYWx0aG91Z2ggdGhpc1xuICAgICAgLy8gaXMgY29tbW9uIHdpdGggc2VsZW5pdW0gZ3JpZFxuICAgICAgaWYgKGNhcHMuYXBwKSB7XG4gICAgICAgIHRoaXMubG9nLndhcm4oYFRoZSBjYXBhYmlsaXRpZXMgc2hvdWxkIGdlbmVyYWxseSBub3QgaW5jbHVkZSBib3RoIGFuICdhcHAnIGFuZCBhICdicm93c2VyTmFtZSdgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2Fwcy5wZXJtaXNzaW9ucykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIChjb25zdCBbYnVuZGxlSWQsIHBlcm1zXSBvZiBfLnRvUGFpcnMoSlNPTi5wYXJzZShjYXBzLnBlcm1pc3Npb25zKSkpIHtcbiAgICAgICAgICBpZiAoIV8uaXNTdHJpbmcoYnVuZGxlSWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke0pTT04uc3RyaW5naWZ5KGJ1bmRsZUlkKX0nIG11c3QgYmUgYSBzdHJpbmdgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFfLmlzUGxhaW5PYmplY3QocGVybXMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke0pTT04uc3RyaW5naWZ5KHBlcm1zKX0nIG11c3QgYmUgYSBKU09OIG9iamVjdGApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aGlzLmxvZy5lcnJvckFuZFRocm93KGAnJHtjYXBzLnBlcm1pc3Npb25zfScgaXMgZXhwZWN0ZWQgdG8gYmUgYSB2YWxpZCBvYmplY3Qgd2l0aCBmb3JtYXQgYCArXG4gICAgICAgICAgYHtcIjxidW5kbGVJZDE+XCI6IHtcIjxzZXJ2aWNlTmFtZTE+XCI6IFwiPHNlcnZpY2VTdGF0dXMxPlwiLCAuLi59LCAuLi59LiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNhcHMucGxhdGZvcm1WZXJzaW9uICYmICF1dGlsLmNvZXJjZVZlcnNpb24oY2Fwcy5wbGF0Zm9ybVZlcnNpb24sIGZhbHNlKSkge1xuICAgICAgdGhpcy5sb2cuZXJyb3JBbmRUaHJvdyhgJ3BsYXRmb3JtVmVyc2lvbicgbXVzdCBiZSBhIHZhbGlkIHZlcnNpb24gbnVtYmVyLiBgICtcbiAgICAgICAgYCcke2NhcHMucGxhdGZvcm1WZXJzaW9ufScgaXMgZ2l2ZW4gaW5zdGVhZC5gKTtcbiAgICB9XG5cbiAgICAvLyBhZGRpdGlvbmFsV2Vidmlld0J1bmRsZUlkcyBpcyBhbiBhcnJheSwgSlNPTiBhcnJheSwgb3Igc3RyaW5nXG4gICAgaWYgKGNhcHMuYWRkaXRpb25hbFdlYnZpZXdCdW5kbGVJZHMpIHtcbiAgICAgIGNhcHMuYWRkaXRpb25hbFdlYnZpZXdCdW5kbGVJZHMgPSB0aGlzLmhlbHBlcnMucGFyc2VDYXBzQXJyYXkoY2Fwcy5hZGRpdGlvbmFsV2Vidmlld0J1bmRsZUlkcyk7XG4gICAgfVxuXG4gICAgLy8gZmluYWxseSwgcmV0dXJuIHRydWUgc2luY2UgdGhlIHN1cGVyY2xhc3MgY2hlY2sgcGFzc2VkLCBhcyBkaWQgdGhpc1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgYXN5bmMgY2hlY2tBdXRJbnN0YWxsYXRpb25TdGF0ZSAoKSB7XG4gICAgY29uc3Qge1xuICAgICAgZW5mb3JjZUFwcEluc3RhbGwsXG4gICAgICBmdWxsUmVzZXQsXG4gICAgICBub1Jlc2V0LFxuICAgICAgYnVuZGxlSWQsXG4gICAgICBkZXZpY2UsXG4gICAgICBhcHAsXG4gICAgfSA9IHRoaXMub3B0cztcblxuICAgIGNvbnN0IHdhc0FwcEluc3RhbGxlZCA9IGF3YWl0IGRldmljZS5pc0FwcEluc3RhbGxlZChidW5kbGVJZCk7XG4gICAgaWYgKHdhc0FwcEluc3RhbGxlZCkge1xuICAgICAgdGhpcy5sb2cuaW5mbyhgQXBwICcke2J1bmRsZUlkfScgaXMgYWxyZWFkeSBpbnN0YWxsZWRgKTtcbiAgICAgIGlmIChub1Jlc2V0KSB7XG4gICAgICAgIHRoaXMubG9nLmluZm8oJ25vUmVzZXQgaXMgcmVxdWVzdGVkLiBUaGUgYXBwIHdpbGwgbm90IGJlIGJlIChyZSlpbnN0YWxsZWQnKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpbnN0YWxsOiBmYWxzZSxcbiAgICAgICAgICBza2lwVW5pbnN0YWxsOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxvZy5pbmZvKGBBcHAgJyR7YnVuZGxlSWR9JyBpcyBub3QgaW5zdGFsbGVkIG9uIHRoZSBkZXZpY2UgeWV0YCk7XG4gICAgfVxuICAgIGlmIChlbmZvcmNlQXBwSW5zdGFsbCAhPT0gZmFsc2UgfHwgZnVsbFJlc2V0IHx8ICF3YXNBcHBJbnN0YWxsZWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluc3RhbGw6IHRydWUsXG4gICAgICAgIHNraXBVbmluc3RhbGw6ICF3YXNBcHBJbnN0YWxsZWQsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGNhbmRpZGF0ZUJ1bmRsZVZlcnNpb24gPSBhd2FpdCBleHRyYWN0QnVuZGxlVmVyc2lvbi5iaW5kKHRoaXMpKGFwcCk7XG4gICAgdGhpcy5sb2cuZGVidWcoYENGQnVuZGxlVmVyc2lvbiBmcm9tIEluZm8ucGxpc3Q6ICR7Y2FuZGlkYXRlQnVuZGxlVmVyc2lvbn1gKTtcbiAgICBpZiAoIWNhbmRpZGF0ZUJ1bmRsZVZlcnNpb24pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluc3RhbGw6IHRydWUsXG4gICAgICAgIHNraXBVbmluc3RhbGw6IGZhbHNlLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBhcHBCdW5kbGVWZXJzaW9uID0gdGhpcy5pc1JlYWxEZXZpY2UoKVxuICAgICAgPyAoYXdhaXQgZGV2aWNlLmZldGNoQXBwSW5mbyhidW5kbGVJZCkpPy5DRkJ1bmRsZVZlcnNpb25cbiAgICAgIDogQlVORExFX1ZFUlNJT05fUEFUVEVSTi5leGVjKGF3YWl0IGRldmljZS5zaW1jdGwuYXBwSW5mbyhidW5kbGVJZCkpPy5bMV07XG4gICAgdGhpcy5sb2cuZGVidWcoYENGQnVuZGxlVmVyc2lvbiBmcm9tIGluc3RhbGxlZCBhcHAgaW5mbzogJHthcHBCdW5kbGVWZXJzaW9ufWApO1xuICAgIGlmICghYXBwQnVuZGxlVmVyc2lvbikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5zdGFsbDogdHJ1ZSxcbiAgICAgICAgc2tpcFVuaW5zdGFsbDogZmFsc2UsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGxldCBzaG91bGRVcGdyYWRlO1xuICAgIHRyeSB7XG4gICAgICBzaG91bGRVcGdyYWRlID0gdXRpbC5jb21wYXJlVmVyc2lvbnMoY2FuZGlkYXRlQnVuZGxlVmVyc2lvbiwgJz4nLCBhcHBCdW5kbGVWZXJzaW9uKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMubG9nLndhcm4oYEFwcCB2ZXJzaW9ucyBjb21wYXJpc29uIGlzIG5vdCBwb3NzaWJsZTogJHtlcnIubWVzc2FnZX1gKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluc3RhbGw6IHRydWUsXG4gICAgICAgIHNraXBVbmluc3RhbGw6IGZhbHNlLFxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHNob3VsZFVwZ3JhZGUpIHtcbiAgICAgIHRoaXMubG9nLmluZm8oXG4gICAgICAgIGBUaGUgaW5zdGFsbGVkIHZlcnNpb24gb2YgJHtidW5kbGVJZH0gaXMgbG93ZXIgdGhhbiB0aGUgY2FuZGlkYXRlIG9uZSBgICtcbiAgICAgICAgYCgke2NhbmRpZGF0ZUJ1bmRsZVZlcnNpb259ID4gJHthcHBCdW5kbGVWZXJzaW9ufSkuIFRoZSBhcHAgd2lsbCBiZSB1cGdyYWRlZC5gXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxvZy5pbmZvKFxuICAgICAgICBgVGhlIGNhbmRpZGF0ZSB2ZXJzaW9uIG9mICR7YnVuZGxlSWR9IGlzIGxvd2VyIHRoYW4gdGhlIGluc3RhbGxlZCBvbmUgYCArXG4gICAgICAgIGAoJHtjYW5kaWRhdGVCdW5kbGVWZXJzaW9ufSA8PSAke2FwcEJ1bmRsZVZlcnNpb259KS4gVGhlIGFwcCB3b24ndCBiZSByZWluc3RhbGxlZC5gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgaW5zdGFsbDogc2hvdWxkVXBncmFkZSxcbiAgICAgIHNraXBVbmluc3RhbGw6IHRydWUsXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIGluc3RhbGxBVVQgKCkge1xuICAgIGlmICh0aGlzLmlzU2FmYXJpKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhd2FpdCB2ZXJpZnlBcHBsaWNhdGlvblBsYXRmb3JtLmJpbmQodGhpcykodGhpcy5vcHRzLmFwcCwge1xuICAgICAgaXNTaW11bGF0b3I6IHRoaXMuaXNTaW11bGF0b3IoKSxcbiAgICAgIGlzVHZPUzogdGhpcy5pc1R2T1MoKSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHtpbnN0YWxsLCBza2lwVW5pbnN0YWxsfSA9IGF3YWl0IHRoaXMuY2hlY2tBdXRJbnN0YWxsYXRpb25TdGF0ZSgpO1xuICAgIGlmIChpbnN0YWxsKSB7XG4gICAgICBpZiAodGhpcy5pc1JlYWxEZXZpY2UoKSkge1xuICAgICAgICBhd2FpdCBpbnN0YWxsVG9SZWFsRGV2aWNlKHRoaXMub3B0cy5kZXZpY2UsIHRoaXMub3B0cy5hcHAsIHRoaXMub3B0cy5idW5kbGVJZCwge1xuICAgICAgICAgIHNraXBVbmluc3RhbGwsXG4gICAgICAgICAgdGltZW91dDogdGhpcy5vcHRzLmFwcFB1c2hUaW1lb3V0LFxuICAgICAgICAgIHN0cmF0ZWd5OiB0aGlzLm9wdHMuYXBwSW5zdGFsbFN0cmF0ZWd5LFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IGluc3RhbGxUb1NpbXVsYXRvcih0aGlzLm9wdHMuZGV2aWNlLCB0aGlzLm9wdHMuYXBwLCB0aGlzLm9wdHMuYnVuZGxlSWQsIHtcbiAgICAgICAgICBza2lwVW5pbnN0YWxsLFxuICAgICAgICAgIG5ld1NpbXVsYXRvcjogdGhpcy5saWZlY3ljbGVEYXRhLmNyZWF0ZVNpbSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAodXRpbC5oYXNWYWx1ZSh0aGlzLm9wdHMuaW9zSW5zdGFsbFBhdXNlKSkge1xuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXBwaXVtL2FwcGl1bS9pc3N1ZXMvNjg4OVxuICAgICAgICBjb25zdCBwYXVzZU1zID0gcGFyc2VJbnQodGhpcy5vcHRzLmlvc0luc3RhbGxQYXVzZSwgMTApO1xuICAgICAgICB0aGlzLmxvZy5kZWJ1ZyhgaW9zSW5zdGFsbFBhdXNlIHNldC4gUGF1c2luZyAke3BhdXNlTXN9IG1zIGJlZm9yZSBjb250aW51aW5nYCk7XG4gICAgICAgIGF3YWl0IEIuZGVsYXkocGF1c2VNcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0cy5vdGhlckFwcHMpIHtcbiAgICAgIGF3YWl0IHRoaXMuaW5zdGFsbE90aGVyQXBwcyh0aGlzLm9wdHMub3RoZXJBcHBzKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBpbnN0YWxsT3RoZXJBcHBzIChvdGhlckFwcHMpIHtcbiAgICBpZiAodGhpcy5pc1JlYWxEZXZpY2UoKSkge1xuICAgICAgdGhpcy5sb2cud2FybignQ2FwYWJpbGl0eSBvdGhlckFwcHMgaXMgb25seSBzdXBwb3J0ZWQgZm9yIFNpbXVsYXRvcnMnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGFwcHNMaXN0O1xuICAgIHRyeSB7XG4gICAgICBhcHBzTGlzdCA9IHRoaXMuaGVscGVycy5wYXJzZUNhcHNBcnJheShvdGhlckFwcHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMubG9nLmVycm9yQW5kVGhyb3coYENvdWxkIG5vdCBwYXJzZSBcIm90aGVyQXBwc1wiIGNhcGFiaWxpdHk6ICR7ZS5tZXNzYWdlfWApO1xuICAgIH1cbiAgICBpZiAoXy5pc0VtcHR5KGFwcHNMaXN0KSkge1xuICAgICAgdGhpcy5sb2cuaW5mbyhgR290IHplcm8gYXBwcyBmcm9tICdvdGhlckFwcHMnIGNhcGFiaWxpdHkgdmFsdWUuIERvaW5nIG5vdGhpbmdgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBhcHBQYXRocyA9IGF3YWl0IEIuYWxsKGFwcHNMaXN0Lm1hcChcbiAgICAgIChhcHApID0+IHRoaXMuaGVscGVycy5jb25maWd1cmVBcHAoYXBwLCAnLmFwcCcpXG4gICAgKSk7XG4gICAgZm9yIChjb25zdCBvdGhlckFwcCBvZiBhcHBQYXRocykge1xuICAgICAgYXdhaXQgaW5zdGFsbFRvU2ltdWxhdG9yKHRoaXMub3B0cy5kZXZpY2UsIG90aGVyQXBwLCB1bmRlZmluZWQsIHtcbiAgICAgICAgbmV3U2ltdWxhdG9yOiB0aGlzLmxpZmVjeWNsZURhdGEuY3JlYXRlU2ltLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2V0SW5pdGlhbE9yaWVudGF0aW9uIChvcmllbnRhdGlvbikge1xuICAgIGNvbnN0IGRzdE9yaWVudGF0aW9uID0gXy50b1VwcGVyKG9yaWVudGF0aW9uKTtcbiAgICBpZiAoIVNVUFBPUlRFRF9PUklFTkFUSU9OUy5pbmNsdWRlcyhkc3RPcmllbnRhdGlvbikpIHtcbiAgICAgIHRoaXMubG9nLmRlYnVnKFxuICAgICAgICBgVGhlIGluaXRpYWwgb3JpZW50YXRpb24gdmFsdWUgJyR7b3JpZW50YXRpb259JyBpcyB1bmtub3duLiBgICtcbiAgICAgICAgYE9ubHkgJHtKU09OLnN0cmluZ2lmeShTVVBQT1JURURfT1JJRU5BVElPTlMpfSBhcmUgc3VwcG9ydGVkLmBcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5sb2cuZGVidWcoYFNldHRpbmcgaW5pdGlhbCBvcmllbnRhdGlvbiB0byAnJHtkc3RPcmllbnRhdGlvbn0nYCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvb3JpZW50YXRpb24nLCAnUE9TVCcsIHtvcmllbnRhdGlvbjogZHN0T3JpZW50YXRpb259KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMubG9nLndhcm4oYFNldHRpbmcgaW5pdGlhbCBvcmllbnRhdGlvbiBmYWlsZWQgd2l0aDogJHtlcnIubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICBfZ2V0Q29tbWFuZFRpbWVvdXQgKGNtZE5hbWUpIHtcbiAgICBpZiAodGhpcy5vcHRzLmNvbW1hbmRUaW1lb3V0cykge1xuICAgICAgaWYgKGNtZE5hbWUgJiYgXy5oYXModGhpcy5vcHRzLmNvbW1hbmRUaW1lb3V0cywgY21kTmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0cy5jb21tYW5kVGltZW91dHNbY21kTmFtZV07XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5vcHRzLmNvbW1hbmRUaW1lb3V0c1tERUZBVUxUX1RJTUVPVVRfS0VZXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNlc3Npb24gY2FwYWJpbGl0aWVzIG1lcmdlZCB3aXRoIHdoYXQgV0RBIHJlcG9ydHNcbiAgICogVGhpcyBpcyBhIGxpYnJhcnkgY29tbWFuZCBidXQgbmVlZHMgdG8gY2FsbCAnc3VwZXInIHNvIGNhbid0IGJlIG9uXG4gICAqIGEgaGVscGVyIG9iamVjdFxuICAgKi9cbiAgYXN5bmMgZ2V0U2Vzc2lvbiAoKSB7XG4gICAgLy8gY2FsbCBzdXBlciB0byBnZXQgZXZlbnQgdGltaW5ncywgZXRjLi4uXG4gICAgY29uc3QgZHJpdmVyU2Vzc2lvbiA9IGF3YWl0IHN1cGVyLmdldFNlc3Npb24oKTtcbiAgICBpZiAoIXRoaXMud2RhQ2Fwcykge1xuICAgICAgdGhpcy53ZGFDYXBzID0gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoJy8nLCAnR0VUJyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2hvdWxkR2V0RGV2aWNlQ2FwcyA9IF8uaXNCb29sZWFuKHRoaXMub3B0cy5pbmNsdWRlRGV2aWNlQ2Fwc1RvU2Vzc2lvbkluZm8pXG4gICAgICA/IHRoaXMub3B0cy5pbmNsdWRlRGV2aWNlQ2Fwc1RvU2Vzc2lvbkluZm9cbiAgICAgIDogdHJ1ZTsgLy8gQmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICAgIGlmIChzaG91bGRHZXREZXZpY2VDYXBzICYmICF0aGlzLmRldmljZUNhcHMpIHtcbiAgICAgIGNvbnN0IHtzdGF0dXNCYXJTaXplLCBzY2FsZX0gPSBhd2FpdCB0aGlzLmdldFNjcmVlbkluZm8oKTtcbiAgICAgIHRoaXMuZGV2aWNlQ2FwcyA9IHtcbiAgICAgICAgcGl4ZWxSYXRpbzogc2NhbGUsXG4gICAgICAgIHN0YXRCYXJIZWlnaHQ6IHN0YXR1c0JhclNpemUuaGVpZ2h0LFxuICAgICAgICB2aWV3cG9ydFJlY3Q6IGF3YWl0IHRoaXMuZ2V0Vmlld3BvcnRSZWN0KCksXG4gICAgICB9O1xuICAgIH1cbiAgICB0aGlzLmxvZy5pbmZvKCdNZXJnaW5nIFdEQSBjYXBzIG92ZXIgQXBwaXVtIGNhcHMgZm9yIHNlc3Npb24gZGV0YWlsIHJlc3BvbnNlJyk7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe3VkaWQ6IHRoaXMub3B0cy51ZGlkfSwgZHJpdmVyU2Vzc2lvbixcbiAgICAgIHRoaXMud2RhQ2Fwcy5jYXBhYmlsaXRpZXMsIHRoaXMuZGV2aWNlQ2FwcyB8fCB7fSk7XG4gIH1cblxuICBhc3luYyByZXNldCAoKSB7XG4gICAgaWYgKHRoaXMub3B0cy5ub1Jlc2V0KSB7XG4gICAgICAvLyBUaGlzIGlzIHRvIG1ha2Ugc3VyZSByZXNldCBoYXBwZW5zIGV2ZW4gaWYgbm9SZXNldCBpcyBzZXQgdG8gdHJ1ZVxuICAgICAgbGV0IG9wdHMgPSBfLmNsb25lRGVlcCh0aGlzLm9wdHMpO1xuICAgICAgb3B0cy5ub1Jlc2V0ID0gZmFsc2U7XG4gICAgICBvcHRzLmZ1bGxSZXNldCA9IGZhbHNlO1xuICAgICAgY29uc3Qgc2h1dGRvd25IYW5kbGVyID0gdGhpcy5yZXNldE9uVW5leHBlY3RlZFNodXRkb3duO1xuICAgICAgdGhpcy5yZXNldE9uVW5leHBlY3RlZFNodXRkb3duID0gKCkgPT4ge307XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnJ1blJlc2V0KG9wdHMpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdGhpcy5yZXNldE9uVW5leHBlY3RlZFNodXRkb3duID0gc2h1dGRvd25IYW5kbGVyO1xuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCBzdXBlci5yZXNldCgpO1xuICB9XG59XG5cbk9iamVjdC5hc3NpZ24oWENVSVRlc3REcml2ZXIucHJvdG90eXBlLCBjb21tYW5kcyk7XG5cbmV4cG9ydCBkZWZhdWx0IFhDVUlUZXN0RHJpdmVyO1xuZXhwb3J0IHsgWENVSVRlc3REcml2ZXIgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFBQSxPQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFDLHNCQUFBLENBQUFILE9BQUE7QUFDQSxJQUFBSSxJQUFBLEdBQUFELHNCQUFBLENBQUFILE9BQUE7QUFDQSxJQUFBSyxxQkFBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sU0FBQSxHQUFBSCxzQkFBQSxDQUFBSCxPQUFBO0FBQ0EsSUFBQU8sVUFBQSxHQUFBUCxPQUFBO0FBQ0EsSUFBQVEsb0JBQUEsR0FBQVIsT0FBQTtBQUlBLElBQUFTLG1CQUFBLEdBQUFULE9BQUE7QUFDQSxJQUFBVSxTQUFBLEdBQUFWLE9BQUE7QUFDQSxJQUFBVyxTQUFBLEdBQUFYLE9BQUE7QUFLQSxJQUFBWSxZQUFBLEdBQUFaLE9BQUE7QUFHQSxJQUFBYSxNQUFBLEdBQUFWLHNCQUFBLENBQUFILE9BQUE7QUFDQSxJQUFBYyxNQUFBLEdBQUFkLE9BQUE7QUFRQSxJQUFBZSxxQkFBQSxHQUFBZixPQUFBO0FBSUEs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