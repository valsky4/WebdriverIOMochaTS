"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.DEFAULT_TIMEOUT_KEY = void 0;
exports.checkAppPresent = checkAppPresent;
exports.clearLogs = clearLogs;
exports.clearSystemFiles = clearSystemFiles;
exports.detectUdid = detectUdid;
exports.encodeBase64OrUpload = encodeBase64OrUpload;
exports.getAndCheckIosSdkVersion = getAndCheckIosSdkVersion;
exports.getAndCheckXcodeVersion = getAndCheckXcodeVersion;
exports.getDriverInfo = getDriverInfo;
exports.getPIDsListeningOnPort = getPIDsListeningOnPort;
exports.isLocalHost = isLocalHost;
exports.markSystemFilesForCleanup = markSystemFilesForCleanup;
exports.normalizeCommandTimeouts = normalizeCommandTimeouts;
exports.normalizePlatformVersion = normalizePlatformVersion;
exports.printUser = printUser;
exports.removeAllSessionWebSocketHandlers = removeAllSessionWebSocketHandlers;
exports.requireArgs = requireArgs;
exports.translateDeviceName = translateDeviceName;
require("source-map-support/register");
var _bluebird = _interopRequireDefault(require("bluebird"));
var _appiumIosDevice = require("appium-ios-device");
var _support = require("appium/support");
var _path = _interopRequireDefault(require("path"));
var _teen_process = require("teen_process");
var _appiumXcode = _interopRequireDefault(require("appium-xcode"));
var _lodash = _interopRequireDefault(require("lodash"));
var _logger = _interopRequireDefault(require("./logger"));
var _iosGenericSimulators = _interopRequireDefault(require("./ios-generic-simulators"));
var _url = _interopRequireDefault(require("url"));
var _os = _interopRequireDefault(require("os"));
var _semver = _interopRequireDefault(require("semver"));
var _driver = require("appium/driver");
const DEFAULT_TIMEOUT_KEY = 'default';
exports.DEFAULT_TIMEOUT_KEY = DEFAULT_TIMEOUT_KEY;
const XCTEST_LOG_FILES_PATTERNS = [/^Session-WebDriverAgentRunner.*\.log$/i, /^StandardOutputAndStandardError\.txt$/i];
const XCTEST_LOGS_CACHE_FOLDER_PREFIX = 'com.apple.dt.XCTest';
async function detectUdid() {
  _logger.default.debug('Auto-detecting real device udid...');
  const udids = await _appiumIosDevice.utilities.getConnectedDevices();
  if (_lodash.default.isEmpty(udids)) {
    throw new Error('No device is connected to the host');
  }
  const udid = _lodash.default.last(udids);
  if (udids.length > 1) {
    _logger.default.warn(`Multiple devices found: ${udids.join(', ')}`);
    _logger.default.warn(`Choosing '${udid}'. If this is wrong, manually set with 'udid' desired capability`);
  }
  _logger.default.debug(`Detected real device udid: '${udid}'`);
  return udid;
}
async function getAndCheckXcodeVersion() {
  let version;
  try {
    version = await _appiumXcode.default.getVersion(true);
  } catch (err) {
    _logger.default.debug(err);
    _logger.default.errorAndThrow(`Could not determine Xcode version: ${err.message}`);
  }
  if (version.versionFloat < 7.3) {
    _logger.default.errorAndThrow(`Xcode version '${version.versionString}'. Support for ` + `Xcode ${version.versionString} is not supported. ` + `Please upgrade to version 7.3 or higher`);
  }
  return version;
}
async function getAndCheckIosSdkVersion() {
  try {
    return await _appiumXcode.default.getMaxIOSSDK();
  } catch (err) {
    _logger.default.errorAndThrow(`Could not determine iOS SDK version: ${err.message}`);
  }
}
function getGenericSimulatorForIosVersion(platformVersion, deviceName) {
  const genericSimulators = _iosGenericSimulators.default[deviceName];
  if (!genericSimulators) {
    return null;
  }
  let result = null;
  const compareVersions = ([simOne], [simTwo]) => _support.util.compareVersions(simOne, '<', simTwo) ? -1 : 1;
  for (const [platformVersionFromList, iosSimulator] of genericSimulators.sort(compareVersions)) {
    if (_support.util.compareVersions(platformVersionFromList, '>', platformVersion)) {
      break;
    }
    result = iosSimulator;
  }
  return result;
}
function translateDeviceName(platformVersion, deviceName) {
  if (!deviceName) {
    return deviceName;
  }
  const deviceNameTranslated = getGenericSimulatorForIosVersion(platformVersion, `${deviceName}`.toLowerCase().trim());
  if (!deviceNameTranslated) {
    return deviceName;
  }
  _logger.default.debug(`Changing deviceName from '${deviceName}' to '${deviceNameTranslated}'`);
  return deviceNameTranslated;
}
async function clearLogs(locations) {
  _logger.default.debug('Clearing log files');
  const cleanupPromises = [];
  for (const location of locations) {
    if (!(await _support.fs.exists(location))) {
      continue;
    }
    cleanupPromises.push((async () => {
      let size;
      try {
        const {
          stdout
        } = await (0, _teen_process.exec)('du', ['-sh', location]);
        size = stdout.trim().split(/\s+/)[0];
      } catch (ign) {}
      try {
        _logger.default.debug(`Deleting '${location}'. ${size ? `Freeing ${size}.` : ''}`);
        await _support.fs.rimraf(location);
      } catch (err) {
        _logger.default.warn(`Unable to delete '${location}': ${err.message}`);
      }
    })());
  }
  if (!_lodash.default.isEmpty(cleanupPromises)) {
    await _bluebird.default.all(cleanupPromises);
  }
  _logger.default.debug('Finished clearing log files');
}
const derivedDataCleanupMarkers = new Map();
async function markSystemFilesForCleanup(wda) {
  if (!wda || !(await wda.retrieveDerivedDataPath())) {
    _logger.default.warn('No WebDriverAgent derived data available, so unable to mark system files for cleanup');
    return;
  }
  const logsRoot = _path.default.resolve(await wda.retrieveDerivedDataPath(), 'Logs');
  let markersCount = 0;
  if (derivedDataCleanupMarkers.has(logsRoot)) {
    markersCount = derivedDataCleanupMarkers.get(logsRoot);
  }
  derivedDataCleanupMarkers.set(logsRoot, ++markersCount);
}
async function clearSystemFiles(wda) {
  if (!wda || !(await wda.retrieveDerivedDataPath())) {
    _logger.default.warn('No WebDriverAgent derived data available, so unable to clear system files');
    return;
  }
  const logsRoot = _path.default.resolve(await wda.retrieveDerivedDataPath(), 'Logs');
  if (derivedDataCleanupMarkers.has(logsRoot)) {
    let markersCount = derivedDataCleanupMarkers.get(logsRoot);
    derivedDataCleanupMarkers.set(logsRoot, --markersCount);
    if (markersCount > 0) {
      _logger.default.info(`Not cleaning '${logsRoot}' folder, because the other session does not expect it to be cleaned`);
      return;
    }
  }
  derivedDataCleanupMarkers.set(logsRoot, 0);
  const globPattern = `${_os.default.tmpdir()}/${XCTEST_LOGS_CACHE_FOLDER_PREFIX}*/`;
  const dstFolders = await _support.fs.glob(globPattern);
  if (_lodash.default.isEmpty(dstFolders)) {
    _logger.default.debug(`Did not find the temporary XCTest logs root at '${globPattern}'`);
  } else {
    for (const dstFolder of dstFolders) {
      let scheduledFilesCount = 0;
      _bluebird.default.resolve(_support.fs.walkDir(dstFolder, true, (itemPath, isDir) => {
        if (isDir) {
          return;
        }
        const fileName = _path.default.basename(itemPath);
        if (!XCTEST_LOG_FILES_PATTERNS.some(p => p.test(fileName))) {
          return;
        }
        _support.fs.unlink(itemPath).catch(e => {
          _logger.default.info(e.message);
        });
        scheduledFilesCount++;
      })).finally(() => {
        if (scheduledFilesCount > 0) {
          _logger.default.info(`Scheduled ${scheduledFilesCount} temporary XCTest log ` + `${_support.util.pluralize('file', scheduledFilesCount)} for cleanup in '${dstFolder}'`);
        }
      }).catch(e => {
        _logger.default.info(e.message);
      });
    }
    _logger.default.debug(`Started background XCTest logs cleanup in '${dstFolders}'`);
  }
  if (await _support.fs.exists(logsRoot)) {
    _logger.default.info(`Cleaning test logs in '${logsRoot}' folder`);
    await clearLogs([logsRoot]);
    return;
  }
  _logger.default.info(`There is no ${logsRoot} folder, so not cleaning files`);
}
async function checkAppPresent(app) {
  _logger.default.debug(`Checking whether app '${app}' is actually present on file system`);
  if (!(await _support.fs.exists(app))) {
    _logger.default.errorAndThrow(`Could not find app at '${app}'`);
  }
  _logger.default.debug('App is present');
}
async function getDriverInfo() {
  const stat = await _support.fs.stat(_path.default.resolve(__dirname, '..'));
  const built = stat.mtime.getTime();
  const pkg = require(__filename.includes('build/lib/utils') ? '../../package.json' : '../package.json');
  const version = pkg.version;
  return {
    built,
    version
  };
}
function normalizeCommandTimeouts(value) {
  if (typeof value !== 'string') {
    return value;
  }
  let result = {};
  if (!isNaN(value)) {
    result[DEFAULT_TIMEOUT_KEY] = _lodash.default.toInteger(value);
    return result;
  }
  try {
    result = JSON.parse(value);
    if (!_lodash.default.isPlainObject(result)) {
      throw new Error();
    }
  } catch (err) {
    _logger.default.errorAndThrow(`"commandTimeouts" capability should be a valid JSON object. "${value}" was given instead`);
  }
  for (let [cmd, timeout] of _lodash.default.toPairs(result)) {
    if (!_lodash.default.isInteger(timeout) || timeout <= 0) {
      _logger.default.errorAndThrow(`The timeout for "${cmd}" should be a valid natural number of milliseconds. "${timeout}" was given instead`);
    }
  }
  return result;
}
async function printUser() {
  try {
    let {
      stdout
    } = await (0, _teen_process.exec)('whoami');
    _logger.default.debug(`Current user: '${stdout.trim()}'`);
  } catch (err) {
    _logger.default.debug(`Unable to get username running server: ${err.message}`);
  }
}
async function getPIDsListeningOnPort(port, filteringFunc = null) {
  const result = [];
  try {
    const {
      stdout
    } = await (0, _teen_process.exec)('lsof', ['-ti', `tcp:${port}`]);
    result.push(...stdout.trim().split(/\n+/));
  } catch (e) {
    return result;
  }
  if (!_lodash.default.isFunction(filteringFunc)) {
    return result;
  }
  return await _bluebird.default.filter(result, async x => {
    const {
      stdout
    } = await (0, _teen_process.exec)('ps', ['-p', x, '-o', 'command']);
    return await filteringFunc(stdout);
  });
}
async function encodeBase64OrUpload(localPath, remotePath = null, uploadOptions = {}) {
  if (!(await _support.fs.exists(localPath))) {
    _logger.default.errorAndThrow(`The file at '${localPath}' does not exist or is not accessible`);
  }
  if (_lodash.default.isEmpty(remotePath)) {
    const {
      size
    } = await _support.fs.stat(localPath);
    _logger.default.debug(`The size of the file is ${_support.util.toReadableSizeString(size)}`);
    return (await _support.util.toInMemoryBase64(localPath)).toString();
  }
  const {
    user,
    pass,
    method,
    headers,
    fileFieldName,
    formFields
  } = uploadOptions;
  const options = {
    method: method || 'PUT',
    headers,
    fileFieldName,
    formFields
  };
  if (user && pass) {
    options.auth = {
      user,
      pass
    };
  }
  await _support.net.uploadFile(localPath, remotePath, options);
  return '';
}
async function removeAllSessionWebSocketHandlers(server, sessionId) {
  if (!server || !_lodash.default.isFunction(server.getWebSocketHandlers)) {
    return;
  }
  const activeHandlers = await server.getWebSocketHandlers(sessionId);
  for (const pathname of _lodash.default.keys(activeHandlers)) {
    await server.removeWebSocketHandler(pathname);
  }
}
function isLocalHost(urlString) {
  try {
    const {
      hostname
    } = _url.default.parse(urlString);
    return ['localhost', '127.0.0.1', '::1', '::ffff:127.0.0.1'].includes(hostname);
  } catch (ign) {
    _logger.default.warn(`'${urlString}' cannot be parsed as a valid URL`);
  }
  return false;
}
function normalizePlatformVersion(originalVersion) {
  const normalizedVersion = _semver.default.coerce(originalVersion);
  if (!normalizedVersion) {
    throw new Error(`The platform version '${originalVersion}' should be a valid version number`);
  }
  return `${normalizedVersion.major}.${normalizedVersion.minor}`;
}
function requireArgs(argNames, opts = {}) {
  for (const argName of _lodash.default.isArray(argNames) ? argNames : [argNames]) {
    if (!_lodash.default.has(opts, argName)) {
      throw new _driver.errors.InvalidArgumentError(`'${argName}' argument must be provided`);
    }
  }
  return opts;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYmx1ZWJpcmQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9hcHBpdW1Jb3NEZXZpY2UiLCJfc3VwcG9ydCIsIl9wYXRoIiwiX3RlZW5fcHJvY2VzcyIsIl9hcHBpdW1YY29kZSIsIl9sb2Rhc2giLCJfbG9nZ2VyIiwiX2lvc0dlbmVyaWNTaW11bGF0b3JzIiwiX3VybCIsIl9vcyIsIl9zZW12ZXIiLCJfZHJpdmVyIiwiREVGQVVMVF9USU1FT1VUX0tFWSIsImV4cG9ydHMiLCJYQ1RFU1RfTE9HX0ZJTEVTX1BBVFRFUk5TIiwiWENURVNUX0xPR1NfQ0FDSEVfRk9MREVSX1BSRUZJWCIsImRldGVjdFVkaWQiLCJsb2ciLCJkZWJ1ZyIsInVkaWRzIiwidXRpbGl0aWVzIiwiZ2V0Q29ubmVjdGVkRGV2aWNlcyIsIl8iLCJpc0VtcHR5IiwiRXJyb3IiLCJ1ZGlkIiwibGFzdCIsImxlbmd0aCIsIndhcm4iLCJqb2luIiwiZ2V0QW5kQ2hlY2tYY29kZVZlcnNpb24iLCJ2ZXJzaW9uIiwieGNvZGUiLCJnZXRWZXJzaW9uIiwiZXJyIiwiZXJyb3JBbmRUaHJvdyIsIm1lc3NhZ2UiLCJ2ZXJzaW9uRmxvYXQiLCJ2ZXJzaW9uU3RyaW5nIiwiZ2V0QW5kQ2hlY2tJb3NTZGtWZXJzaW9uIiwiZ2V0TWF4SU9TU0RLIiwiZ2V0R2VuZXJpY1NpbXVsYXRvckZvcklvc1ZlcnNpb24iLCJwbGF0Zm9ybVZlcnNpb24iLCJkZXZpY2VOYW1lIiwiZ2VuZXJpY1NpbXVsYXRvcnMiLCJpb3NHZW5lcmljU2ltdWxhdG9ycyIsInJlc3VsdCIsImNvbXBhcmVWZXJzaW9ucyIsInNpbU9uZSIsInNpbVR3byIsInV0aWwiLCJwbGF0Zm9ybVZlcnNpb25Gcm9tTGlzdCIsImlvc1NpbXVsYXRvciIsInNvcnQiLCJ0cmFuc2xhdGVEZXZpY2VOYW1lIiwiZGV2aWNlTmFtZVRyYW5zbGF0ZWQiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJjbGVhckxvZ3MiLCJsb2NhdGlvbnMiLCJjbGVhbnVwUHJvbWlzZXMiLCJsb2NhdGlvbiIsImZzIiwiZXhpc3RzIiwicHVzaCIsInNpemUiLCJzdGRvdXQiLCJleGVjIiwic3BsaXQiLCJpZ24iLCJyaW1yYWYiLCJCIiwiYWxsIiwiZGVyaXZlZERhdGFDbGVhbnVwTWFya2VycyIsIk1hcCIsIm1hcmtTeXN0ZW1GaWxlc0ZvckNsZWFudXAiLCJ3ZGEiLCJyZXRyaWV2ZURlcml2ZWREYXRhUGF0aCIsImxvZ3NSb290IiwicGF0aCIsInJlc29sdmUiLCJtYXJrZXJzQ291bnQiLCJoYXMiLCJnZXQiLCJzZXQiLCJjbGVhclN5c3RlbUZpbGVzIiwiaW5mbyIsImdsb2JQYXR0ZXJuIiwib3MiLCJ0bXBkaXIiLCJkc3RGb2xkZXJzIiwiZ2xvYiIsImRzdEZvbGRlciIsInNjaGVkdWxlZEZpbGVzQ291bnQiLCJ3YWxrRGlyIiwiaXRlbVBhdGgiLCJpc0RpciIsImZpbGVOYW1lIiwiYmFzZW5hbWUiLCJzb21lIiwicCIsInRlc3QiLCJ1bmxpbmsiLCJjYXRjaCIsImUiLCJmaW5hbGx5IiwicGx1cmFsaXplIiwiY2hlY2tBcHBQcmVzZW50IiwiYXBwIiwiZ2V0RHJpdmVySW5mbyIsInN0YXQiLCJfX2Rpcm5hbWUiLCJidWlsdCIsIm10aW1lIiwiZ2V0VGltZSIsInBrZyIsIl9fZmlsZW5hbWUiLCJpbmNsdWRlcyIsIm5vcm1hbGl6ZUNvbW1hbmRUaW1lb3V0cyIsInZhbHVlIiwiaXNOYU4iLCJ0b0ludGVnZXIiLCJKU09OIiwicGFyc2UiLCJpc1BsYWluT2JqZWN0IiwiY21kIiwidGltZW91dCIsInRvUGFpcnMiLCJpc0ludGVnZXIiLCJwcmludFVzZXIiLCJnZXRQSURzTGlzdGVuaW5nT25Qb3J0IiwicG9ydCIsImZpbHRlcmluZ0Z1bmMiLCJpc0Z1bmN0aW9uIiwiZmlsdGVyIiwieCIsImVuY29kZUJhc2U2NE9yVXBsb2FkIiwibG9jYWxQYXRoIiwicmVtb3RlUGF0aCIsInVwbG9hZE9wdGlvbnMiLCJ0b1JlYWRhYmxlU2l6ZVN0cmluZyIsInRvSW5NZW1vcnlCYXNlNjQiLCJ0b1N0cmluZyIsInVzZXIiLCJwYXNzIiwibWV0aG9kIiwiaGVhZGVycyIsImZpbGVGaWVsZE5hbWUiLCJmb3JtRmllbGRzIiwib3B0aW9ucyIsImF1dGgiLCJuZXQiLCJ1cGxvYWRGaWxlIiwicmVtb3ZlQWxsU2Vzc2lvbldlYlNvY2tldEhhbmRsZXJzIiwic2VydmVyIiwic2Vzc2lvbklkIiwiZ2V0V2ViU29ja2V0SGFuZGxlcnMiLCJhY3RpdmVIYW5kbGVycyIsInBhdGhuYW1lIiwia2V5cyIsInJlbW92ZVdlYlNvY2tldEhhbmRsZXIiLCJpc0xvY2FsSG9zdCIsInVybFN0cmluZyIsImhvc3RuYW1lIiwidXJsIiwibm9ybWFsaXplUGxhdGZvcm1WZXJzaW9uIiwib3JpZ2luYWxWZXJzaW9uIiwibm9ybWFsaXplZFZlcnNpb24iLCJzZW12ZXIiLCJjb2VyY2UiLCJtYWpvciIsIm1pbm9yIiwicmVxdWlyZUFyZ3MiLCJhcmdOYW1lcyIsIm9wdHMiLCJhcmdOYW1lIiwiaXNBcnJheSIsImVycm9ycyIsIkludmFsaWRBcmd1bWVudEVycm9yIl0sInNvdXJjZXMiOlsiLi4vLi4vbGliL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IHV0aWxpdGllcyB9IGZyb20gJ2FwcGl1bS1pb3MtZGV2aWNlJztcbmltcG9ydCB7IGZzLCB1dGlsLCBuZXQgfSBmcm9tICdhcHBpdW0vc3VwcG9ydCc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IGV4ZWMgfSBmcm9tICd0ZWVuX3Byb2Nlc3MnO1xuaW1wb3J0IHhjb2RlIGZyb20gJ2FwcGl1bS14Y29kZSc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGxvZyBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQgaW9zR2VuZXJpY1NpbXVsYXRvcnMgZnJvbSAnLi9pb3MtZ2VuZXJpYy1zaW11bGF0b3JzJztcbmltcG9ydCB1cmwgZnJvbSAndXJsJztcbmltcG9ydCBvcyBmcm9tICdvcyc7XG5pbXBvcnQgc2VtdmVyIGZyb20gJ3NlbXZlcic7XG5pbXBvcnQgeyBlcnJvcnMgfSBmcm9tICdhcHBpdW0vZHJpdmVyJztcblxuXG5jb25zdCBERUZBVUxUX1RJTUVPVVRfS0VZID0gJ2RlZmF1bHQnO1xuY29uc3QgWENURVNUX0xPR19GSUxFU19QQVRURVJOUyA9IFtcbiAgL15TZXNzaW9uLVdlYkRyaXZlckFnZW50UnVubmVyLipcXC5sb2ckL2ksXG4gIC9eU3RhbmRhcmRPdXRwdXRBbmRTdGFuZGFyZEVycm9yXFwudHh0JC9pLFxuXTtcbmNvbnN0IFhDVEVTVF9MT0dTX0NBQ0hFX0ZPTERFUl9QUkVGSVggPSAnY29tLmFwcGxlLmR0LlhDVGVzdCc7XG5cblxuYXN5bmMgZnVuY3Rpb24gZGV0ZWN0VWRpZCAoKSB7XG4gIGxvZy5kZWJ1ZygnQXV0by1kZXRlY3RpbmcgcmVhbCBkZXZpY2UgdWRpZC4uLicpO1xuICBjb25zdCB1ZGlkcyA9IGF3YWl0IHV0aWxpdGllcy5nZXRDb25uZWN0ZWREZXZpY2VzKCk7XG4gIGlmIChfLmlzRW1wdHkodWRpZHMpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyBkZXZpY2UgaXMgY29ubmVjdGVkIHRvIHRoZSBob3N0Jyk7XG4gIH1cbiAgY29uc3QgdWRpZCA9IF8ubGFzdCh1ZGlkcyk7XG4gIGlmICh1ZGlkcy5sZW5ndGggPiAxKSB7XG4gICAgbG9nLndhcm4oYE11bHRpcGxlIGRldmljZXMgZm91bmQ6ICR7dWRpZHMuam9pbignLCAnKX1gKTtcbiAgICBsb2cud2FybihgQ2hvb3NpbmcgJyR7dWRpZH0nLiBJZiB0aGlzIGlzIHdyb25nLCBtYW51YWxseSBzZXQgd2l0aCAndWRpZCcgZGVzaXJlZCBjYXBhYmlsaXR5YCk7XG4gIH1cbiAgbG9nLmRlYnVnKGBEZXRlY3RlZCByZWFsIGRldmljZSB1ZGlkOiAnJHt1ZGlkfSdgKTtcbiAgcmV0dXJuIHVkaWQ7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEFuZENoZWNrWGNvZGVWZXJzaW9uICgpIHtcbiAgbGV0IHZlcnNpb247XG4gIHRyeSB7XG4gICAgdmVyc2lvbiA9IGF3YWl0IHhjb2RlLmdldFZlcnNpb24odHJ1ZSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZy5kZWJ1ZyhlcnIpO1xuICAgIGxvZy5lcnJvckFuZFRocm93KGBDb3VsZCBub3QgZGV0ZXJtaW5lIFhjb2RlIHZlcnNpb246ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gIH1cblxuICAvLyB3ZSBkbyBub3Qgc3VwcG9ydCBYY29kZXMgPCA3LjMsXG4gIGlmICh2ZXJzaW9uLnZlcnNpb25GbG9hdCA8IDcuMykge1xuICAgIGxvZy5lcnJvckFuZFRocm93KGBYY29kZSB2ZXJzaW9uICcke3ZlcnNpb24udmVyc2lvblN0cmluZ30nLiBTdXBwb3J0IGZvciBgICtcbiAgICAgICAgICAgICAgICAgICAgICBgWGNvZGUgJHt2ZXJzaW9uLnZlcnNpb25TdHJpbmd9IGlzIG5vdCBzdXBwb3J0ZWQuIGAgK1xuICAgICAgICAgICAgICAgICAgICAgIGBQbGVhc2UgdXBncmFkZSB0byB2ZXJzaW9uIDcuMyBvciBoaWdoZXJgKTtcbiAgfVxuICByZXR1cm4gdmVyc2lvbjtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0QW5kQ2hlY2tJb3NTZGtWZXJzaW9uICgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgeGNvZGUuZ2V0TWF4SU9TU0RLKCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZy5lcnJvckFuZFRocm93KGBDb3VsZCBub3QgZGV0ZXJtaW5lIGlPUyBTREsgdmVyc2lvbjogJHtlcnIubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCB0aGUgZ2VuZXJpYyBzaW11bGF0b3IgZm9yIGEgZ2l2ZW4gSU9TIHZlcnNpb24gYW5kIGRldmljZSB0eXBlIChpUGhvbmUsIGlQYWQpXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBwbGF0Zm9ybVZlcnNpb24gSU9TIHZlcnNpb24uIGUuZy4pIDEzLjBcbiAqIEBwYXJhbSB7c3RyaW5nfSBkZXZpY2VOYW1lIFR5cGUgb2YgSU9TIGRldmljZS4gQ2FuIGJlIGlQaG9uZSwgaVBhZCAocG9zc2libHkgbW9yZSBpbiB0aGUgZnV0dXJlKVxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmc/fSBHZW5lcmljIGlQaG9uZSBvciBpUGFkIHNpbXVsYXRvciAoaWYgYXBwbGljYWJsZSlcbiAqL1xuZnVuY3Rpb24gZ2V0R2VuZXJpY1NpbXVsYXRvckZvcklvc1ZlcnNpb24gKHBsYXRmb3JtVmVyc2lvbiwgZGV2aWNlTmFtZSkge1xuICBjb25zdCBnZW5lcmljU2ltdWxhdG9ycyA9IGlvc0dlbmVyaWNTaW11bGF0b3JzW2RldmljZU5hbWVdO1xuICBpZiAoIWdlbmVyaWNTaW11bGF0b3JzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBGaW5kIHRoZSBoaWdoZXN0IGlPUyB2ZXJzaW9uIGluIHRoZSBsaXN0IHRoYXQgaXMgYmVsb3cgdGhlIHByb3ZpZGVkIHZlcnNpb25cbiAgbGV0IHJlc3VsdCA9IG51bGw7XG4gIGNvbnN0IGNvbXBhcmVWZXJzaW9ucyA9IChbc2ltT25lXSwgW3NpbVR3b10pID0+IHV0aWwuY29tcGFyZVZlcnNpb25zKHNpbU9uZSwgJzwnLCBzaW1Ud28pID8gLTEgOiAxO1xuICBmb3IgKGNvbnN0IFtwbGF0Zm9ybVZlcnNpb25Gcm9tTGlzdCwgaW9zU2ltdWxhdG9yXSBvZiBnZW5lcmljU2ltdWxhdG9ycy5zb3J0KGNvbXBhcmVWZXJzaW9ucykpIHtcbiAgICBpZiAodXRpbC5jb21wYXJlVmVyc2lvbnMocGxhdGZvcm1WZXJzaW9uRnJvbUxpc3QsICc+JywgcGxhdGZvcm1WZXJzaW9uKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJlc3VsdCA9IGlvc1NpbXVsYXRvcjtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiB0cmFuc2xhdGVEZXZpY2VOYW1lIChwbGF0Zm9ybVZlcnNpb24sIGRldmljZU5hbWUpIHtcbiAgaWYgKCFkZXZpY2VOYW1lKSB7XG4gICAgcmV0dXJuIGRldmljZU5hbWU7XG4gIH1cbiAgY29uc3QgZGV2aWNlTmFtZVRyYW5zbGF0ZWQgPSBnZXRHZW5lcmljU2ltdWxhdG9yRm9ySW9zVmVyc2lvbihwbGF0Zm9ybVZlcnNpb24sIGAke2RldmljZU5hbWV9YC50b0xvd2VyQ2FzZSgpLnRyaW0oKSk7XG4gIGlmICghZGV2aWNlTmFtZVRyYW5zbGF0ZWQpIHtcbiAgICByZXR1cm4gZGV2aWNlTmFtZTtcbiAgfVxuXG4gIGxvZy5kZWJ1ZyhgQ2hhbmdpbmcgZGV2aWNlTmFtZSBmcm9tICcke2RldmljZU5hbWV9JyB0byAnJHtkZXZpY2VOYW1lVHJhbnNsYXRlZH0nYCk7XG4gIHJldHVybiBkZXZpY2VOYW1lVHJhbnNsYXRlZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY2xlYXJMb2dzIChsb2NhdGlvbnMpIHtcbiAgbG9nLmRlYnVnKCdDbGVhcmluZyBsb2cgZmlsZXMnKTtcbiAgY29uc3QgY2xlYW51cFByb21pc2VzID0gW107XG4gIGZvciAoY29uc3QgbG9jYXRpb24gb2YgbG9jYXRpb25zKSB7XG4gICAgaWYgKCFhd2FpdCBmcy5leGlzdHMobG9jYXRpb24pKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjbGVhbnVwUHJvbWlzZXMucHVzaCgoYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IHNpemU7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7c3Rkb3V0fSA9IGF3YWl0IGV4ZWMoJ2R1JywgWyctc2gnLCBsb2NhdGlvbl0pO1xuICAgICAgICBzaXplID0gc3Rkb3V0LnRyaW0oKS5zcGxpdCgvXFxzKy8pWzBdO1xuICAgICAgfSBjYXRjaCAoaWduKSB7fVxuICAgICAgdHJ5IHtcbiAgICAgICAgbG9nLmRlYnVnKGBEZWxldGluZyAnJHtsb2NhdGlvbn0nLiAke3NpemUgPyBgRnJlZWluZyAke3NpemV9LmAgOiAnJ31gKTtcbiAgICAgICAgYXdhaXQgZnMucmltcmFmKGxvY2F0aW9uKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBsb2cud2FybihgVW5hYmxlIHRvIGRlbGV0ZSAnJHtsb2NhdGlvbn0nOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgIH0pKCkpO1xuICB9XG4gIGlmICghXy5pc0VtcHR5KGNsZWFudXBQcm9taXNlcykpIHtcbiAgICBhd2FpdCBCLmFsbChjbGVhbnVwUHJvbWlzZXMpO1xuICB9XG4gIGxvZy5kZWJ1ZygnRmluaXNoZWQgY2xlYXJpbmcgbG9nIGZpbGVzJyk7XG59XG5cbi8vIFRoaXMgbWFwIGNvbnRhaW5zIGRlcml2ZWQgZGF0YSBsb2dzIGZvbGRlcnMgYXMga2V5c1xuLy8gYW5kIHZhbHVlcyBhcmUgdGhlIGNvdW50IG9mIHRpbWVzIHRoZSBwYXJ0aWN1bGFyXG4vLyBmb2xkZXIgaGFzIGJlZW4gc2NoZWR1bGVkIGZvciByZW1vdmFsXG5jb25zdCBkZXJpdmVkRGF0YUNsZWFudXBNYXJrZXJzID0gbmV3IE1hcCgpO1xuXG5hc3luYyBmdW5jdGlvbiBtYXJrU3lzdGVtRmlsZXNGb3JDbGVhbnVwICh3ZGEpIHtcbiAgaWYgKCF3ZGEgfHwgIWF3YWl0IHdkYS5yZXRyaWV2ZURlcml2ZWREYXRhUGF0aCgpKSB7XG4gICAgbG9nLndhcm4oJ05vIFdlYkRyaXZlckFnZW50IGRlcml2ZWQgZGF0YSBhdmFpbGFibGUsIHNvIHVuYWJsZSB0byBtYXJrIHN5c3RlbSBmaWxlcyBmb3IgY2xlYW51cCcpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGxvZ3NSb290ID0gcGF0aC5yZXNvbHZlKGF3YWl0IHdkYS5yZXRyaWV2ZURlcml2ZWREYXRhUGF0aCgpLCAnTG9ncycpO1xuICBsZXQgbWFya2Vyc0NvdW50ID0gMDtcbiAgaWYgKGRlcml2ZWREYXRhQ2xlYW51cE1hcmtlcnMuaGFzKGxvZ3NSb290KSkge1xuICAgIG1hcmtlcnNDb3VudCA9IGRlcml2ZWREYXRhQ2xlYW51cE1hcmtlcnMuZ2V0KGxvZ3NSb290KTtcbiAgfVxuICBkZXJpdmVkRGF0YUNsZWFudXBNYXJrZXJzLnNldChsb2dzUm9vdCwgKyttYXJrZXJzQ291bnQpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjbGVhclN5c3RlbUZpbGVzICh3ZGEpIHtcbiAgLy8gb25seSB3YW50IHRvIGNsZWFyIHRoZSBzeXN0ZW0gZmlsZXMgZm9yIHRoZSBwYXJ0aWN1bGFyIFdEQSB4Y29kZSBydW5cbiAgaWYgKCF3ZGEgfHwgIWF3YWl0IHdkYS5yZXRyaWV2ZURlcml2ZWREYXRhUGF0aCgpKSB7XG4gICAgbG9nLndhcm4oJ05vIFdlYkRyaXZlckFnZW50IGRlcml2ZWQgZGF0YSBhdmFpbGFibGUsIHNvIHVuYWJsZSB0byBjbGVhciBzeXN0ZW0gZmlsZXMnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBsb2dzUm9vdCA9IHBhdGgucmVzb2x2ZShhd2FpdCB3ZGEucmV0cmlldmVEZXJpdmVkRGF0YVBhdGgoKSwgJ0xvZ3MnKTtcbiAgaWYgKGRlcml2ZWREYXRhQ2xlYW51cE1hcmtlcnMuaGFzKGxvZ3NSb290KSkge1xuICAgIGxldCBtYXJrZXJzQ291bnQgPSBkZXJpdmVkRGF0YUNsZWFudXBNYXJrZXJzLmdldChsb2dzUm9vdCk7XG4gICAgZGVyaXZlZERhdGFDbGVhbnVwTWFya2Vycy5zZXQobG9nc1Jvb3QsIC0tbWFya2Vyc0NvdW50KTtcbiAgICBpZiAobWFya2Vyc0NvdW50ID4gMCkge1xuICAgICAgbG9nLmluZm8oYE5vdCBjbGVhbmluZyAnJHtsb2dzUm9vdH0nIGZvbGRlciwgYmVjYXVzZSB0aGUgb3RoZXIgc2Vzc2lvbiBkb2VzIG5vdCBleHBlY3QgaXQgdG8gYmUgY2xlYW5lZGApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBkZXJpdmVkRGF0YUNsZWFudXBNYXJrZXJzLnNldChsb2dzUm9vdCwgMCk7XG5cbiAgLy8gQ2xlYW5pbmcgdXAgYmlnIHRlbXBvcmFyeSBmaWxlcyBjcmVhdGVkIGJ5IFhDVGVzdDogaHR0cHM6Ly9naXRodWIuY29tL2FwcGl1bS9hcHBpdW0vaXNzdWVzLzk0MTBcbiAgY29uc3QgZ2xvYlBhdHRlcm4gPSBgJHtvcy50bXBkaXIoKX0vJHtYQ1RFU1RfTE9HU19DQUNIRV9GT0xERVJfUFJFRklYfSovYDtcbiAgY29uc3QgZHN0Rm9sZGVycyA9IGF3YWl0IGZzLmdsb2IoZ2xvYlBhdHRlcm4pO1xuICBpZiAoXy5pc0VtcHR5KGRzdEZvbGRlcnMpKSB7XG4gICAgbG9nLmRlYnVnKGBEaWQgbm90IGZpbmQgdGhlIHRlbXBvcmFyeSBYQ1Rlc3QgbG9ncyByb290IGF0ICcke2dsb2JQYXR0ZXJufSdgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBwZXJmb3JtIHRoZSBjbGVhbnVwIGFzeW5jaHJvbm91c2x5XG4gICAgZm9yIChjb25zdCBkc3RGb2xkZXIgb2YgZHN0Rm9sZGVycykge1xuICAgICAgbGV0IHNjaGVkdWxlZEZpbGVzQ291bnQgPSAwO1xuICAgICAgQi5yZXNvbHZlKGZzLndhbGtEaXIoZHN0Rm9sZGVyLCB0cnVlLCAoaXRlbVBhdGgsIGlzRGlyKSA9PiB7XG4gICAgICAgIGlmIChpc0Rpcikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IHBhdGguYmFzZW5hbWUoaXRlbVBhdGgpO1xuICAgICAgICBpZiAoIVhDVEVTVF9MT0dfRklMRVNfUEFUVEVSTlMuc29tZSgocCkgPT4gcC50ZXN0KGZpbGVOYW1lKSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkZWxldGUgdGhlIGZpbGUgYXN5bmNocm9ub3VzbHlcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByb21pc2UvcHJlZmVyLWF3YWl0LXRvLXRoZW5cbiAgICAgICAgZnMudW5saW5rKGl0ZW1QYXRoKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgIGxvZy5pbmZvKGUubWVzc2FnZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBzY2hlZHVsZWRGaWxlc0NvdW50Kys7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcm9taXNlL3ByZWZlci1hd2FpdC10by10aGVuXG4gICAgICB9KSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGlmIChzY2hlZHVsZWRGaWxlc0NvdW50ID4gMCkge1xuICAgICAgICAgIGxvZy5pbmZvKGBTY2hlZHVsZWQgJHtzY2hlZHVsZWRGaWxlc0NvdW50fSB0ZW1wb3JhcnkgWENUZXN0IGxvZyBgICtcbiAgICAgICAgICAgIGAke3V0aWwucGx1cmFsaXplKCdmaWxlJywgc2NoZWR1bGVkRmlsZXNDb3VudCl9IGZvciBjbGVhbnVwIGluICcke2RzdEZvbGRlcn0nYCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByb21pc2UvcHJlZmVyLWF3YWl0LXRvLXRoZW5cbiAgICAgIH0pLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGxvZy5pbmZvKGUubWVzc2FnZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgbG9nLmRlYnVnKGBTdGFydGVkIGJhY2tncm91bmQgWENUZXN0IGxvZ3MgY2xlYW51cCBpbiAnJHtkc3RGb2xkZXJzfSdgKTtcbiAgfVxuXG4gIGlmIChhd2FpdCBmcy5leGlzdHMobG9nc1Jvb3QpKSB7XG4gICAgbG9nLmluZm8oYENsZWFuaW5nIHRlc3QgbG9ncyBpbiAnJHtsb2dzUm9vdH0nIGZvbGRlcmApO1xuICAgIGF3YWl0IGNsZWFyTG9ncyhbbG9nc1Jvb3RdKTtcbiAgICByZXR1cm47XG4gIH1cbiAgbG9nLmluZm8oYFRoZXJlIGlzIG5vICR7bG9nc1Jvb3R9IGZvbGRlciwgc28gbm90IGNsZWFuaW5nIGZpbGVzYCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNoZWNrQXBwUHJlc2VudCAoYXBwKSB7XG4gIGxvZy5kZWJ1ZyhgQ2hlY2tpbmcgd2hldGhlciBhcHAgJyR7YXBwfScgaXMgYWN0dWFsbHkgcHJlc2VudCBvbiBmaWxlIHN5c3RlbWApO1xuICBpZiAoIShhd2FpdCBmcy5leGlzdHMoYXBwKSkpIHtcbiAgICBsb2cuZXJyb3JBbmRUaHJvdyhgQ291bGQgbm90IGZpbmQgYXBwIGF0ICcke2FwcH0nYCk7XG4gIH1cbiAgbG9nLmRlYnVnKCdBcHAgaXMgcHJlc2VudCcpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXREcml2ZXJJbmZvICgpIHtcbiAgY29uc3Qgc3RhdCA9IGF3YWl0IGZzLnN0YXQocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4uJykpO1xuICBjb25zdCBidWlsdCA9IHN0YXQubXRpbWUuZ2V0VGltZSgpO1xuXG4gIC8vIGdldCB0aGUgcGFja2FnZS5qc29uIGFuZCB0aGUgdmVyc2lvbiBmcm9tIGl0XG4gIGNvbnN0IHBrZyA9IHJlcXVpcmUoX19maWxlbmFtZS5pbmNsdWRlcygnYnVpbGQvbGliL3V0aWxzJykgPyAnLi4vLi4vcGFja2FnZS5qc29uJyA6ICcuLi9wYWNrYWdlLmpzb24nKTtcbiAgY29uc3QgdmVyc2lvbiA9IHBrZy52ZXJzaW9uO1xuXG4gIHJldHVybiB7XG4gICAgYnVpbHQsXG4gICAgdmVyc2lvbixcbiAgfTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplQ29tbWFuZFRpbWVvdXRzICh2YWx1ZSkge1xuICAvLyBUaGUgdmFsdWUgaXMgbm9ybWFsaXplZCBhbHJlYWR5XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgbGV0IHJlc3VsdCA9IHt9O1xuICAvLyBVc2UgYXMgZGVmYXVsdCB0aW1lb3V0IGZvciBhbGwgY29tbWFuZHMgaWYgYSBzaW5nbGUgaW50ZWdlciB2YWx1ZSBpcyBwcm92aWRlZFxuICBpZiAoIWlzTmFOKHZhbHVlKSkge1xuICAgIHJlc3VsdFtERUZBVUxUX1RJTUVPVVRfS0VZXSA9IF8udG9JbnRlZ2VyKHZhbHVlKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gSlNPTiBvYmplY3QgaGFzIGJlZW4gcHJvdmlkZWQuIExldCdzIHBhcnNlIGl0XG4gIHRyeSB7XG4gICAgcmVzdWx0ID0gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgaWYgKCFfLmlzUGxhaW5PYmplY3QocmVzdWx0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2cuZXJyb3JBbmRUaHJvdyhgXCJjb21tYW5kVGltZW91dHNcIiBjYXBhYmlsaXR5IHNob3VsZCBiZSBhIHZhbGlkIEpTT04gb2JqZWN0LiBcIiR7dmFsdWV9XCIgd2FzIGdpdmVuIGluc3RlYWRgKTtcbiAgfVxuICBmb3IgKGxldCBbY21kLCB0aW1lb3V0XSBvZiBfLnRvUGFpcnMocmVzdWx0KSkge1xuICAgIGlmICghXy5pc0ludGVnZXIodGltZW91dCkgfHwgdGltZW91dCA8PSAwKSB7XG4gICAgICBsb2cuZXJyb3JBbmRUaHJvdyhgVGhlIHRpbWVvdXQgZm9yIFwiJHtjbWR9XCIgc2hvdWxkIGJlIGEgdmFsaWQgbmF0dXJhbCBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLiBcIiR7dGltZW91dH1cIiB3YXMgZ2l2ZW4gaW5zdGVhZGApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5hc3luYyBmdW5jdGlvbiBwcmludFVzZXIgKCkge1xuICB0cnkge1xuICAgIGxldCB7c3Rkb3V0fSA9IGF3YWl0IGV4ZWMoJ3dob2FtaScpO1xuICAgIGxvZy5kZWJ1ZyhgQ3VycmVudCB1c2VyOiAnJHtzdGRvdXQudHJpbSgpfSdgKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nLmRlYnVnKGBVbmFibGUgdG8gZ2V0IHVzZXJuYW1lIHJ1bm5pbmcgc2VydmVyOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8qKlxuICogR2V0IHRoZSBJRHMgb2YgcHJvY2Vzc2VzIGxpc3RlbmluZyBvbiB0aGUgcGFydGljdWxhciBzeXN0ZW0gcG9ydC5cbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gYXBwbHkgYWRkaXRpb25hbCBmaWx0ZXJpbmcgYmFzZWQgb24gdGhlXG4gKiBwcm9jZXNzIGNvbW1hbmQgbGluZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHBvcnQgLSBUaGUgcG9ydCBudW1iZXIuXG4gKiBAcGFyYW0gez9GdW5jdGlvbn0gZmlsdGVyaW5nRnVuYyAtIE9wdGlvbmFsIGxhbWJkYSBmdW5jdGlvbiwgd2hpY2hcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXMgY29tbWFuZCBsaW5lIHN0cmluZyBvZiB0aGUgcGFydGljdWxhciBwcm9jZXNzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZyBvbiBnaXZlbiBwb3J0LCBhbmQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVpdGhlciB0cnVlIG9yIGZhbHNlIHRvIGluY2x1ZGUvZXhjbHVkZSB0aGUgY29ycmVzcG9uZGluZyBQSURcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSB0aGUgcmVzdWx0aW5nIGFycmF5LlxuICogQHJldHVybnMge0FycmF5PHN0cmluZz59IC0gdGhlIGxpc3Qgb2YgbWF0Y2hlZCBwcm9jZXNzIGlkcy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0UElEc0xpc3RlbmluZ09uUG9ydCAocG9ydCwgZmlsdGVyaW5nRnVuYyA9IG51bGwpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIHRyeSB7XG4gICAgLy8gVGhpcyBvbmx5IHdvcmtzIHNpbmNlIE1hYyBPUyBYIEVsIENhcGl0YW5cbiAgICBjb25zdCB7c3Rkb3V0fSA9IGF3YWl0IGV4ZWMoJ2xzb2YnLCBbJy10aScsIGB0Y3A6JHtwb3J0fWBdKTtcbiAgICByZXN1bHQucHVzaCguLi4oc3Rkb3V0LnRyaW0oKS5zcGxpdCgvXFxuKy8pKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgaWYgKCFfLmlzRnVuY3Rpb24oZmlsdGVyaW5nRnVuYykpIHtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIHJldHVybiBhd2FpdCBCLmZpbHRlcihyZXN1bHQsIGFzeW5jICh4KSA9PiB7XG4gICAgY29uc3Qge3N0ZG91dH0gPSBhd2FpdCBleGVjKCdwcycsIFsnLXAnLCB4LCAnLW8nLCAnY29tbWFuZCddKTtcbiAgICByZXR1cm4gYXdhaXQgZmlsdGVyaW5nRnVuYyhzdGRvdXQpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBVcGxvYWRPcHRpb25zXG4gKlxuICogQHByb3BlcnR5IHs/c3RyaW5nfSB1c2VyIC0gVGhlIG5hbWUgb2YgdGhlIHVzZXIgZm9yIHRoZSByZW1vdGUgYXV0aGVudGljYXRpb24uIE9ubHkgd29ya3MgaWYgYHJlbW90ZVBhdGhgIGlzIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHs/c3RyaW5nfSBwYXNzIC0gVGhlIHBhc3N3b3JkIGZvciB0aGUgcmVtb3RlIGF1dGhlbnRpY2F0aW9uLiBPbmx5IHdvcmtzIGlmIGByZW1vdGVQYXRoYCBpcyBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7P3N0cmluZ30gbWV0aG9kIC0gVGhlIGh0dHAgbXVsdGlwYXJ0IHVwbG9hZCBtZXRob2QgbmFtZS4gVGhlICdQVVQnIG9uZSBpcyB1c2VkIGJ5IGRlZmF1bHQuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9ubHkgd29ya3MgaWYgYHJlbW90ZVBhdGhgIGlzIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHs/T2JqZWN0fSBoZWFkZXJzIC0gQWRkaXRpb25hbCBoZWFkZXJzIG1hcHBpbmcgZm9yIG11bHRpcGFydCBodHRwKHMpIHVwbG9hZHNcbiAqIEBwcm9wZXJ0eSB7P3N0cmluZ30gZmlsZUZpZWxkTmFtZSBbZmlsZV0gLSBUaGUgbmFtZSBvZiB0aGUgZm9ybSBmaWVsZCwgd2hlcmUgdGhlIGZpbGUgY29udGVudCBCTE9CIHNob3VsZCBiZSBzdG9yZWQgZm9yXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHR0cChzKSB1cGxvYWRzXG4gKiBAcHJvcGVydHkgez9PYmplY3R8QXJyYXk8UGFpcj59IGZvcm1GaWVsZHMgLSBBZGRpdGlvbmFsIGZvcm0gZmllbGRzIGZvciBtdWx0aXBhcnQgaHR0cChzKSB1cGxvYWRzXG4gKi9cblxuXG4vKipcbiAqIEVuY29kZXMgdGhlIGdpdmVuIGxvY2FsIGZpbGUgdG8gYmFzZTY0IGFuZCByZXR1cm5zIHRoZSByZXN1bHRpbmcgc3RyaW5nXG4gKiBvciB1cGxvYWRzIGl0IHRvIGEgcmVtb3RlIHNlcnZlciB1c2luZyBodHRwL2h0dHBzIG9yIGZ0cCBwcm90b2NvbHNcbiAqIGlmIGByZW1vdGVQYXRoYCBpcyBzZXRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9jYWxQYXRoIC0gVGhlIHBhdGggdG8gYW4gZXhpc3RpbmcgbG9jYWwgZmlsZVxuICogQHBhcmFtIHs/c3RyaW5nfSByZW1vdGVQYXRoIC0gVGhlIHBhdGggdG8gdGhlIHJlbW90ZSBsb2NhdGlvbiwgd2hlcmVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMgZmlsZSBzaG91bGQgYmUgdXBsb2FkZWRcbiAqIEBwYXJhbSB7P1VwbG9hZE9wdGlvbnN9IHVwbG9hZE9wdGlvbnMgLSBTZXQgb2YgdXBsb2FkIG9wdGlvbnNcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEVpdGhlciBhbiBlbXB0eSBzdHJpbmcgaWYgdGhlIHVwbG9hZCB3YXMgc3VjY2Vzc2Z1bCBvclxuICogYmFzZTY0LWVuY29kZWQgZmlsZSByZXByZXNlbnRhdGlvbiBpZiBgcmVtb3RlUGF0aGAgaXMgZmFsc3lcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZW5jb2RlQmFzZTY0T3JVcGxvYWQgKGxvY2FsUGF0aCwgcmVtb3RlUGF0aCA9IG51bGwsIHVwbG9hZE9wdGlvbnMgPSB7fSkge1xuICBpZiAoIWF3YWl0IGZzLmV4aXN0cyhsb2NhbFBhdGgpKSB7XG4gICAgbG9nLmVycm9yQW5kVGhyb3coYFRoZSBmaWxlIGF0ICcke2xvY2FsUGF0aH0nIGRvZXMgbm90IGV4aXN0IG9yIGlzIG5vdCBhY2Nlc3NpYmxlYCk7XG4gIH1cblxuICBpZiAoXy5pc0VtcHR5KHJlbW90ZVBhdGgpKSB7XG4gICAgY29uc3Qge3NpemV9ID0gYXdhaXQgZnMuc3RhdChsb2NhbFBhdGgpO1xuICAgIGxvZy5kZWJ1ZyhgVGhlIHNpemUgb2YgdGhlIGZpbGUgaXMgJHt1dGlsLnRvUmVhZGFibGVTaXplU3RyaW5nKHNpemUpfWApO1xuICAgIHJldHVybiAoYXdhaXQgdXRpbC50b0luTWVtb3J5QmFzZTY0KGxvY2FsUGF0aCkpLnRvU3RyaW5nKCk7XG4gIH1cblxuICBjb25zdCB7dXNlciwgcGFzcywgbWV0aG9kLCBoZWFkZXJzLCBmaWxlRmllbGROYW1lLCBmb3JtRmllbGRzfSA9IHVwbG9hZE9wdGlvbnM7XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgbWV0aG9kOiBtZXRob2QgfHwgJ1BVVCcsXG4gICAgaGVhZGVycyxcbiAgICBmaWxlRmllbGROYW1lLFxuICAgIGZvcm1GaWVsZHMsXG4gIH07XG4gIGlmICh1c2VyICYmIHBhc3MpIHtcbiAgICBvcHRpb25zLmF1dGggPSB7dXNlciwgcGFzc307XG4gIH1cbiAgYXdhaXQgbmV0LnVwbG9hZEZpbGUobG9jYWxQYXRoLCByZW1vdGVQYXRoLCBvcHRpb25zKTtcbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIFN0b3BzIGFuZCByZW1vdmVzIGFsbCB3ZWIgc29ja2V0IGhhbmRsZXJzIHRoYXQgYXJlIGxpc3RlbmluZ1xuICogaW4gc2NvcGUgb2YgdGhlIGN1cnJlY3Qgc2Vzc2lvbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc2VydmVyIC0gVGhlIGluc3RhbmNlIG9mIE5vZGVKcyBIVFRQIHNlcnZlcixcbiAqIHdoaWNoIGhvc3RzIEFwcGl1bVxuICogQHBhcmFtIHtzdHJpbmd9IHNlc3Npb25JZCAtIFRoZSBpZCBvZiB0aGUgY3VycmVudCBzZXNzaW9uXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHJlbW92ZUFsbFNlc3Npb25XZWJTb2NrZXRIYW5kbGVycyAoc2VydmVyLCBzZXNzaW9uSWQpIHtcbiAgaWYgKCFzZXJ2ZXIgfHwgIV8uaXNGdW5jdGlvbihzZXJ2ZXIuZ2V0V2ViU29ja2V0SGFuZGxlcnMpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgYWN0aXZlSGFuZGxlcnMgPSBhd2FpdCBzZXJ2ZXIuZ2V0V2ViU29ja2V0SGFuZGxlcnMoc2Vzc2lvbklkKTtcbiAgZm9yIChjb25zdCBwYXRobmFtZSBvZiBfLmtleXMoYWN0aXZlSGFuZGxlcnMpKSB7XG4gICAgYXdhaXQgc2VydmVyLnJlbW92ZVdlYlNvY2tldEhhbmRsZXIocGF0aG5hbWUpO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSB1cmxTdHJpbmcgaXMgbG9jYWxob3N0XG4gKiBAcGFyYW0gez9zdHJpbmd9IHVybFN0cmluZ1xuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybiB0cnVlIGlmIHRoZSB1cmxTdHJpbmcgaXMgbG9jYWxob3N0XG4gKi9cbmZ1bmN0aW9uIGlzTG9jYWxIb3N0ICh1cmxTdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7aG9zdG5hbWV9ID0gdXJsLnBhcnNlKHVybFN0cmluZyk7XG4gICAgcmV0dXJuIFsnbG9jYWxob3N0JywgJzEyNy4wLjAuMScsICc6OjEnLCAnOjpmZmZmOjEyNy4wLjAuMSddLmluY2x1ZGVzKGhvc3RuYW1lKTtcbiAgfSBjYXRjaCAoaWduKSB7XG4gICAgbG9nLndhcm4oYCcke3VybFN0cmluZ30nIGNhbm5vdCBiZSBwYXJzZWQgYXMgYSB2YWxpZCBVUkxgKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogTm9ybWFsaXplcyBwbGF0Zm9ybVZlcnNpb24gdG8gYSB2YWxpZCBpT1MgdmVyc2lvbiBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luYWxWZXJzaW9uIC0gTG9vc2UgdmVyc2lvbiBudW1iZXIsIHRoYXQgY2FuIGJlIHBhcnNlZCBieSBzZW12ZXJcbiAqIEByZXR1cm4ge3N0cmluZ30gaU9TIHZlcnNpb24gbnVtYmVyIGluIDxtYWpvcj4uPG1pbm9yPiBmb3JtYXRcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB0aGUgdmVyc2lvbiBudW1iZXIgY2Fubm90IGJlIHBhcnNlZFxuICovXG5mdW5jdGlvbiBub3JtYWxpemVQbGF0Zm9ybVZlcnNpb24gKG9yaWdpbmFsVmVyc2lvbikge1xuICBjb25zdCBub3JtYWxpemVkVmVyc2lvbiA9IHNlbXZlci5jb2VyY2Uob3JpZ2luYWxWZXJzaW9uKTtcbiAgaWYgKCFub3JtYWxpemVkVmVyc2lvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVGhlIHBsYXRmb3JtIHZlcnNpb24gJyR7b3JpZ2luYWxWZXJzaW9ufScgc2hvdWxkIGJlIGEgdmFsaWQgdmVyc2lvbiBudW1iZXJgKTtcbiAgfVxuICByZXR1cm4gYCR7bm9ybWFsaXplZFZlcnNpb24ubWFqb3J9LiR7bm9ybWFsaXplZFZlcnNpb24ubWlub3J9YDtcbn1cblxuLyoqXG4gICogQXNzZXJ0IHRoZSBwcmVzZW5jZSBvZiBwYXJ0aWN1bGFyIGtleXMgaW4gdGhlIGdpdmVuIG9iamVjdFxuICAqXG4gICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gYXJnTmFtZXMgb25lIG9yIG1vcmUga2V5IG5hbWVzXG4gICogQHBhcmFtIHtPYmplY3R9IG9wdHMgdGhlIG9iamVjdCB0byBjaGVja1xuICAqIEByZXR1cm5zIHtPYmplY3R9IHRoZSBzYW1lIGdpdmVuIG9iamVjdFxuICAqL1xuZnVuY3Rpb24gcmVxdWlyZUFyZ3MgKGFyZ05hbWVzLCBvcHRzID0ge30pIHtcbiAgZm9yIChjb25zdCBhcmdOYW1lIG9mIChfLmlzQXJyYXkoYXJnTmFtZXMpID8gYXJnTmFtZXMgOiBbYXJnTmFtZXNdKSkge1xuICAgIGlmICghXy5oYXMob3B0cywgYXJnTmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoYCcke2FyZ05hbWV9JyBhcmd1bWVudCBtdXN0IGJlIHByb3ZpZGVkYCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBvcHRzO1xufVxuXG5cbmV4cG9ydCB7XG4gIGRldGVjdFVkaWQsIGdldEFuZENoZWNrWGNvZGVWZXJzaW9uLCBnZXRBbmRDaGVja0lvc1Nka1ZlcnNpb24sXG4gIGNoZWNrQXBwUHJlc2VudCwgZ2V0RHJpdmVySW5mbyxcbiAgY2xlYXJTeXN0ZW1GaWxlcywgdHJhbnNsYXRlRGV2aWNlTmFtZSwgbm9ybWFsaXplQ29tbWFuZFRpbWVvdXRzLFxuICBERUZBVUxUX1RJTUVPVVRfS0VZLCBtYXJrU3lzdGVtRmlsZXNGb3JDbGVhbnVwLCBwcmludFVzZXIsXG4gIGdldFBJRHNMaXN0ZW5pbmdPblBvcnQsIGVuY29kZUJhc2U2NE9yVXBsb2FkLCByZW1vdmVBbGxTZXNzaW9uV2ViU29ja2V0SGFuZGxlcnMsXG4gIGlzTG9jYWxIb3N0LCBub3JtYWxpemVQbGF0Zm9ybVZlcnNpb24sIGNsZWFyTG9ncywgcmVxdWlyZUFyZ3Ncbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxnQkFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsS0FBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksYUFBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssWUFBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU0sT0FBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU8sT0FBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVEscUJBQUEsR0FBQVQsc0JBQUEsQ0FBQUMsT0FBQTtB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