{"version":3,"file":"idb.js","names":["DEFAULT_OPTS","udid","executable","path","IDB_EXECUTABLE","port","grpcPort","defaultArgs","logLevel","companion","IDB_COMPANION_EXECUTABLE","logPath","execTimeout","DEFAULT_IDB_EXEC_TIMEOUT","verbose","IDB","constructor","opts","Object","assign","_","defaultsDeep","cloneDeep","Error","push","fnName","fn","toPairs","methods","prototype"],"sources":["../../lib/idb.js"],"sourcesContent":["import _ from 'lodash';\nimport methods from './tools/index.js';\nimport {\n  DEFAULT_IDB_EXEC_TIMEOUT,\n  IDB_EXECUTABLE, IDB_COMPANION_EXECUTABLE,\n} from './helpers';\n\nconst DEFAULT_OPTS = {\n  udid: null,\n  executable: {\n    path: IDB_EXECUTABLE,\n    port: null,\n    grpcPort: null,\n    defaultArgs: [],\n  },\n  logLevel: null,\n  companion: {\n    path: IDB_COMPANION_EXECUTABLE,\n    port: null,\n    grpcPort: null,\n    logPath: null,\n  },\n  execTimeout: DEFAULT_IDB_EXEC_TIMEOUT,\n  verbose: false,\n};\n\nclass IDB {\n  constructor (opts = {}) {\n    Object.assign(this, opts);\n    _.defaultsDeep(this, _.cloneDeep(DEFAULT_OPTS));\n\n    if (!this.udid) {\n      throw new Error(`UDID must be set for idb`);\n    }\n    this.executable.defaultArgs.push('--udid', this.udid);\n\n    if (this.logLevel) {\n      this.executable.defaultArgs.push('--log', this.logLevel);\n    }\n  }\n}\n\n// add all the methods to the IDB prototype\nfor (const [fnName, fn] of _.toPairs(methods)) {\n  IDB.prototype[fnName] = fn;\n}\n\nexport default IDB;\nexport { IDB };\n"],"mappings":";;;;;;;;AAAA;AACA;AACA;AAKA,MAAMA,YAAY,GAAG;EACnBC,IAAI,EAAE,IAAI;EACVC,UAAU,EAAE;IACVC,IAAI,EAAEC,uBAAc;IACpBC,IAAI,EAAE,IAAI;IACVC,QAAQ,EAAE,IAAI;IACdC,WAAW,EAAE;EACf,CAAC;EACDC,QAAQ,EAAE,IAAI;EACdC,SAAS,EAAE;IACTN,IAAI,EAAEO,iCAAwB;IAC9BL,IAAI,EAAE,IAAI;IACVC,QAAQ,EAAE,IAAI;IACdK,OAAO,EAAE;EACX,CAAC;EACDC,WAAW,EAAEC,iCAAwB;EACrCC,OAAO,EAAE;AACX,CAAC;AAED,MAAMC,GAAG,CAAC;EACRC,WAAW,CAAEC,IAAI,GAAG,CAAC,CAAC,EAAE;IACtBC,MAAM,CAACC,MAAM,CAAC,IAAI,EAAEF,IAAI,CAAC;IACzBG,eAAC,CAACC,YAAY,CAAC,IAAI,EAAED,eAAC,CAACE,SAAS,CAACtB,YAAY,CAAC,CAAC;IAE/C,IAAI,CAAC,IAAI,CAACC,IAAI,EAAE;MACd,MAAM,IAAIsB,KAAK,CAAE,0BAAyB,CAAC;IAC7C;IACA,IAAI,CAACrB,UAAU,CAACK,WAAW,CAACiB,IAAI,CAAC,QAAQ,EAAE,IAAI,CAACvB,IAAI,CAAC;IAErD,IAAI,IAAI,CAACO,QAAQ,EAAE;MACjB,IAAI,CAACN,UAAU,CAACK,WAAW,CAACiB,IAAI,CAAC,OAAO,EAAE,IAAI,CAAChB,QAAQ,CAAC;IAC1D;EACF;AACF;AAAC;AAGD,KAAK,MAAM,CAACiB,MAAM,EAAEC,EAAE,CAAC,IAAIN,eAAC,CAACO,OAAO,CAACC,cAAO,CAAC,EAAE;EAC7Cb,GAAG,CAACc,SAAS,CAACJ,MAAM,CAAC,GAAGC,EAAE;AAC5B;AAAC,eAEcX,GAAG;AAAA"}