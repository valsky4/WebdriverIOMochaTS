"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.AfcService = exports.AFC_SERVICE_NAME = void 0;
require("source-map-support/register");
var _lengthBasedSplitter = _interopRequireDefault(require("../util/transformer/length-based-splitter"));
var _protocol = require("./protocol");
var _streams = require("./streams");
var _afcencoder = _interopRequireDefault(require("./transformer/afcencoder"));
var _afcdecoder = _interopRequireDefault(require("./transformer/afcdecoder"));
var _constants = require("../constants");
var _bluebird = _interopRequireDefault(require("bluebird"));
var _path = _interopRequireDefault(require("path"));
var _lodash = _interopRequireDefault(require("lodash"));
var _baseService = require("../base-service");
const AFC_SERVICE_NAME = 'com.apple.afc';
exports.AFC_SERVICE_NAME = AFC_SERVICE_NAME;
const MAX_FRAME_SIZE = 1 * _constants.MB;
const NULL_DELIMITER_CODE = 0x00;
const IGNORED_PATHS = ['.', '..'];
class AfcService extends _baseService.BaseServiceSocket {
  constructor(socketClient) {
    super(socketClient);
    this._splitter = new _lengthBasedSplitter.default({
      readableStream: socketClient,
      littleEndian: true,
      maxFrameLength: MAX_FRAME_SIZE,
      lengthFieldOffset: 8,
      lengthFieldLength: 8,
      lengthAdjustment: -8
    });
    this._decoder = new _afcdecoder.default();
    this._socketClient.pipe(this._splitter).pipe(this._decoder);
    this._encoder = new _afcencoder.default();
    this._encoder.pipe(this._socketClient);
    this._assignClientFailureHandlers(this._encoder);
    this._responseCallbacks = {};
    this._packetNumber = 0;
    this._decoder.on('data', this._handleData.bind(this));
  }
  _handleData(data) {
    const cb = this._responseCallbacks[data.packetNumber] || _lodash.default.noop;
    cb(data);
  }
  async createDirectory(path) {
    const {
      packetNumber,
      response
    } = this._createPacketPromise(`Create directory '${path}'`);
    const data = {
      opCode: _protocol.Operations.MAKE_DIR,
      packetNumber,
      headerPayload: Buffer.from(path)
    };
    this._encoder.write(data);
    const res = await response;
    this._checkStatus(res);
  }
  async deleteDirectory(path) {
    const {
      packetNumber,
      response
    } = this._createPacketPromise(`Delete directory '${path}'`);
    const data = {
      opCode: _protocol.Operations.REMOVE_PATH_AND_CONTENTS,
      packetNumber,
      headerPayload: Buffer.from(path)
    };
    this._encoder.write(data);
    const res = await response;
    this._checkStatus(res);
  }
  async listDirectory(path) {
    const {
      packetNumber,
      response
    } = this._createPacketPromise(`List directory '${path}'`);
    const data = {
      opCode: _protocol.Operations.READ_DIR,
      packetNumber,
      headerPayload: Buffer.from(path)
    };
    this._encoder.write(data);
    const res = await response;
    if (res.opCode !== _protocol.Operations.DATA) {
      this._checkStatus(res);
    }
    return this._parseArray(res.content);
  }
  async openFile(path, mode) {
    const {
      packetNumber,
      response
    } = this._createPacketPromise(`Open file '${path}'`);
    const pathPayload = Buffer.from(path);
    const fileModePayload = Buffer.alloc(8);
    fileModePayload.writeUInt32LE(mode, 0);
    const data = {
      opCode: _protocol.Operations.FILE_OPEN,
      packetNumber,
      headerPayload: Buffer.concat([fileModePayload, pathPayload])
    };
    this._encoder.write(data);
    const res = await response;
    if (res.opCode !== _protocol.Operations.FILE_OPEN_RES) {
      this._checkStatus(res);
    }
    return res.headerPayload.readUInt32LE(0);
  }
  async createWriteStream(filePath, opts) {
    const fileHandle = await this.openFile(filePath, _protocol.FileModes.w);
    return new _streams.AfcWritableFileStream(fileHandle, this, opts);
  }
  async createReadStream(filePath, options) {
    const fileHandle = await this.openFile(filePath, _protocol.FileModes.r);
    return new _streams.AfcReadableFileStream(fileHandle, this, options);
  }
  async closeFileHandle(fileHandle) {
    const {
      packetNumber,
      response
    } = this._createPacketPromise(`Close file handle '${fileHandle}'`);
    const fileModePayload = Buffer.alloc(8);
    fileModePayload.writeUInt32LE(fileHandle, 0);
    const data = {
      opCode: _protocol.Operations.FILE_CLOSE,
      packetNumber,
      headerPayload: fileModePayload
    };
    this._encoder.write(data);
    const res = await response;
    this._checkStatus(res);
  }
  async writeFile(fileHandle, buffer) {
    const {
      packetNumber,
      response
    } = this._createPacketPromise(`Write to file handle '${fileHandle}'`);
    const headerPayload = Buffer.alloc(8);
    headerPayload.writeUInt32LE(fileHandle, 0);
    const data = {
      opCode: _protocol.Operations.FILE_WRITE,
      packetNumber,
      headerPayload,
      content: buffer
    };
    this._encoder.write(data);
    const res = await response;
    this._checkStatus(res);
  }
  async readFile(fileHandle, length) {
    const {
      packetNumber,
      response
    } = this._createPacketPromise(`Read from file handle '${fileHandle}'`);
    const headerPayload = Buffer.alloc(16);
    headerPayload.writeUInt32LE(fileHandle, 0);
    headerPayload.writeUInt32LE(length, 8);
    const data = {
      opCode: _protocol.Operations.FILE_READ,
      packetNumber,
      headerPayload
    };
    this._encoder.write(data);
    const res = await response;
    if (res.opCode !== _protocol.Operations.DATA) {
      this._checkStatus(res);
    }
    return res.content;
  }
  async getFileInfo(path) {
    const {
      packetNumber,
      response
    } = this._createPacketPromise(`Get file info '${path}'`);
    const data = {
      opCode: _protocol.Operations.GET_FILE_INFO,
      packetNumber,
      headerPayload: Buffer.from(path)
    };
    this._encoder.write(data);
    const res = await response;
    if (res.opCode !== _protocol.Operations.DATA) {
      this._checkStatus(res);
    }
    return new FileInfo(this._parseObject(res.content));
  }
  async walkDir(dir, recursive, onPath) {
    for (const file of await this.listDirectory(dir)) {
      if (IGNORED_PATHS.includes(file)) {
        continue;
      }
      const relativePath = _path.default.posix.join(dir, file);
      const fileInfo = await this.getFileInfo(relativePath);
      const isDirectory = fileInfo.isDirectory();
      await onPath(relativePath, isDirectory);
      if (isDirectory && recursive) {
        await this.walkDir(relativePath, recursive, onPath);
      }
    }
  }
  _checkStatus(res) {
    if (res.opCode !== _protocol.Operations.STATUS) {
      throw new Error(`Unexpected response ${(0, _protocol.operationCode)(res.opCode)}`);
    }
    if (_lodash.default.isEmpty(res.headerPayload)) {
      throw new Error('Header payload cannot be empty for a status response');
    }
    if (res.headerPayload[0] !== _protocol.Errors.SUCCESS) {
      throw new Error(`Unexpected response ${(0, _protocol.errorCode)(res.headerPayload[0])}`);
    }
  }
  _parseArray(buffer) {
    const items = [];
    let start = 0;
    for (let end = 0; end < buffer.length; end++) {
      if (buffer[end] !== NULL_DELIMITER_CODE) {
        continue;
      }
      const item = buffer.toString('utf8', start, end);
      items.push(item);
      start = end + 1;
    }
    return items;
  }
  _parseObject(buffer) {
    const items = {};
    let start = 0;
    let currentKey;
    for (let end = 0; end < buffer.length; end++) {
      if (buffer[end] !== NULL_DELIMITER_CODE) {
        continue;
      }
      const item = buffer.toString('utf8', start, end);
      if (_lodash.default.isNil(currentKey)) {
        currentKey = item;
      } else {
        items[currentKey] = item;
        currentKey = null;
      }
      start = end + 1;
    }
    if (currentKey) {
      throw new Error(`Failed to parse correctly ${buffer}. Please investigate`);
    }
    return items;
  }
  _createPacketPromise(message, timeout = 10000) {
    const packetNumber = this._packetNumber++;
    const response = new _bluebird.default((resolve, reject) => {
      this._responseCallbacks[packetNumber] = resolve;
      setTimeout(function () {
        reject(new Error(`Could not finish the operation '${message}'. Failed to receive any data within the ${timeout}ms timeout`));
      }, timeout);
    });
    return {
      packetNumber,
      response
    };
  }
}
exports.AfcService = AfcService;
class FileInfo {
  constructor({
    st_size,
    st_blocks,
    st_nlink,
    st_ifmt,
    st_mtime,
    st_birthtime
  }) {
    this.size = parseInt(st_size, 10);
    this.blocks = parseInt(st_blocks, 10);
    this.nlink = parseInt(st_nlink, 10);
    this.ifmt = st_ifmt;
    this.mtimeMs = parseInt(st_mtime, 10) / 1000000;
    this.birthtimeMs = parseInt(st_birthtime, 10) / 1000000;
  }
  isDirectory() {
    return this.ifmt === 'S_IFDIR';
  }
  isFile() {
    return this.ifmt === 'S_IFREG';
  }
}
var _default = AfcService;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbGVuZ3RoQmFzZWRTcGxpdHRlciIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3Byb3RvY29sIiwiX3N0cmVhbXMiLCJfYWZjZW5jb2RlciIsIl9hZmNkZWNvZGVyIiwiX2NvbnN0YW50cyIsIl9ibHVlYmlyZCIsIl9wYXRoIiwiX2xvZGFzaCIsIl9iYXNlU2VydmljZSIsIkFGQ19TRVJWSUNFX05BTUUiLCJleHBvcnRzIiwiTUFYX0ZSQU1FX1NJWkUiLCJNQiIsIk5VTExfREVMSU1JVEVSX0NPREUiLCJJR05PUkVEX1BBVEhTIiwiQWZjU2VydmljZSIsIkJhc2VTZXJ2aWNlU29ja2V0IiwiY29uc3RydWN0b3IiLCJzb2NrZXRDbGllbnQiLCJfc3BsaXR0ZXIiLCJMZW5ndGhCYXNlZFNwbGl0dGVyIiwicmVhZGFibGVTdHJlYW0iLCJsaXR0bGVFbmRpYW4iLCJtYXhGcmFtZUxlbmd0aCIsImxlbmd0aEZpZWxkT2Zmc2V0IiwibGVuZ3RoRmllbGRMZW5ndGgiLCJsZW5ndGhBZGp1c3RtZW50IiwiX2RlY29kZXIiLCJBZmNEZWNvZGVyIiwiX3NvY2tldENsaWVudCIsInBpcGUiLCJfZW5jb2RlciIsIkFmY0VuY29kZXIiLCJfYXNzaWduQ2xpZW50RmFpbHVyZUhhbmRsZXJzIiwiX3Jlc3BvbnNlQ2FsbGJhY2tzIiwiX3BhY2tldE51bWJlciIsIm9uIiwiX2hhbmRsZURhdGEiLCJiaW5kIiwiZGF0YSIsImNiIiwicGFja2V0TnVtYmVyIiwiXyIsIm5vb3AiLCJjcmVhdGVEaXJlY3RvcnkiLCJwYXRoIiwicmVzcG9uc2UiLCJfY3JlYXRlUGFja2V0UHJvbWlzZSIsIm9wQ29kZSIsIk9wZXJhdGlvbnMiLCJNQUtFX0RJUiIsImhlYWRlclBheWxvYWQiLCJCdWZmZXIiLCJmcm9tIiwid3JpdGUiLCJyZXMiLCJfY2hlY2tTdGF0dXMiLCJkZWxldGVEaXJlY3RvcnkiLCJSRU1PVkVfUEFUSF9BTkRfQ09OVEVOVFMiLCJsaXN0RGlyZWN0b3J5IiwiUkVBRF9ESVIiLCJEQVRBIiwiX3BhcnNlQXJyYXkiLCJjb250ZW50Iiwib3BlbkZpbGUiLCJtb2RlIiwicGF0aFBheWxvYWQiLCJmaWxlTW9kZVBheWxvYWQiLCJhbGxvYyIsIndyaXRlVUludDMyTEUiLCJGSUxFX09QRU4iLCJjb25jYXQiLCJGSUxFX09QRU5fUkVTIiwicmVhZFVJbnQzMkxFIiwiY3JlYXRlV3JpdGVTdHJlYW0iLCJmaWxlUGF0aCIsIm9wdHMiLCJmaWxlSGFuZGxlIiwiRmlsZU1vZGVzIiwidyIsIkFmY1dyaXRhYmxlRmlsZVN0cmVhbSIsImNyZWF0ZVJlYWRTdHJlYW0iLCJvcHRpb25zIiwiciIsIkFmY1JlYWRhYmxlRmlsZVN0cmVhbSIsImNsb3NlRmlsZUhhbmRsZSIsIkZJTEVfQ0xPU0UiLCJ3cml0ZUZpbGUiLCJidWZmZXIiLCJGSUxFX1dSSVRFIiwicmVhZEZpbGUiLCJsZW5ndGgiLCJGSUxFX1JFQUQiLCJnZXRGaWxlSW5mbyIsIkdFVF9GSUxFX0lORk8iLCJGaWxlSW5mbyIsIl9wYXJzZU9iamVjdCIsIndhbGtEaXIiLCJkaXIiLCJyZWN1cnNpdmUiLCJvblBhdGgiLCJmaWxlIiwiaW5jbHVkZXMiLCJyZWxhdGl2ZVBhdGgiLCJwb3NpeCIsImpvaW4iLCJmaWxlSW5mbyIsImlzRGlyZWN0b3J5IiwiU1RBVFVTIiwiRXJyb3IiLCJvcGVyYXRpb25Db2RlIiwiaXNFbXB0eSIsIkVycm9ycyIsIlNVQ0NFU1MiLCJlcnJvckNvZGUiLCJpdGVtcyIsInN0YXJ0IiwiZW5kIiwiaXRlbSIsInRvU3RyaW5nIiwicHVzaCIsImN1cnJlbnRLZXkiLCJpc05pbCIsIm1lc3NhZ2UiLCJ0aW1lb3V0IiwiQiIsInJlc29sdmUiLCJyZWplY3QiLCJzZXRUaW1lb3V0Iiwic3Rfc2l6ZSIsInN0X2Jsb2NrcyIsInN0X25saW5rIiwic3RfaWZtdCIsInN0X210aW1lIiwic3RfYmlydGh0aW1lIiwic2l6ZSIsInBhcnNlSW50IiwiYmxvY2tzIiwibmxpbmsiLCJpZm10IiwibXRpbWVNcyIsImJpcnRodGltZU1zIiwiaXNGaWxlIiwiX2RlZmF1bHQiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vbGliL2FmYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBMZW5ndGhCYXNlZFNwbGl0dGVyIGZyb20gJy4uL3V0aWwvdHJhbnNmb3JtZXIvbGVuZ3RoLWJhc2VkLXNwbGl0dGVyJztcbmltcG9ydCB7IE9wZXJhdGlvbnMsIG9wZXJhdGlvbkNvZGUsIEVycm9ycywgZXJyb3JDb2RlLCBGaWxlTW9kZXMgfSBmcm9tICcuL3Byb3RvY29sJztcbmltcG9ydCB7IEFmY1dyaXRhYmxlRmlsZVN0cmVhbSwgQWZjUmVhZGFibGVGaWxlU3RyZWFtIH0gZnJvbSAnLi9zdHJlYW1zJztcbmltcG9ydCBBZmNFbmNvZGVyIGZyb20gJy4vdHJhbnNmb3JtZXIvYWZjZW5jb2Rlcic7XG5pbXBvcnQgQWZjRGVjb2RlciBmcm9tICcuL3RyYW5zZm9ybWVyL2FmY2RlY29kZXInO1xuaW1wb3J0IHsgTUIgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgQmFzZVNlcnZpY2VTb2NrZXQgfSBmcm9tICcuLi9iYXNlLXNlcnZpY2UnO1xuXG5cbmNvbnN0IEFGQ19TRVJWSUNFX05BTUUgPSAnY29tLmFwcGxlLmFmYyc7XG5jb25zdCBNQVhfRlJBTUVfU0laRSA9IDEgKiBNQjtcblxuY29uc3QgTlVMTF9ERUxJTUlURVJfQ09ERSA9IDB4MDA7XG5jb25zdCBJR05PUkVEX1BBVEhTID0gWycuJywgJy4uJ107XG5cbmNsYXNzIEFmY1NlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZVNvY2tldCB7XG4gIGNvbnN0cnVjdG9yIChzb2NrZXRDbGllbnQpIHtcbiAgICBzdXBlcihzb2NrZXRDbGllbnQpO1xuXG4gICAgdGhpcy5fc3BsaXR0ZXIgPSBuZXcgTGVuZ3RoQmFzZWRTcGxpdHRlcih7XG4gICAgICByZWFkYWJsZVN0cmVhbTogc29ja2V0Q2xpZW50LFxuICAgICAgbGl0dGxlRW5kaWFuOiB0cnVlLFxuICAgICAgbWF4RnJhbWVMZW5ndGg6IE1BWF9GUkFNRV9TSVpFLFxuICAgICAgbGVuZ3RoRmllbGRPZmZzZXQ6IDgsXG4gICAgICBsZW5ndGhGaWVsZExlbmd0aDogOCxcbiAgICAgIGxlbmd0aEFkanVzdG1lbnQ6IC04LFxuICAgIH0pO1xuICAgIHRoaXMuX2RlY29kZXIgPSBuZXcgQWZjRGVjb2RlcigpO1xuICAgIHRoaXMuX3NvY2tldENsaWVudC5waXBlKHRoaXMuX3NwbGl0dGVyKS5waXBlKHRoaXMuX2RlY29kZXIpO1xuXG4gICAgdGhpcy5fZW5jb2RlciA9IG5ldyBBZmNFbmNvZGVyKCk7XG4gICAgdGhpcy5fZW5jb2Rlci5waXBlKHRoaXMuX3NvY2tldENsaWVudCk7XG4gICAgdGhpcy5fYXNzaWduQ2xpZW50RmFpbHVyZUhhbmRsZXJzKHRoaXMuX2VuY29kZXIpO1xuXG4gICAgdGhpcy5fcmVzcG9uc2VDYWxsYmFja3MgPSB7fTtcblxuICAgIHRoaXMuX3BhY2tldE51bWJlciA9IDA7XG4gICAgdGhpcy5fZGVjb2Rlci5vbignZGF0YScsIHRoaXMuX2hhbmRsZURhdGEuYmluZCh0aGlzKSk7XG4gIH1cblxuICBfaGFuZGxlRGF0YSAoZGF0YSkge1xuICAgIGNvbnN0IGNiID0gdGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbZGF0YS5wYWNrZXROdW1iZXJdIHx8IF8ubm9vcDtcbiAgICBjYihkYXRhKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBwcm9taXNlL3ByZWZlci1hd2FpdC10by1jYWxsYmFja3NcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZGlyZWN0b3J5IHJlbGF0aXZlIHRvIGFuIGFscmVhZHkgZXhpc3RpbmcgZGlyZWN0b3J5XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFRoZSBwYXRoIGluIHVuaXggZm9ybWF0XG4gICAqL1xuICBhc3luYyBjcmVhdGVEaXJlY3RvcnkgKHBhdGgpIHtcbiAgICBjb25zdCB7cGFja2V0TnVtYmVyLCByZXNwb25zZX0gPSB0aGlzLl9jcmVhdGVQYWNrZXRQcm9taXNlKGBDcmVhdGUgZGlyZWN0b3J5ICcke3BhdGh9J2ApO1xuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG9wQ29kZTogT3BlcmF0aW9ucy5NQUtFX0RJUixcbiAgICAgIHBhY2tldE51bWJlcixcbiAgICAgIGhlYWRlclBheWxvYWQ6IEJ1ZmZlci5mcm9tKHBhdGgpXG4gICAgfTtcbiAgICB0aGlzLl9lbmNvZGVyLndyaXRlKGRhdGEpO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlc3BvbnNlO1xuICAgIHRoaXMuX2NoZWNrU3RhdHVzKHJlcyk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBhcmUgZGlyZWN0b3J5IGNvbXBsZXRlbHkgZXZlbiBpdCBoYXMgY29udGVudCBpbnNpZGUuIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgJ3JtIC1yIHtwYXRofSdcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggaW4gdW5peCBmb3JtYXRcbiAgICovXG4gIGFzeW5jIGRlbGV0ZURpcmVjdG9yeSAocGF0aCkge1xuICAgIGNvbnN0IHtwYWNrZXROdW1iZXIsIHJlc3BvbnNlfSA9IHRoaXMuX2NyZWF0ZVBhY2tldFByb21pc2UoYERlbGV0ZSBkaXJlY3RvcnkgJyR7cGF0aH0nYCk7XG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgb3BDb2RlOiBPcGVyYXRpb25zLlJFTU9WRV9QQVRIX0FORF9DT05URU5UUyxcbiAgICAgIHBhY2tldE51bWJlcixcbiAgICAgIGhlYWRlclBheWxvYWQ6IEJ1ZmZlci5mcm9tKHBhdGgpXG4gICAgfTtcbiAgICB0aGlzLl9lbmNvZGVyLndyaXRlKGRhdGEpO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlc3BvbnNlO1xuICAgIHRoaXMuX2NoZWNrU3RhdHVzKHJlcyk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdHMgYSBkaXJlY3RvcnkncyBjb250ZW50cyBhbmQgcmV0dXJucyB0aGVtIGluIGFuIGFycmF5XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFRoZSBwYXRoIGluIHVuaXggZm9ybWF0XG4gICAqIEByZXR1cm4ge0FycmF5LjxzdHJpbmc+fVxuICAgKi9cbiAgYXN5bmMgbGlzdERpcmVjdG9yeSAocGF0aCkge1xuICAgIGNvbnN0IHtwYWNrZXROdW1iZXIsIHJlc3BvbnNlfSA9IHRoaXMuX2NyZWF0ZVBhY2tldFByb21pc2UoYExpc3QgZGlyZWN0b3J5ICcke3BhdGh9J2ApO1xuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG9wQ29kZTogT3BlcmF0aW9ucy5SRUFEX0RJUixcbiAgICAgIHBhY2tldE51bWJlcixcbiAgICAgIGhlYWRlclBheWxvYWQ6IEJ1ZmZlci5mcm9tKHBhdGgpXG4gICAgfTtcbiAgICB0aGlzLl9lbmNvZGVyLndyaXRlKGRhdGEpO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlc3BvbnNlO1xuICAgIGlmIChyZXMub3BDb2RlICE9PSBPcGVyYXRpb25zLkRBVEEpIHtcbiAgICAgIHRoaXMuX2NoZWNrU3RhdHVzKHJlcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlQXJyYXkocmVzLmNvbnRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIGEgZmlsZSBhbmQgY3JlYXRlcyBhIGZpbGUgaGFuZGxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFRoZSBwYXRoIGluIHVuaXggZm9ybWF0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtb2RlIFRoZSBmaWxlIG1vZGUgdGhhdCB3aWxsIGJlIHVzZWRcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgYXN5bmMgb3BlbkZpbGUgKHBhdGgsIG1vZGUpIHtcbiAgICBjb25zdCB7cGFja2V0TnVtYmVyLCByZXNwb25zZX0gPSB0aGlzLl9jcmVhdGVQYWNrZXRQcm9taXNlKGBPcGVuIGZpbGUgJyR7cGF0aH0nYCk7XG5cbiAgICBjb25zdCBwYXRoUGF5bG9hZCA9IEJ1ZmZlci5mcm9tKHBhdGgpO1xuICAgIGNvbnN0IGZpbGVNb2RlUGF5bG9hZCA9IEJ1ZmZlci5hbGxvYyg4KTtcbiAgICBmaWxlTW9kZVBheWxvYWQud3JpdGVVSW50MzJMRShtb2RlLCAwKTtcblxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBvcENvZGU6IE9wZXJhdGlvbnMuRklMRV9PUEVOLFxuICAgICAgcGFja2V0TnVtYmVyLFxuICAgICAgaGVhZGVyUGF5bG9hZDogQnVmZmVyLmNvbmNhdChbZmlsZU1vZGVQYXlsb2FkLCBwYXRoUGF5bG9hZF0pXG4gICAgfTtcbiAgICB0aGlzLl9lbmNvZGVyLndyaXRlKGRhdGEpO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlc3BvbnNlO1xuICAgIGlmIChyZXMub3BDb2RlICE9PSBPcGVyYXRpb25zLkZJTEVfT1BFTl9SRVMpIHtcbiAgICAgIHRoaXMuX2NoZWNrU3RhdHVzKHJlcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcy5oZWFkZXJQYXlsb2FkLnJlYWRVSW50MzJMRSgwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVucyBhIGZpbGUgYW5kIGNyZWF0ZXMgYSBub2RlanMgd3JpdGUgc3RyZWFtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlUGF0aCBUaGUgcGF0aCBpbiB1bml4IGZvcm1hdFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyBUaGUgcmVndWxhciBvcHRpb25zIHRoYXQgYXJlIHBhc3NlZCB0byBhIFN0cmVhbS5Xcml0YWJsZVxuICAgKiBAcmV0dXJuIHtBZmNXcml0YWJsZUZpbGVTdHJlYW19XG4gICAqL1xuICBhc3luYyBjcmVhdGVXcml0ZVN0cmVhbSAoZmlsZVBhdGgsIG9wdHMpIHtcbiAgICBjb25zdCBmaWxlSGFuZGxlID0gYXdhaXQgdGhpcy5vcGVuRmlsZShmaWxlUGF0aCwgRmlsZU1vZGVzLncpO1xuICAgIHJldHVybiBuZXcgQWZjV3JpdGFibGVGaWxlU3RyZWFtKGZpbGVIYW5kbGUsIHRoaXMsIG9wdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIGEgZmlsZSBhbmQgY3JlYXRlcyBhIG5vZGVqcyByZWFkIHN0cmVhbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZVBhdGggVGhlIHBhdGggaW4gdW5peCBmb3JtYXRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgVGhlIHJlZ3VsYXIgb3B0aW9ucyB0aGF0IGFyZSBwYXNzZWQgdG8gYSBTdHJlYW0uUmVhZGFibGVcbiAgICogQHJldHVybiB7QWZjUmVhZGFibGVGaWxlU3RyZWFtfVxuICAgKi9cbiAgYXN5bmMgY3JlYXRlUmVhZFN0cmVhbSAoZmlsZVBhdGgsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBmaWxlSGFuZGxlID0gYXdhaXQgdGhpcy5vcGVuRmlsZShmaWxlUGF0aCwgRmlsZU1vZGVzLnIpO1xuICAgIHJldHVybiBuZXcgQWZjUmVhZGFibGVGaWxlU3RyZWFtKGZpbGVIYW5kbGUsIHRoaXMsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgZmlsZSBoYW5kbGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IGZpbGVIYW5kbGUgdGhlIGZpbGUgaGFuZGxlIHRvIGJlIGNsb3NlZFxuICAgKi9cbiAgYXN5bmMgY2xvc2VGaWxlSGFuZGxlIChmaWxlSGFuZGxlKSB7XG4gICAgY29uc3Qge3BhY2tldE51bWJlciwgcmVzcG9uc2V9ID0gdGhpcy5fY3JlYXRlUGFja2V0UHJvbWlzZShgQ2xvc2UgZmlsZSBoYW5kbGUgJyR7ZmlsZUhhbmRsZX0nYCk7XG5cbiAgICBjb25zdCBmaWxlTW9kZVBheWxvYWQgPSBCdWZmZXIuYWxsb2MoOCk7XG4gICAgZmlsZU1vZGVQYXlsb2FkLndyaXRlVUludDMyTEUoZmlsZUhhbmRsZSwgMCk7XG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgb3BDb2RlOiBPcGVyYXRpb25zLkZJTEVfQ0xPU0UsXG4gICAgICBwYWNrZXROdW1iZXIsXG4gICAgICBoZWFkZXJQYXlsb2FkOiBmaWxlTW9kZVBheWxvYWRcbiAgICB9O1xuICAgIHRoaXMuX2VuY29kZXIud3JpdGUoZGF0YSk7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVzcG9uc2U7XG4gICAgdGhpcy5fY2hlY2tTdGF0dXMocmVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXcml0ZXMgdGhlIGJ1ZmZlciBpbnRvIHRoZSBnaXZlbiBmaWxlIGhhbmRsZVxuICAgKiBAcGFyYW0ge251bWJlcn0gZmlsZUhhbmRsZSBUaGUgZmlsZSBoYW5kbGUgdG8gYmUgdXNlZFxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gYnVmZmVyIFRoZSBidWZmZXIgdGhhdCB3aWxsIGJlIHdyaXR0ZW5cbiAgICovXG4gIGFzeW5jIHdyaXRlRmlsZSAoZmlsZUhhbmRsZSwgYnVmZmVyKSB7XG4gICAgY29uc3Qge3BhY2tldE51bWJlciwgcmVzcG9uc2V9ID0gdGhpcy5fY3JlYXRlUGFja2V0UHJvbWlzZShgV3JpdGUgdG8gZmlsZSBoYW5kbGUgJyR7ZmlsZUhhbmRsZX0nYCk7XG5cbiAgICBjb25zdCBoZWFkZXJQYXlsb2FkID0gQnVmZmVyLmFsbG9jKDgpO1xuICAgIGhlYWRlclBheWxvYWQud3JpdGVVSW50MzJMRShmaWxlSGFuZGxlLCAwKTtcblxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBvcENvZGU6IE9wZXJhdGlvbnMuRklMRV9XUklURSxcbiAgICAgIHBhY2tldE51bWJlcixcbiAgICAgIGhlYWRlclBheWxvYWQsXG4gICAgICBjb250ZW50OiBidWZmZXJcbiAgICB9O1xuICAgIHRoaXMuX2VuY29kZXIud3JpdGUoZGF0YSk7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVzcG9uc2U7XG4gICAgdGhpcy5fY2hlY2tTdGF0dXMocmVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkIGEgY2VydGFpbiBsZW5ndGggb2YgYnVmZmVyIGZyb20gdGhlIGZpbGUgaGFuZGxlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBmaWxlSGFuZGxlIFRoZSBmaWxlIGhhbmRsZSB0byBiZSB1c2VkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGggVGhlIGxlbmd0aCB0aGF0IHdhbnRzIHRvIGJlIHJlYWQgZnJvbSB0aGUgZmlsZSBoYW5kbGVcbiAgICogQHJldHVybiB7QnVmZmVyfVxuICAgKi9cbiAgYXN5bmMgcmVhZEZpbGUgKGZpbGVIYW5kbGUsIGxlbmd0aCkge1xuICAgIGNvbnN0IHtwYWNrZXROdW1iZXIsIHJlc3BvbnNlfSA9IHRoaXMuX2NyZWF0ZVBhY2tldFByb21pc2UoYFJlYWQgZnJvbSBmaWxlIGhhbmRsZSAnJHtmaWxlSGFuZGxlfSdgKTtcblxuICAgIGNvbnN0IGhlYWRlclBheWxvYWQgPSBCdWZmZXIuYWxsb2MoMTYpO1xuICAgIGhlYWRlclBheWxvYWQud3JpdGVVSW50MzJMRShmaWxlSGFuZGxlLCAwKTtcbiAgICBoZWFkZXJQYXlsb2FkLndyaXRlVUludDMyTEUobGVuZ3RoLCA4KTtcblxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBvcENvZGU6IE9wZXJhdGlvbnMuRklMRV9SRUFELFxuICAgICAgcGFja2V0TnVtYmVyLFxuICAgICAgaGVhZGVyUGF5bG9hZFxuICAgIH07XG4gICAgdGhpcy5fZW5jb2Rlci53cml0ZShkYXRhKTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCByZXNwb25zZTtcbiAgICBpZiAocmVzLm9wQ29kZSAhPT0gT3BlcmF0aW9ucy5EQVRBKSB7XG4gICAgICB0aGlzLl9jaGVja1N0YXR1cyhyZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLmNvbnRlbnQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBmaWxlIGluZm8gb2YgdGhlIGdpdmVuIHBhdGhcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggaW4gdW5peCBmb3JtYXRcbiAgICogQHJldHVybiB7RmlsZUluZm99XG4gICAqL1xuICBhc3luYyBnZXRGaWxlSW5mbyAocGF0aCkge1xuICAgIGNvbnN0IHtwYWNrZXROdW1iZXIsIHJlc3BvbnNlfSA9IHRoaXMuX2NyZWF0ZVBhY2tldFByb21pc2UoYEdldCBmaWxlIGluZm8gJyR7cGF0aH0nYCk7XG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgb3BDb2RlOiBPcGVyYXRpb25zLkdFVF9GSUxFX0lORk8sXG4gICAgICBwYWNrZXROdW1iZXIsXG4gICAgICBoZWFkZXJQYXlsb2FkOiBCdWZmZXIuZnJvbShwYXRoKVxuICAgIH07XG4gICAgdGhpcy5fZW5jb2Rlci53cml0ZShkYXRhKTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCByZXNwb25zZTtcbiAgICBpZiAocmVzLm9wQ29kZSAhPT0gT3BlcmF0aW9ucy5EQVRBKSB7XG4gICAgICB0aGlzLl9jaGVja1N0YXR1cyhyZXMpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEZpbGVJbmZvKHRoaXMuX3BhcnNlT2JqZWN0KHJlcy5jb250ZW50KSk7XG4gIH1cblxuICAvKiogVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgY2FsbGVkIGR1cmluZyB0aGUgZGlyZWN0b3J5IHdhbGtpbmdcbiAgICogQG5hbWUgV2Fsa0RpckNhbGxiYWNrXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gaXRlbVBhdGggVGhlIHBhdGggb2YgdGhlIGZpbGUgb3IgZm9sZGVyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNEaXJlY3RvcnkgU2hvd3MgaWYgaXQgaXMgYSBkaXJlY3Rvcnkgb3IgYSBmaWxlXG4gICovXG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkaXIgVGhlIHBhdGggaW4gdW5peCBmb3JtYXRcbiAgICogQHBhcmFtIHtib29sZWFufSByZWN1cnNpdmUgU2V0cyB3aGV0aGVyIHRvIGZvbGxvdyBzdWIgZGlyZWN0b3JpZXMgb3Igbm90XG4gICAqIEBwYXJhbSB7V2Fsa0RpckNhbGxiYWNrfSBvblBhdGggVGhlIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aGVuIGEgbmV3IHBhdGggaXMgZm91bmRcbiAgICovXG4gIGFzeW5jIHdhbGtEaXIgKGRpciwgcmVjdXJzaXZlLCBvblBhdGgpIHtcbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgYXdhaXQgdGhpcy5saXN0RGlyZWN0b3J5KGRpcikpIHtcbiAgICAgIGlmIChJR05PUkVEX1BBVEhTLmluY2x1ZGVzKGZpbGUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gcGF0aC5wb3NpeC5qb2luKGRpciwgZmlsZSk7XG4gICAgICBjb25zdCBmaWxlSW5mbyA9IGF3YWl0IHRoaXMuZ2V0RmlsZUluZm8ocmVsYXRpdmVQYXRoKTtcbiAgICAgIGNvbnN0IGlzRGlyZWN0b3J5ID0gZmlsZUluZm8uaXNEaXJlY3RvcnkoKTtcbiAgICAgIGF3YWl0IG9uUGF0aChyZWxhdGl2ZVBhdGgsIGlzRGlyZWN0b3J5KTtcbiAgICAgIGlmIChpc0RpcmVjdG9yeSAmJiByZWN1cnNpdmUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy53YWxrRGlyKHJlbGF0aXZlUGF0aCwgcmVjdXJzaXZlLCBvblBhdGgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9jaGVja1N0YXR1cyAocmVzKSB7XG4gICAgaWYgKHJlcy5vcENvZGUgIT09IE9wZXJhdGlvbnMuU1RBVFVTKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgcmVzcG9uc2UgJHtvcGVyYXRpb25Db2RlKHJlcy5vcENvZGUpfWApO1xuICAgIH1cbiAgICBpZiAoXy5pc0VtcHR5KHJlcy5oZWFkZXJQYXlsb2FkKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdIZWFkZXIgcGF5bG9hZCBjYW5ub3QgYmUgZW1wdHkgZm9yIGEgc3RhdHVzIHJlc3BvbnNlJyk7XG4gICAgfVxuICAgIGlmIChyZXMuaGVhZGVyUGF5bG9hZFswXSAhPT0gRXJyb3JzLlNVQ0NFU1MpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCByZXNwb25zZSAke2Vycm9yQ29kZShyZXMuaGVhZGVyUGF5bG9hZFswXSl9YCk7XG4gICAgfVxuICB9XG5cbiAgX3BhcnNlQXJyYXkgKGJ1ZmZlcikge1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgbGV0IHN0YXJ0ID0gMDtcbiAgICBmb3IgKGxldCBlbmQgPSAwOyBlbmQgPCBidWZmZXIubGVuZ3RoOyBlbmQrKykge1xuICAgICAgaWYgKGJ1ZmZlcltlbmRdICE9PSBOVUxMX0RFTElNSVRFUl9DT0RFKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgaXRlbSA9IGJ1ZmZlci50b1N0cmluZygndXRmOCcsIHN0YXJ0LCBlbmQpO1xuICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgIC8vIFdlIHNraXAgdGhlIG51bGwgZGVsaW1ldGVyXG4gICAgICBzdGFydCA9IGVuZCArIDE7XG4gICAgfVxuICAgIHJldHVybiBpdGVtcztcbiAgfVxuXG4gIF9wYXJzZU9iamVjdCAoYnVmZmVyKSB7XG4gICAgY29uc3QgaXRlbXMgPSB7fTtcbiAgICBsZXQgc3RhcnQgPSAwO1xuICAgIGxldCBjdXJyZW50S2V5O1xuICAgIGZvciAobGV0IGVuZCA9IDA7IGVuZCA8IGJ1ZmZlci5sZW5ndGg7IGVuZCsrKSB7XG4gICAgICBpZiAoYnVmZmVyW2VuZF0gIT09IE5VTExfREVMSU1JVEVSX0NPREUpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBpdGVtID0gYnVmZmVyLnRvU3RyaW5nKCd1dGY4Jywgc3RhcnQsIGVuZCk7XG4gICAgICBpZiAoXy5pc05pbChjdXJyZW50S2V5KSkge1xuICAgICAgICBjdXJyZW50S2V5ID0gaXRlbTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW1zW2N1cnJlbnRLZXldID0gaXRlbTtcbiAgICAgICAgY3VycmVudEtleSA9IG51bGw7XG4gICAgICB9XG4gICAgICAvLyBXZSBza2lwIHRoZSBudWxsIGRlbGltZXRlclxuICAgICAgc3RhcnQgPSBlbmQgKyAxO1xuICAgIH1cbiAgICBpZiAoY3VycmVudEtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcGFyc2UgY29ycmVjdGx5ICR7YnVmZmVyfS4gUGxlYXNlIGludmVzdGlnYXRlYCk7XG4gICAgfVxuICAgIHJldHVybiBpdGVtcztcbiAgfVxuXG4gIF9jcmVhdGVQYWNrZXRQcm9taXNlIChtZXNzYWdlLCB0aW1lb3V0ID0gMTAwMDApIHtcbiAgICBjb25zdCBwYWNrZXROdW1iZXIgPSB0aGlzLl9wYWNrZXROdW1iZXIrKztcbiAgICBjb25zdCByZXNwb25zZSA9IG5ldyBCKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW3BhY2tldE51bWJlcl0gPSByZXNvbHZlO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5pc2ggdGhlIG9wZXJhdGlvbiAnJHttZXNzYWdlfScuIEZhaWxlZCB0byByZWNlaXZlIGFueSBkYXRhIHdpdGhpbiB0aGUgJHt0aW1lb3V0fW1zIHRpbWVvdXRgKSk7XG4gICAgICB9LCB0aW1lb3V0KTtcbiAgICB9KTtcbiAgICByZXR1cm4ge3BhY2tldE51bWJlciwgcmVzcG9uc2V9O1xuICB9XG59XG5cbmNsYXNzIEZpbGVJbmZvIHtcbiAgY29uc3RydWN0b3IgKHtzdF9zaXplLCBzdF9ibG9ja3MsIHN0X25saW5rLCBzdF9pZm10LCBzdF9tdGltZSwgc3RfYmlydGh0aW1lfSkge1xuICAgIHRoaXMuc2l6ZSA9IHBhcnNlSW50KHN0X3NpemUsIDEwKTtcbiAgICB0aGlzLmJsb2NrcyA9IHBhcnNlSW50KHN0X2Jsb2NrcywgMTApO1xuICAgIHRoaXMubmxpbmsgPSBwYXJzZUludChzdF9ubGluaywgMTApO1xuICAgIHRoaXMuaWZtdCA9IHN0X2lmbXQ7XG4gICAgLy8gbnMgdG8gbXNcbiAgICB0aGlzLm10aW1lTXMgPSBwYXJzZUludChzdF9tdGltZSwgMTApIC8gMTAwMDAwMDtcbiAgICAvLyBucyB0byBtc1xuICAgIHRoaXMuYmlydGh0aW1lTXMgPSBwYXJzZUludChzdF9iaXJ0aHRpbWUsIDEwKSAvIDEwMDAwMDA7XG4gIH1cblxuICBpc0RpcmVjdG9yeSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaWZtdCA9PT0gJ1NfSUZESVInO1xuICB9XG5cbiAgaXNGaWxlICgpIHtcbiAgICByZXR1cm4gdGhpcy5pZm10ID09PSAnU19JRlJFRyc7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQWZjU2VydmljZTtcbmV4cG9ydCB7IEFmY1NlcnZpY2UsIEFGQ19TRVJWSUNFX05BTUUgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDQSxJQUFBQSxvQkFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsU0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsV0FBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksV0FBQSxHQUFBTCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUssVUFBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sU0FBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU8sS0FBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVEsT0FBQSxHQUFBVCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVMsWUFBQSxHQUFBVCxPQUFBO0FBR0EsTUFBTVUsZ0JBQWdCLEdBQUcsZUFBZTtBQUFDQyxPQUFBLENBQUFELGdCQUFBLEdBQUFBLGdCQUFBO0FBQ3pDLE1BQU1FLGNBQWMsR0FBRyxDQUFDLEdBQUdDLGFBQUU7QUFFN0IsTUFBTUMsbUJBQW1CLEdBQUcsSUFBSTtBQUNoQyxNQUFNQyxhQUFhLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFB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