{"version":3,"file":"base-service.js","names":["BaseServiceSocket","constructor","socketClient","_socketClient","_assignClientFailureHandlers","sourceStreams","evt","once","map","s","unpipe","close","destroyed","end","exports","BaseServicePlist","plistService","_plistService"],"sources":["../../lib/base-service.js"],"sourcesContent":["class BaseServiceSocket {\n  constructor (socketClient) {\n    this._socketClient = socketClient;\n  }\n\n  _assignClientFailureHandlers (...sourceStreams) {\n    for (const evt in ['close', 'end']) {\n      this._socketClient.once(evt,\n        () => sourceStreams.map((s) => s.unpipe(this._socketClient)));\n    }\n  }\n\n  /**\n   * Closes the underlying socket communicating with the phone\n   */\n  close () {\n    if (!this._socketClient.destroyed) {\n      this._socketClient.end();\n    }\n  }\n}\n\nclass BaseServicePlist {\n  constructor (plistService) {\n    this._plistService = plistService;\n  }\n\n  /**\n   * Closes the underlying socket communicating with the phone\n   */\n  close () {\n    this._plistService.close();\n  }\n}\n\n\nexport { BaseServiceSocket, BaseServicePlist };\n"],"mappings":";;;;;;;AAAA,MAAMA,iBAAiB,CAAC;EACtBC,WAAWA,CAAEC,YAAY,EAAE;IACzB,IAAI,CAACC,aAAa,GAAGD,YAAY;EACnC;EAEAE,4BAA4BA,CAAE,GAAGC,aAAa,EAAE;IAC9C,KAAK,MAAMC,GAAG,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,EAAE;MAClC,IAAI,CAACH,aAAa,CAACI,IAAI,CAACD,GAAG,EACzB,MAAMD,aAAa,CAACG,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACC,MAAM,CAAC,IAAI,CAACP,aAAa,CAAC,CAAC,CAAC;IACjE;EACF;EAKAQ,KAAKA,CAAA,EAAI;IACP,IAAI,CAAC,IAAI,CAACR,aAAa,CAACS,SAAS,EAAE;MACjC,IAAI,CAACT,aAAa,CAACU,GAAG,EAAE;IAC1B;EACF;AACF;AAACC,OAAA,CAAAd,iBAAA,GAAAA,iBAAA;AAED,MAAMe,gBAAgB,CAAC;EACrBd,WAAWA,CAAEe,YAAY,EAAE;IACzB,IAAI,CAACC,aAAa,GAAGD,YAAY;EACnC;EAKAL,KAAKA,CAAA,EAAI;IACP,IAAI,CAACM,aAAa,CAACN,KAAK,EAAE;EAC5B;AACF;AAACG,OAAA,CAAAC,gBAAA,GAAAA,gBAAA"}