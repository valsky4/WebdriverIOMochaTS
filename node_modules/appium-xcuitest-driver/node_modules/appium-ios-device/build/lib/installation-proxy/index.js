"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.InstallationProxyService = exports.INSTALLATION_PROXY_SERVICE_NAME = void 0;
require("source-map-support/register");
var _lodash = _interopRequireDefault(require("lodash"));
var _baseService = require("../base-service");
const INSTALLATION_PROXY_SERVICE_NAME = 'com.apple.mobile.installation_proxy';
exports.INSTALLATION_PROXY_SERVICE_NAME = INSTALLATION_PROXY_SERVICE_NAME;
class InstallationProxyService extends _baseService.BaseServicePlist {
  async installApplication(path, clientOptions = {}, timeout = 60000) {
    const request = {
      Command: 'Install',
      PackagePath: path,
      ClientOptions: clientOptions
    };
    this._plistService.sendPlist(request);
    return await this._waitMessageCompletion(timeout);
  }
  async upgradeApplication(path, clientOptions = {}, timeout = 60000) {
    const request = {
      Command: 'Upgrade',
      PackagePath: path,
      ClientOptions: clientOptions
    };
    this._plistService.sendPlist(request);
    return await this._waitMessageCompletion(timeout);
  }
  async listApplications(opts = {}) {
    const request = {
      Command: 'Browse',
      ClientOptions: {}
    };
    if (opts.applicationType) {
      request.ClientOptions.ApplicationType = opts.applicationType;
    }
    if (opts.returnAttributes) {
      request.ClientOptions.ReturnAttributes = opts.returnAttributes;
    }
    this._plistService.sendPlist(request);
    const messages = await this._waitMessageCompletion();
    return messages.reduce(function (acc, message) {
      if (!message.CurrentList) {
        return acc;
      }
      message.CurrentList.forEach(function (app) {
        acc[app.CFBundleIdentifier] = app;
      });
      return acc;
    }, {});
  }
  async lookupApplications(opts = {}) {
    const request = {
      Command: 'Lookup',
      ClientOptions: {}
    };
    if (opts.bundleIds) {
      request.ClientOptions.BundleIDs = _lodash.default.isString(opts.bundleIds) ? [opts.bundleIds] : opts.bundleIds;
    }
    if (opts.applicationType) {
      request.ClientOptions.ApplicationType = opts.applicationType;
    }
    if (opts.returnAttributes) {
      request.ClientOptions.ReturnAttributes = opts.returnAttributes;
    }
    this._plistService.sendPlist(request);
    const messages = await this._waitMessageCompletion();
    for (const message of messages) {
      if (message.LookupResult) {
        return message.LookupResult;
      }
    }
    throw new Error(`Could not find LookupResult in the response: Response: ${JSON.stringify(messages)}`);
  }
  async uninstallApplication(bundleId, timeout = 20000) {
    const request = {
      Command: 'Uninstall',
      ApplicationIdentifier: bundleId
    };
    this._plistService.sendPlist(request);
    return await this._waitMessageCompletion(timeout);
  }
  async _waitMessageCompletion(timeout) {
    let messages = [];
    for (let i = 0; i < Number.MAX_SAFE_INTEGER; i++) {
      const data = await this._plistService.receivePlist(timeout);
      messages.push(data);
      if (this._isFinished(data)) {
        return messages;
      }
    }
  }
  _isFinished(response) {
    if (response.Error) {
      throw new Error(`Unexpected data: ${JSON.stringify(response)}`);
    }
    if (!response.Status) {
      return false;
    }
    return response.Status === 'Complete';
  }
}
exports.InstallationProxyService = InstallationProxyService;
var _default = InstallationProxyService;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9kYXNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYmFzZVNlcnZpY2UiLCJJTlNUQUxMQVRJT05fUFJPWFlfU0VSVklDRV9OQU1FIiwiZXhwb3J0cyIsIkluc3RhbGxhdGlvblByb3h5U2VydmljZSIsIkJhc2VTZXJ2aWNlUGxpc3QiLCJpbnN0YWxsQXBwbGljYXRpb24iLCJwYXRoIiwiY2xpZW50T3B0aW9ucyIsInRpbWVvdXQiLCJyZXF1ZXN0IiwiQ29tbWFuZCIsIlBhY2thZ2VQYXRoIiwiQ2xpZW50T3B0aW9ucyIsIl9wbGlzdFNlcnZpY2UiLCJzZW5kUGxpc3QiLCJfd2FpdE1lc3NhZ2VDb21wbGV0aW9uIiwidXBncmFkZUFwcGxpY2F0aW9uIiwibGlzdEFwcGxpY2F0aW9ucyIsIm9wdHMiLCJhcHBsaWNhdGlvblR5cGUiLCJBcHBsaWNhdGlvblR5cGUiLCJyZXR1cm5BdHRyaWJ1dGVzIiwiUmV0dXJuQXR0cmlidXRlcyIsIm1lc3NhZ2VzIiwicmVkdWNlIiwiYWNjIiwibWVzc2FnZSIsIkN1cnJlbnRMaXN0IiwiZm9yRWFjaCIsImFwcCIsIkNGQnVuZGxlSWRlbnRpZmllciIsImxvb2t1cEFwcGxpY2F0aW9ucyIsImJ1bmRsZUlkcyIsIkJ1bmRsZUlEcyIsIl8iLCJpc1N0cmluZyIsIkxvb2t1cFJlc3VsdCIsIkVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsInVuaW5zdGFsbEFwcGxpY2F0aW9uIiwiYnVuZGxlSWQiLCJBcHBsaWNhdGlvbklkZW50aWZpZXIiLCJpIiwiTnVtYmVyIiwiTUFYX1NBRkVfSU5URUdFUiIsImRhdGEiLCJyZWNlaXZlUGxpc3QiLCJwdXNoIiwiX2lzRmluaXNoZWQiLCJyZXNwb25zZSIsIlN0YXR1cyIsIl9kZWZhdWx0IiwiZGVmYXVsdCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9pbnN0YWxsYXRpb24tcHJveHkvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IEJhc2VTZXJ2aWNlUGxpc3QgfSBmcm9tICcuLi9iYXNlLXNlcnZpY2UnO1xuXG4vKlxuICogaHR0cHM6Ly9naXRodWIuY29tL3Rtb3RoeTIwMDEzL2xpYmltb2JpbGVkZXZpY2UtbWFzdGVyL2Jsb2IvZWNkODliNDIwMjFjZjZmN2VmZTlhZDI3MWIzYmRkYzdkZDRiMjgxZS9zcmMvaW5zdGFsbGF0aW9uX3Byb3h5LmNcbiAqL1xuXG5jb25zdCBJTlNUQUxMQVRJT05fUFJPWFlfU0VSVklDRV9OQU1FID0gJ2NvbS5hcHBsZS5tb2JpbGUuaW5zdGFsbGF0aW9uX3Byb3h5JztcblxuY2xhc3MgSW5zdGFsbGF0aW9uUHJveHlTZXJ2aWNlIGV4dGVuZHMgQmFzZVNlcnZpY2VQbGlzdCB7XG4gIC8qKlxuICAgKiBJbnN0YWxsIHRoZSBhcHBsaWNhdGlvbiBvbiB0aGUgcmVsYXRpdmUgcGF0aCBvbiB0aGUgcGhvbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggd2hlcmUgdGhlIC5hcHAgYW5kIC5pcGEgaXMgbG9jYXRlZCBhdCBvbiB0aGUgcGhvbmVcbiAgICogQHBhcmFtIHtPYmplY3R9IGNsaWVudE9wdGlvbnMgVGhlIGV4dHJhIG9wdGlvbnMgdGhhdCB3YW50cyB0byBiZSBwYXNzZWQgdG8gdGhlIGluc3RhbGxkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0IFs2MDAwMF0gVGhlIHRpbWVvdXQgYmV0d2VlbiBtZXNzYWdlcyByZWNlaXZlZCBmcm9tIHRoZSBwaG9uZSBhcyBzdGF0dXMgdXBkYXRlc1xuICAgKi9cbiAgYXN5bmMgaW5zdGFsbEFwcGxpY2F0aW9uIChwYXRoLCBjbGllbnRPcHRpb25zID0ge30sIHRpbWVvdXQgPSA2MDAwMCkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICBDb21tYW5kOiAnSW5zdGFsbCcsXG4gICAgICBQYWNrYWdlUGF0aDogcGF0aCxcbiAgICAgIENsaWVudE9wdGlvbnM6IGNsaWVudE9wdGlvbnNcbiAgICB9O1xuXG4gICAgdGhpcy5fcGxpc3RTZXJ2aWNlLnNlbmRQbGlzdChyZXF1ZXN0KTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fd2FpdE1lc3NhZ2VDb21wbGV0aW9uKHRpbWVvdXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZ3JhZGVzIHRoZSBnaXZlbiBhcHBsaWNhdGlvbiBmcm9tIHRoZSByZWxhdGl2ZSBwYXRoIG9uIHRoZSBwaG9uZS5cbiAgICogSXQgaXMgcmVxdWlyZWQgdGhhdCBhIHByZXZpb3VzIHZlcnNpb24gb2YgdGhlIHNhbWUgYXBwIGlzIGFscmVhZHkgaW5zdGFsbGVkIGluIG9yZGVyXG4gICAqIHRvIGNhbGwgdGhpcyBBUEkuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFRoZSBwYXRoIHdoZXJlIHRoZSAuYXBwIGFuZCAuaXBhIGlzIGxvY2F0ZWQgYXQgb24gdGhlIHBob25lXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjbGllbnRPcHRpb25zIFRoZSBleHRyYSBvcHRpb25zIHRoYXQgd2FudHMgdG8gYmUgcGFzc2VkIHRvIHRoZSBpbnN0YWxsZFxuICAgKiBAcGFyYW0ge251bWJlcn0gdGltZW91dCBbNjAwMDBdIFRoZSB0aW1lb3V0IGJldHdlZW4gbWVzc2FnZXMgcmVjZWl2ZWQgZnJvbSB0aGUgcGhvbmUgYXMgc3RhdHVzIHVwZGF0ZXNcbiAgICovXG4gIGFzeW5jIHVwZ3JhZGVBcHBsaWNhdGlvbiAocGF0aCwgY2xpZW50T3B0aW9ucyA9IHt9LCB0aW1lb3V0ID0gNjAwMDApIHtcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgQ29tbWFuZDogJ1VwZ3JhZGUnLFxuICAgICAgUGFja2FnZVBhdGg6IHBhdGgsXG4gICAgICBDbGllbnRPcHRpb25zOiBjbGllbnRPcHRpb25zXG4gICAgfTtcblxuICAgIHRoaXMuX3BsaXN0U2VydmljZS5zZW5kUGxpc3QocmVxdWVzdCk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX3dhaXRNZXNzYWdlQ29tcGxldGlvbih0aW1lb3V0KTtcbiAgfVxuXG4gIC8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTGlzdEFwcGxpY2F0aW9uT3B0aW9uc1xuICpcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBhcHBsaWNhdGlvblR5cGUgb2YgdGhlIHdoaWNoIGdyb3VwIHlvdSB3YW50IHRvIGxpc3QuIFRoZXNlIGNhbiBiZSBVc2VyLCBTeXN0ZW0gb3IgbGVhdmUgaXQgZW1wdHkgZm9yIGJvdGhcbiAqIEBwcm9wZXJ0eSB7QXJyYXl9IHJldHVybkF0dHJpYnV0ZXMgdGhlIGZpZWxkcyB3aGljaCBzaG91bGQgYmUgZmlsdGVyZWQgYW5kIHJldHVybmVkIHRvIHRoZSBjbGllbnQuIExlYXZlIHRoaXMgcGFyYW1ldGVyIGVtcHR5IGlmIHlvdSBkb24ndCB3YW50IHRvIGZpbHRlclxuICovXG5cbiAgLyoqXG4gICAqIExpc3RzIGFwcGxpY2F0aW9ucyBhY2NvcmRpbmcgdG8gdGhlIG9wdHMgYW5kIHJldHVybnMgdGhlbSBhcyBhIG1hcFxuICAgKiBAcGFyYW0ge0xpc3RBcHBsaWNhdGlvbk9wdGlvbnN9IG9wdHMgdGhlIGxpc3Rpbmcgb3B0aW9ucyB0aGF0IHdhbnRzIHRvIGJlIHBhc3NlZFxuICAgKiBAcmV0dXJucyBBIG1hcCBvZiB0aGUgYXBwbGljYXRpb25zIHdoaWNoIHRoZSBrZXkgaXMgdGhlIGJ1bmRsZUlkXG4gICAqL1xuICBhc3luYyBsaXN0QXBwbGljYXRpb25zIChvcHRzID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgQ29tbWFuZDogJ0Jyb3dzZScsXG4gICAgICBDbGllbnRPcHRpb25zOiB7fVxuICAgIH07XG5cbiAgICBpZiAob3B0cy5hcHBsaWNhdGlvblR5cGUpIHtcbiAgICAgIHJlcXVlc3QuQ2xpZW50T3B0aW9ucy5BcHBsaWNhdGlvblR5cGUgPSBvcHRzLmFwcGxpY2F0aW9uVHlwZTtcbiAgICB9XG4gICAgaWYgKG9wdHMucmV0dXJuQXR0cmlidXRlcykge1xuICAgICAgcmVxdWVzdC5DbGllbnRPcHRpb25zLlJldHVybkF0dHJpYnV0ZXMgPSBvcHRzLnJldHVybkF0dHJpYnV0ZXM7XG4gICAgfVxuXG4gICAgdGhpcy5fcGxpc3RTZXJ2aWNlLnNlbmRQbGlzdChyZXF1ZXN0KTtcbiAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IHRoaXMuX3dhaXRNZXNzYWdlQ29tcGxldGlvbigpO1xuICAgIHJldHVybiBtZXNzYWdlcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbWVzc2FnZSkge1xuICAgICAgaWYgKCFtZXNzYWdlLkN1cnJlbnRMaXN0KSB7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9XG4gICAgICBtZXNzYWdlLkN1cnJlbnRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICBhY2NbYXBwLkNGQnVuZGxlSWRlbnRpZmllcl0gPSBhcHA7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICB9XG5cbiAgLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBMb29rdXBBcHBsaWNhdGlvbk9wdGlvbnNcbiAqXG4gKiBAcHJvcGVydHkge3N0cmluZ30gYXBwbGljYXRpb25UeXBlIG9mIHRoZSB3aGljaCBncm91cCB5b3Ugd2FudCB0byBsaXN0LiBUaGVzZSBjYW4gYmUgVXNlciwgU3lzdGVtIG9yIGxlYXZlIGl0IGVtcHR5IGZvciBib3RoXG4gKiBAcHJvcGVydHkge0FycmF5fSByZXR1cm5BdHRyaWJ1dGVzIHRoZSBmaWVsZHMgd2hpY2ggc2hvdWxkIGJlIGZpbHRlcmVkIGFuZCByZXR1cm5lZCB0byB0aGUgY2xpZW50LiBMZWF2ZSB0aGlzIHBhcmFtZXRlciBlbXB0eSBpZiB5b3UgZG9uJ3Qgd2FudCB0byBmaWx0ZXJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEFycmF5fSBidW5kbGVJZHMgQnVuZGxlIElkcyBvZiB0aGUgYXBwcyB0aGF0IHNob3VsZCBiZSBzZWFyY2hlZFxuICovXG5cbiAgLyoqXG4gICAqIExpc3RzIGFwcGxpY2F0aW9ucyBhY2NvcmRpbmcgdG8gdGhlIG9wdHMgYW5kIHJldHVybnMgdGhlbSBhcyBhIG1hcFxuICAgKiBAcGFyYW0ge0xvb2t1cEFwcGxpY2F0aW9uT3B0aW9uc30gb3B0cyB0aGUgbG9va3VwIG9wdGlvbnMgdGhhdCB3YW50cyB0byBiZSBwYXNzZWRcbiAgICogQHJldHVybnMgQSBtYXAgb2YgdGhlIGFwcGxpY2F0aW9ucyB3aGljaCB0aGUga2V5IGlzIHRoZSBidW5kbGVJZFxuICAgKi9cbiAgYXN5bmMgbG9va3VwQXBwbGljYXRpb25zIChvcHRzID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgQ29tbWFuZDogJ0xvb2t1cCcsXG4gICAgICBDbGllbnRPcHRpb25zOiB7fVxuICAgIH07XG4gICAgaWYgKG9wdHMuYnVuZGxlSWRzKSB7XG4gICAgICByZXF1ZXN0LkNsaWVudE9wdGlvbnMuQnVuZGxlSURzID0gXy5pc1N0cmluZyhvcHRzLmJ1bmRsZUlkcykgPyBbb3B0cy5idW5kbGVJZHNdIDogb3B0cy5idW5kbGVJZHM7XG4gICAgfVxuICAgIGlmIChvcHRzLmFwcGxpY2F0aW9uVHlwZSkge1xuICAgICAgcmVxdWVzdC5DbGllbnRPcHRpb25zLkFwcGxpY2F0aW9uVHlwZSA9IG9wdHMuYXBwbGljYXRpb25UeXBlO1xuICAgIH1cbiAgICBpZiAob3B0cy5yZXR1cm5BdHRyaWJ1dGVzKSB7XG4gICAgICByZXF1ZXN0LkNsaWVudE9wdGlvbnMuUmV0dXJuQXR0cmlidXRlcyA9IG9wdHMucmV0dXJuQXR0cmlidXRlcztcbiAgICB9XG5cbiAgICB0aGlzLl9wbGlzdFNlcnZpY2Uuc2VuZFBsaXN0KHJlcXVlc3QpO1xuICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgdGhpcy5fd2FpdE1lc3NhZ2VDb21wbGV0aW9uKCk7XG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKSB7XG4gICAgICBpZiAobWVzc2FnZS5Mb29rdXBSZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2UuTG9va3VwUmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIExvb2t1cFJlc3VsdCBpbiB0aGUgcmVzcG9uc2U6IFJlc3BvbnNlOiAke0pTT04uc3RyaW5naWZ5KG1lc3NhZ2VzKX1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbmluc3RhbGxzIGFuIGFwcGxpY2F0aW9uIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gYnVuZGxlSWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGJ1bmRsZUlkIG9mIHRoZSBhcHAgdGhhdCBuZWVkcyB0byBiZSBwYXNzZWQgZm9yIHVuaW5zdGFsbGF0aW9uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0IFRoZSB0aW1lb3V0IGJldHdlZW4gbWVzc2FnZXMgcmVjZWl2ZWQgZnJvbSB0aGUgcGhvbmUgYXMgc3RhdHVzIHVwZGF0ZXNcbiAgICovXG4gIGFzeW5jIHVuaW5zdGFsbEFwcGxpY2F0aW9uIChidW5kbGVJZCwgdGltZW91dCA9IDIwMDAwKSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgIENvbW1hbmQ6ICdVbmluc3RhbGwnLFxuICAgICAgQXBwbGljYXRpb25JZGVudGlmaWVyOiBidW5kbGVJZFxuICAgIH07XG5cbiAgICB0aGlzLl9wbGlzdFNlcnZpY2Uuc2VuZFBsaXN0KHJlcXVlc3QpO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl93YWl0TWVzc2FnZUNvbXBsZXRpb24odGltZW91dCk7XG4gIH1cblxuICBhc3luYyBfd2FpdE1lc3NhZ2VDb21wbGV0aW9uICh0aW1lb3V0KSB7XG4gICAgbGV0IG1lc3NhZ2VzID0gW107XG4gICAgLy8gSnVzdCBhZGRlZCBmb3Igc2FmZXR5LiBUaGlzIHNob3VsZG4ndCBoYXBwZW5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOyBpKyspIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLl9wbGlzdFNlcnZpY2UucmVjZWl2ZVBsaXN0KHRpbWVvdXQpO1xuICAgICAgbWVzc2FnZXMucHVzaChkYXRhKTtcbiAgICAgIGlmICh0aGlzLl9pc0ZpbmlzaGVkKGRhdGEpKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlcztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfaXNGaW5pc2hlZCAocmVzcG9uc2UpIHtcbiAgICBpZiAocmVzcG9uc2UuRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHJlc3BvbnNlKX1gKTtcbiAgICB9XG5cbiAgICBpZiAoIXJlc3BvbnNlLlN0YXR1cykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2UuU3RhdHVzID09PSAnQ29tcGxldGUnO1xuICB9XG59XG5cbmV4cG9ydCB7IEluc3RhbGxhdGlvblByb3h5U2VydmljZSwgSU5TVEFMTEFUSU9OX1BST1hZX1NFUlZJQ0VfTkFNRSB9O1xuZXhwb3J0IGRlZmF1bHQgSW5zdGFsbGF0aW9uUHJveHlTZXJ2aWNlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFlBQUEsR0FBQUQsT0FBQTtBQU1BLE1BQU1FLCtCQUErQixHQUFHLHFDQUFxQztBQUFDQyxPQUFBLENBQUFELCtCQUFBLEdBQUFBLCtCQUFBO0FBRTlFLE1BQU1FLHdCQUF3QixTQUFTQyw2QkFBZ0IsQ0FBQztFQU90RCxNQUFNQyxrQkFBa0JBLENBQUVDLElBQUksRUFBRUMsYUFBYSxHQUFHLENBQUMsQ0FBQyxFQUFFQyxPQUFPLEdBQUcsS0FBSyxFQUFFO0lBQ25FLE1BQU1DLE9BQU8sR0FBRztNQUNkQyxPQUFPLEVBQUUsU0FBUztNQUNsQkMsV0FBVyxFQUFFTCxJQUFJO01BQ2pCTSxhQUFhLEVBQUVMO0lBQ2pCLENBQUM7SUFFRCxJQUFJLENBQUNNLGFBQWEsQ0FBQ0MsU0FB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