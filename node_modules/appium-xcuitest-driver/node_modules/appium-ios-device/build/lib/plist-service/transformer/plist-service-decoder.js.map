{"version":3,"file":"plist-service-decoder.js","names":["_lodash","_interopRequireDefault","require","_stream","_support","HEADER_LENGTH","PlistServiceDecoder","Stream","Transform","constructor","objectMode","_transform","data","encoding","onData","_decode","payload","slice","length","_","isEmpty","object","plist","parsePlist","push","exports","_default","default"],"sources":["../../../../lib/plist-service/transformer/plist-service-decoder.js"],"sourcesContent":["import _ from 'lodash';\nimport Stream from 'stream';\nimport { plist } from '@appium/support';\n\nconst HEADER_LENGTH = 4;\n\nclass PlistServiceDecoder extends Stream.Transform {\n\n  constructor () {\n    super({ objectMode: true });\n  }\n\n  _transform (data, encoding, onData) {\n    this._decode(data);\n    onData();\n  }\n\n  _decode (data) {\n    const payload = data.slice(HEADER_LENGTH, data.length);\n    if (_.isEmpty(payload)) {\n      return;\n    }\n    const object = plist.parsePlist(payload);\n    if (!object) {\n      return;\n    }\n    this.push(object);\n  }\n}\n\nexport { PlistServiceDecoder };\nexport default PlistServiceDecoder;\n"],"mappings":";;;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,QAAA,GAAAF,OAAA;AAEA,MAAMG,aAAa,GAAG,CAAC;AAEvB,MAAMC,mBAAmB,SAASC,eAAM,CAACC,SAAS,CAAC;EAEjDC,WAAWA,CAAA,EAAI;IACb,KAAK,CAAC;MAAEC,UAAU,EAAE;IAAK,CAAC,CAAC;EAC7B;EAEAC,UAAUA,CAAEC,IAAI,EAAEC,QAAQ,EAAEC,MAAM,EAAE;IAClC,IAAI,CAACC,OAAO,CAACH,IAAI,CAAC;IAClBE,MAAM,EAAE;EACV;EAEAC,OAAOA,CAAEH,IAAI,EAAE;IACb,MAAMI,OAAO,GAAGJ,IAAI,CAACK,KAAK,CAACZ,aAAa,EAAEO,IAAI,CAACM,MAAM,CAAC;IACtD,IAAIC,eAAC,CAACC,OAAO,CAACJ,OAAO,CAAC,EAAE;MACtB;IACF;IACA,MAAMK,MAAM,GAAGC,cAAK,CAACC,UAAU,CAACP,OAAO,CAAC;IACxC,IAAI,CAACK,MAAM,EAAE;MACX;IACF;IACA,IAAI,CAACG,IAAI,CAACH,MAAM,CAAC;EACnB;AACF;AAACI,OAAA,CAAAnB,mBAAA,GAAAA,mBAAA;AAAA,IAAAoB,QAAA,GAGcpB,mBAAmB;AAAAmB,OAAA,CAAAE,OAAA,GAAAD,QAAA"}