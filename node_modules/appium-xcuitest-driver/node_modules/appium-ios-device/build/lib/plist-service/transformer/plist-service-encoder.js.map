{"version":3,"file":"plist-service-encoder.js","names":["_stream","_interopRequireDefault","require","_support","HEADER_LENGTH","PlistServiceEncoder","Stream","Transform","constructor","objectMode","_transform","data","encoding","onData","push","_encode","payloadBuffer","plist","createBinaryPlist","headerBuffer","Buffer","alloc","writeUInt32BE","length","concat","exports","_default","default"],"sources":["../../../../lib/plist-service/transformer/plist-service-encoder.js"],"sourcesContent":["import Stream from 'stream';\nimport { plist } from '@appium/support';\n\n\nconst HEADER_LENGTH = 4;\n\nclass PlistServiceEncoder extends Stream.Transform {\n  constructor () {\n    super({ objectMode: true });\n  }\n\n  _transform (data, encoding, onData) {\n    this.push(this._encode(data), 'buffer');\n    onData();\n  }\n\n  _encode (data) {\n    const payloadBuffer = plist.createBinaryPlist(data);\n    const headerBuffer = Buffer.alloc(HEADER_LENGTH);\n    headerBuffer.writeUInt32BE(payloadBuffer.length, 0);\n    return Buffer.concat([headerBuffer, payloadBuffer], headerBuffer.length + payloadBuffer.length);\n  }\n}\n\nexport { PlistServiceEncoder };\nexport default PlistServiceEncoder;\n"],"mappings":";;;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AAGA,MAAME,aAAa,GAAG,CAAC;AAEvB,MAAMC,mBAAmB,SAASC,eAAM,CAACC,SAAS,CAAC;EACjDC,WAAWA,CAAA,EAAI;IACb,KAAK,CAAC;MAAEC,UAAU,EAAE;IAAK,CAAC,CAAC;EAC7B;EAEAC,UAAUA,CAAEC,IAAI,EAAEC,QAAQ,EAAEC,MAAM,EAAE;IAClC,IAAI,CAACC,IAAI,CAAC,IAAI,CAACC,OAAO,CAACJ,IAAI,CAAC,EAAE,QAAQ,CAAC;IACvCE,MAAM,EAAE;EACV;EAEAE,OAAOA,CAAEJ,IAAI,EAAE;IACb,MAAMK,aAAa,GAAGC,cAAK,CAACC,iBAAiB,CAACP,IAAI,CAAC;IACnD,MAAMQ,YAAY,GAAGC,MAAM,CAACC,KAAK,CAACjB,aAAa,CAAC;IAChDe,YAAY,CAACG,aAAa,CAACN,aAAa,CAACO,MAAM,EAAE,CAAC,CAAC;IACnD,OAAOH,MAAM,CAACI,MAAM,CAAC,CAACL,YAAY,EAAEH,aAAa,CAAC,EAAEG,YAAY,CAACI,MAAM,GAAGP,aAAa,CAACO,MAAM,CAAC;EACjG;AACF;AAACE,OAAA,CAAApB,mBAAA,GAAAA,mBAAA;AAAA,IAAAqB,QAAA,GAGcrB,mBAAmB;AAAAoB,OAAA,CAAAE,OAAA,GAAAD,QAAA"}