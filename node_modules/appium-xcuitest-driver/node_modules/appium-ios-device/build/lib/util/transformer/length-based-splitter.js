"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.LengthBasedSplitter = void 0;
require("source-map-support/register");
var _stream = _interopRequireDefault(require("stream"));
var _logger = _interopRequireDefault(require("../../logger"));
class LengthBasedSplitter extends _stream.default.Transform {
  constructor(opts) {
    super();
    const {
      readableStream,
      littleEndian,
      maxFrameLength,
      lengthFieldOffset,
      lengthFieldLength,
      lengthAdjustment
    } = opts;
    this.readableStream = readableStream;
    this.littleEndian = littleEndian;
    this.maxFrameLength = maxFrameLength;
    this.lengthFieldOffset = lengthFieldOffset;
    this.lengthFieldLength = lengthFieldLength;
    this.lengthAdjustment = lengthAdjustment;
    this.isShutdown = false;
    this._frameBufferIndex = 0;
    this._frameBuffer = Buffer.allocUnsafeSlow(maxFrameLength);
  }
  _transform(data, encoding, onData) {
    for (let i = 0; i < data.length; i = this._decode(data, i)) {
      if (this.isShutdown) {
        return this._pushBack(i, data.length, data);
      }
    }
    onData();
  }
  _decode(data, pos) {
    let bufferMarker = pos;
    let bytesToRead = Math.max(this.lengthFieldOffset + this.lengthFieldLength - this._frameBufferIndex, 0);
    let nBytesRead = bytesToRead === 0 ? 0 : this._readBytes(data, bufferMarker, this._frameBuffer, this._frameBufferIndex, bytesToRead);
    bufferMarker += nBytesRead;
    this._frameBufferIndex += nBytesRead;
    if (this._frameBufferIndex < this.lengthFieldOffset) {
      return bufferMarker;
    }
    const messageLength = this._readLength(this._frameBuffer, this.lengthFieldOffset, this.littleEndian);
    if (messageLength > this.maxFrameLength) {
      throw new Error(`The frame is bigger than expected. Length: ${messageLength}, max: ${this.maxFrameLength}`);
    }
    const completeMessageLength = messageLength + this.lengthAdjustment + this.lengthFieldOffset;
    bytesToRead = completeMessageLength - this._frameBufferIndex;
    nBytesRead = bytesToRead === 0 ? 0 : this._readBytes(data, bufferMarker, this._frameBuffer, this._frameBufferIndex, bytesToRead);
    bufferMarker += nBytesRead;
    this._frameBufferIndex += nBytesRead;
    if (this._frameBufferIndex < completeMessageLength) {
      return bufferMarker;
    }
    const message = Buffer.allocUnsafe(this._frameBufferIndex);
    this._frameBuffer.copy(message, 0, 0, this._frameBufferIndex);
    this.push(message);
    this._resetBuffers();
    return bufferMarker;
  }
  _readBytes(src, srcIndex, target, targetIndex, nBytesToBeRead) {
    let availableBytes = Math.min(nBytesToBeRead, src.length - srcIndex);
    src.copy(target, targetIndex, srcIndex, srcIndex + availableBytes);
    return availableBytes;
  }
  _resetBuffers() {
    this._frameBufferIndex = 0;
  }
  _pushBack(start, end, data) {
    if (start > end) {
      _logger.default.error('More data was read than the buffer size. This should not happen');
    }
    if (start === end) {
      return;
    }
    const leftover = Buffer.allocUnsafe(end - start);
    data.copy(leftover, 0, start, end);
    process.nextTick(() => this.readableStream.unshift(leftover));
  }
  shutdown() {
    this.isShutdown = true;
  }
  _readLength(data, index, littleEndian) {
    switch (this.lengthFieldLength) {
      case 4:
        return littleEndian ? data.readUInt32LE(index) : data.readUInt32BE(index);
      case 8:
        return littleEndian ? data.readUInt32LE(index) : data.readUInt32BE(index + 4);
      default:
        throw new Error(`${this.lengthFieldLength} is not supported. Only 4 and 8 are supported at the moment`);
    }
  }
}
exports.LengthBasedSplitter = LengthBasedSplitter;
var _default = LengthBasedSplitter;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3RyZWFtIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbG9nZ2VyIiwiTGVuZ3RoQmFzZWRTcGxpdHRlciIsIlN0cmVhbSIsIlRyYW5zZm9ybSIsImNvbnN0cnVjdG9yIiwib3B0cyIsInJlYWRhYmxlU3RyZWFtIiwibGl0dGxlRW5kaWFuIiwibWF4RnJhbWVMZW5ndGgiLCJsZW5ndGhGaWVsZE9mZnNldCIsImxlbmd0aEZpZWxkTGVuZ3RoIiwibGVuZ3RoQWRqdXN0bWVudCIsImlzU2h1dGRvd24iLCJfZnJhbWVCdWZmZXJJbmRleCIsIl9mcmFtZUJ1ZmZlciIsIkJ1ZmZlciIsImFsbG9jVW5zYWZlU2xvdyIsIl90cmFuc2Zvcm0iLCJkYXRhIiwiZW5jb2RpbmciLCJvbkRhdGEiLCJpIiwibGVuZ3RoIiwiX2RlY29kZSIsIl9wdXNoQmFjayIsInBvcyIsImJ1ZmZlck1hcmtlciIsImJ5dGVzVG9SZWFkIiwiTWF0aCIsIm1heCIsIm5CeXRlc1JlYWQiLCJfcmVhZEJ5dGVzIiwibWVzc2FnZUxlbmd0aCIsIl9yZWFkTGVuZ3RoIiwiRXJyb3IiLCJjb21wbGV0ZU1lc3NhZ2VMZW5ndGgiLCJtZXNzYWdlIiwiYWxsb2NVbnNhZmUiLCJjb3B5IiwicHVzaCIsIl9yZXNldEJ1ZmZlcnMiLCJzcmMiLCJzcmNJbmRleCIsInRhcmdldCIsInRhcmdldEluZGV4IiwibkJ5dGVzVG9CZVJlYWQiLCJhdmFpbGFibGVCeXRlcyIsIm1pbiIsInN0YXJ0IiwiZW5kIiwibG9nIiwiZXJyb3IiLCJsZWZ0b3ZlciIsInByb2Nlc3MiLCJuZXh0VGljayIsInVuc2hpZnQiLCJzaHV0ZG93biIsImluZGV4IiwicmVhZFVJbnQzMkxFIiwicmVhZFVJbnQzMkJFIiwiZXhwb3J0cyIsIl9kZWZhdWx0IiwiZGVmYXVsdCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi91dGlsL3RyYW5zZm9ybWVyL2xlbmd0aC1iYXNlZC1zcGxpdHRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU3RyZWFtIGZyb20gJ3N0cmVhbSc7XG5pbXBvcnQgbG9nIGZyb20gJy4uLy4uL2xvZ2dlcic7XG5cbmNsYXNzIExlbmd0aEJhc2VkU3BsaXR0ZXIgZXh0ZW5kcyBTdHJlYW0uVHJhbnNmb3JtIHtcbiAgY29uc3RydWN0b3IgKG9wdHMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgY29uc3Qge1xuICAgICAgcmVhZGFibGVTdHJlYW0sXG4gICAgICBsaXR0bGVFbmRpYW4sXG4gICAgICBtYXhGcmFtZUxlbmd0aCxcbiAgICAgIGxlbmd0aEZpZWxkT2Zmc2V0LFxuICAgICAgbGVuZ3RoRmllbGRMZW5ndGgsXG4gICAgICBsZW5ndGhBZGp1c3RtZW50LFxuICAgIH0gPSBvcHRzO1xuXG4gICAgdGhpcy5yZWFkYWJsZVN0cmVhbSA9IHJlYWRhYmxlU3RyZWFtO1xuICAgIHRoaXMubGl0dGxlRW5kaWFuID0gbGl0dGxlRW5kaWFuO1xuICAgIHRoaXMubWF4RnJhbWVMZW5ndGggPSBtYXhGcmFtZUxlbmd0aDtcbiAgICB0aGlzLmxlbmd0aEZpZWxkT2Zmc2V0ID0gbGVuZ3RoRmllbGRPZmZzZXQ7XG4gICAgdGhpcy5sZW5ndGhGaWVsZExlbmd0aCA9IGxlbmd0aEZpZWxkTGVuZ3RoO1xuICAgIHRoaXMubGVuZ3RoQWRqdXN0bWVudCA9IGxlbmd0aEFkanVzdG1lbnQ7XG5cbiAgICB0aGlzLmlzU2h1dGRvd24gPSBmYWxzZTtcbiAgICB0aGlzLl9mcmFtZUJ1ZmZlckluZGV4ID0gMDtcbiAgICB0aGlzLl9mcmFtZUJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cobWF4RnJhbWVMZW5ndGgpO1xuICB9XG5cbiAgX3RyYW5zZm9ybSAoZGF0YSwgZW5jb2RpbmcsIG9uRGF0YSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkgPSB0aGlzLl9kZWNvZGUoZGF0YSwgaSkpIHtcbiAgICAgIGlmICh0aGlzLmlzU2h1dGRvd24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3B1c2hCYWNrKGksIGRhdGEubGVuZ3RoLCBkYXRhKTtcbiAgICAgIH1cbiAgICB9XG4gICAgb25EYXRhKCk7XG4gIH1cblxuICBfZGVjb2RlIChkYXRhLCBwb3MpIHtcbiAgICBsZXQgYnVmZmVyTWFya2VyID0gcG9zO1xuXG4gICAgbGV0IGJ5dGVzVG9SZWFkID0gTWF0aC5tYXgoKHRoaXMubGVuZ3RoRmllbGRPZmZzZXQgKyB0aGlzLmxlbmd0aEZpZWxkTGVuZ3RoKSAtIHRoaXMuX2ZyYW1lQnVmZmVySW5kZXgsIDApO1xuICAgIGxldCBuQnl0ZXNSZWFkID0gYnl0ZXNUb1JlYWQgPT09IDAgPyAwIDogdGhpcy5fcmVhZEJ5dGVzKGRhdGEsIGJ1ZmZlck1hcmtlciwgdGhpcy5fZnJhbWVCdWZmZXIsIHRoaXMuX2ZyYW1lQnVmZmVySW5kZXgsIGJ5dGVzVG9SZWFkKTtcbiAgICBidWZmZXJNYXJrZXIgKz0gbkJ5dGVzUmVhZDtcbiAgICB0aGlzLl9mcmFtZUJ1ZmZlckluZGV4ICs9IG5CeXRlc1JlYWQ7XG5cbiAgICBpZiAodGhpcy5fZnJhbWVCdWZmZXJJbmRleCA8IHRoaXMubGVuZ3RoRmllbGRPZmZzZXQpIHtcbiAgICAgIHJldHVybiBidWZmZXJNYXJrZXI7XG4gICAgfVxuXG4gICAgY29uc3QgbWVzc2FnZUxlbmd0aCA9IHRoaXMuX3JlYWRMZW5ndGgodGhpcy5fZnJhbWVCdWZmZXIsIHRoaXMubGVuZ3RoRmllbGRPZmZzZXQsIHRoaXMubGl0dGxlRW5kaWFuKTtcbiAgICBpZiAobWVzc2FnZUxlbmd0aCA+IHRoaXMubWF4RnJhbWVMZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIGZyYW1lIGlzIGJpZ2dlciB0aGFuIGV4cGVjdGVkLiBMZW5ndGg6ICR7bWVzc2FnZUxlbmd0aH0sIG1heDogJHt0aGlzLm1heEZyYW1lTGVuZ3RofWApO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbXBsZXRlTWVzc2FnZUxlbmd0aCA9IG1lc3NhZ2VMZW5ndGggKyB0aGlzLmxlbmd0aEFkanVzdG1lbnQgKyB0aGlzLmxlbmd0aEZpZWxkT2Zmc2V0O1xuXG4gICAgYnl0ZXNUb1JlYWQgPSBjb21wbGV0ZU1lc3NhZ2VMZW5ndGggLSB0aGlzLl9mcmFtZUJ1ZmZlckluZGV4O1xuICAgIG5CeXRlc1JlYWQgPSBieXRlc1RvUmVhZCA9PT0gMCA/IDAgOiB0aGlzLl9yZWFkQnl0ZXMoZGF0YSwgYnVmZmVyTWFya2VyLCB0aGlzLl9mcmFtZUJ1ZmZlciwgdGhpcy5fZnJhbWVCdWZmZXJJbmRleCwgYnl0ZXNUb1JlYWQpO1xuICAgIGJ1ZmZlck1hcmtlciArPSBuQnl0ZXNSZWFkO1xuICAgIHRoaXMuX2ZyYW1lQnVmZmVySW5kZXggKz0gbkJ5dGVzUmVhZDtcblxuICAgIGlmICh0aGlzLl9mcmFtZUJ1ZmZlckluZGV4IDwgY29tcGxldGVNZXNzYWdlTGVuZ3RoKSB7XG4gICAgICByZXR1cm4gYnVmZmVyTWFya2VyO1xuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBCdWZmZXIuYWxsb2NVbnNhZmUodGhpcy5fZnJhbWVCdWZmZXJJbmRleCk7XG4gICAgdGhpcy5fZnJhbWVCdWZmZXIuY29weShtZXNzYWdlLCAwLCAwLCB0aGlzLl9mcmFtZUJ1ZmZlckluZGV4KTtcblxuICAgIHRoaXMucHVzaChtZXNzYWdlKTtcbiAgICB0aGlzLl9yZXNldEJ1ZmZlcnMoKTtcbiAgICByZXR1cm4gYnVmZmVyTWFya2VyO1xuICB9XG5cbiAgX3JlYWRCeXRlcyAoc3JjLCBzcmNJbmRleCwgdGFyZ2V0LCB0YXJnZXRJbmRleCwgbkJ5dGVzVG9CZVJlYWQpIHtcbiAgICBsZXQgYXZhaWxhYmxlQnl0ZXMgPSBNYXRoLm1pbihuQnl0ZXNUb0JlUmVhZCwgc3JjLmxlbmd0aCAtIHNyY0luZGV4KTtcbiAgICBzcmMuY29weSh0YXJnZXQsIHRhcmdldEluZGV4LCBzcmNJbmRleCwgc3JjSW5kZXggKyBhdmFpbGFibGVCeXRlcyk7XG4gICAgcmV0dXJuIGF2YWlsYWJsZUJ5dGVzO1xuICB9XG4gIF9yZXNldEJ1ZmZlcnMgKCkge1xuICAgIHRoaXMuX2ZyYW1lQnVmZmVySW5kZXggPSAwO1xuICB9XG5cbiAgX3B1c2hCYWNrIChzdGFydCwgZW5kLCBkYXRhKSB7XG4gICAgaWYgKHN0YXJ0ID4gZW5kKSB7XG4gICAgICBsb2cuZXJyb3IoJ01vcmUgZGF0YSB3YXMgcmVhZCB0aGFuIHRoZSBidWZmZXIgc2l6ZS4gVGhpcyBzaG91bGQgbm90IGhhcHBlbicpO1xuICAgIH1cbiAgICBpZiAoc3RhcnQgPT09IGVuZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBsZWZ0b3ZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShlbmQgLSBzdGFydCk7XG4gICAgZGF0YS5jb3B5KGxlZnRvdmVyLCAwLCBzdGFydCwgZW5kKTtcbiAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHRoaXMucmVhZGFibGVTdHJlYW0udW5zaGlmdChsZWZ0b3ZlcikpO1xuICB9XG5cbiAgc2h1dGRvd24gKCkge1xuICAgIHRoaXMuaXNTaHV0ZG93biA9IHRydWU7XG4gIH1cblxuICBfcmVhZExlbmd0aCAoZGF0YSwgaW5kZXgsIGxpdHRsZUVuZGlhbikge1xuICAgIHN3aXRjaCAodGhpcy5sZW5ndGhGaWVsZExlbmd0aCkge1xuICAgICAgY2FzZSA0OlxuICAgICAgICByZXR1cm4gbGl0dGxlRW5kaWFuID8gZGF0YS5yZWFkVUludDMyTEUoaW5kZXgpIDogZGF0YS5yZWFkVUludDMyQkUoaW5kZXgpO1xuICAgICAgY2FzZSA4OlxuICAgICAgICByZXR1cm4gbGl0dGxlRW5kaWFuID8gZGF0YS5yZWFkVUludDMyTEUoaW5kZXgpIDogZGF0YS5yZWFkVUludDMyQkUoaW5kZXggKyA0KTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHt0aGlzLmxlbmd0aEZpZWxkTGVuZ3RofSBpcyBub3Qgc3VwcG9ydGVkLiBPbmx5IDQgYW5kIDggYXJlIHN1cHBvcnRlZCBhdCB0aGUgbW9tZW50YCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IExlbmd0aEJhc2VkU3BsaXR0ZXJ9O1xuZXhwb3J0IGRlZmF1bHQgTGVuZ3RoQmFzZWRTcGxpdHRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNRSxtQkFBbUIsU0FBU0MsZUFBTSxDQUFDQyxTQUFTLENBQUM7RUFDakRDLFdBQVdBLENBQUVDLElBQUksRUFBRTtJQUNqQixLQUFLLEVBQUU7SUFFUCxNQUFNO01BQ0pDLGNBQWM7TUFDZEMsWUFBWTtNQUNaQyxjQUFjO01BQ2RDLGlCQUFpQjtNQUNqQkMsaUJBQWlCO01BQ2pCQztJQUNGLENBQUMsR0FBR04sSUFBSTtJQUVSLElBQUksQ0FBQ0MsY0FBYyxHQUFHQSxjQUFjO0lBQ3BDLElBQUksQ0FBQ0MsWUFBWSxHQUFHQSxZQUFZO0lBQ2hDLElBQUksQ0FBQ0MsY0FBYyxHQUFHQSxjQUFjO0lBQ3BDLElBQUksQ0FBQ0MsaUJBQWlCLEdBQUdBLGlCQUFpQjtJQUMxQyxJQUFJLENBQUNDLGlCQUFpQixHQUFHQSxpQkFBaUI7SUFDMUMsSUFBSSxDQUFDQyxnQkFBZ0IsR0FBR0EsZ0JBQWdCO0lBRXhDLElBQUksQ0FBQ0MsVUFBVSxHQUFHLEtBQUs7SUFDdkIsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRyxDQUFDO0lBQzFCLElBQUksQ0FBQ0MsWUFBWSxHQUFHQyxNQUFNLENBQUNDLGVBQWUsQ0FBQ1IsY0FBYyxDQUFDO0VBQzVEO0VBRUFTLFVBQVVBLENBQUVDLElBQUksRUFBRUMsUUFBUSxFQUFFQyxNQUFNLEVBQUU7SUFDbEMsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdILElBQUksQ0FBQ0ksTUFBTSxFQUFFRCxDQUFDLEdBQUcsSUFBSSxDQUFDRSxPQUFPLENBQUNMLElBQUksRUFBRUcsQ0FBQyxDQUFDLEVBQUU7TUFDMUQsSUFBSSxJQUFJ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