"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.NSUserDefaults = void 0;
exports.generateDefaultsCommandArgs = generateDefaultsCommandArgs;
exports.toXmlArg = toXmlArg;
require("source-map-support/register");
var _lodash = _interopRequireDefault(require("lodash"));
var _xmldom = require("@xmldom/xmldom");
var _teen_process = require("teen_process");
var _bluebird = _interopRequireDefault(require("bluebird"));
var _logger = _interopRequireDefault(require("./logger"));
function toXmlArg(value, serialize = true) {
  let xmlDoc = null;
  if (_lodash.default.isPlainObject(value)) {
    xmlDoc = new _xmldom.DOMParser().parseFromString('<dict></dict>', 'text/xml');
    for (const [subKey, subValue] of _lodash.default.toPairs(value)) {
      const keyEl = xmlDoc.createElement('key');
      const keyTextEl = xmlDoc.createTextNode(subKey);
      keyEl.appendChild(keyTextEl);
      xmlDoc.documentElement.appendChild(keyEl);
      const subValueEl = xmlDoc.importNode(toXmlArg(subValue, false), true);
      xmlDoc.documentElement.appendChild(subValueEl);
    }
  } else if (_lodash.default.isArray(value)) {
    xmlDoc = new _xmldom.DOMParser().parseFromString('<array></array>', 'text/xml');
    for (const subValue of value) {
      const subValueEl = xmlDoc.importNode(toXmlArg(subValue, false), true);
      xmlDoc.documentElement.appendChild(subValueEl);
    }
  } else if (_lodash.default.isBoolean(value)) {
    xmlDoc = new _xmldom.DOMParser().parseFromString(value ? '<true/>' : '<false/>', 'text/xml');
  } else if (_lodash.default.isInteger(value)) {
    xmlDoc = new _xmldom.DOMParser().parseFromString(`<integer>${value}</integer>`, 'text/xml');
  } else if (_lodash.default.isNumber(value)) {
    xmlDoc = new _xmldom.DOMParser().parseFromString(`<real>${value}</real>`, 'text/xml');
  } else if (_lodash.default.isString(value)) {
    xmlDoc = new _xmldom.DOMParser().parseFromString(`<string></string>`, 'text/xml');
    const valueTextEl = xmlDoc.createTextNode(value);
    xmlDoc.documentElement.appendChild(valueTextEl);
  }
  if (!xmlDoc) {
    throw new TypeError(`The defaults value ${JSON.stringify(value)} cannot be written, ` + `because it is not known how to handle its type`);
  }
  return serialize ? new _xmldom.XMLSerializer().serializeToString(xmlDoc.documentElement) : xmlDoc.documentElement;
}
function generateDefaultsCommandArgs(valuesMap, replace = false) {
  const resultArgs = [];
  for (const [key, value] of _lodash.default.toPairs(valuesMap)) {
    try {
      if (!replace && _lodash.default.isPlainObject(value)) {
        const dictArgs = [key, '-dict-add'];
        for (const [subKey, subValue] of _lodash.default.toPairs(value)) {
          dictArgs.push(subKey, toXmlArg(subValue));
        }
        resultArgs.push(dictArgs);
      } else if (!replace && _lodash.default.isArray(value)) {
        const arrayArgs = [key, '-array-add'];
        for (const subValue of value) {
          arrayArgs.push(toXmlArg(subValue));
        }
        resultArgs.push(arrayArgs);
      } else {
        resultArgs.push([key, toXmlArg(value)]);
      }
    } catch (e) {
      if (e instanceof TypeError) {
        _logger.default.warn(e.message);
      } else {
        throw e;
      }
    }
  }
  return resultArgs;
}
class NSUserDefaults {
  constructor(plist) {
    this.plist = plist;
  }
  async asJson() {
    try {
      const {
        stdout
      } = await (0, _teen_process.exec)('plutil', ['-convert', 'json', '-o', '-', this.plist]);
      return JSON.parse(stdout);
    } catch (e) {
      throw new Error(`'${this.plist}' cannot be converted to JSON. Original error: ${e.stderr || e.message}`);
    }
  }
  async update(valuesMap) {
    if (!_lodash.default.isPlainObject(valuesMap)) {
      throw new TypeError(`plist values must be a map. '${valuesMap}' is given instead`);
    }
    if (_lodash.default.isEmpty(valuesMap)) {
      return;
    }
    const commandArgs = generateDefaultsCommandArgs(valuesMap);
    try {
      await _bluebird.default.all(commandArgs.map(args => (0, _teen_process.exec)('defaults', ['write', this.plist, ...args])));
    } catch (e) {
      throw new Error(`Could not write defaults into '${this.plist}'. Original error: ${e.stderr || e.message}`);
    }
  }
}
exports.NSUserDefaults = NSUserDefaults;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0b1htbEFyZyIsInZhbHVlIiwic2VyaWFsaXplIiwieG1sRG9jIiwiXyIsImlzUGxhaW5PYmplY3QiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJzdWJLZXkiLCJzdWJWYWx1ZSIsInRvUGFpcnMiLCJrZXlFbCIsImNyZWF0ZUVsZW1lbnQiLCJrZXlUZXh0RWwiLCJjcmVhdGVUZXh0Tm9kZSIsImFwcGVuZENoaWxkIiwiZG9jdW1lbnRFbGVtZW50Iiwic3ViVmFsdWVFbCIsImltcG9ydE5vZGUiLCJpc0FycmF5IiwiaXNCb29sZWFuIiwiaXNJbnRlZ2VyIiwiaXNOdW1iZXIiLCJpc1N0cmluZyIsInZhbHVlVGV4dEVsIiwiVHlwZUVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsImdlbmVyYXRlRGVmYXVsdHNDb21tYW5kQXJncyIsInZhbHVlc01hcCIsInJlcGxhY2UiLCJyZXN1bHRBcmdzIiwia2V5IiwiZGljdEFyZ3MiLCJwdXNoIiwiYXJyYXlBcmdzIiwiZSIsImxvZyIsIndhcm4iLCJtZXNzYWdlIiwiTlNVc2VyRGVmYXVsdHMiLCJjb25zdHJ1Y3RvciIsInBsaXN0IiwiYXNKc29uIiwic3Rkb3V0IiwiZXhlYyIsInBhcnNlIiwiRXJyb3IiLCJzdGRlcnIiLCJ1cGRhdGUiLCJpc0VtcHR5IiwiY29tbWFuZEFyZ3MiLCJCIiwiYWxsIiwibWFwIiwiYXJncyJdLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9kZWZhdWx0cy11dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgRE9NUGFyc2VyLCBYTUxTZXJpYWxpemVyIH0gZnJvbSAnQHhtbGRvbS94bWxkb20nO1xuaW1wb3J0IHsgZXhlYyB9IGZyb20gJ3RlZW5fcHJvY2Vzcyc7XG5pbXBvcnQgQiBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgbG9nIGZyb20gJy4vbG9nZ2VyJztcblxuLyoqXG4gKiBTZXJpYWxpemVzIHRoZSBnaXZlbiB2YWx1ZSB0byBwbGlzdC1jb21wYXRpYmxlXG4gKiBYTUwgcmVwcmVzZW50YXRpb24sIHdoaWNoIGlzIHJlYWR5IGZvciBmdXJ0aGVyIHVzYWdlXG4gKiB3aXRoIGBkZWZhdWx0c2AgY29tbWFuZCBsaW5lIHRvb2wgYXJndW1lbnRzXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gYmUgc2VyaWFsaXplZFxuICogQHBhcmFtIHtib29sZWFufSBzZXJpYWxpemUgW3RydWVdIFdoZXRoZXIgdG8gc2VyaWFsaXplIHRoZSByZXN1bHRpbmdcbiAqIFhNTCB0byBzdHJpbmcgb3IgdG8gcmV0dXJuIHJhdyBIVE1MRWxlbWVudCBpbnN0YW5jZVxuICogQHJldHVybnMge0hUTUxFbGVtZW50fHN0cmluZ30gRWl0aGVyIHN0cmluZyBvciByYXcgbm9kZSByZXByZXNlbnRhdGlvbiBvZlxuICogdGhlIGdpdmVuIHZhbHVlXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIGl0IGlzIG5vdCBrbm93biBob3cgdG8gc2VyaWFsaXplIHRoZSBnaXZlbiB2YWx1ZVxuICovXG5mdW5jdGlvbiB0b1htbEFyZyAodmFsdWUsIHNlcmlhbGl6ZSA9IHRydWUpIHtcbiAgbGV0IHhtbERvYyA9IG51bGw7XG5cbiAgaWYgKF8uaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICB4bWxEb2MgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKCc8ZGljdD48L2RpY3Q+JywgJ3RleHQveG1sJyk7XG4gICAgZm9yIChjb25zdCBbc3ViS2V5LCBzdWJWYWx1ZV0gb2YgXy50b1BhaXJzKHZhbHVlKSkge1xuICAgICAgY29uc3Qga2V5RWwgPSB4bWxEb2MuY3JlYXRlRWxlbWVudCgna2V5Jyk7XG4gICAgICBjb25zdCBrZXlUZXh0RWwgPSB4bWxEb2MuY3JlYXRlVGV4dE5vZGUoc3ViS2V5KTtcbiAgICAgIGtleUVsLmFwcGVuZENoaWxkKGtleVRleHRFbCk7XG4gICAgICB4bWxEb2MuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGtleUVsKTtcbiAgICAgIGNvbnN0IHN1YlZhbHVlRWwgPSB4bWxEb2MuaW1wb3J0Tm9kZSh0b1htbEFyZyhzdWJWYWx1ZSwgZmFsc2UpLCB0cnVlKTtcbiAgICAgIHhtbERvYy5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc3ViVmFsdWVFbCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKF8uaXNBcnJheSh2YWx1ZSkpIHtcbiAgICB4bWxEb2MgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKCc8YXJyYXk+PC9hcnJheT4nLCAndGV4dC94bWwnKTtcbiAgICBmb3IgKGNvbnN0IHN1YlZhbHVlIG9mIHZhbHVlKSB7XG4gICAgICBjb25zdCBzdWJWYWx1ZUVsID0geG1sRG9jLmltcG9ydE5vZGUodG9YbWxBcmcoc3ViVmFsdWUsIGZhbHNlKSwgdHJ1ZSk7XG4gICAgICB4bWxEb2MuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHN1YlZhbHVlRWwpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChfLmlzQm9vbGVhbih2YWx1ZSkpIHtcbiAgICB4bWxEb2MgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHZhbHVlID8gJzx0cnVlLz4nIDogJzxmYWxzZS8+JywgJ3RleHQveG1sJyk7XG4gIH0gZWxzZSBpZiAoXy5pc0ludGVnZXIodmFsdWUpKSB7XG4gICAgeG1sRG9jID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhgPGludGVnZXI+JHt2YWx1ZX08L2ludGVnZXI+YCwgJ3RleHQveG1sJyk7XG4gIH0gZWxzZSBpZiAoXy5pc051bWJlcih2YWx1ZSkpIHtcbiAgICB4bWxEb2MgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGA8cmVhbD4ke3ZhbHVlfTwvcmVhbD5gLCAndGV4dC94bWwnKTtcbiAgfSBlbHNlIGlmIChfLmlzU3RyaW5nKHZhbHVlKSkge1xuICAgIHhtbERvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoYDxzdHJpbmc+PC9zdHJpbmc+YCwgJ3RleHQveG1sJyk7XG4gICAgY29uc3QgdmFsdWVUZXh0RWwgPSB4bWxEb2MuY3JlYXRlVGV4dE5vZGUodmFsdWUpO1xuICAgIHhtbERvYy5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodmFsdWVUZXh0RWwpO1xuICB9XG5cbiAgaWYgKCF4bWxEb2MpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBUaGUgZGVmYXVsdHMgdmFsdWUgJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9IGNhbm5vdCBiZSB3cml0dGVuLCBgICtcbiAgICAgIGBiZWNhdXNlIGl0IGlzIG5vdCBrbm93biBob3cgdG8gaGFuZGxlIGl0cyB0eXBlYCk7XG4gIH1cblxuICByZXR1cm4gc2VyaWFsaXplXG4gICAgPyBuZXcgWE1MU2VyaWFsaXplcigpLnNlcmlhbGl6ZVRvU3RyaW5nKHhtbERvYy5kb2N1bWVudEVsZW1lbnQpXG4gICAgOiB4bWxEb2MuZG9jdW1lbnRFbGVtZW50O1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBjb21tYW5kIGxpbmUgYXJncyBmb3IgdGhlIGBkZWZhdWx0c2BcbiAqIGNvbW1hbmQgbGluZSB1dGlsaXR5IGJhc2VkIG9uIHRoZSBnaXZlbiBwcmVmZXJlbmNlIHZhbHVlcyBtYXBwaW5nLlxuICogU2VlIGh0dHBzOi8vc2hhZG93ZmlsZS5pbm9kZS5saW5rL2Jsb2cvMjAxOC8wNi9hZHZhbmNlZC1kZWZhdWx0czEtdXNhZ2UvXG4gKiBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZXNNYXAgUHJlZmVyZW5jZXMgbWFwcGluZ1xuICogQHBhcmFtIHtCb29sZWFufSByZXBsYWNlIFtmYWxzZV0gV2hldGhlciB0byBnZW5lcmF0ZSBhcmd1bWVudHMgdGhhdCByZXBsYWNlXG4gKiBjb21wbGV4IHR5cGVkIHZhbHVlcyBsaWtlIGFycmF5cyBvciBkaWN0aW9uYXJpZXMgaW4gdGhlIGN1cnJlbnQgcGxpc3Qgb3JcbiAqIHVwZGF0ZSB0aGVtICh0aGUgZGVmYXVsdCBzZXR0aW5ncylcbiAqIEByZXR1cm5zIHtBcnJheTxBcnJheTxzdHJpbmc+Pn0gRWFjaCBpdGVtIGluIHRoZSBhcnJheVxuICogaXMgdGhlIGBkZWZhdWx0cyB3cml0ZSA8cGxpc3Q+YCBjb21tYW5kIHN1ZmZpeFxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZURlZmF1bHRzQ29tbWFuZEFyZ3MgKHZhbHVlc01hcCwgcmVwbGFjZSA9IGZhbHNlKSB7XG4gIGNvbnN0IHJlc3VsdEFyZ3MgPSBbXTtcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgXy50b1BhaXJzKHZhbHVlc01hcCkpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFyZXBsYWNlICYmIF8uaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgZGljdEFyZ3MgPSBba2V5LCAnLWRpY3QtYWRkJ107XG4gICAgICAgIGZvciAoY29uc3QgW3N1YktleSwgc3ViVmFsdWVdIG9mIF8udG9QYWlycyh2YWx1ZSkpIHtcbiAgICAgICAgICBkaWN0QXJncy5wdXNoKHN1YktleSwgdG9YbWxBcmcoc3ViVmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRBcmdzLnB1c2goZGljdEFyZ3MpO1xuICAgICAgfSBlbHNlIGlmICghcmVwbGFjZSAmJiBfLmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IGFycmF5QXJncyA9IFtrZXksICctYXJyYXktYWRkJ107XG4gICAgICAgIGZvciAoY29uc3Qgc3ViVmFsdWUgb2YgdmFsdWUpIHtcbiAgICAgICAgICBhcnJheUFyZ3MucHVzaCh0b1htbEFyZyhzdWJWYWx1ZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdEFyZ3MucHVzaChhcnJheUFyZ3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0QXJncy5wdXNoKFtrZXksIHRvWG1sQXJnKHZhbHVlKV0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlIGluc3RhbmNlb2YgVHlwZUVycm9yKSB7XG4gICAgICAgIGxvZy53YXJuKGUubWVzc2FnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0QXJncztcbn1cblxuXG5jbGFzcyBOU1VzZXJEZWZhdWx0cyB7XG4gIGNvbnN0cnVjdG9yIChwbGlzdCkge1xuICAgIHRoaXMucGxpc3QgPSBwbGlzdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgY29udGVudCBvZiB0aGUgZ2l2ZW4gcGxpc3QgZmlsZSB1c2luZyBwbHV0aWwgY29tbWFuZCBsaW5lIHRvb2xcbiAgICogYW5kIHNlcmlhbGl6ZXMgaXQgdG8gYSBKU09OIHJlcHJlc2VudGF0aW9uXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBzZXJpYWxpemVkIHBsaXN0IGNvbnRlbnRcbiAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZXJlIHdhcyBhbiBlcnJvciBkdXJpbmcgc2VyaWFsaXphdGlvblxuICAgKi9cbiAgYXN5bmMgYXNKc29uICgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qge3N0ZG91dH0gPSBhd2FpdCBleGVjKCdwbHV0aWwnLCBbJy1jb252ZXJ0JywgJ2pzb24nLCAnLW8nLCAnLScsIHRoaXMucGxpc3RdKTtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHN0ZG91dCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGAnJHt0aGlzLnBsaXN0fScgY2Fubm90IGJlIGNvbnZlcnRlZCB0byBKU09OLiBPcmlnaW5hbCBlcnJvcjogJHtlLnN0ZGVyciB8fCBlLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNvbnRlbnQgb2YgdGhlIGdpdmVuIHBsaXN0IGZpbGUuXG4gICAqIElmIHRoZSBwbGlzdCBkb2VzIG5vdCBleGlzdCB5ZXQgdGhlbiBpdCBpcyBnb2luZyB0byBiZSBjcmVhdGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzTWFwIE1hcHBpbmcgb2YgcHJlZmVyZW5jZSB2YWx1ZXMgdG8gdXBkYXRlLlxuICAgKiBJZiBhbnkgb2YgaXRlbSB2YWx1ZXMgYXJlIG9mIGRpY3Rpb25hcnkgdHlwZSB0aGVuIG9ubHkgdGhlIGZpcnN0IGxldmVsIGRpY3Rpb25hcnkgZ2V0c1xuICAgKiB1cGRhdGVkLiBFdmVyeXRoaW5nIGJlbG93IHRoaXMgbGV2ZWwgd2lsbCBiZSByZXBsYWNlZC4gVGhpcyBpcyB0aGUga25vd24gbGltaXRhdGlvblxuICAgKiBvZiB0aGUgYGRlZmF1bHRzYCBjb21tYW5kIGxpbmUgdG9vbC4gQSB3b3JrYXJvdW5kIGZvciBpdCB3b3VsZCBiZSB0byByZWFkIHRoZSBjdXJyZW50XG4gICAqIHByZWZlcmVuY2VzIG1hcHBpbmcgZmlyc3QgYW5kIG1lcmdlIGl0IHdpdGggdGhpcyB2YWx1ZS5cbiAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSB1cGRhdGluZyB0aGUgcGxpc3RcbiAgICovXG4gIGFzeW5jIHVwZGF0ZSAodmFsdWVzTWFwKSB7XG4gICAgaWYgKCFfLmlzUGxhaW5PYmplY3QodmFsdWVzTWFwKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgcGxpc3QgdmFsdWVzIG11c3QgYmUgYSBtYXAuICcke3ZhbHVlc01hcH0nIGlzIGdpdmVuIGluc3RlYWRgKTtcbiAgICB9XG4gICAgaWYgKF8uaXNFbXB0eSh2YWx1ZXNNYXApKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY29tbWFuZEFyZ3MgPSBnZW5lcmF0ZURlZmF1bHRzQ29tbWFuZEFyZ3ModmFsdWVzTWFwKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgQi5hbGwoY29tbWFuZEFyZ3MubWFwKChhcmdzKSA9PiBleGVjKCdkZWZhdWx0cycsIFsnd3JpdGUnLCB0aGlzLnBsaXN0LCAuLi5hcmdzXSkpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCB3cml0ZSBkZWZhdWx0cyBpbnRvICcke3RoaXMucGxpc3R9Jy4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5zdGRlcnIgfHwgZS5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxufVxuXG5cbmV4cG9ydCB7XG4gIE5TVXNlckRlZmF1bHRzLFxuICB0b1htbEFyZywgZ2VuZXJhdGVEZWZhdWx0c0NvbW1hbmRBcmdzLFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFjQSxTQUFTQSxRQUFRLENBQUVDLEtBQUssRUFBRUMsU0FBUyxHQUFHLElBQUksRUFBRTtFQUMxQyxJQUFJQyxNQUFNLEdBQUcsSUFBSTtFQUVqQixJQUFJQyxlQUFDLENBQUNDLGFBQWEsQ0FBQ0osS0FBSyxDQUFDLEVBQUU7SUFDMUJFLE1BQU0sR0FBRyxJQUFJRyxpQkFBUyxFQUFFLENBQUNDLGVBQWUsQ0FBQyxlQUFlLEVBQUUsVUFBVSxDQUFDO0lBQ3JFLEtBQUssTUFBTSxDQUFDQyxNQUFNLEVBQUVDLFFBQVEsQ0FBQyxJQUFJTCxlQUFDLENBQUNNLE9BQU8sQ0FBQ1QsS0FBSyxDQUFDLEVBQUU7TUFDakQsTUFBTVUsS0FBSyxHQUFHUixNQUFNLENBQUNTLGFBQWEsQ0FBQyxLQUFLLENBQUM7TUFDekMsTUFBTUMsU0FBUyxHQUFHVixNQUFNLENBQUNXLGNBQWMsQ0FBQ04sTUFBTSxDQUFDO01BQy9DRyxLQUFLLENBQUNJLFdBQVcsQ0FBQ0YsU0FBUyxDQUFDO01BQzVCVixNQUFNLENBQUNhLGVBQWUsQ0FBQ0QsV0FBVyxDQUFDSixLQUFLLENBQUM7TUFDekMsTUFBTU0sVUFBVSxHQUFHZCxNQUFNLENBQUNlLFVBQVUsQ0FBQ2xCLFFBQVEsQ0FBQ1MsUUFBUSxFQUFFLEtBQUssQ0FBQyxFQUFFLElBQUksQ0FBQztN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