"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
require("source-map-support/register");
var _rimraf = _interopRequireDefault(require("rimraf"));
var _uuid = require("uuid");
var _path = _interopRequireDefault(require("path"));
var _os = _interopRequireDefault(require("os"));
var _promises = _interopRequireDefault(require("fs/promises"));
const commands = {};
commands.pushNotification = async function pushNotification(payload) {
  const dstPath = _path.default.resolve(_os.default.tmpdir(), `${(0, _uuid.v4)()}.json`);
  try {
    await _promises.default.writeFile(dstPath, JSON.stringify(payload), 'utf8');
    await this.exec('push', {
      args: [this.requireUdid('push'), dstPath]
    });
  } finally {
    await (0, _rimraf.default)(dstPath);
  }
};
var _default = commands;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmltcmFmIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXVpZCIsIl9wYXRoIiwiX29zIiwiX3Byb21pc2VzIiwiY29tbWFuZHMiLCJwdXNoTm90aWZpY2F0aW9uIiwicGF5bG9hZCIsImRzdFBhdGgiLCJwYXRoIiwicmVzb2x2ZSIsIm9zIiwidG1wZGlyIiwidXVpZFY0IiwiZnMiLCJ3cml0ZUZpbGUiLCJKU09OIiwic3RyaW5naWZ5IiwiZXhlYyIsImFyZ3MiLCJyZXF1aXJlVWRpZCIsInJpbXJhZiIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvc3ViY29tbWFuZHMvcHVzaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcmltcmFmIGZyb20gJ3JpbXJhZic7XG5pbXBvcnQgeyB2NCBhcyB1dWlkVjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IG9zIGZyb20gJ29zJztcbmltcG9ydCBmcyBmcm9tICdmcy9wcm9taXNlcyc7XG5cbmNvbnN0IGNvbW1hbmRzID0ge307XG5cbi8qKlxuICogU2VuZCBhIHNpbXVsYXRlZCBwdXNoIG5vdGlmaWNhdGlvblxuICpcbiAqIEBzaW5jZSBYY29kZSAxMS40IFNES1xuICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgLSBUaGUgb2JqZWN0IHRoYXQgZGVzY3JpYmVzIEFwcGxlIHB1c2ggbm90aWZpY2F0aW9uIGNvbnRlbnQuXG4gKiBJdCBtdXN0IGNvbnRhaW4gYSB0b3AtbGV2ZWwgXCJTaW11bGF0b3IgVGFyZ2V0IEJ1bmRsZVwiIGtleSB3aXRoIGEgc3RyaW5nIHZhbHVlIG1hdGNoaW5nXG4gKiB0aGUgdGFyZ2V0IGFwcGxpY2F0aW9u4oCYcyBidW5kbGUgaWRlbnRpZmllciBhbmQgXCJhcHNcIiBrZXkgd2l0aCB2YWxpZCBBcHBsZSBQdXNoIE5vdGlmaWNhdGlvbiB2YWx1ZXMuXG4gKiBGb3IgZXhhbXBsZTpcbiAqIHtcbiAqICAgXCJTaW11bGF0b3IgVGFyZ2V0IEJ1bmRsZVwiOiBcImNvbS5hcHBsZS5QcmVmZXJlbmNlc1wiLFxuICogICBcImFwc1wiOiB7XG4gKiAgICAgXCJhbGVydFwiOiBcIlRoaXMgaXMgYSBzaW11bGF0ZWQgbm90aWZpY2F0aW9uIVwiLFxuICogICAgIFwiYmFkZ2VcIjogMyxcbiAqICAgICBcInNvdW5kXCI6IFwiZGVmYXVsdFwiXG4gKiAgIH1cbiAqIH1cbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB0aGUgY3VycmVudCBTREsgdmVyc2lvbiBkb2VzIG5vdCBzdXBwb3J0IHRoZSBjb21tYW5kXG4gKiBvciB0aGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgcHVzaGluZyB0aGUgbm90aWZpY2F0aW9uXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGB1ZGlkYCBpbnN0YW5jZSBwcm9wZXJ0eSBpcyB1bnNldFxuICovXG5jb21tYW5kcy5wdXNoTm90aWZpY2F0aW9uID0gYXN5bmMgZnVuY3Rpb24gcHVzaE5vdGlmaWNhdGlvbiAocGF5bG9hZCkge1xuICBjb25zdCBkc3RQYXRoID0gcGF0aC5yZXNvbHZlKG9zLnRtcGRpcigpLCBgJHt1dWlkVjQoKX0uanNvbmApO1xuICB0cnkge1xuICAgIGF3YWl0IGZzLndyaXRlRmlsZShkc3RQYXRoLCBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSwgJ3V0ZjgnKTtcbiAgICBhd2FpdCB0aGlzLmV4ZWMoJ3B1c2gnLCB7XG4gICAgICBhcmdzOiBbdGhpcy5yZXF1aXJlVWRpZCgncHVzaCcpLCBkc3RQYXRoXSxcbiAgICB9KTtcbiAgfSBmaW5hbGx5IHtcbiAgICBhd2FpdCByaW1yYWYoZHN0UGF0aCk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvbW1hbmRzO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLEtBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLEdBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLFNBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU1LLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFzQm5CQSxRQUFRLENBQUNDLGdCQUFnQixHQUFHLGVBQWVBLGdCQUFnQkEsQ0FBRUMsT0FBTyxFQUFFO0VBQ3BFLE1BQU1DLE9BQU8sR0FBR0MsYUFBSSxDQUFDQyxPQUFPLENBQUNDLFdBQUUsQ0FBQ0MsTUFBTSxFQUFFLEVBQUcsR0FBRSxJQUFBQyxRQUFNLEdBQUcsT0FBTSxDQUFDO0VBQzdELElBQUk7SUFDRixNQUFNQyxpQkFBRSxDQUFDQyxTQUFTLENBQUNQLE9BQU8sRUFBRVEsSUFBSSxDQUFDQyxTQUFTLENBQUNWLE9BQU8sQ0FBQyxFQUFFLE1BQU0sQ0FBQztJQUM1RCxNQUFNLElBQUksQ0FBQ1csSUFBSSxDQUFDLE1BQU0sRUFBRTtNQUN0QkMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDQyxXQUFXLENBQUMsTUFBTSxDQUFDLEVBQUVaLE9BQU87SUFDMUMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxTQUFTO0lBQ1IsTUFBTSxJQUFBYSxlQUFNLEVBQUNiLE9BQU8sQ0FBQztFQUN2QjtBQUNGLENBQUM7QUFBQyxJQUFBYyxRQUFBLEdBRWFqQixRQUFRO0FBQUFrQixPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQSJ9